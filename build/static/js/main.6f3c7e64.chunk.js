(this["webpackJsonpproject-yellow-ghost"]=this["webpackJsonpproject-yellow-ghost"]||[]).push([[0],{108:function(e,s,t){},211:function(e,s,t){},45:function(e,s,t){},508:function(e,s,t){"use strict";t.r(s);var i=t(5),c=t.n(i),n=t(28),a=t.n(n),r=t(152),l=t(153),d=t(67),o=t(164),j=t(163),u=t(154),h=t(157),m=t.n(h),b=t(158),_=t(18),O=(t(207),t(511),t(209),t(510),t(509),t(512),_.a.initializeApp({apiKey:"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE",authDomain:"ghost-f8b34.firebaseapp.com",projectId:"ghost-f8b34",storageBucket:"ghost-f8b34.appspot.com",messagingSenderId:"838623299070",appId:"1:838623299070:web:b73429fee525b7c01cacaf",measurementId:"G-85ZG5FVKQ4"}).firestore()),g=_.a.auth(),x=_.a.storage(),f=new _.a.auth.GoogleAuthProvider,v=(t(211),t(45),t(7)),p=t(2);function N(e){var s=Object(i.useState)(!1),t=Object(v.a)(s,2),c=t[0],n=t[1],a=O.collection("users").doc(e.user_email);return Object(p.jsxs)("li",{className:"add-friends-content",children:[Object(p.jsxs)("div",{className:"add-box-1",children:[Object(p.jsx)("img",{className:"message-avatar",src:e.friend_pic,alt:"Avatar"}),Object(p.jsxs)("ul",{className:"message-info",children:[Object(p.jsx)("h3",{children:e.friend_name}),Object(p.jsx)("p",{children:e.friend_username})]})]}),Object(p.jsx)("div",{className:"add-box-2",children:c?Object(p.jsx)("p",{className:"removed",children:Object(p.jsx)("b",{children:"Removed!"})}):Object(p.jsx)("button",{onClick:function(){"Guest@project-yellow-ghost.com"!=e.friend_username&&(e.friends_list.splice(e.friends_list.indexOf(e.friend_username),1),a.update({friends:e.friends_list})),n(!0)},children:Object(p.jsx)("b",{children:"Remove"})})})]})}function k(e){var s=Object(i.useState)(!1),t=Object(v.a)(s,2),c=t[0],n=t[1];O.collection("users").doc(e.user_email);return Object(p.jsxs)("li",{className:"add-friends-content",children:[Object(p.jsxs)("div",{className:"add-box-1",children:[Object(p.jsx)("img",{className:"message-avatar",src:e.friend_pic,alt:"Avatar"}),Object(p.jsxs)("ul",{className:"message-info",children:[Object(p.jsx)("h3",{children:e.friend_name}),Object(p.jsx)("p",{children:e.friend_username})]})]}),Object(p.jsx)("div",{className:"add-box-2",children:c?Object(p.jsx)("button",{className:"selected",onClick:function(){n(!1),e.send_list.splice(e.send_list.indexOf(e.friend_username),1),console.log(e.send_list)}}):Object(p.jsx)("button",{className:"unselected",onClick:function(){n(!0),e.send_list.push(e.friend_username),console.log(e.send_list)}})})]})}function y(e){var s=Object(i.useState)(!1),t=Object(v.a)(s,2),c=t[0],n=t[1],a=O.collection("users").doc(e.user_email);return Object(p.jsxs)("li",{className:"add-friends-content",children:[Object(p.jsxs)("div",{className:"add-box-1",children:[Object(p.jsx)("img",{className:"message-avatar",src:e.stranger_pic,alt:"Avatar"}),Object(p.jsxs)("ul",{className:"message-info",children:[Object(p.jsx)("h3",{children:e.stranger_name}),Object(p.jsx)("p",{children:e.stranger_username})]})]}),Object(p.jsx)("div",{className:"add-box-2",children:c?Object(p.jsx)("p",{className:"added",children:Object(p.jsx)("b",{children:"Added!"})}):Object(p.jsx)("button",{onClick:function(){"Guest@project-yellow-ghost.com"!=e.friend_username&&(e.friends_list.push(e.stranger_username),a.update({friends:e.friends_list})),n(!0)},children:Object(p.jsx)("b",{children:"Add"})})})]})}function w(e){return Object(p.jsxs)("li",{className:"add-friends-content",children:[Object(p.jsxs)("div",{className:"add-box-1",children:[Object(p.jsx)("img",{className:"message-avatar",src:e.stranger_pic,alt:"Avatar"}),Object(p.jsxs)("ul",{className:"message-info",children:[Object(p.jsx)("h3",{children:e.stranger_name}),Object(p.jsx)("p",{children:e.stranger_username})]})]}),Object(p.jsx)("div",{className:"add-box-2"})]})}function S(e){var s=Object(i.useState)(!1),t=Object(v.a)(s,2),c=t[0],n=t[1];return Object(p.jsxs)(p.Fragment,{children:[c?null:Object(p.jsxs)("div",{className:"navbar",children:[Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"Guest"==e.user_name?Object(p.jsx)("a",{onClick:e.login,children:"Sign In"}):Object(p.jsx)("img",{className:"profile-pic",src:e.user_pic,onClick:e.logout,alt:"Profile Picture"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"Search"})})]})}),Object(p.jsx)("div",{className:"nav-box-2",children:Object(p.jsx)("h1",{children:"Chat"})}),Object(p.jsx)("div",{className:"nav-box-3",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),n(!0)},children:"Add Friend"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"New Chat"})})]})})]}),c&&null!=e.user_strangers_dict&&null!=e.user_friends_dict&&null!=e.everyone_dict?Object(p.jsxs)("div",{className:"add-friends",children:[Object(p.jsxs)("div",{className:"add-navbar",children:[Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),n(!1)},children:Object(p.jsx)("b",{children:"Close"})})})})}),Object(p.jsx)("div",{className:"nav-box-2",children:Object(p.jsx)("h1",{children:"Add Friends"})}),Object(p.jsx)("div",{className:"nav-box-3",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:Object(p.jsx)("b",{children:". . ."})})})})})]}),Object(p.jsxs)("div",{className:"add-body",children:[Object(p.jsx)("div",{className:"search-bar",children:Object(p.jsx)("input",{type:"search",placeholder:"Find Friends"})}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Quick Add (",e.user_strangers_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_strangers_dict.map((function(s){return Object(p.jsx)(y,{stranger_pic:s.photoURL,stranger_name:s.name,stranger_username:s.email,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Friends (",e.user_friends_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_friends_dict.map((function(s){return Object(p.jsx)(N,{friend_pic:s.photoURL,friend_name:s.name,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Everyone (",e.everyone_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.everyone_dict.map((function(e){return Object(p.jsx)(w,{stranger_pic:e.photoURL,stranger_name:e.name,stranger_username:e.email})}))}),Object(p.jsx)("div",{className:"add-footer"})]})]}):null]})}var C=t(162);function R(e){var s=Object(i.useState)("Received"),t=Object(v.a)(s,2),c=t[0],n=t[1],a=Object(i.useState)(0),r=Object(v.a)(a,2),l=r[0],d=r[1],o=Object(i.useState)([]),j=Object(v.a)(o,2),u=(j[0],j[1],function(){O.collection("posts").doc(e.user_email).collection("Received").orderBy("timeStamp","desc").onSnapshot((function(s){for(var t=0;t<s.docs.length&&s.docs[t].data().email!=e.sender_email;)t+=1;t<s.docs.length&&s.docs[t].data().email==e.sender_email?(n("New Snap"),null!=s.docs[t].data().timeStamp&&d(s.docs[t].data().timeStamp.toDate().toUTCString())):n("Received")}))}),h=Object(p.jsx)("p",{children:c}),m=Object(p.jsx)("div",{className:"message-received"});"New Snap"===c?(m=Object(p.jsx)("div",{className:"message-new"}),h=Object(p.jsx)("p",{className:"red",children:Object(p.jsx)("b",{children:c})})):"Received"===c?m=Object(p.jsx)("div",{className:"message-received"}):"Sent"===c?m=Object(p.jsx)("div",{className:"message-sent"}):"Opened"===c&&(m=Object(p.jsx)("div",{className:"message-opened"}));var b=Object(i.useState)(null),_=Object(v.a)(b,2),g=_[0],f=_[1],N=Object(i.useState)(null),k=Object(v.a)(N,2),y=k[0],w=k[1];return Object(i.useEffect)((function(){u()})),Object(p.jsx)(p.Fragment,{children:g?Object(p.jsx)("div",{className:"image-background",onClick:function(){f(null),O.collection("posts").doc(e.user_email).collection("Received").doc(y).delete().then((function(){console.log("Document deleted")})).catch((function(e){console.log("Error removing document: ",e)})),u();var s=O.collection("posts").doc(e.sender_email).collection("Sent").doc(y);s.get().then((function(t){if(1==t.data().to.length)s.delete().then((function(){console.log("sender document deleted, everyone saw the pic")})).catch((function(e){console.log("Could not delete sender's document")})),x.ref("posts/".concat(y)).delete().then((function(e){console.log("Deleted from storage: ",y)})).catch((function(e){console.log("TRIED DELETING: ",y)})),O.collection("posts").doc(y).delete().then((function(){console.log("Deleted from firestore")})).catch((function(e){console.error("Error removing document: ",e)}));else{var i=t.data().to;i.splice(i.indexOf(e.user_email),1),s.update({to:i}).then((function(){console.log("Updated sender's list")})).catch((function(e){console.log("could not update list: ",e)}))}}))},children:Object(p.jsx)("img",{id:"image",className:"image-preview",src:g})}):Object(p.jsxs)("li",{className:"message-content",onClick:function(){console.log("opening snap",e.user_email),O.collection("posts").doc(e.user_email).collection("Received").orderBy("timeStamp","desc").get().then((function(s){for(var t=0;t<s.docs.length&&s.docs[t].data().email!=e.sender_email;)t+=1;t<s.docs.length&&s.docs[t].data().email==e.sender_email?null!=s.docs[t].data()&&(f(s.docs[t].data().imageURL),w(s.docs[t].data().id)):n("Received")}))},children:[Object(p.jsx)("img",{className:"message-avatar",src:e.profile_url,alt:"Avatar"}),Object(p.jsxs)("ul",{className:"message-info",children:[Object(p.jsx)("h3",{children:e.sender_name}),Object(p.jsxs)("div",{className:"message-sub-info",children:[m,h,0!=l?Object(p.jsx)("p",{children:Object(p.jsx)(C.a,{date:l,locale:"en-US"})}):null,e.streak_num>0?Object(p.jsxs)("p",{children:[e.streak_num,e.streak_emoji]}):null]})]})]})})}var F=function(e){return Object(p.jsxs)("div",{className:"messages-screen",children:[Object(p.jsx)(S,{user_email:e.user_email,user_name:e.user_name,user_pic:e.user_pic,login:e.login,logout:e.logout,user_friends_dict:e.user_friends_dict,user_strangers_dict:e.user_strangers_dict,everyone_dict:e.everyone_dict,get_friends_list:e.get_friends_list,get_all_users:e.get_all_users,friends_list:e.friends_list,logged_in:e.logged_in}),Object(p.jsxs)("ul",{className:"messages-list",children:[e.logged_in?null:Object(p.jsx)("li",{className:"welcome-statement",children:"Welcome to Project Yellow Ghost, a web app version of SnapChat. This was a project developed by Jonathan Wang and this was his final project for school. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if you want to start using this product. Happy Snapping!"}),e.user_friends_dict.map((function(s){return Object(p.jsx)(R,{sender_email:s.email,profile_url:s.photoURL,sender_name:s.name,user_email:e.user_email,streak_emoji:e.streak_emoji,logged_in:e.logged_in})}))]})]})},U=t(159),A=t.n(U),L=t(515);t(108);function G(e){var s=Object(i.useState)(!1),t=Object(v.a)(s,2),c=t[0],n=t[1];return Object(p.jsxs)(p.Fragment,{children:[c?null:Object(p.jsxs)("div",{className:"webcam-navbar",children:[Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:"Guest"==e.user_name?Object(p.jsx)("a",{onClick:e.login,children:"Sign In"}):Object(p.jsx)("img",{className:"profile-pic",src:e.user_pic,onClick:e.logout,alt:"Profile Picture"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"Search"})})]})}),Object(p.jsx)("div",{className:"nav-box-3",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),n(!0)},children:"Add Friend"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"New Chat"})})]})})]}),c&&null!=e.user_strangers_dict&&null!=e.user_friends_dict&&null!=e.everyone_dict?Object(p.jsxs)("div",{className:"add-friends",children:[Object(p.jsxs)("div",{className:"add-navbar",children:[Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),n(!1)},children:Object(p.jsx)("b",{children:"Close"})})})})}),Object(p.jsx)("div",{className:"nav-box-2",children:Object(p.jsx)("h1",{children:"Add Friends"})}),Object(p.jsx)("div",{className:"nav-box-3",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:Object(p.jsx)("b",{children:". . ."})})})})})]}),Object(p.jsxs)("div",{className:"add-body",children:[Object(p.jsx)("div",{className:"search-bar",children:Object(p.jsx)("input",{type:"search",placeholder:"Find Friends"})}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Quick Add (",e.user_strangers_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_strangers_dict.map((function(s){return Object(p.jsx)(y,{stranger_pic:s.photoURL,stranger_name:s.name,stranger_username:s.email,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Friends (",e.user_friends_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_friends_dict.map((function(s){return Object(p.jsx)(N,{friend_pic:s.photoURL,friend_name:s.name,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Everyone (",e.everyone_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.everyone_dict.map((function(e){return Object(p.jsx)(w,{stranger_pic:e.photoURL,stranger_name:e.name,stranger_username:e.email})}))}),Object(p.jsx)("div",{className:"add-footer"})]})]}):null]})}function E(e){var s=Object(i.useState)([]),t=Object(v.a)(s,2),n=t[0],a=t[1],r=Object(i.useState)(null),l=Object(v.a)(r,2),d=l[0],o=l[1],j=Object(i.useState)("user"),u=Object(v.a)(j,2),h=u[0],m=(u[1],Object(i.useState)("camera")),b=Object(v.a)(m,2),g=b[0],f=b[1],S=c.a.useRef(null),C=Object(i.useState)(16/9),R=Object(v.a)(C,2),F=(R[0],R[1]),U=Object(i.useState)(!1),E=Object(v.a)(U,2),D=E[0],I=E[1],q=function(){o(null),f("camera");var e=_.a.auth().currentUser,s=Object(L.a)(),t=e.email,i=e.displayName,c=n;x.ref("posts/".concat(s)).putString(d,"data_url").on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){x.ref("posts").child(s).getDownloadURL().then((function(e){c.forEach((function(c){O.collection("posts").doc(c).collection("Received").doc(s).set({imageURL:e,id:s,email:t,name:i,avatarURL:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png",read:!1,timeStamp:_.a.firestore.FieldValue.serverTimestamp()}),console.log("Photo Sent")}))})),O.collection("posts").doc(t).collection("Sent").doc(s).set({id:s,email:t,timeStamp:_.a.firestore.FieldValue.serverTimestamp(),to:c})})),a([])},P=c.a.useCallback((function(){var e=S.current.getScreenshot();o(e),f("captured")}),[S]);return Object(i.useEffect)((function(){e.mobile?F(9/16):F(16/9)})),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"webcam-screen",children:[Object(p.jsx)(A.a,{id:"imageElement",className:"image-desktop",ref:S,audio:!1,mirrored:!0,forceScreenshotSourceSize:!1,screenshotFormat:"image/png",screenshotQuality:1,videoConstraints:{facingMode:h}}),"camera"===g?Object(p.jsxs)("div",{className:"webcam-overlay",children:[Object(p.jsx)(G,{user_email:e.user_email,user_name:e.user_name,user_pic:e.user_pic,login:e.login,logout:e.logout,user_friends_dict:e.user_friends_dict,user_strangers_dict:e.user_strangers_dict,everyone_dict:e.everyone_dict,get_friends_list:e.get_friends_list,get_all_users:e.get_all_users,friends_list:e.friends_list,logged_in:e.logged_in}),Object(p.jsx)("div",{className:"webcam-footer",children:Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"Memories"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:P,children:"Capture"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"Filters"})})]})})})]}):null,"captured"===g&&d?Object(p.jsxs)("div",{className:"captured-overlay",children:[Object(p.jsx)("div",{className:"image-preview",children:Object(p.jsx)("img",{id:"imageElement",className:"image-desktop",src:d})}),Object(p.jsxs)("div",{className:"buttons-overlay",children:[Object(p.jsxs)("div",{className:"captured-header",children:[Object(p.jsx)("div",{className:"header-left",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"send",onClick:function(){o(null),f("camera")},children:"Close"})})})}),Object(p.jsx)("div",{className:"header-right",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:"Text"})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:"Draw"})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:"Crop"})}),Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:"Time"})})]})})]}),Object(p.jsxs)("div",{className:"captured-footer",children:[Object(p.jsx)("div",{className:"footer-left",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("button",{children:"Save"})})})}),Object(p.jsx)("div",{className:"footer-right",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("button",{className:"capture",onClick:function(){f("send_to")},children:"Send to"})})})})]})]})]}):null,"send_to"===g&&d?Object(p.jsxs)(p.Fragment,{children:[D?null:Object(p.jsxs)("div",{className:"send_to-overlay",children:[Object(p.jsx)("div",{className:"send_to-header",children:Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)("button",{onClick:function(){f("captured")},children:"Go Back"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:"Search"})}),Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),I(!0)},children:"Add Friend"})})]})}),Object(p.jsxs)("div",{className:"send-list",children:[Object(p.jsx)("div",{className:"stories-header",children:Object(p.jsx)("h3",{children:"Stories"})}),Object(p.jsx)("ul",{className:"add-list list-container",children:Object(p.jsx)("li",{children:"My Story"})}),Object(p.jsx)("div",{className:"stories-header",children:Object(p.jsx)("h3",{children:"Best Friends"})}),Object(p.jsx)("ul",{className:"add-list list-container"}),Object(p.jsx)("div",{className:"stories-header",children:Object(p.jsx)("h3",{children:"Recents"})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_friends_dict.map((function(s){return Object(p.jsx)(k,{send_list:n,friend_pic:s.photoURL,friend_name:s.name,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))})]}),Object(p.jsx)("div",{classname:"send_to-footer",children:(n.length,Object(p.jsx)("button",{onClick:q,children:"Send"}))})]}),D&&null!=e.user_strangers_dict&&null!=e.user_friends_dict&&null!=e.everyone_dict?Object(p.jsxs)("div",{className:"add-friends",children:[Object(p.jsxs)("div",{className:"add-navbar",children:[Object(p.jsx)("div",{className:"nav-box-1",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{onClick:function(){e.get_friends_list(),I(!1)},children:Object(p.jsx)("b",{children:"Close"})})})})}),Object(p.jsx)("div",{className:"nav-box-2",children:Object(p.jsx)("h1",{children:"Add Friends"})}),Object(p.jsx)("div",{className:"nav-box-3",children:Object(p.jsx)("ul",{children:Object(p.jsx)("li",{children:Object(p.jsx)("a",{children:Object(p.jsx)("b",{children:". . ."})})})})})]}),Object(p.jsxs)("div",{className:"add-body",children:[Object(p.jsx)("div",{className:"search-bar",children:Object(p.jsx)("input",{type:"search",placeholder:"Find Friends"})}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Quick Add (",e.user_strangers_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_strangers_dict.map((function(s){return Object(p.jsx)(y,{stranger_pic:s.photoURL,stranger_name:s.name,stranger_username:s.email,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Friends (",e.user_friends_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.user_friends_dict.map((function(s){return Object(p.jsx)(N,{friend_pic:s.photoURL,friend_name:s.name,friend_username:s.email,friends_list:e.friends_list,user_email:e.user_email,get_friends_list:e.get_friends_list})}))}),Object(p.jsx)("div",{className:"add-title-navbar",children:Object(p.jsxs)("h3",{className:"quick-add",children:["Everyone (",e.everyone_dict.length,")"]})}),Object(p.jsx)("ul",{className:"add-list list-container",children:e.everyone_dict.map((function(e){return Object(p.jsx)(w,{stranger_pic:e.photoURL,stranger_name:e.name,stranger_username:e.email})}))}),Object(p.jsx)("div",{className:"add-footer"})]})]}):null]}):null]})})}t(213);var D=Object(b.bindKeyboard)(m.a),I="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png",q={email:"Guest@project-yellow-ghost.com",name:"Guest",photoURL:I,streak_emoji:"\ud83d\udd25",imgs_sent:0,imgs_received:0,friends:["Guest@project-yellow-ghost.com"]},P=function(e){Object(o.a)(t,e);var s=Object(j.a)(t);function t(e){var i;return Object(r.a)(this,t),(i=s.call(this,e)).set_device=function(){i.state.width<i.state.height?i.setState({mobile:!0}):i.setState({mobile:!1})},i.update=function(){i.setState({width:window.innerWidth,height:window.innerHeight},i.set_device())},i.login=function(){g.signInWithPopup(f).then((function(e){i.setState({logged_in:!0,user_name:e.user.displayName,user_email:e.user.email,user_pic:e.user.photoURL,user_friends:[e.user.email]},i.get_friends_list)})).catch((function(e){return console.log(e.message)}))},i.logout=function(){_.a.auth().signOut(),i.setState({logged_in:!1,streak_emoji:"\ud83d\udd25",user_name:"Guest",user_email:"Guest",user_friends_dict:[q],user_strangers_dict:[q],everyone_dict:[q],user_pic:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png"})},i.check_user=function(){_.a.auth().onAuthStateChanged(function(e){e&&this.setState({user_name:e.displayName,user_email:e.email,user_pic:e.photoURL,logged_in:!0},this.get_friends_list)}.bind(Object(d.a)(i)))},i.get_friends_list=function(){"Guest"!=i.state.user_email&&O.collection("users").doc(i.state.user_email).get().then((function(e){e.exists?i.setState({user_friends:e.data().friends,imgs_sent:e.data().imgs_sent,imgs_received:e.data().imgs_received,streak_emoji:e.data().streak_emoji},i.get_all_users):(O.collection("users").doc(i.state.user_email).set({email:i.state.user_email,name:i.state.user_name,photoURL:i.state.user_pic,streak_emoji:i.state.streak_emoji,imgs_sent:0,imgs_received:0,friends:[i.state.user_email]}).catch((function(e){console.log("Couldn't write user to DB, error: ",e)})),i.get_all_users())})).catch((function(e){console.log("Error getting document:",e)}))},i.get_all_users=function(){var e=[],s=[],t=[],c=0,n=0,a=0;O.collection("users").get().then((function(r){for(var l=0;l<r.docs.length;l++)i.state.user_friends.includes(r.docs[l].data().email)?(e[c]=r.docs[l].data(),c+=1):(s[n]=r.docs[l].data(),n+=1),t[a]=r.docs[l].data(),a+=1;i.setState({user_friends_dict:e,user_strangers_dict:s,everyone_dict:t})}))},i.state={index:0,height:window.innerHeight,width:window.innerWidth,mobile:!1,logged_in:!1,user_friends_dict:[q],user_strangers_dict:[q],everyone_dict:[q],user_email:"Guest",user_name:"Guest",user_pic:I,streak_emoji:"\ud83d\udd25",imgs_sent:0,imgs_received:0,user_friends:["Guest@mail"]},window.addEventListener("resize",i.update),i}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.check_user(),this.set_device()}},{key:"render",value:function(){return Object(p.jsxs)(D,{enableMouseEvents:!0,style:Object.assign({width:this.state.width,height:this.state.height,position:"absolute",top:"0%",left:"0%"}),children:[Object(p.jsxs)("div",{style:Object.assign({backgroundColor:"white",minHeight:"100vh",width:"100%"}),children:[Object(p.jsx)(u.a,{children:Object(p.jsx)("meta",{name:"viewport",content:"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),Object(p.jsx)(F,{user_email:this.state.user_email,user_name:this.state.user_name,user_pic:this.state.user_pic,user_friends_dict:this.state.user_friends_dict,user_strangers_dict:this.state.user_strangers_dict,everyone_dict:this.state.everyone_dict,logged_in:this.state.logged_in,login:this.login.bind(this),logout:this.logout.bind(this),get_friends_list:this.get_friends_list.bind(this),get_all_users:this.get_all_users.bind(this),friends_list:this.state.user_friends,streak_emoji:this.state.streak_emoji})]}),Object(p.jsx)("div",{style:Object.assign({backgroundColor:"Plum"}),children:Object(p.jsx)(E,{height:this.state.height,width:this.state.width,mobile:this.state.mobile,user_email:this.state.user_email,user_name:this.state.user_name,user_pic:this.state.user_pic,user_friends_dict:this.state.user_friends_dict,user_strangers_dict:this.state.user_strangers_dict,everyone_dict:this.state.everyone_dict,logged_in:this.state.logged_in,login:this.login.bind(this),logout:this.logout.bind(this),get_friends_list:this.get_friends_list.bind(this),get_all_users:this.get_all_users.bind(this),friends_list:this.state.user_friends})})]})}}]),t}(c.a.Component);a.a.render(Object(p.jsx)(P,{}),document.getElementById("root"))}},[[508,1,2]]]);
//# sourceMappingURL=main.6f3c7e64.chunk.js.map