{"version":3,"sources":["Firebase.js","Message.js","Messages.js","images/sent-vid-icon.png","images/black-checkmark.png","Camera.js","Navbar.js","Footer.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","provider","GoogleAuthProvider","Message","props","useState","img","setImg","sent","setSent","opened","setOpened","imgid","setimgid","icon_class","friend","status","console","log","className","onClick","showNavbar","showFooter","length","ref","delete","catch","error","collection","doc","newSent","newOpened","update","splice","indexOf","email","push","delete_photo","src","tempimg","get","then","data","time","Date","toLocaleString","sender_doc","k","sender_dict","pic","friends","user_doc","receiver_dict","date","streak_emoji","Messages","loggedIn","Object","keys","sort","map","key","Camera","screen","setScreen","sendList","setSendList","webcamRef","React","useRef","capture","useCallback","current","getScreenshot","disable_swiping","handle_send_list","e","arr","forEach","element","send_pic","time_sent","newDict","total_sent","id","uuid","user","putString","on","snapshot","getDownloadURL","url","set","sender","time_stamp","image_url","receiver_doc","list","includes","friends_dict","created","name","pending","profile_pic_url","total_received","pending_dict","audio","mirrored","forceScreenshotSourceSize","screenshotFormat","screenshotQuality","videoConstraints","facingMode","faceMode","type","Receiver","selected","changeToIndex","added","setAdded","newArr","checkmark","alt","NavBar","showProfileScreen","setShowProfileScreen","showAddFriendScreen","setShowAddFriendScreen","showLogin","setShowLogin","showSearch","setShowSearch","showTitle","setShowTitle","showAddFriend","setShowAddFriend","showNewChat","setShowNewChat","showMore","setShowMore","showClose","setShowClose","showFlipCam","setShowFlipCam","navTitle","setNavTitle","resetNav","index","useEffect","login","ProfileModal","received","logout","AddFriend","strangers","everyone","edit_friends","style","backgroundColor","Friend","Stranger","Everyone","Footer","BindKeyboardSwipeableViews","bindKeyboard","SwipeableViews","default_pic","App","set_device","state","width","height","setState","orientation","window","innerWidth","innerHeight","handleChangeIndex","check_user","onAuthStateChanged","this","displayName","photoURL","check_user_on_firebase","bind","exists","start_snapshot","c","streak","streak_ref","last_time_stamp","snaps","onSnapshot","update_people_list","alert","end_snapshot","f","docs","action","value","dict","new_friend_entry","signInWithPopup","result","signOut","addEventListener","setDisabledSwiping","disabled","enableMouseEvents","onChangeIndex","assign","position","top","left","minHeight","Helmet","content","Component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.90fdb8d3.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';        // for authentication\nimport 'firebase/storage';     // for storage\nimport 'firebase/database';    // for realtime database\nimport 'firebase/firestore';   // for cloud firestore\nimport 'firebase/messaging';   // for cloud messaging\nimport 'firebase/functions';   // for cloud functions\n\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE\",\n  authDomain: \"ghost-f8b34.firebaseapp.com\",\n  projectId: \"ghost-f8b34\",\n  storageBucket: \"ghost-f8b34.appspot.com\",\n  messagingSenderId: \"838623299070\",\n  appId: \"1:838623299070:web:b73429fee525b7c01cacaf\",\n  measurementId: \"G-85ZG5FVKQ4\"\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\nconst storage = firebase.storage();\n// Google auth as a provider for this app, the popup\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport { db, auth, storage, provider };","import React, { Component, useState, useEffect } from 'react';\nimport {auth, storage, db} from './Firebase.js';\nimport TimeAgo from 'react-timeago';\nimport firebase from 'firebase/app';\nimport './Messages.css';\n\n/*\n * Function - Message(sender_name)\n * @sender_name: Name of person who sent the image\n * Return: Loaded images requested from Firebase\n * \n * Description:\n * A request (/post/current_user/) is sent to Firebase to get current_user's received images.\n*/\n\nexport default function Message(props) {\n\tconst [img, setImg] = useState(null);\n\tconst [sent, setSent] = useState([]);\n\tconst [opened, setOpened] = useState([]);\n\tconst [imgid, setimgid] = useState([]);\n\t\n\n\tconst open = () => {\n\t\t// Gets the latest snap\n\t\tvar tempimg = props.friend[\"snaps\"][props.friend[\"snaps\"].length - 1];\n\t\tprops.showNavbar(false)\n    props.showFooter(false)\n\t\tsetimgid(tempimg)\n\t\tdb.collection(\"Photos\").doc(tempimg).get().then((doc) => {\n\t\t\tsetImg(doc.data()[\"image_url\"]);\n\t\t\tsetSent(doc.data()[\"sent\"]);\n\t\t\tsetOpened(doc.data()[\"opened\"]);\n\t\t})\n\t\t\n\n\t\t// Update Sender's doc\n\t\tconst time = new Date().toLocaleString();\n\t\tvar sender_doc = db.collection(\"Users\").doc(props.k);\n\t\tsender_doc.get().then((doc) => {\n\t\t\tvar sender_dict = doc.data();\n\t\t\tsender_dict[\"friends\"][props.email][\"last_time_stamp\"] = time;\n\t\t\tsender_dict[\"friends\"][props.email][\"profile_pic_url\"] = props.pic;\n\t\t\tsender_dict[\"friends\"][props.email][\"status\"] = \"opened\";\n\t\t\tsender_doc.update({\n\t\t\t\tfriends: sender_dict[\"friends\"],\n\t\t\t})\n\t\t})\n\t\t// Update the User's (Receiver) doc\n\t\tvar user_doc = db.collection(\"Users\").doc(props.email);\n\t\tuser_doc.get().then((doc) => {\n\t\t\tvar receiver_dict = doc.data();\n\t\t\treceiver_dict[\"friends\"][props.k][\"last_time_stamp\"] = time;\n\n\t\t\tif (receiver_dict[\"friends\"][props.k][\"snaps\"].length <= 1) {\n\t\t\t\treceiver_dict[\"friends\"][props.k][\"status\"] = \"received\";\n\t\t\t} else {\n\t\t\t\treceiver_dict[\"friends\"][props.k][\"status\"] = \"new\";\n\t\t\t}\n\t\t\treceiver_dict[\"friends\"][props.k][\"snaps\"]\n\t\t\t.splice(receiver_dict[\"friends\"][props.k][\"snaps\"].length - 1, 1);\n\t\t\tuser_doc.update({\n\t\t\t\tfriends: receiver_dict[\"friends\"],\n\t\t\t})\n\t\t})\n\n\t}\n\tconst delete_photo = () => {\n\t\t// Delete photo if it is the last user to see it\n\t\tif (sent.length <= 1) {\n\t\t\t// Delete from storage\n\t\t\tstorage.ref(`posts/${imgid}`).delete().catch((error) => {});\n\t\t\t// Delete from Firestore\n\t\t\tdb.collection(\"Photos\").doc(imgid).delete().catch((error) => {});\n\t\t\tconsole.log(\"deleted\")\n\t\t} else {\n\t\t\t// Update Photo document\n\t\t\tvar newSent = sent;\n\t\t\tvar newOpened = opened;\n\t\t\tdb.collection(\"Photos\").doc(imgid).update({\n\t\t\t\tsent: newSent.splice(newSent.indexOf(props.email), 1),\n\t\t\t\topened: newOpened.push(props.email),\n\t\t\t})\n\t\t\tconsole.log(\"updated\")\n\t\t}\n\t}\n\tconst close = () => {\n\t\tprops.showNavbar(true)\n    props.showFooter(true)\n\t\tsetImg(null);\n\t\tdelete_photo();\n\t}\n\n\tvar icon_class = \"message-\" + props.friend[\"status\"]\n\tvar status_dict = {\n\t\t[\"new-friend\"]: \"New Friend!\",\n\t\tnew: \"New Snap\",\n\t\treceived: \"Received\",\n\t\tsent: \"Sent\",\n\t\topened: \"Opened\",\n\t\tpending: \"Pending\",\n\t\t[\"not-friends\"]: \"Unfriended You\",\n\t\tblocked: \"Blocked\",\n\t}\n\tvar status = status_dict[props.friend[\"status\"]]\n\tconsole.log(status);\n\treturn (\n\t\t\t<>\n\t\t\t{img ?\n\t\t\t\t<div className=\"background-opened-image\" onClick={close}>\n\t\t\t\t\t<img className=\"opened-image\" src={img} />\n\t\t\t\t</div>\n\t\t\t\t:\n\t\t\t\t<li className=\"list-container\" onClick={props.friend[\"status\"] === \"new\" ? open : null}>\n\t\t\t\t\t<div className=\"pic-container\">\n\t\t\t\t\t\t<img className=\"friend-profile-pic\" src={props.friend[\"profile_pic_url\"]}></img>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t\t<h3>{props.friend[\"name\"]}</h3>\n\t\t\t\t\t\t<div className=\"message-info\">\n\t\t\t\t\t\t\t<div className=\"message-info\">\n\t\t\t\t\t\t\t\t<div className={icon_class} />\n\t\t\t\t\t\t\t\t<h5>{status}</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<h5>{props.friend[\"last_time_stamp\"] ? <> - <TimeAgo date={props.friend[\"last_time_stamp\"]} /> - </> : null}</h5>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<h5>{props.friend[\"streak\"]}{props.streak_emoji}</h5>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t</>\n\t)\n\n}\n","import React from 'react';\n// import React, { Component } from 'react';\nimport './Messages.css';\nimport Message from './Message';\n\n\nexport default function Messages(props) {\n    return (\n    <div className=\"messages-screen\">\n\t\t\t<div className=\"navbar\">\n\t\t\t\t\t{/* Placeholder */}\n\t\t\t</div>\n\t\t\t<ul className=\"messages-list\">\n\t\t\t\t{props.loggedIn ? \n\t\t\t\t\tnull\n\t\t\t\t\t:<li className=\"welcome-statement\">Welcome to Project Yellow Ghost, a web app version of SnapChat. This was a project developed by Jonathan Wang\n\t\t\t\t\t\tand this was his final project for school. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if\n\t\t\t\t\t\tyou want to start using this product. Happy Snapping!\n\t\t\t\t\t</li>\n\t\t\t\t}\n\t\t\t\t{Object.keys(props.friends).sort().map((key) => (\n\t\t\t\t\t<Message\n\t\t\t\t\t\tfriend={props.friends[key]}\n\t\t\t\t\t\tstreak_emoji={props.streak_emoji}\n\t\t\t\t\t\tk={key}\n\t\t\t\t\t\tpic={props.pic}\n\t\t\t\t\t\temail={props.email}\n\t\t\t\t\t\tshowNavbar={props.showNavbar}\n      \t\t\tshowFooter={props.showFooter}\n\t\t\t\t\t/>\n\t\t\t\t))}\t``\n\t\t\t</ul>\n\t\t\t<div className=\"footer app-foot\">\n\t\t\t\t{/* Placeholder */}\n\t\t\t</div>\n    </div>\n    );\n}\n","export default __webpack_public_path__ + \"static/media/sent-vid-icon.ec0981e8.png\";","export default __webpack_public_path__ + \"static/media/black-checkmark.d8439ac6.png\";","import React, { Component, useEffect, useState } from 'react';\nimport Webcam from \"react-webcam\";\nimport './Camera.css';\nimport sent from './images/sent-vid-icon.png';\nimport checkmark from './images/black-checkmark.png';\nimport {storage, db} from './Firebase.js';\nimport firebase from 'firebase/app';\nimport { v4 as uuid } from \"uuid\";\n\nfunction Camera(props) {\n  const [img, setImg] = useState(null);\n  const [screen, setScreen] = useState(\"camera\");\n  const [aspectRatio, setAspectRatio] = useState(16/9);\n  const [sendList, setSendList] = useState([]);\n\n  const webcamRef = React.useRef(null);\n  const capture = React.useCallback(\n    () => {\n      // const img = webcamRef.current.getScreenshot({width:props.width, height:props.height});\n      setImg(webcamRef.current.getScreenshot());\n      setScreen(\"captured\")\n      props.showNavbar(false)\n      props.showFooter(false)\n      props.disable_swiping(true)\n    },\n    [webcamRef]\n  );\n  const sendTo = () => {\n    setScreen(\"send\");\n  }\n  const send = () => {\n    setImg(null);\n    setScreen(\"camera\");\n    send_pic()\n    props.changeToIndex(0);\n    props.disable_swiping(false)\n    props.showNavbar(true)\n    props.showFooter(true)\n  }\n  const back = () => {\n    setScreen(\"captured\")\n    props.showNavbar(false)\n  }\n  const close = () => {\n    setImg(null);\n    setScreen(\"camera\");\n    setSendList([])\n    props.disable_swiping(false)\n    props.showNavbar(true)\n    props.showFooter(true)\n  }\n  const handle_send_list = (e) => {\n    var arr = [];\n    e.forEach((element) => {\n      arr.push(element);\n    })\n    setSendList(arr)\n  }\n\n  const send_pic = () => {\n\n    // Update Sender's Doc: Friends -> Receiver_Name -> Status -> Sent\n    //                      Last_Time_Stamp, Sent: +1, Total_Sent: +1\n    var time_sent = new Date().toLocaleString();\n    var newDict = props.friends;\n    var total_sent = 0;\n    const id = uuid();\n    sendList.forEach((user) => {\n      total_sent = total_sent + 1;\n      newDict[user][\"status\"] = \"sent\";\n      newDict[user][\"last_time_stamp\"] = time_sent;\n      newDict[user][\"sent\"] = newDict[user][\"sent\"] + 1;\n    })\n\n    const user_doc = db.collection(\"Users\").doc(props.email);\n    user_doc.update({\n      total_sent: props.sent + total_sent,\n      friends: newDict,\n    })\n    \n\n    \n\n    // // Add actual photo image to storage\n    const uploadTask = storage.ref(`posts/${id}`).putString(img, 'data_url');\n    uploadTask.on(\n      \"state_changed\",\n      snapshot => {},\n      error => {\n        console.log(error);\n      },\n      () => {\n        storage.ref(`posts/${id}`).getDownloadURL().then(url => {\n          // Add a photo doc containing: id, sender, sent, opened, time_stamp\n          db.collection(\"Photos\").doc(id).set({\n            sender: props.email,\n            sent: sendList,\n            opened: [],\n            time_stamp: time_sent,\n            image_url: url,\n          })\n        })\n      })\n\n    \n    // Add photo id to Receiver's Doc:  Friends -> Sender_Name -> Status -> Received\n    //                                  Last_Time_Stamp, Received: +1, Total_Received: +1\n    sendList.forEach((user) => {\n      var receiver_doc = db.collection(\"Users\").doc(user);\n      // check if receiver is friends with sender\n      receiver_doc.get().then((doc) => {\n        var list = doc.data();\n        if (Object.keys(list[\"friends\"]).includes(props.email)){\n          var friends_dict = list[\"friends\"];\n          friends_dict[props.email][\"status\"] = \"new\";\n          friends_dict[props.email][\"last_time_stamp\"] = time_sent;\n          friends_dict[props.email][\"received\"] = friends_dict[props.email][\"received\"] + 1;\n          friends_dict[props.email][\"snaps\"].push(id);\n          list[\"friends\"] = friends_dict;\n          receiver_doc.set({\n            created: list[\"created\"],\n            friends: list[\"friends\"],\n            name: list[\"name\"],\n            pending: list[\"pending\"],\n            profile_pic_url: list[\"profile_pic_url\"],\n            streak_emoji: list[\"streak_emoji\"],\n            total_received: list[\"total_received\"] + 1,\n            total_sent: list[\"total_sent\"],\n          });\n        } else if (Object.keys(list[\"pending\"]).includes(props.email)) {\n          var pending_dict = list[\"pending\"];\n          pending_dict[props.email][\"status\"] = \"new\";\n          pending_dict[props.email][\"last_time_stamp\"] = time_sent;\n          pending_dict[props.email][\"received\"] = friends_dict[props.email][\"received\"] + 1;\n          pending_dict[props.email][\"snaps\"].push(id);\n          list[\"pending\"] = pending_dict;\n          receiver_doc.set({\n            created: list[\"created\"],\n            friends: list[\"friends\"],\n            name: list[\"name\"],\n            pending: list[\"pending\"],\n            profile_pic_url: list[\"profile_pic_url\"],\n            streak_emoji: list[\"streak_emoji\"],\n            total_received: list[\"total_received\"] + 1,\n            total_sent: list[\"total_sent\"],\n          });\n        } else {\n          console.log(\"Not a friend, skipping \"+user+\".\");\n        }\n      })\n    })\n\n\n    setSendList([]);\n  }\n\n  return (\n    <>\n    <div className=\"webcam-screen\">\n      <div className=\"navbar\" />\n\n      <Webcam\n        id=\"webcam\"\n        className=\"image-desktop\"\n        ref={webcamRef}\n        audio={false}\n        mirrored={true}\n        forceScreenshotSourceSize={false}\n        screenshotFormat=\"image/png\"\n        screenshotQuality={1}\n        videoConstraints={{facingMode: props.faceMode}}\n      />\n\n      {screen === \"camera\" ? \n        <div className=\"webcam-overlay\">\n          <div className=\"camera-nav\">\n            <div className=\"navbar\"/>\n          </div>\n          <div className=\"camera-footer\">\n            <button onClick={capture}>Capture</button>\n            <div className=\"footer\"/>\n            <div className=\"footer\"/>\n          </div>\n        </div>\n        : null\n      }\n\n      {screen === \"captured\" ?\n        <>\n        <div className=\"captured-overlay\">\n          <div className=\"camera-nav\">\n            <div className=\"navbar\">\n              <button className=\"close\" onClick={close}>Close</button>\n            </div>\n          </div>\n          <img className=\"image-desktop\" src={img} />\n          <div className=\"captured-footer\">\n            <button className=\"save\">Save</button>\n            <button className=\"send-to\" onClick={sendTo}><b>Send To</b><img className=\"send-to-icon\" src={sent} /></button>\n          </div>\n        </div>\n        </>\n        : null\n      }\n\n      {screen === \"send\" ?\n        <div className=\"send-overlay\">\n          <div className=\"navbar\">\n            <button className=\"back\" onClick={back}>Back</button>\n            <input className=\"send-search\" type=\"search\"></input>\n            <button>...</button>\n          </div>\n\n          <h1>Recents ({Object.keys(props.friends).length})</h1>\n          <ul className=\"list-container send-list\">\n            {/* <h3>List: {Object.keys(props.friends)}</h3> */}\n            {Object.keys(props.friends).sort().map((key) => (\n              <Receiver\n                friends={props.friends}\n                k={key}\n                sendList={sendList}\n                handle_send_list={handle_send_list}\n                selected={sendList.includes(key) ? true : false}\n              />\n            ))}\n          </ul>\n          {sendList.length > 0 ? \n            <div className=\"send-footer\">\n              <h3 className=\"send-label\">Send to...</h3>\n              <button className=\"send-to \" onClick={send}>Send</button>\n            </div>\n            : null\n          }\n        </div>\n        : null\n      }\n        <div className=\"footer\"/>\n    </div>\n    </>\n  );\n}\n\nfunction Receiver(props) {\n  const [added, setAdded] = useState(props.selected);\n\tvar friends = props.friends;\n\tvar key = props.k;\n  var newArr = props.sendList;\n\n  const toggleSelected = () => {\n    \n    if (!added) {\n      newArr.push(key);\n      props.handle_send_list(newArr);\n    } else {\n      newArr.splice(newArr.indexOf(key), 1);\n      props.handle_send_list(newArr);\n    }\n    setAdded(!added);\n  }\n\n\treturn (\n\t\t<>\n\t\t\t<button onClick={toggleSelected} className=\"item-container\">\n\t\t\t\t<div className=\"pic-container\">\n\t\t\t\t\t<img className=\"friend-profile-pic\" src={friends[key].profile_pic_url}/>\n\t\t\t\t</div>\t\n\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t<h2>{friends[key].name}</h2>\n\t\t\t\t\t<p>{key}</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"friend-button\">\n          {added ?\n            <div className=\"selected-circle\"><img className=\"checkmark\" src={checkmark} alt=\"U+2713\"></img></div>\n            : <div className=\"unselected-circle\"><img className=\"checkmark\" src={checkmark} alt=\"U+2713\"></img></div>\n          }\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t</>\n\t)\n}\n\nexport {Camera, Receiver}","import React, { Component, useState, useEffect } from 'react';\nimport './Navbar.css';\nimport {auth, storage, db, provider} from './Firebase.js';\nimport firebase from 'firebase/app';\n\nfunction NavBar(props) {\n\t// Screens\n\tconst [showProfileScreen, setShowProfileScreen] = useState(false);\n\tconst [showAddFriendScreen, setShowAddFriendScreen] = useState(false);\n\t// Show/Hide Navbar contents\n\tconst [showLogin, setShowLogin] = useState(true);\n\tconst [showSearch, setShowSearch] = useState(true);\n\tconst [showTitle, setShowTitle] = useState(true);\n\tconst [showAddFriend, setShowAddFriend] = useState(true);\n\tconst [showNewChat, setShowNewChat] = useState(true);\n\tconst [showMore, setShowMore] = useState(false);\n\tconst [showClose, setShowClose] = useState(false);\n\tconst [showFlipCam, setShowFlipCam] = useState(null);\n\t// Navbar content\n\tconst [navTitle, setNavTitle] = useState(\"Chat\")\n\n\tconst toggleProfile = () => {\n\t\tsetShowProfileScreen(true);\n\t\tsetShowLogin(false);\n\t\tsetShowSearch(false);\n\t\tsetShowAddFriend(false);\n\t\tsetShowNewChat(false)\n\t\tsetShowMore(true);\n\t\tsetShowClose(true);\n\t\tsetNavTitle(\"Profile\");\n\t\tprops.disable_swiping(true);\n\t}\n\n\tconst toggleAddFriend = () => {\n\t\tsetShowAddFriendScreen(true);\n\t\tsetShowLogin(false);\n\t\tsetShowSearch(false);\n\t\tsetShowAddFriend(false);\n\t\tsetShowNewChat(false)\n\t\tsetShowMore(true);\n\t\tsetShowClose(true);\n\t\tsetNavTitle(\"Add Friends\");\n\t\tprops.disable_swiping(true);\n\t}\n\n\tconst resetNav = () => {\n\t\tsetShowProfileScreen(false);\n\t\tsetShowAddFriendScreen(false);\n\t\t// Navbar contents\n\t\tsetShowLogin(true);\n\t\tsetShowSearch(true);\n\t\tsetShowTitle(true);\n\t\tsetShowAddFriend(true);\n\t\tif (props.index == 0) {\n\t\t\tsetShowNewChat(true);\n\t\t}\n\t\tsetShowMore(false);\n\t\tsetShowClose(false);\n\t\tsetNavTitle(\"Chat\");\n\t\tprops.disable_swiping(false);\n\t}\n\n\tuseEffect(() => {\n    // check_user();\n\t\t// console.log(\"index: \", props.index);\n\t\tif (props.index == 0) {\n\t\t\tsetShowNewChat(true);\n\t\t\tsetShowFlipCam(false);\n\t\t\tsetShowTitle(true);\n\t\t} else if (props.index == 1) {\n\t\t\tsetShowNewChat(false);\n\t\t\tsetShowFlipCam(true);\n\t\t\tsetShowTitle(false);\n\t\t}\n  },[props.index]);\n\n\treturn (\n\t\t<>\n\t\t<div className=\"navbar app-nav\">\n\t\t<div className=\"nav-box-1\">\n\t\t\t<ul>\n\t\t\t\t{showLogin ?\n\t\t\t\t\tprops.loggedIn ?\n\t\t\t\t\t\t<li><img className=\"nav-profile-pic\" onClick={toggleProfile} src={props.pic}/></li>\n\t\t\t\t\t\t: <li><a onClick={props.login}>Sign In</a></li>\n\t\t\t\t\t: null}\n\t\t\t\t\n\t\t\t\t{showClose ? \n\t\t\t\t\t<li><a onClick={resetNav}>Close</a></li>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t{showSearch ? <li><a>Search</a></li> : null}\n\t\t\t</ul>\n\t\t</div>\n\t\t<div className=\"nav-box-2\">\n\t\t\t{props.index == 0 ?\n\t\t\t\tshowTitle ? \n\t\t\t\t\t<h1>{navTitle}</h1>\n\t\t\t\t\t: null\n\t\t\t\t: null\n\t\t\t}\n\t\t\t{props.index == 1 ? \n\t\t\t\tshowTitle ? \n\t\t\t\t\t<h1>Camera</h1>\n\t\t\t\t\t: null\n\t\t\t\t: null\n\t\t\t}\n\t\t</div>\n\t\t<div className=\"nav-box-3\">\n\t\t\t\t<ul>\n\t\t\t\t\t{showAddFriend ? <li onClick={toggleAddFriend}><a>Add Friend</a></li> : null}\n\t\t\t\t\t{showNewChat ? <li><a>New Chat</a></li> : null}\n\t\t\t\t\t{showMore ? <li><a><b>. . .</b></a></li> : null}\n\t\t\t\t\t{showFlipCam ? <li><a>Flip Cam</a></li> : null}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t{showProfileScreen ? \n\t\t\t<ProfileModal\n\t\t\t// User Info\n\t\t\t\tpic={props.pic}\n\t\t\t\tname={props.name}\n\t\t\t\temail={props.email}\n\t\t\t\treceived={props.received}\n\t\t\t\tsent={props.sent}\n\t\t\t\tcreated={props.created}\n\t\t\t\t// functions\n\t\t\t\tresetNav={resetNav}\n\t\t\t\tlogout={props.logout}\n\t\t\t/>\n\t\t\t: null\n\t\t}\n\t\t{showAddFriendScreen ? \n\t\t\t<>\n\t\t\t\n\t\t\t<AddFriend\n\t\t\t\tfriends={props.friends}\n\t\t\t\tstrangers={props.strangers}\n\t\t\t\teveryone={props.everyone}\n\t\t\t\tedit_friends={props.edit_friends}\n\t\t\t/>\n\t\t\t{/* <div className=\"screen\">\n\t\t\t\t<div className=\"navbar\">\n\t\t\t\t</div>\n\t\t\t\t<button onClick={() => props.edit_friends(\"remove\", \"key\", \"value\")}>Remove</button>\n\t\t\t</div> */}\n\t\t\t\n\t\t\t</>\n\t\t\t: null\n\t\t}\n\t\t</>\n\t);\n}\n\nfunction ProfileModal(props) {\n\tconst logout = () => {\n\t\tprops.resetNav();\n\t\tprops.logout();\n\t}\n\treturn (\n\t\t<div className=\"screen\">\n\t\t\t<div className=\"navbar\">\n\t\t\t\t\t{/* Placeholder */}\n\t\t\t</div>\n\t\t\t<img src={props.pic} className=\"profile-pic\" />\n\t\t\t<h1>{props.name}</h1>\n\t\t\t<h3>{props.email}</h3>\n\t\t\t<h3>Received - {props.received} | {props.sent} - Sent</h3>\n\t\t\t<h3>Joined Project Yellow Ghost on {props.created}</h3>\n\t\t\t<h3>Created by Jonathan Wang</h3>\n\t\t\t<button onClick={logout} style={{backgroundColor: \"red\"}}><h1>Logout</h1></button>\n\t\t</div>\n\t)\n}\n\nfunction AddFriend(props) {\n\treturn (\n\t\t<div className=\"screen\">\n\t\t\t<div className=\"navbar\">\n\t\t\t\t\t{/* Placeholder */}\n\t\t\t</div>\n\t\t\t<h1>Friends ({Object.keys(props.friends).length})</h1>\n\t\t\t<ul className=\"list-container\">\n\t\t\t\t{/* <h3>List: {Object.keys(props.friends)}</h3> */}\n\t\t\t\t{Object.keys(props.friends).sort().map((key) => (\n\t\t\t\t\t<Friend\n\t\t\t\t\t\tfriends={props.friends}\n\t\t\t\t\t\tk={key}\n\t\t\t\t\t\tedit_friends={props.edit_friends}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t<h1>Strangers ({Object.keys(props.strangers).length})</h1>\n\t\t\t<ul className=\"list-container\">\n\t\t\t\t{/* <h3>List: {Object.keys(props.strangers)}</h3> */}\n\t\t\t\t{Object.keys(props.strangers).sort().map((key) => (\n\t\t\t\t\t<Stranger\n\t\t\t\t\t\tstrangers={props.strangers}\n\t\t\t\t\t\tk={key}\n\t\t\t\t\t\tedit_friends={props.edit_friends}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t<h1>Everyone ({Object.keys(props.everyone).length})</h1>\n\t\t\t<ul className=\"list-container\">\n\t\t\t\t{/* <h3>List: {Object.keys(props.strangers)}</h3> */}\n\t\t\t\t{Object.keys(props.everyone).sort().map((key) => (\n\t\t\t\t\t<Everyone\n\t\t\t\t\t\teveryone={props.everyone}\n\t\t\t\t\t\tk={key}\n\t\t\t\t\t\tedit_friends={props.edit_friends}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t\t<div className=\"footer\">\n\t\t\t\t{/* Placeholder */}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nfunction Friend(props) {\n\tvar friends = props.friends;\n\tvar key = props.k;\n\n\treturn (\n\t\t<>\n\t\t\t<li className=\"item-container\">\n\t\t\t\t<div className=\"pic-container\">\n\t\t\t\t\t<img className=\"friend-profile-pic\" src={friends[key].profile_pic_url}/>\n\t\t\t\t</div>\t\n\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t<h2>{friends[key].name}</h2>\n\t\t\t\t\t<p>{key}</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"friend-button\">\n\t\t\t\t\t<button onClick={() => props.edit_friends(\"remove\", key, friends[key])}>Remove</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</>\n\t)\n}\n\nfunction Stranger(props) {\n\tvar strangers = props.strangers;\n\tvar key = props.k;\n\n\treturn (\n\t\t<>\n\t\t\t<li className=\"item-container\">\n\t\t\t\t<div className=\"pic-container\">\n\t\t\t\t\t<img className=\"friend-profile-pic\" src={strangers[key].profile_pic_url}/>\n\t\t\t\t</div>\t\n\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t<h2>{strangers[key].name}</h2>\n\t\t\t\t\t<p>{key}</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"friend-button\">\n\t\t\t\t\t<button onClick={() => props.edit_friends(\"add\", key, strangers[key])}>Add</button>\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</>\n\t)\n}\n\nfunction Everyone(props) {\n\tvar everyone = props.everyone;\n\tvar key = props.k;\n\n\treturn (\n\t\t<>\n\t\t\t<li className=\"item-container\">\n\t\t\t\t<div className=\"pic-container\">\n\t\t\t\t\t<img className=\"friend-profile-pic\" src={everyone[key].profile_pic_url}/>\n\t\t\t\t</div>\t\n\t\t\t\t<div className=\"friend-info\">\n\t\t\t\t\t<h2>{everyone[key].name}</h2>\n\t\t\t\t\t<p>{key}</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"friend-button\">\n\t\t\t\t</div>\n\t\t\t</li>\n\t\t</>\n\t)\n}\n\nexport {NavBar, ProfileModal, AddFriend}","import React from 'react'\nimport './Footer.css';\n\nexport default function Footer(props) {\n  return (\n    <>\n\t\t<div className=\"footer app-foot\">\n\t\t\t<button onClick={() => props.changeToIndex(0)}>{props.index === 0 ? <h1 style={{backgroundColor: \"DodgerBlue\"}}>Messages</h1> : <h1>Messages</h1>}</button>\n\t\t\t<button onClick={() => props.changeToIndex(1)}>{props.index === 1 ? <h1 style={{backgroundColor: \"Gold\"}}>Camera</h1> : <h1>Camera</h1>}</button>\n\t\t</div>\n\t\t</>\n  )\n}\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport SwipeableViews from 'react-swipeable-views';\nimport { bindKeyboard } from 'react-swipeable-views-utils';\nimport {auth, db, provider} from './Firebase.js';\nimport firebase from 'firebase/app';\nimport './App.css';\nimport Messages from './Messages.js';\nimport {Camera} from './Camera.js';\nimport {NavBar} from './Navbar.js';\nimport Footer from './Footer.js';\n\n// All the firebase calls will occur here to minimize usage\n\nconst BindKeyboardSwipeableViews = bindKeyboard(SwipeableViews);\nvar default_pic = \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\"\n// var dummy_dict = {\n//   email: \"Guest@project-yellow-ghost.com\",\n//   name:\"Guest\",\n//   photoURL: default_pic,\n//   streak_emoji:\"\\u{1F525}\",\n//   imgs_sent: 0,\n//   imgs_received: 0,\n//   friends: ['Guest@project-yellow-ghost.com'],\n// }\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // For swiping screen\n      index: 1,\n      height: window.innerHeight,\n      width: window.innerWidth,\n      orientation: \"Landscape\",\n      disable_swiping: false,\n      // Navbar\n      showNavbar: true,\n      showFooter: true,\n      // User Info\n      loggedIn: null,\n      name: null,\n      email: null,\n      pic: null,\n      received: null,\n      sent: null,\n      streak_emoji: null,\n      created:null,\n      pending: {},\n      friends: [],\n      strangers: [],\n      everyone: [],\n\n    }\n\n    this.check_user = this.check_user.bind(this);\n    window.addEventListener(\"resize\", this.update);\n    window.addEventListener(\"beforeunload\", this.end_snapshot);\n    window.addEventListener(\"onbeforeunload\", this.end_snapshot);\n  }\n\n  set_device = () => {\n    if (this.state.width > this.state.height) {\n      this.setState({\n        orientation: \"Landscape\"\n      })\n    } else {\n      this.setState({\n        orientation: \"Mobile\"\n      })\n    }\n  }\n  update = () => {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight\n    },this.set_device)\n  };\n  handleChangeIndex = index => {\n    this.setState({\n      index,\n    });\n  };\n  changeToIndex(e) {\n    this.setState({\n      index: e,\n    })\n  }\n  setDisabledSwiping(e) {\n    this.setState({\n      disable_swiping: e,\n    })\n  }\n\n  \n  check_user = () => {\n\t\tfirebase.auth().onAuthStateChanged(function(user) {\n\t\t\tif (user) {\n        this.setState({\n          loggedIn: true,\n          name: user.displayName,\n          pic: user.photoURL,\n          email: user.email,\n        }, this.check_user_on_firebase)\n\t\t\t} else {\n\t\t\t\tthis.setState({\n          loggedIn: false,\n          name: \"Guest\",\n          email: \"Guest@Guest.com\",\n          pic: default_pic,\n          sent: 0,\n          received: 0,\n          streak_emoji: \"\\u{1F525}\",\n          created: new Date().toLocaleString(),\n        })\n\t\t\t}\n\t\t}.bind(this))\n\t}\n\n  check_user_on_firebase = () => {\n    const user_doc = db.collection(\"Users\").doc(this.state.email);\n    user_doc.get().then((doc) => {\n      if (!doc.exists) {\n        // New User\n        const c = new Date().toLocaleString();\n        user_doc.set({\n          created: c,\n          name: this.state.name,\n          profile_pic_url: this.state.pic,\n          streak_emoji:  \"\\u{1F525}\",\n          total_sent: 0,\n          total_received: 0,\n          pending: {},\n          friends: {\n            [this.state.email]: {\n                created: c,\n                profile_pic_url: this.state.pic,\n                name: this.state.name,\n                status: \"new-friend\",\n                streak: 0,\n                streak_ref: null,\n                sent: 0,\n                received: 0,\n                last_time_stamp: null,\n                snaps: []\n            }\n          },\n        })\n        this.setState({\n          received: 0,\n          sent: 0,\n          streak_emoji: \"\\u{1F525}\",\n          pending: {},\n          friends: {\n            [this.state.email]: {\n              created: c,\n              profile_pic_url: this.state.pic,\n              name: this.state.name,\n              status: \"new-friend\",\n              streak: 0,\n              streak_ref: null,\n              sent: 0,\n              received: 0,\n              last_time_stamp: null,\n              snaps: [],\n            }\n          },\n        }, this.start_snapshot)\n      } else {\n        // User has logged in before\n        this.setState({\n          name: doc.data()[\"name\"],\n          pic: doc.data()[\"profile_pic_url\"],\n          received: doc.data()[\"total_received\"],\n          sent: doc.data()[\"total_sent\"],\n          streak_emoji: doc.data()[\"streak_emoji\"],\n          created: doc.data()[\"created\"],\n          friends: doc.data()[\"friends\"],\n          pending: doc.data()[\"pending\"],\n        }, this.start_snapshot)\n      }\n    })\n  }\n  start_snapshot = () => {\n    const user_doc = db.collection(\"Users\").doc(this.state.email);\n    user_doc.onSnapshot((doc) => {\n      this.setState({\n        name: doc.data()[\"name\"],\n        pic: doc.data()[\"profile_pic_url\"],\n        received: doc.data()[\"total_received\"],\n        sent: doc.data()[\"total_sent\"],\n        streak_emoji: doc.data()[\"streak_emoji\"],\n        created: doc.data()[\"created\"],\n        friends: doc.data()[\"friends\"],\n        pending: doc.data()[\"pending\"],\n      })\n      console.log(\"snapshot created\");\n      this.update_people_list();\n    }, (error) => {\n      alert(\"Problem with real time firebase, cannot get live updates.\");\n      console.log(error);\n    })\n  }\n  end_snapshot = () => {\n    this.start_snapshot();\n    console.log(\"ended snapshot\");\n  }\n  // Updates user's Friends, Strangers, and Everyone list\n  update_people_list = () => {\n    var f = {}\n    var strangers = {}\n    var everyone = {}\n    db.collection(\"Users\").get().then((doc) => {\n      doc.docs.forEach((user) => {\n        // console.log(\"This.friends: \", this.state.friends, user.id);\n        if (!Object.keys(this.state.friends).includes(user.id)) {\n          strangers[user.id] = user.data()\n        } else {\n          f[user.id] = user.data()\n        }\n        everyone[user.id] = user.data();\n      })\n      // console.log(\"Friends: \", f)\n      // console.log(\"Strangers: \", strangers)\n      // console.log(\"Everyone: \", everyone)\n      this.setState({\n        // friends: f,\n        strangers: strangers,\n        everyone: everyone,\n      })\n    })\n  }\n  // Add or Remove Friend from this.state.friends\n  edit_friends = (action, friend, value) => {\n    // console.log(\"action\", action);\n    // console.log(\"friend\", friend);\n    // console.log(\"value\", value);\n    const user_doc = db.collection(\"Users\").doc(this.state.email);\n    var dict = this.state.friends;\n    if (action === \"add\") {\n      var new_friend_entry = {\n        created: value.created,\n        profile_pic_url: value.profile_pic_url,\n        name: value.name,\n        status: \"new-friend\",\n        streak: 0,\n        streak_ref: null,\n        sent: 0,\n        received: 0,\n        last_time_stamp: null,\n        snaps: []\n      }\n      dict[friend] = new_friend_entry;\n      // Add to firestore\n      user_doc.update({friends: dict})\n      // Update state for user\n      this.setState({\n        friends: dict,\n      }, this.update_people_list)\n    } else if (action === \"remove\") {\n      delete dict[friend]\n      user_doc.update({friends: dict})\n      this.setState({\n        friends: dict,\n      }, this.update_people_list)\n    }\n  }\n\n  showNavbar = (status) => {\n    this.setState({showNavbar: status})\n  }\n  showFooter = (status) => {\n    this.setState({showFooter: status})\n  }\n\n  login = () => {\n    auth.signInWithPopup(provider)\n    .then((result) => {\n      this.setState({\n        loggedIn: true,\n        name: result.user.displayName,\n        email: result.user.email,\n        pic: result.user.photoURL,\n      })\n    })\n  }\n\tlogout = () => {\n    firebase.auth().signOut()\n    this.setState({\n      loggedIn: false,\n      name: \"Guest\",\n      email: \"Guest@Guest.com\",\n      pic: default_pic,\n      sent: 0,\n      received: 0,\n      pending: {},\n      friends: [],\n      strangers: [],\n      everyone: [],\n    })\n  }\n\n  componentDidMount() {\n    console.log(\"Mounted\");\n    this.check_user()\n  }\n\n  render() {\n    const { index } = this.state;\n    return (\n      <>\n      {this.state.showNavbar ?\n        <NavBar\n          index={index}\n          // Functions\n          login={this.login.bind(this)}\n          logout={this.logout.bind(this)}\n          disable_swiping={this.setDisabledSwiping.bind(this)}\n          edit_friends={this.edit_friends.bind(this)}\n          // User Info\n          loggedIn={this.state.loggedIn}\n          name={this.state.name}\n          email={this.state.email}\n          pic={this.state.pic}\n          received={this.state.received}\n          sent={this.state.sent}\n          created={this.state.created}\n          pending={this.state.pending}\n          friends={this.state.friends}\n          strangers={this.state.strangers}\n          everyone={this.state.everyone}\n        />\n        : null\n      }\n      <BindKeyboardSwipeableViews disabled={this.state.disable_swiping} enableMouseEvents index={index} onChangeIndex={this.handleChangeIndex} style={Object.assign({width: this.state.width, height: this.state.height, position: 'absolute', top: '0%', left: '0%'})}>\n        <div style={Object.assign({backgroundColor: 'white', minHeight: '100vh', width: '100%'})}>\n          <Helmet>\n            <meta name=\"viewport\" content=\"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"></meta>\n          </Helmet>\n          <Messages\n            // User Info\n            loggedIn={this.state.loggedIn}\n            friends={this.state.friends}\n            streak_emoji={this.state.streak_emoji}\n            pic={this.state.pic}\n            email={this.state.email}\n            showNavbar={this.showNavbar.bind(this)}\n            showFooter={this.showFooter.bind(this)}\n          />\n        </div>\n        <div style={Object.assign({backgroundColor: 'Plum'})} >\n          <Helmet>\n            <meta name=\"viewport\" content=\"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes\"></meta>\n          </Helmet>\n          <Camera\n            index={index}\n            // Functions\n            changeToIndex={this.changeToIndex.bind(this)}\n            disable_swiping={this.setDisabledSwiping.bind(this)}\n            showNavbar={this.showNavbar.bind(this)}\n            showFooter={this.showFooter.bind(this)}\n            // User Info\n            friends={this.state.friends}\n            email={this.state.email}\n            sent={this.state.sent}\n            // Increment this.sent\n            // Add person to pending list\n\n          />\n        </div>\n      </BindKeyboardSwipeableViews>\n      {this.state.showFooter ? \n        <Footer\n          index={index}\n          changeToIndex={this.changeToIndex.bind(this)}\n        />\n        : null\n      }\n      \n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Router, Route, Switch } from \"react-router\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}