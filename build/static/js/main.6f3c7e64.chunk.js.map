{"version":3,"sources":["Firebase.js","Friends.js","MessagesNavbar.js","Message.js","Messages.js","CameraNavbar.js","Camera.js","App.js","index.js"],"names":["db","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","firestore","auth","storage","provider","GoogleAuthProvider","Friends","props","useState","removed","setRemoved","friends","collection","doc","user_email","className","src","friend_pic","alt","friend_name","friend_username","onClick","friends_list","splice","indexOf","update","SendFriends","added","setAdded","send_list","console","log","push","Strangers","stranger_pic","stranger_name","stranger_username","Everyone","MessagesNavbar","show_friends","setShow_Friends","user_name","login","user_pic","logout","get_friends_list","user_strangers_dict","user_friends_dict","everyone_dict","type","placeholder","length","map","x","photoURL","name","email","Message","status","setStatus","time","setTime","update_messages","orderBy","onSnapshot","snapshot","i","docs","data","sender_email","toDate","toUTCString","status_output","icon","img","setImg","imgid","setImgid","useEffect","delete","then","catch","error","sender","get","ref","url","arr","to","id","profile_url","sender_name","date","locale","streak_num","streak_emoji","Messages","get_all_users","logged_in","CameraNavbar","Camera","setSend_list","image","setImage","faceMode","screen","setScreen","webcamRef","React","useRef","setAspectRatio","send","user","currentUser","uuid","displayName","to_users","putString","on","child","getDownloadURL","forEach","user_temp","set","imageURL","avatarURL","read","timeStamp","FieldValue","serverTimestamp","capture","useCallback","current","getScreenshot","mobile","audio","mirrored","forceScreenshotSourceSize","screenshotFormat","screenshotQuality","videoConstraints","facingMode","classname","BindKeyboardSwipeableViews","bindKeyboard","SwipeableViews","default_pic","dummy_dict","imgs_sent","imgs_received","App","set_device","state","width","height","setState","window","innerWidth","innerHeight","signInWithPopup","result","user_friends","message","signOut","check_user","onAuthStateChanged","this","bind","exists","friends_meta","strangers_meta","everyone_meta","meta_idx","strangers_idx","everyone_idx","includes","index","addEventListener","enableMouseEvents","style","Object","assign","position","top","left","backgroundColor","minHeight","Helmet","content","Component","ReactDOM","render","document","getElementById"],"mappings":"yUAoBMA,G,0CADcC,IAASC,cAVN,CACrBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAIMC,aACjBC,EAAOV,IAASU,OAChBC,EAAUX,IAASW,UAEnBC,EAAW,IAAIZ,IAASU,KAAKG,mB,6BCpBnC,SAASC,EAAQC,GAEhB,MAA8BC,oBAAS,GAAvC,mBAAOC,EAAP,KAAgBC,EAAhB,KACMC,EAAUpB,EAAGqB,WAAW,SAASC,IAAIN,EAAMO,YAe9C,OACI,qBAAIC,UAAU,sBAAd,UACF,sBAAKA,UAAU,YAAf,UACA,qBAAKA,UAAU,iBAAiBC,IAAKT,EAAMU,WAAYC,IAAI,WAC3D,qBAAIH,UAAU,eAAd,UACE,6BAAKR,EAAMY,cACX,4BAAIZ,EAAMa,wBAGZ,qBAAKL,UAAU,YAAf,SACCN,EAAU,mBAAGM,UAAU,UAAb,SAAuB,2CAAsB,wBAAQM,QAjBtD,WACe,kCAAzBd,EAAMa,kBALVb,EAAMe,aAAaC,OAAOhB,EAAMe,aAAaE,QAAQjB,EAAMa,iBAAkB,GAC7ET,EAAQc,OAAO,CAACd,QAASJ,EAAMe,gBAO/BZ,GAAW,IAaiD,SAAyB,8CAMvF,SAASgB,EAAYnB,GAEpB,MAA0BC,oBAAS,GAAnC,mBAAOmB,EAAP,KAAcC,EAAd,KACgBrC,EAAGqB,WAAW,SAASC,IAAIN,EAAMO,YAwB9C,OACI,qBAAIC,UAAU,sBAAd,UACF,sBAAKA,UAAU,YAAf,UACA,qBAAKA,UAAU,iBAAiBC,IAAKT,EAAMU,WAAYC,IAAI,WAC3D,qBAAIH,UAAU,eAAd,UACE,6BAAKR,EAAMY,cACX,4BAAIZ,EAAMa,wBAGZ,qBAAKL,UAAU,YAAf,SACCY,EAAQ,wBAAQZ,UAAU,WAAWM,QAhBrB,WACrBO,GAAS,GACTrB,EAAMsB,UAAUN,OAAOhB,EAAMsB,UAAUL,QAAQjB,EAAMa,iBAAkB,GACvEU,QAAQC,IAAIxB,EAAMsB,cAa4D,wBAAQd,UAAU,aAAaM,QArB3F,WAClBO,GAAS,GACTrB,EAAMsB,UAAUG,KAAKzB,EAAMa,iBAC3BU,QAAQC,IAAIxB,EAAMsB,mBAwBpB,SAASI,EAAU1B,GAGlB,MAA0BC,oBAAS,GAAnC,mBAAOmB,EAAP,KAAcC,EAAd,KACMjB,EAAUpB,EAAGqB,WAAW,SAASC,IAAIN,EAAMO,YAc/C,OACC,qBAAIC,UAAU,sBAAd,UACI,sBAAKA,UAAU,YAAf,UACA,qBAAKA,UAAU,iBAAiBC,IAAKT,EAAM2B,aAAchB,IAAI,WAC7D,qBAAIH,UAAU,eAAd,UACE,6BAAKR,EAAM4B,gBACX,4BAAI5B,EAAM6B,0BAGZ,qBAAKrB,UAAU,YAAf,SACEY,EAAQ,mBAAGZ,UAAU,QAAb,SAAqB,yCAAoB,wBAAQM,QAjBjD,WACa,kCAAzBd,EAAMa,kBALVb,EAAMe,aAAaU,KAAKzB,EAAM6B,mBAC9BzB,EAAQc,OAAO,CAACd,QAASJ,EAAMe,gBAO/BM,GAAS,IAagD,SAA2B,2CAMtF,SAASS,EAAS9B,GAEf,OACC,qBAAIQ,UAAU,sBAAd,UACI,sBAAKA,UAAU,YAAf,UACA,qBAAKA,UAAU,iBAAiBC,IAAKT,EAAM2B,aAAchB,IAAI,WAC7D,qBAAIH,UAAU,eAAd,UACE,6BAAKR,EAAM4B,gBACX,4BAAI5B,EAAM6B,0BAGZ,qBAAKrB,UAAU,iBC1HR,SAASuB,EAAe/B,GACtC,MAAwCC,oBAAS,GAAjD,mBAAO+B,EAAP,KAAqBC,EAArB,KAWA,OACC,qCACGD,EAuBD,KAtBF,sBAAKxB,UAAU,SAAf,UACA,qBAAKA,UAAU,YAAf,SACC,+BACC,6BACqB,SAAnBR,EAAMkC,UACP,mBAAGpB,QAASd,EAAMmC,MAAlB,qBACA,qBAAK3B,UAAU,cAAcC,IAAKT,EAAMoC,SAAUtB,QAASd,EAAMqC,OAAQ1B,IAAI,sBAG9E,6BAAI,8CAGN,qBAAKH,UAAU,YAAf,SACC,wCAED,qBAAKA,UAAU,YAAf,SACE,+BACC,6BAAI,mBAAGM,QA7BiB,WAC3Bd,EAAMsC,mBACNL,GAAgB,IA2BT,0BACJ,6BAAI,mDAKLD,GAA6C,MAA7BhC,EAAMuC,qBACG,MAA3BvC,EAAMwC,mBAAoD,MAAvBxC,EAAMyC,cACzC,sBAAKjC,UAAU,cAAf,UACC,sBAAKA,UAAU,aAAf,UACC,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,mBAAGM,QAnCb,WAC3Bd,EAAMsC,mBACNL,GAAgB,IAiCqB,SAAiC,8CACpE,qBAAKzB,UAAU,YAAf,SAA2B,+CAC3B,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,4BAAG,iDAEvC,sBAAKA,UAAU,WAAf,UACC,qBAAKA,UAAU,aAAf,SAA4B,uBAAOkC,KAAK,SAASC,YAAY,mBAC7D,qBAAKnC,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,wBAAsCR,EAAMuC,oBAAoBK,OAAhE,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMuC,oBAAoBM,KAAI,SAACC,GAAD,OAC9B,cAACpB,EAAD,CACCC,aAAcmB,EAAEC,SAChBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,MACrBpC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI1B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,sBAAoCR,EAAMwC,kBAAkBI,OAA5D,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMwC,kBAAkBK,KAAI,SAACC,GAAD,OAC5B,cAAC/C,EAAD,CACCW,WAAYoC,EAAEC,SACdnC,YAAakC,EAAEE,KACfnC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI1B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,uBAAqCR,EAAMyC,cAAcG,OAAzD,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMyC,cAAcI,KAAI,SAACC,GAAD,OACxB,cAAChB,EAAD,CAAUH,aAAcmB,EAAEC,SACzBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,aAGvB,qBAAKzC,UAAU,qBAKd,Q,aC7EU,SAAS0C,EAAQlD,GAI5B,MAA4BC,mBAAS,YAArC,mBAAOkD,EAAP,KAAeC,EAAf,KACA,EAAwBnD,mBAAS,GAAjC,mBAAOoD,EAAP,KAAaC,EAAb,KACA,EAA4BrD,mBAAS,IAArC,mBAEMsD,GAFN,UAEwB,WACpBvE,EAAGqB,WAAW,SACbC,IAAIN,EAAMO,YACVF,WAAW,YACXmD,QAAQ,YAAa,QACrBC,YAAW,SAACC,GAGT,IAFA,IAAIC,EAAI,EAEDA,EAAID,EAASE,KAAKhB,QAAUc,EAASE,KAAKD,GAAGE,OAAjB,OAAoC7D,EAAM8D,cAAgBH,GAAQ,EACjGA,EAAID,EAASE,KAAKhB,QACdc,EAASE,KAAKD,GAAGE,OAAjB,OAAoC7D,EAAM8D,cAC1CV,EAAU,YACkC,MAAxCM,EAASE,KAAKD,GAAGE,OAAjB,WACAP,EAAQI,EAASE,KAAKD,GAAGE,OAAjB,UAAqCE,SAASC,gBAM9DZ,EAAU,iBAKlBa,EAAgB,4BAAId,IACpBe,EAAO,qBAAK1D,UAAU,qBAEX,aAAX2C,GACAe,EAAO,qBAAK1D,UAAU,gBACtByD,EAAgB,mBAAGzD,UAAU,MAAb,SAAmB,4BAAI2C,OACrB,aAAXA,EACPe,EAAO,qBAAK1D,UAAU,qBACJ,SAAX2C,EACPe,EAAO,qBAAK1D,UAAU,iBACJ,WAAX2C,IACPe,EAAO,qBAAK1D,UAAU,oBAG1B,MAAsBP,mBAAS,MAA/B,mBAAOkE,EAAP,KAAYC,EAAZ,KACA,EAA0BnE,mBAAS,MAAnC,mBAAOoE,EAAP,KAAcC,EAAd,KA6EA,OAJAC,qBAAU,WACNhB,OAIA,mCACCY,EAAM,qBAAK3D,UAAU,mBAAmBM,QAtC/B,WACVsD,EAAO,MACKpF,EAAGqB,WAAW,SAASC,IAAIN,EAAMO,YAAYF,WAAW,YAAYC,IAAI+D,GAChFG,SAASC,MAAK,WACdlD,QAAQC,IAAI,uBACbkD,OAAM,SAACC,GACNpD,QAAQC,IAAI,4BAA6BmD,MAE7CpB,IACA,IAAMqB,EAAS5F,EAAGqB,WAAW,SAASC,IAAIN,EAAM8D,cAAczD,WAAW,QAAQC,IAAI+D,GACrFO,EAAOC,MAAMJ,MAAK,SAACnE,GACf,GAA+B,GAA3BA,EAAIuD,OAAJ,GAAiBjB,OACjBgC,EAAOJ,SAASC,MAAK,WACjBlD,QAAQC,IAAI,oDACbkD,OAAM,SAACC,GACNpD,QAAQC,IAAI,yCA7BxB5B,EAAQkF,IAAR,gBAAqBT,IAASG,SAC7BC,MAAK,SAACM,GACHxD,QAAQC,IAAI,yBAA0B6C,MAEzCK,OAAM,SAACC,GACJpD,QAAQC,IAAI,mBAAoB6C,MAEpCrF,EAAGqB,WAAW,SAASC,IAAI+D,GAAOG,SAASC,MAAK,WAC9ClD,QAAQC,IAAI,6BACXkD,OAAM,SAACC,GACRpD,QAAQoD,MAAM,4BAA6BA,UAsBlC,CAEH,IACIK,EAAM1E,EAAIuD,OAAJ,GACVmB,EAAIhE,OAAOgE,EAAI/D,QAAQjB,EAAMO,YAAa,GAC1CqE,EAAO1D,OAAO,CAAC+D,GAAID,IAAMP,MAAK,WAC1BlD,QAAQC,IAAI,4BACbkD,OAAM,SAACC,GACNpD,QAAQC,IAAI,0BAA2BmD,WAY5C,SAAkD,qBAAKO,GAAG,QAAQ1E,UAAU,gBAAgBC,IAAK0D,MACpG,qBAAI3D,UAAU,kBAAkBM,QA9E3B,WACTS,QAAQC,IAAI,eAAgBxB,EAAMO,YAClCvB,EAAGqB,WAAW,SACbC,IAAIN,EAAMO,YACVF,WAAW,YACXmD,QAAQ,YAAa,QACrBqB,MAAMJ,MAAK,SAACf,GAET,IADA,IAAIC,EAAI,EACDA,EAAID,EAASE,KAAKhB,QAAUc,EAASE,KAAKD,GAAGE,OAAjB,OAAoC7D,EAAM8D,cAAgBH,GAAQ,EACjGA,EAAID,EAASE,KAAKhB,QACdc,EAASE,KAAKD,GAAGE,OAAjB,OAAoC7D,EAAM8D,aACX,MAA3BJ,EAASE,KAAKD,GAAGE,SACjBO,EAAOV,EAASE,KAAKD,GAAGE,OAAjB,UACPS,EAASZ,EAASE,KAAKD,GAAGE,OAAjB,KAMjBT,EAAU,gBA2Dd,UACI,qBAAK5C,UAAU,iBAAiBC,IAAKT,EAAMmF,YAAaxE,IAAI,WAC5D,qBAAIH,UAAU,eAAd,UACI,6BAAKR,EAAMoF,cACX,sBAAK5E,UAAU,mBAAf,UACK0D,EACAD,EACQ,GAARZ,EAAY,4BAAG,cAAC,IAAD,CAAcgC,KAAMhC,EAAMiC,OAAO,YAAgB,KAChEtF,EAAMuF,WAAa,EAAI,8BAAIvF,EAAMuF,WAAYvF,EAAMwF,gBAAoB,gBCzGjFC,MAvCf,SAAkBzF,GACd,OACA,sBAAKQ,UAAU,kBAAf,UACI,cAACuB,EAAD,CACIxB,WAAYP,EAAMO,WAClB2B,UAAWlC,EAAMkC,UACjBE,SAAUpC,EAAMoC,SAChBD,MAAOnC,EAAMmC,MACbE,OAAQrC,EAAMqC,OACdG,kBAAmBxC,EAAMwC,kBACzBD,oBAAqBvC,EAAMuC,oBAC3BE,cAAezC,EAAMyC,cACrBH,iBAAkBtC,EAAMsC,iBACxBoD,cAAe1F,EAAM0F,cACrB3E,aAAcf,EAAMe,aACpB4E,UAAW3F,EAAM2F,YAErB,qBAAInF,UAAU,gBAAd,UACCR,EAAM2F,UAAY,KACnB,oBAAInF,UAAU,oBAAd,+TAKCR,EAAMwC,kBAAkBK,KAAI,SAACC,GAAD,OACzB,cAACI,EAAD,CACIY,aAAchB,EAAEG,MAChBkC,YAAarC,EAAEC,SACfqC,YAAatC,EAAEE,KACfzC,WAAYP,EAAMO,WAClBiF,aAAcxF,EAAMwF,aACpBG,UAAW3F,EAAM2F,sB,kCC/BlB,SAASC,EAAa5F,GACjC,MAAwCC,oBAAS,GAAjD,mBAAO+B,EAAP,KAAqBC,EAArB,KAWH,OACC,qCACGD,EAoBD,KAnBF,sBAAKxB,UAAU,gBAAf,UACA,qBAAKA,UAAU,YAAf,SACC,+BACC,6BACqB,SAAnBR,EAAMkC,UACP,mBAAGpB,QAASd,EAAMmC,MAAlB,qBACA,qBAAK3B,UAAU,cAAcC,IAAKT,EAAMoC,SAAUtB,QAASd,EAAMqC,OAAQ1B,IAAI,sBAG9E,6BAAI,8CAGN,qBAAKH,UAAU,YAAf,SACE,+BACC,6BAAI,mBAAGM,QA1BiB,WAC3Bd,EAAMsC,mBACNL,GAAgB,IAwBT,0BACJ,6BAAI,mDAKLD,GAA6C,MAA7BhC,EAAMuC,qBACG,MAA3BvC,EAAMwC,mBAAoD,MAAvBxC,EAAMyC,cACzC,sBAAKjC,UAAU,cAAf,UACC,sBAAKA,UAAU,aAAf,UACC,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,mBAAGM,QAhCb,WAC3Bd,EAAMsC,mBACNL,GAAgB,IA8BqB,SAAiC,8CACpE,qBAAKzB,UAAU,YAAf,SAA2B,+CAC3B,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,4BAAG,iDAEvC,sBAAKA,UAAU,WAAf,UACC,qBAAKA,UAAU,aAAf,SAA4B,uBAAOkC,KAAK,SAASC,YAAY,mBAC7D,qBAAKnC,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,wBAAsCR,EAAMuC,oBAAoBK,OAAhE,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMuC,oBAAoBM,KAAI,SAACC,GAAD,OAC9B,cAACpB,EAAD,CACCC,aAAcmB,EAAEC,SAChBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,MACrBpC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI1B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,sBAAoCR,EAAMwC,kBAAkBI,OAA5D,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMwC,kBAAkBK,KAAI,SAACC,GAAD,OAC5B,cAAC/C,EAAD,CACCW,WAAYoC,EAAEC,SACdnC,YAAakC,EAAEE,KACfnC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI1B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,uBAAqCR,EAAMyC,cAAcG,OAAzD,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMyC,cAAcI,KAAI,SAACC,GAAD,OACxB,cAAChB,EAAD,CAAUH,aAAcmB,EAAEC,SACzBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,aAGvB,qBAAKzC,UAAU,qBAKd,QClFU,SAASqF,EAAO7F,GAE3B,MAAkCC,mBAAS,IAA3C,mBAAOqB,EAAP,KAAkBwE,EAAlB,KACA,EAA0B7F,mBAAS,MAAnC,mBAAO8F,EAAP,KAAcC,EAAd,KACA,EAAgC/F,mBAAS,QAAzC,mBAAOgG,EAAP,KACA,GADA,KAC4BhG,mBAAS,WAArC,mBAAOiG,EAAP,KAAeC,EAAf,KACMC,EAAYC,IAAMC,OAAO,MAC/B,EAAsCrG,mBAAS,GAAG,GAAlD,mBAAoBsG,GAApB,WACA,EAAwCtG,oBAAS,GAAjD,mBAAO+B,EAAP,KAAqBC,EAArB,KAEMuE,EAAO,WACTR,EAAS,MACTG,EAAU,UACV,IAAMM,EAAOxH,IAASU,OAAO+G,YACvBxB,EAAKyB,cACP1D,EAAQwD,EAAKxD,MACbD,EAAOyD,EAAKG,YAEhBC,EAAWvF,EAGQ1B,EAAQkF,IAAR,gBAAqBI,IAAM4B,UAAUf,EAAO,YAClDgB,GACX,iBACA,SAAArD,OACA,SAAAiB,GACEpD,QAAQC,IAAImD,MAEd,WACE/E,EACCkF,IAAI,SACJkC,MAAM9B,GACN+B,iBACAxC,MAAK,SAAAM,GACJ8B,EAASK,SAAQ,SAAAC,GACfnI,EAAGqB,WAAW,SAASC,IAAI6G,GAAW9G,WAAW,YAAYC,IAAI4E,GAAIkC,IAAI,CACvEC,SAAUtC,EACVG,GAAIA,EACJjC,MAAOA,EACPD,KAAMA,EACNsE,UAvBM,yHAwBNC,MAAM,EACNC,UAAWvI,IAASS,UAAU+H,WAAWC,oBAE3CnG,QAAQC,IAAI,oBAGhBxC,EAAGqB,WAAW,SAASC,IAAI2C,GAAO5C,WAAW,QAAQC,IAAI4E,GAAIkC,IAAI,CAC/DlC,GAAIA,EACJjC,MAAOA,EACPuE,UAAWvI,IAASS,UAAU+H,WAAWC,kBACzCzC,GAAI4B,OAGRf,EAAa,KAgBb6B,EAAUtB,IAAMuB,aACpB,WAEE,IAAMzD,EAAMiC,EAAUyB,QAAQC,gBAC9B9B,EAAS7B,GACTgC,EAAU,cAEZ,CAACC,IAsCH,OAzBA7B,qBAAU,WACJvE,EAAM+H,OAGRxB,EAAe,EAAE,IAUjBA,EAAe,GAAG,MAYpB,mCACA,sBAAK/F,UAAU,gBAAf,UACA,cAAC,IAAD,CACI0E,GAAG,eACH1E,UAAU,gBACVsE,IAAKsB,EACL4B,OAAO,EACPC,UAAU,EACVC,2BAA2B,EAC3BC,iBAAiB,YACjBC,kBAAmB,EACnBC,iBAAkB,CAACC,WAAYrC,KAGvB,WAAVC,EAEA,sBAAK1F,UAAU,iBAAf,UACE,cAACoF,EAAD,CACErF,WAAYP,EAAMO,WAClB2B,UAAWlC,EAAMkC,UACjBE,SAAUpC,EAAMoC,SAChBD,MAAOnC,EAAMmC,MACbE,OAAQrC,EAAMqC,OACdG,kBAAmBxC,EAAMwC,kBACzBD,oBAAqBvC,EAAMuC,oBAC3BE,cAAezC,EAAMyC,cACrBH,iBAAkBtC,EAAMsC,iBACxBoD,cAAe1F,EAAM0F,cACrB3E,aAAcf,EAAMe,aACpB4E,UAAW3F,EAAM2F,YAGnB,qBAAKnF,UAAU,gBAAf,SACE,qBAAKA,UAAU,YAAf,SACE,+BACE,6BAAI,2CACJ,6BAAI,mBAAGM,QAAS6G,EAAZ,uBACJ,6BAAI,oDAQd,KAEW,aAAVzB,GAAwBH,EACzB,sBAAKvF,UAAU,mBAAf,UACE,qBAAKA,UAAU,gBAAf,SAA+B,qBAAK0E,GAAG,eAAe1E,UAAU,gBAAgBC,IAAKsF,MACrF,sBAAKvF,UAAU,kBAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,qBAAKA,UAAU,cAAf,SACE,6BACE,6BAAI,wBAAQA,UAAU,OAAOM,QAjH3B,WACVkF,EAAS,MACTG,EAAU,WA+GE,yBAGR,qBAAK3F,UAAU,eAAf,SACE,+BACE,6BAAI,4CACJ,6BAAI,4CACJ,6BAAI,4CACJ,6BAAI,oDAIV,sBAAKA,UAAU,kBAAf,UACE,qBAAKA,UAAU,cAAf,SACE,6BACE,6BAAI,gDAGR,qBAAKA,UAAU,eAAf,SACE,6BACE,6BAAI,wBAAQA,UAAU,UAAUM,QAhI5B,WACdqF,EAAU,YA+HI,oCAOd,KAEW,YAAVD,GAAuBH,EAkBxB,qCACG/D,EA8CD,KA7CF,sBAAKxB,UAAU,kBAAf,UACE,qBAAKA,UAAU,iBAAf,SACE,+BACE,6BAAI,wBAAQM,QA5JJ,WACdqF,EAAU,aA2JA,uBACJ,6BAAI,yCACJ,6BAAI,mBAAGrF,QAhJa,WAC1Bd,EAAMsC,mBACNL,GAAgB,IA8IN,+BAGR,sBAAKzB,UAAU,YAAf,UACE,qBAAKA,UAAU,iBAAf,SAAgC,2CAChC,oBAAIA,UAAU,0BAAd,SACE,4CAEF,qBAAKA,UAAU,iBAAf,SAAgC,gDAChC,oBAAIA,UAAU,4BAYd,qBAAKA,UAAU,iBAAf,SAAgC,2CAChC,oBAAIA,UAAU,0BAAd,SACGR,EAAMwC,kBAAkBK,KAAI,SAACC,GAAD,OAC3B,cAAC3B,EAAD,CACEG,UAAWA,EACXZ,WAAYoC,EAAEC,SACdnC,YAAakC,EAAEE,KACfnC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,2BAKhC,qBAAKiG,UAAU,iBAAf,UACGjH,EAAUsB,OAAc,wBAAQ9B,QAAS0F,EAAjB,wBAI3BxE,GAA6C,MAA7BhC,EAAMuC,qBACG,MAA3BvC,EAAMwC,mBAAoD,MAAvBxC,EAAMyC,cACzC,sBAAKjC,UAAU,cAAf,UACE,sBAAKA,UAAU,aAAf,UACE,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,mBAAGM,QAxLhB,WAC1Bd,EAAMsC,mBACNL,GAAgB,IAsLuB,SAAiC,8CACpE,qBAAKzB,UAAU,YAAf,SAA2B,+CAC3B,qBAAKA,UAAU,YAAf,SAA2B,6BAAI,6BAAI,4BAAG,iDAExC,sBAAKA,UAAU,WAAf,UACE,qBAAKA,UAAU,aAAf,SAA4B,uBAAOkC,KAAK,SAASC,YAAY,mBAC7D,qBAAKnC,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,wBAAsCR,EAAMuC,oBAAoBK,OAAhE,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMuC,oBAAoBM,KAAI,SAACC,GAAD,OAC7B,cAACpB,EAAD,CACEC,aAAcmB,EAAEC,SAChBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,MACrBpC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI5B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,sBAAoCR,EAAMwC,kBAAkBI,OAA5D,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMwC,kBAAkBK,KAAI,SAACC,GAAD,OAC3B,cAAC/C,EAAD,CACEW,WAAYoC,EAAEC,SACdnC,YAAakC,EAAEE,KACfnC,gBAAiBiC,EAAEG,MACnBlC,aAAcf,EAAMe,aACpBR,WAAYP,EAAMO,WAClB+B,iBAAkBtC,EAAMsC,wBAI5B,qBAAK9B,UAAU,mBAAf,SAAkC,qBAAIA,UAAU,YAAd,uBAAqCR,EAAMyC,cAAcG,OAAzD,SAClC,oBAAIpC,UAAU,0BAAd,SACCR,EAAMyC,cAAcI,KAAI,SAACC,GAAD,OACvB,cAAChB,EAAD,CAAUH,aAAcmB,EAAEC,SACxBnB,cAAekB,EAAEE,KACjBnB,kBAAmBiB,EAAEG,aAGzB,qBAAKzC,UAAU,qBAKjB,QAGF,U,WCxTAgI,EAA6BC,uBAAaC,KAC5CC,EAAc,yHACdC,EAAa,CACf3F,MAAO,iCACPD,KAAK,QACLD,SAAU4F,EACVnD,aAAa,eACbqD,UAAW,EACXC,cAAe,EACf1I,QAAS,CAAC,mCAoNG2I,E,kDA/Mb,WAAY/I,GAAQ,IAAD,8BACjB,cAAMA,IA0BRgJ,WAAa,WACP,EAAKC,MAAMC,MAAQ,EAAKD,MAAME,OAChC,EAAKC,SAAS,CACZrB,QAAO,IAGT,EAAKqB,SAAS,CACZrB,QAAO,KAlCM,EAuCnB7G,OAAS,WACP,EAAKkI,SAAS,CACZF,MAAOG,OAAOC,WACdH,OAAQE,OAAOE,aAEjB,EAAKP,eA5CY,EAkDnB7G,MAAQ,WACNxC,EAAK6J,gBAAgB3J,GACpB4E,MAAK,SAACgF,GACL,EAAKL,SAAS,CACVzD,WAAW,EACXzD,UAAWuH,EAAOhD,KAAKG,YACvBrG,WAAYkJ,EAAOhD,KAAKxD,MACxBb,SAAUqH,EAAOhD,KAAK1D,SACtB2G,aAAc,CAACD,EAAOhD,KAAKxD,QAC5B,EAAKX,qBAEToC,OAAM,SAACC,GAAD,OAAWpD,QAAQC,IAAImD,EAAMgF,aA7DnB,EA+DnBtH,OAAS,WACPpD,IAASU,OAAOiK,UAChB,EAAKR,SAAS,CACVzD,WAAW,EACXH,aAAc,eACdtD,UAAW,QACX3B,WAAY,QACZiC,kBAAmB,CAACoG,GACpBrG,oBAAqB,CAACqG,GACtBnG,cAAe,CAACmG,GAChBxG,SAAU,4HAzEG,EA4EnByH,WAAa,WACX5K,IAASU,OAAOmK,mBAAmB,SAASrD,GACpCA,GACAsD,KAAKX,SAAS,CACVlH,UAAWuE,EAAKG,YAChBrG,WAAYkG,EAAKxD,MACjBb,SAAUqE,EAAK1D,SACf4C,WAAW,GACZoE,KAAKzH,mBAGd0H,KAViC,kBA7ElB,EAyFpB1H,iBAAmB,WAEa,SAAzB,EAAK2G,MAAM1I,YACEvB,EAAGqB,WAAW,SAASC,IAAI,EAAK2I,MAAM1I,YAC9CsE,MAAMJ,MAAK,SAACnE,GACVA,EAAI2J,OAiBP,EAAKb,SAAS,CACZM,aAAcpJ,EAAIuD,OAAJ,QACdgF,UAAWvI,EAAIuD,OAAJ,UACXiF,cAAexI,EAAIuD,OAAJ,cACf2B,aAAclF,EAAIuD,OAAJ,cACb,EAAK6B,gBApBR1G,EAAGqB,WAAW,SAASC,IAAI,EAAK2I,MAAM1I,YAAY6G,IAAI,CAClDnE,MAAO,EAAKgG,MAAM1I,WAClByC,KAAM,EAAKiG,MAAM/G,UACjBa,SAAU,EAAKkG,MAAM7G,SACrBoD,aAAc,EAAKyD,MAAMzD,aACzBqD,UAAW,EACXC,cAAe,EACf1I,QAAS,CAAC,EAAK6I,MAAM1I,cAExBmE,OAAM,SAACC,GACJpD,QAAQC,IAAI,qCAAsCmD,MAEtD,EAAKe,oBAWRhB,OAAM,SAACC,GACNpD,QAAQC,IAAI,0BAA2BmD,OAxH5B,EA4HnBe,cAAgB,WACd,IAAIwE,EAAe,GACfC,EAAiB,GACjBC,EAAgB,GAChBC,EAAW,EACXC,EAAgB,EAChBC,EAAe,EACJvL,EAAGqB,WAAW,SACtBwE,MAAMJ,MAAK,SAACnE,GACf,IAAK,IAAIqD,EAAE,EAAEA,EAAErD,EAAIsD,KAAKhB,OAAOe,IACvB,EAAKsF,MAAMS,aAAac,SAASlK,EAAIsD,KAAKD,GAAGE,OAAZ,QACjCqG,EAAaG,GAAY/J,EAAIsD,KAAKD,GAAGE,OACrCwG,GAAsB,IAEtBF,EAAeG,GAAiBhK,EAAIsD,KAAKD,GAAGE,OAC5CyG,GAAgC,GAEpCF,EAAcG,GAAgBjK,EAAIsD,KAAKD,GAAGE,OAC1C0G,GAA8B,EAElC,EAAKnB,SAAS,CACV5G,kBAAmB0H,EACnB3H,oBAAqB4H,EACrB1H,cAAe2H,QAjJvB,EAAKnB,MAAQ,CAEXwB,MAAO,EACPtB,OAAQE,OAAOE,YACfL,MAAOG,OAAOC,WACdvB,QAAQ,EAIRpC,WAAW,EACXnD,kBAAmB,CAACoG,GACpBrG,oBAAqB,CAACqG,GACtBnG,cAAe,CAACmG,GAEhBrI,WAAY,QACZ2B,UAAW,QACXE,SAAUuG,EACVnD,aAAc,eACdqD,UAAW,EACXC,cAAe,EACfY,aAAc,CAAC,eAEjBL,OAAOqB,iBAAiB,SAAU,EAAKxJ,QAxBtB,E,qDAuJnB,WACI6I,KAAKF,aACLE,KAAKf,e,oBAIT,WACE,OACE,eAACR,EAAD,CAA4BmC,mBAAiB,EAACC,MAAOC,OAAOC,OAAO,CAAC5B,MAAOa,KAAKd,MAAMC,MAAOC,OAAQY,KAAKd,MAAME,OAAQ4B,SAAU,WAAYC,IAAK,KAAMC,KAAM,OAA/J,UACE,sBAAKL,MAAOC,OAAOC,OAAO,CAACI,gBAAiB,QAASC,UAAW,QAASjC,MAAO,SAAhF,UACE,cAACkC,EAAA,EAAD,UACE,sBAAMpI,KAAK,WAAWqI,QAAQ,uGAEhC,cAAC,EAAD,CACE9K,WAAYwJ,KAAKd,MAAM1I,WACvB2B,UAAW6H,KAAKd,MAAM/G,UACtBE,SAAU2H,KAAKd,MAAM7G,SACrBI,kBAAmBuH,KAAKd,MAAMzG,kBAC9BD,oBAAqBwH,KAAKd,MAAM1G,oBAChCE,cAAesH,KAAKd,MAAMxG,cAC1BkD,UAAWoE,KAAKd,MAAMtD,UACtBxD,MAAO4H,KAAK5H,MAAM6H,KAAKD,MACvB1H,OAAQ0H,KAAK1H,OAAO2H,KAAKD,MACzBzH,iBAAkByH,KAAKzH,iBAAiB0H,KAAKD,MAC7CrE,cAAeqE,KAAKrE,cAAcsE,KAAKD,MACvChJ,aAAcgJ,KAAKd,MAAMS,aACzBlE,aAAcuE,KAAKd,MAAMzD,kBAG7B,qBAAKoF,MAAOC,OAAOC,OAAO,CAACI,gBAAiB,SAA5C,SAIE,cAAC,EAAD,CACE/B,OAAQY,KAAKd,MAAME,OACnBD,MAAOa,KAAKd,MAAMC,MAClBnB,OAAQgC,KAAKd,MAAMlB,OACnBxH,WAAYwJ,KAAKd,MAAM1I,WACvB2B,UAAW6H,KAAKd,MAAM/G,UACtBE,SAAU2H,KAAKd,MAAM7G,SACrBI,kBAAmBuH,KAAKd,MAAMzG,kBAC9BD,oBAAqBwH,KAAKd,MAAM1G,oBAChCE,cAAesH,KAAKd,MAAMxG,cAC1BkD,UAAWoE,KAAKd,MAAMtD,UACtBxD,MAAO4H,KAAK5H,MAAM6H,KAAKD,MACvB1H,OAAQ0H,KAAK1H,OAAO2H,KAAKD,MACzBzH,iBAAkByH,KAAKzH,iBAAiB0H,KAAKD,MAC7CrE,cAAeqE,KAAKrE,cAAcsE,KAAKD,MACvChJ,aAAcgJ,KAAKd,MAAMS,wB,GAxMnBrD,IAAMiF,WCvBxBC,IAASC,OACP,cAAC,EAAD,IACAC,SAASC,eAAe,W","file":"static/js/main.6f3c7e64.chunk.js","sourcesContent":["import firebase from 'firebase/app';\nimport 'firebase/auth';        // for authentication\nimport 'firebase/storage';     // for storage\nimport 'firebase/database';    // for realtime database\nimport 'firebase/firestore';   // for cloud firestore\nimport 'firebase/messaging';   // for cloud messaging\nimport 'firebase/functions';   // for cloud functions\n\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE\",\n  authDomain: \"ghost-f8b34.firebaseapp.com\",\n  projectId: \"ghost-f8b34\",\n  storageBucket: \"ghost-f8b34.appspot.com\",\n  messagingSenderId: \"838623299070\",\n  appId: \"1:838623299070:web:b73429fee525b7c01cacaf\",\n  measurementId: \"G-85ZG5FVKQ4\"\n};\n\nconst firebaseApp = firebase.initializeApp(firebaseConfig);\nconst db = firebaseApp.firestore();\nconst auth = firebase.auth();\nconst storage = firebase.storage();\n// Google auth as a provider for this app, the popup\nconst provider = new firebase.auth.GoogleAuthProvider();\n\nexport { db, auth, storage, provider };","import React, { Component, useState, useEffect } from 'react';\nimport {db} from './Firebase.js';\nimport './Messages.css';\n\nfunction Friends(props) {\n\n\tconst [removed, setRemoved] = useState(false);\n\tconst friends = db.collection(\"users\").doc(props.user_email);\n\n\tconst remove_friend = () => {\n\n\t\tprops.friends_list.splice(props.friends_list.indexOf(props.friend_username), 1)\n\t\tfriends.update({friends: props.friends_list})\n\n\t}\n\tconst remove = () => {\n\t\tif (props.friend_username != \"Guest@project-yellow-ghost.com\") {\n\t\t\tremove_friend();\n\t\t}\n\t\tsetRemoved(true);\n\t}\n\n    return (\n        <li className=\"add-friends-content\">\n\t\t\t\t\t\t<div className=\"add-box-1\">\n\t\t\t\t\t\t<img className=\"message-avatar\" src={props.friend_pic} alt=\"Avatar\"/>\n\t\t\t\t\t\t<ul className=\"message-info\">\n\t\t\t\t\t\t\t\t<h3>{props.friend_name}</h3>\n\t\t\t\t\t\t\t\t<p>{props.friend_username}</p>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"add-box-2\">\n\t\t\t\t\t\t{removed ? <p className=\"removed\"><b>Removed!</b></p> : <button onClick={remove}><b>Remove</b></button>}\n\t\t\t\t\t\t</div>\n        </li>\n    )\n}\n\nfunction SendFriends(props) {\n\n\tconst [added, setAdded] = useState(false);\n\tconst friends = db.collection(\"users\").doc(props.user_email);\n\t// const remove_friend = () => {\n\n\t// \tprops.friends_list.splice(props.friends_list.indexOf(props.friend_username), 1)\n\t// \tfriends.update({friends: props.friends_list})\n\n\t// }\n\t// const remove = () => {\n\t// \tif (props.friend_username != \"Guest@project-yellow-ghost.com\") {\n\t// \t\tremove_friend();\n\t// \t}\n\t// \tsetRemoved(true);\n\t// }\n\tconst add_friend = () => {\n\t\tsetAdded(true);\n\t\tprops.send_list.push(props.friend_username);\n\t\tconsole.log(props.send_list);\n\t}\n\tconst remove_friend = () => {\n\t\tsetAdded(false);\n\t\tprops.send_list.splice(props.send_list.indexOf(props.friend_username), 1)\n\t\tconsole.log(props.send_list);\n\t}\n\n    return (\n        <li className=\"add-friends-content\">\n\t\t\t\t\t\t<div className=\"add-box-1\">\n\t\t\t\t\t\t<img className=\"message-avatar\" src={props.friend_pic} alt=\"Avatar\"/>\n\t\t\t\t\t\t<ul className=\"message-info\">\n\t\t\t\t\t\t\t\t<h3>{props.friend_name}</h3>\n\t\t\t\t\t\t\t\t<p>{props.friend_username}</p>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"add-box-2\">\n\t\t\t\t\t\t{added ? <button className=\"selected\" onClick={remove_friend}></button> : <button className=\"unselected\" onClick={add_friend}></button>}\n\t\t\t\t\t\t</div>\n        </li>\n    )\n}\n\nfunction Strangers(props) {\n\n\n\tconst [added, setAdded] = useState(false);\n\tconst friends = db.collection(\"users\").doc(props.user_email);\n\t\n\tconst add_friend = () => {\n\t\tprops.friends_list.push(props.stranger_username);\n\t\tfriends.update({friends: props.friends_list})\n\t}\n\n\tconst add_true = () => {\n\t\tif (props.friend_username != \"Guest@project-yellow-ghost.com\") {\n\t\t\tadd_friend();\n\t\t}\n\t\tsetAdded(true);\n\t}\n\n   return (\n\t   <li className=\"add-friends-content\">\n\t\t\t\t\t   <div className=\"add-box-1\">\n\t\t\t\t\t   <img className=\"message-avatar\" src={props.stranger_pic} alt=\"Avatar\"/>\n\t\t\t\t\t   <ul className=\"message-info\">\n\t\t\t\t\t\t\t   <h3>{props.stranger_name}</h3>\n\t\t\t\t\t\t\t   <p>{props.stranger_username}</p>\n\t\t\t\t\t   </ul>\n\t\t\t\t\t   </div>\n\t\t\t\t\t   <div className=\"add-box-2\">\n\t\t\t\t\t\t   {added ? <p className=\"added\"><b>Added!</b></p> : <button onClick={add_true}><b>Add</b></button>}\n\t\t\t\t\t   </div>\n\t   </li>\n   )\n}\n\nfunction Everyone(props) {\n\n   return (\n\t   <li className=\"add-friends-content\">\n\t\t\t\t\t   <div className=\"add-box-1\">\n\t\t\t\t\t   <img className=\"message-avatar\" src={props.stranger_pic} alt=\"Avatar\"/>\n\t\t\t\t\t   <ul className=\"message-info\">\n\t\t\t\t\t\t\t   <h3>{props.stranger_name}</h3>\n\t\t\t\t\t\t\t   <p>{props.stranger_username}</p>\n\t\t\t\t\t   </ul>\n\t\t\t\t\t   </div>\n\t\t\t\t\t   <div className=\"add-box-2\">\n\t\t\t\t\t   </div>\n\t   </li>\n   )\n}\nexport {SendFriends, Friends, Strangers, Everyone}","import React, { Component, useState, useEffect } from 'react';\nimport {Friends, Strangers, Everyone} from './Friends.js';\nimport './Messages.css';\n\nexport default function MessagesNavbar(props) {\n\tconst [show_friends, setShow_Friends] = useState(false);\n\n\tconst show_friends_button = () => {\n\t\tprops.get_friends_list();\n\t\tsetShow_Friends(true);\n\t}\n\tconst hide_friends_button = ()=> {\n\t\tprops.get_friends_list();\n\t\tsetShow_Friends(false);\n\t}\n\n\treturn (\n\t\t<>\n\t\t{ !show_friends ? \n\t\t<div className=\"navbar\">\n\t\t<div className=\"nav-box-1\">\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t{props.user_name == \"Guest\" ?\n\t\t\t\t\t<a onClick={props.login}>Sign In</a> :\n\t\t\t\t\t<img className=\"profile-pic\" src={props.user_pic} onClick={props.logout} alt=\"Profile Picture\" />\n\t\t\t\t\t}\n\t\t\t\t</li>\n\t\t\t\t<li><a>Search</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div className=\"nav-box-2\">\n\t\t\t<h1>Chat</h1>\n\t\t</div>\n\t\t<div className=\"nav-box-3\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a onClick={show_friends_button}>Add Friend</a></li>\n\t\t\t\t\t<li><a>New Chat</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t: null}\n\t\t{ show_friends && props.user_strangers_dict != null &&\n\t\tprops.user_friends_dict != null && props.everyone_dict != null ?\n\t\t<div className=\"add-friends\">\n\t\t\t<div className=\"add-navbar\">\n\t\t\t\t<div className=\"nav-box-1\"><ul><li><a onClick={hide_friends_button}><b>Close</b></a></li></ul></div>\n\t\t\t\t<div className=\"nav-box-2\"><h1>Add Friends</h1></div>\n\t\t\t\t<div className=\"nav-box-3\"><ul><li><a><b>. . .</b></a></li></ul></div>\n\t\t\t</div>\n\t\t\t<div className=\"add-body\">\n\t\t\t\t<div className=\"search-bar\"><input type=\"search\" placeholder=\"Find Friends\"></input></div>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Quick Add ({props.user_strangers_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.user_strangers_dict.map((x) => (\n\t\t\t\t\t<Strangers \n\t\t\t\t\t\tstranger_pic={x.photoURL} \n\t\t\t\t\t\tstranger_name={x.name}\n\t\t\t\t\t\tstranger_username={x.email}\n\t\t\t\t\t\tfriend_username={x.email}\n\t\t\t\t\t\tfriends_list={props.friends_list} \n\t\t\t\t\t\tuser_email={props.user_email}\n\t\t\t\t\t\tget_friends_list={props.get_friends_list}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Friends ({props.user_friends_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.user_friends_dict.map((x) => (\n\t\t\t\t\t<Friends \n\t\t\t\t\t\tfriend_pic={x.photoURL} \n\t\t\t\t\t\tfriend_name={x.name} \n\t\t\t\t\t\tfriend_username={x.email} \n\t\t\t\t\t\tfriends_list={props.friends_list}\n\t\t\t\t\t\tuser_email={props.user_email}  \n\t\t\t\t\t\tget_friends_list={props.get_friends_list}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Everyone ({props.everyone_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.everyone_dict.map((x) => (\n\t\t\t\t\t<Everyone stranger_pic={x.photoURL}\n\t\t\t\t\t\tstranger_name={x.name} \n\t\t\t\t\t\tstranger_username={x.email} \n\t\t\t\t\t/>))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-footer\">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t : null}\n\t\t</>\n\t);\n}\n","import React, { Component, useState, useEffect } from 'react';\nimport {auth, storage, db} from './Firebase.js';\nimport ReactTimeAgo from 'react-timeago';\nimport firebase from 'firebase/app';\nimport './Messages.css';\n\n/*\n * Function - Message(sender_name)\n * @sender_name: Name of person who sent the image\n * Return: Loaded images requested from Firebase\n * \n * Description:\n * A request (/post/current_user/) is sent to Firebase to get current_user's received images.\n*/\n\nexport default function Message(props) {\n\n    // Check Firebase if user has any new messages\n\n    const [status, setStatus] = useState(\"Received\");\n    const [time, setTime] = useState(0);\n    const [imgArr, setImgArr] = useState([]);\n\n    const update_messages = () => {\n        db.collection('posts')\n        .doc(props.user_email)\n        .collection(\"Received\")\n        .orderBy(\"timeStamp\", \"desc\")\n        .onSnapshot((snapshot) => {\n            var i = 0;\n            // Filters out all the photos sent by the sender\n            while (i < snapshot.docs.length && snapshot.docs[i].data()[\"email\"] != props.sender_email) { i = i + 1; }\n            if (i < snapshot.docs.length) {\n                if (snapshot.docs[i].data()[\"email\"] == props.sender_email) {\n                    setStatus(\"New Snap\");\n                    if (snapshot.docs[i].data()[\"timeStamp\"] != null) {\n                        setTime(snapshot.docs[i].data()[\"timeStamp\"].toDate().toUTCString());\n                    }\n                } else {\n                    setStatus(\"Received\");\n                }\n            } else {\n                setStatus(\"Received\");\n            }\n        })\n    }\n\n    var status_output = <p>{status}</p>;\n    var icon = <div className=\"message-received\"/>;\n\n    if (status === \"New Snap\"){\n        icon = <div className=\"message-new\" />\n        status_output = <p className=\"red\"><b>{status}</b></p>\n    } else if (status === \"Received\") {\n        icon = <div className=\"message-received\"/>\n    } else if (status === \"Sent\") {\n        icon = <div className=\"message-sent\"/>\n    } else if (status === \"Opened\") {\n        icon = <div className=\"message-opened\"/>\n    }\n\n    const [img, setImg] = useState(null);\n    const [imgid, setImgid] = useState(null);\n\n    const open = () => {\n        console.log(\"opening snap\", props.user_email);\n        db.collection('posts')\n        .doc(props.user_email)\n        .collection(\"Received\")\n        .orderBy(\"timeStamp\", \"desc\")\n        .get().then((snapshot) => {\n            var i = 0;\n            while (i < snapshot.docs.length && snapshot.docs[i].data()[\"email\"] != props.sender_email) { i = i + 1; }\n            if (i < snapshot.docs.length) {\n                if (snapshot.docs[i].data()[\"email\"] == props.sender_email) {\n                    if (snapshot.docs[i].data() != null) {\n                        setImg(snapshot.docs[i].data()[\"imageURL\"]);\n                        setImgid(snapshot.docs[i].data()[\"id\"]);\n                    }\n                } else {\n                    setStatus(\"Received\");\n                }\n            } else {\n                setStatus(\"Received\");\n            }\n        })\n    }\n\n    const delete_photo = () => {\n        storage.ref(`posts/${imgid}`).delete()\n        .then((url) => {\n            console.log(\"Deleted from storage: \", imgid);\n        })\n        .catch((error) => {\n            console.log(\"TRIED DELETING: \", imgid)\n        });\n        db.collection('posts').doc(imgid).delete().then(() => {\n          console.log(\"Deleted from firestore\");\n        }).catch((error) => {\n          console.error(\"Error removing document: \", error);\n        });\n      }\n\n    const close = () => {\n        setImg(null);\n        const img = db.collection('posts').doc(props.user_email).collection(\"Received\").doc(imgid);\n        img.delete().then(() => {\n            console.log(\"Document deleted\");\n        }).catch((error) => {\n            console.log(\"Error removing document: \", error);\n        })\n        update_messages();\n        const sender = db.collection('posts').doc(props.sender_email).collection(\"Sent\").doc(imgid);\n        sender.get().then((doc) => {\n            if (doc.data()[\"to\"].length == 1) {\n                sender.delete().then(() => {\n                    console.log(\"sender document deleted, everyone saw the pic\");\n                }).catch((error) => {\n                    console.log(\"Could not delete sender's document\");\n                })\n                delete_photo();\n            } else {\n                // Update list if there are other people who have to see the post\n                var i = 0;\n                var arr = doc.data()[\"to\"]\n                arr.splice(arr.indexOf(props.user_email), 1)\n                sender.update({to: arr}).then(() => {\n                    console.log(\"Updated sender's list\");\n                }).catch((error) => {\n                    console.log(\"could not update list: \", error);\n                })\n            }\n        })\n    }\n\n    useEffect(() => {\n        update_messages();\n    })\n    \n    return (\n        <>\n        {img ? <div className=\"image-background\" onClick={close}><img id=\"image\" className=\"image-preview\" src={img} /></div> :\n            <li className=\"message-content\" onClick={open}>\n                <img className=\"message-avatar\" src={props.profile_url} alt=\"Avatar\"/>\n                <ul className=\"message-info\">\n                    <h3>{props.sender_name}</h3>\n                    <div className=\"message-sub-info\">\n                        {icon}\n                        {status_output}\n                        {time != 0 ? <p><ReactTimeAgo date={time} locale=\"en-US\"/></p> : null }\n                        {props.streak_num > 0 ? <p>{props.streak_num}{props.streak_emoji}</p> : null}\n                    </div>\n                </ul>\n            </li>\n        }\n        </>\n    );\n\n}\n","import React, { Component } from 'react';\nimport './Messages.css';\nimport MessagesNavbar from './MessagesNavbar';\nimport Message from './Message';\n\n\nfunction Messages(props) {\n    return (\n    <div className=\"messages-screen\">\n        <MessagesNavbar\n            user_email={props.user_email}\n            user_name={props.user_name}\n            user_pic={props.user_pic}\n            login={props.login}\n            logout={props.logout}\n            user_friends_dict={props.user_friends_dict}\n            user_strangers_dict={props.user_strangers_dict}\n            everyone_dict={props.everyone_dict}\n            get_friends_list={props.get_friends_list}\n            get_all_users={props.get_all_users}\n            friends_list={props.friends_list}\n            logged_in={props.logged_in}\n        />\n        <ul className=\"messages-list\">\n        {props.logged_in ? null :\n        <li className=\"welcome-statement\">Welcome to Project Yellow Ghost, a web app version of SnapChat. This was a project developed by Jonathan Wang\n            and this was his final project for school. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if \n            you want to start using this product. Happy Snapping!\n        </li>\n        }\n        {props.user_friends_dict.map((x) => (\n            <Message \n                sender_email={x.email} \n                profile_url={x.photoURL} \n                sender_name={x.name} \n                user_email={props.user_email}\n                streak_emoji={props.streak_emoji}\n                logged_in={props.logged_in}\n            />))\n        }\n        </ul>\n    </div>\n    );\n}\n\nexport default Messages;","import React, { Component, useState, useEffect } from 'react';\nimport {Friends, Strangers, Everyone} from './Friends.js';\nimport './Camera.css';\nimport './Messages.css';\nimport Camera from './Camera';\n\nexport default function CameraNavbar(props) {\n    const [show_friends, setShow_Friends] = useState(false);\n\n\tconst show_friends_button = () => {\n\t\tprops.get_friends_list();\n\t\tsetShow_Friends(true);\n\t}\n\tconst hide_friends_button = ()=> {\n\t\tprops.get_friends_list();\n\t\tsetShow_Friends(false);\n\t}\n\n\treturn (\n\t\t<>\n\t\t{ !show_friends ? \n\t\t<div className=\"webcam-navbar\">\n\t\t<div className=\"nav-box-1\">\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\t{props.user_name == \"Guest\" ?\n\t\t\t\t\t<a onClick={props.login}>Sign In</a> :\n\t\t\t\t\t<img className=\"profile-pic\" src={props.user_pic} onClick={props.logout} alt=\"Profile Picture\" />\n\t\t\t\t\t}\n\t\t\t\t</li>\n\t\t\t\t<li><a>Search</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t\t<div className=\"nav-box-3\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li><a onClick={show_friends_button}>Add Friend</a></li>\n\t\t\t\t\t<li><a>New Chat</a></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t\t: null}\n\t\t{ show_friends && props.user_strangers_dict != null &&\n\t\tprops.user_friends_dict != null && props.everyone_dict != null ?\n\t\t<div className=\"add-friends\">\n\t\t\t<div className=\"add-navbar\">\n\t\t\t\t<div className=\"nav-box-1\"><ul><li><a onClick={hide_friends_button}><b>Close</b></a></li></ul></div>\n\t\t\t\t<div className=\"nav-box-2\"><h1>Add Friends</h1></div>\n\t\t\t\t<div className=\"nav-box-3\"><ul><li><a><b>. . .</b></a></li></ul></div>\n\t\t\t</div>\n\t\t\t<div className=\"add-body\">\n\t\t\t\t<div className=\"search-bar\"><input type=\"search\" placeholder=\"Find Friends\"></input></div>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Quick Add ({props.user_strangers_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.user_strangers_dict.map((x) => (\n\t\t\t\t\t<Strangers \n\t\t\t\t\t\tstranger_pic={x.photoURL} \n\t\t\t\t\t\tstranger_name={x.name}\n\t\t\t\t\t\tstranger_username={x.email}\n\t\t\t\t\t\tfriend_username={x.email}\n\t\t\t\t\t\tfriends_list={props.friends_list} \n\t\t\t\t\t\tuser_email={props.user_email}\n\t\t\t\t\t\tget_friends_list={props.get_friends_list}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Friends ({props.user_friends_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.user_friends_dict.map((x) => (\n\t\t\t\t\t<Friends \n\t\t\t\t\t\tfriend_pic={x.photoURL} \n\t\t\t\t\t\tfriend_name={x.name} \n\t\t\t\t\t\tfriend_username={x.email} \n\t\t\t\t\t\tfriends_list={props.friends_list}\n\t\t\t\t\t\tuser_email={props.user_email}  \n\t\t\t\t\t\tget_friends_list={props.get_friends_list}\n\t\t\t\t\t/>))\n\t\t\t\t}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-title-navbar\"><h3 className=\"quick-add\">Everyone ({props.everyone_dict.length})</h3></div>\n\t\t\t\t<ul className=\"add-list list-container\">\n\t\t\t\t{props.everyone_dict.map((x) => (\n\t\t\t\t\t<Everyone stranger_pic={x.photoURL}\n\t\t\t\t\t\tstranger_name={x.name} \n\t\t\t\t\t\tstranger_username={x.email} \n\t\t\t\t\t/>))}\n\t\t\t\t</ul>\n\t\t\t\t<div className=\"add-footer\">\n\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t : null}\n\t\t</>\n\t);\n}\n","import React, { Component, useEffect, useState } from 'react';\nimport Webcam from \"react-webcam\";\nimport { v4 as uuid } from \"uuid\";\nimport './Camera.css';\nimport {SendFriends, Friends, Strangers, Everyone} from './Friends.js';\nimport {storage, db} from './Firebase.js';\nimport firebase from 'firebase/app';\nimport CameraNavbar from './CameraNavbar';\n\nexport default function Camera(props) {\n\n    const [send_list, setSend_list] = useState([])\n    const [image, setImage] = useState(null);\n    const [faceMode, setFaceMode] = useState(\"user\");\n    const [screen, setScreen] = useState(\"camera\");\n    const webcamRef = React.useRef(null);\n    const [aspectRatio, setAspectRatio] = useState(16/9);\n    const [show_friends, setShow_Friends] = useState(false);\n\n    const send = () => {\n        setImage(null);\n        setScreen('camera');\n        const user = firebase.auth().currentUser;\n        const id = uuid();\n        var email = user.email;\n        var name = user.displayName;\n        var avatarURL = \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\";\n\t\t\t\tvar to_users = send_list;\n        var promises = [];\n        var url = \"\";\n        const uploadTask = storage.ref(`posts/${id}`).putString(image, 'data_url');\n          uploadTask.on(\n          \"state_changed\",\n          snapshot => {},\n          error => {\n            console.log(error);\n          },\n          () => {\n            storage\n            .ref(\"posts\")\n            .child(id)\n            .getDownloadURL()\n            .then(url => {\n              to_users.forEach(user_temp => {\n                db.collection('posts').doc(user_temp).collection(\"Received\").doc(id).set({\n                  imageURL: url,\n                  id: id,\n                  email: email,\n                  name: name,\n                  avatarURL: avatarURL,\n                  read: false,\n                  timeStamp: firebase.firestore.FieldValue.serverTimestamp(),\n                })\n                console.log(\"Photo Sent\");\n              })\n            })\n            db.collection('posts').doc(email).collection(\"Sent\").doc(id).set({\n              id: id,\n              email: email,\n              timeStamp: firebase.firestore.FieldValue.serverTimestamp(),\n              to: to_users,\n            })\n          })\n          setSend_list([]);\n    }\n\n    const close = () => {\n        setImage(null);\n        setScreen(\"camera\");\n    }\n\n    const send_to = () => {\n      setScreen(\"send_to\")\n    }\n\n    const go_back = () => {\n      setScreen(\"captured\");\n    }\n\n    const capture = React.useCallback(\n      () => {\n        // const img = webcamRef.current.getScreenshot({width:props.width, height:props.height});\n        const img = webcamRef.current.getScreenshot();\n        setImage(img);\n        setScreen(\"captured\");\n      },\n      [webcamRef]\n    );\n\n    const show_friends_button = () => {\n      props.get_friends_list();\n      setShow_Friends(true);\n    }\n\n    const hide_friends_button = ()=> {\n      props.get_friends_list();\n      setShow_Friends(false);\n    }\n\n    useEffect(() => {\n      if (props.mobile) {\n        // document.querySelector(\"#imageElement\").classList.add(\"image-mobile\");\n        // document.querySelector(\"#imageElement\").classList.remove(\"image-desktop\");\n        setAspectRatio(9/16);\n        // if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n        //   setAspectRatio(16/9);\n        // } else {\n        //   setAspectRatio(9/16);\n        // }\n\n      } else {\n        // document.querySelector(\"#imageElement\").classList.add(\"image-desktop\");\n        // document.querySelector(\"#imageElement\").classList.remove(\"image-mobile\");\n        setAspectRatio(16/9);\n        // if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {\n        //   setAspectRatio(9/16);\n        // } else {\n        //   setAspectRatio(16/9);\n        // }\n      }\n    })\n\n\n\n    return (\n      <>\n      <div className=\"webcam-screen\">\n      <Webcam\n          id=\"imageElement\"\n          className=\"image-desktop\"\n          ref={webcamRef}\n          audio={false}\n          mirrored={true}\n          forceScreenshotSourceSize={false}\n          screenshotFormat=\"image/png\"\n          screenshotQuality={1}\n          videoConstraints={{facingMode: faceMode}}\n          // videoConstraints={{facingMode: faceMode, aspectRatio: aspectRatio}}\n        />\n      { screen ===\"camera\" ?\n        \n        <div className=\"webcam-overlay\">\n          <CameraNavbar\n            user_email={props.user_email}\n            user_name={props.user_name}\n            user_pic={props.user_pic}\n            login={props.login}\n            logout={props.logout}\n            user_friends_dict={props.user_friends_dict}\n            user_strangers_dict={props.user_strangers_dict}\n            everyone_dict={props.everyone_dict}\n            get_friends_list={props.get_friends_list}\n            get_all_users={props.get_all_users}\n            friends_list={props.friends_list}\n            logged_in={props.logged_in}\n          />\n\n          <div className=\"webcam-footer\">\n            <div className=\"nav-box-1\">\n              <ul>\n                <li><a>Memories</a></li>\n                <li><a onClick={capture}>Capture</a></li>\n                <li><a>Filters</a></li>\n                {/* <li><a>{props.height} x {props.width}</a></li> */}\n              </ul>\n            </div>\n          </div>\n        </div>\n      \n      :\n      null\n      }\n      {screen ===\"captured\" && image ?\n      <div className=\"captured-overlay\">\n        <div className=\"image-preview\"><img id=\"imageElement\" className=\"image-desktop\" src={image}></img></div>\n        <div className=\"buttons-overlay\">\n          <div className=\"captured-header\">\n            <div className=\"header-left\">\n              <ul>\n                <li><button className=\"send\" onClick={close}>Close</button></li>\n              </ul>\n            </div>\n            <div className=\"header-right\">\n              <ul>\n                <li><button>Text</button></li>\n                <li><button>Draw</button></li>\n                <li><button>Crop</button></li>\n                <li><button>Time</button></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"captured-footer\">\n            <div className=\"footer-left\">\n              <ul>\n                <li><button>Save</button></li>\n              </ul>\n            </div>\n            <div className=\"footer-right\">\n              <ul>\n                <li><button className=\"capture\" onClick={send_to}>Send to</button></li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n      :\n      null\n      }\n      {screen ===\"send_to\" && image  ?\n      // <div className=\"send_to-overlay\">\n      //   <div className=\"buttons-overlay\">\n      //     <div className=\"send_to-header\">\n      //       <div className=\"header-left\">\n      //         <ul>\n      //           <li><button className=\"capture\" onClick={go_back}>Go Back</button></li>\n      //         </ul>\n      //       </div>\n      //       <div className=\"header-right\">\n      //         <ul>\n      //           <li><button>Add Friend</button></li>\n      //         </ul>\n      //       </div>\n      //     </div>\n      //   </div>\n      // </div>\n\n      <>\n      { !show_friends ? \n      <div className=\"send_to-overlay\">\n        <div className=\"send_to-header\">\n          <ul>\n            <li><button onClick={go_back}>Go Back</button></li>\n            <li><a>Search</a></li>\n            <li><a onClick={show_friends_button}>Add Friend</a></li>\n          </ul>\n        </div>\n        <div className=\"send-list\">\n          <div className=\"stories-header\"><h3>Stories</h3></div>\n          <ul className=\"add-list list-container\">\n            <li>My Story</li>\n          </ul>\n          <div className=\"stories-header\"><h3>Best Friends</h3></div>\n          <ul className=\"add-list list-container\">\n            {/* {props.user_friends_dict.map((x) => (\n              <SendFriends \n                friend_pic={x.photoURL} \n                friend_name={x.name} \n                friend_username={x.email} \n                friends_list={props.friends_list}\n                user_email={props.user_email}  \n                get_friends_list={props.get_friends_list}\n              />))\n            } */}\n          </ul>\n          <div className=\"stories-header\"><h3>Recents</h3></div>\n          <ul className=\"add-list list-container\">\n            {props.user_friends_dict.map((x) => (\n              <SendFriends\n                send_list={send_list}\n                friend_pic={x.photoURL} \n                friend_name={x.name} \n                friend_username={x.email} \n                friends_list={props.friends_list}\n                user_email={props.user_email}  \n                get_friends_list={props.get_friends_list}\n              />))\n            }\n          </ul>\n        </div>\n        <div classname=\"send_to-footer\">\n          {send_list.length == 0 ? <button onClick={send}>Send</button> : <button onClick={send}>Send</button> }\n        </div>\n      </div>\n      : null}\n      { show_friends && props.user_strangers_dict != null &&\n      props.user_friends_dict != null && props.everyone_dict != null ?\n      <div className=\"add-friends\">\n        <div className=\"add-navbar\">\n          <div className=\"nav-box-1\"><ul><li><a onClick={hide_friends_button}><b>Close</b></a></li></ul></div>\n          <div className=\"nav-box-2\"><h1>Add Friends</h1></div>\n          <div className=\"nav-box-3\"><ul><li><a><b>. . .</b></a></li></ul></div>\n        </div>\n        <div className=\"add-body\">\n          <div className=\"search-bar\"><input type=\"search\" placeholder=\"Find Friends\"></input></div>\n          <div className=\"add-title-navbar\"><h3 className=\"quick-add\">Quick Add ({props.user_strangers_dict.length})</h3></div>\n          <ul className=\"add-list list-container\">\n          {props.user_strangers_dict.map((x) => (\n            <Strangers \n              stranger_pic={x.photoURL} \n              stranger_name={x.name}\n              stranger_username={x.email}\n              friend_username={x.email}\n              friends_list={props.friends_list} \n              user_email={props.user_email}\n              get_friends_list={props.get_friends_list}\n            />))\n          }\n          </ul>\n          <div className=\"add-title-navbar\"><h3 className=\"quick-add\">Friends ({props.user_friends_dict.length})</h3></div>\n          <ul className=\"add-list list-container\">\n          {props.user_friends_dict.map((x) => (\n            <Friends \n              friend_pic={x.photoURL} \n              friend_name={x.name} \n              friend_username={x.email} \n              friends_list={props.friends_list}\n              user_email={props.user_email}  \n              get_friends_list={props.get_friends_list}\n            />))\n          }\n          </ul>\n          <div className=\"add-title-navbar\"><h3 className=\"quick-add\">Everyone ({props.everyone_dict.length})</h3></div>\n          <ul className=\"add-list list-container\">\n          {props.everyone_dict.map((x) => (\n            <Everyone stranger_pic={x.photoURL}\n              stranger_name={x.name} \n              stranger_username={x.email} \n            />))}\n          </ul>\n          <div className=\"add-footer\">\n\n          </div>\n        </div>\n      </div>\n      : null}\n      </>\n      :\n      null\n      }\n      </div>\n      </>\n    );\n}\n","import React from 'react';\nimport Helmet from 'react-helmet';\nimport SwipeableViews from 'react-swipeable-views';\nimport { bindKeyboard } from 'react-swipeable-views-utils';\nimport {auth, storage, db, provider} from './Firebase.js';\nimport firebase from 'firebase/app';\n// import 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport Messages from './Messages.js';\nimport Camera from './Camera.js';\nimport { findAllByAltText } from '@testing-library/react';\n\n\n// All the firebase calls will occur here to minimize usage\n\nconst BindKeyboardSwipeableViews = bindKeyboard(SwipeableViews);\nvar default_pic = \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\"\nvar dummy_dict = {\n  email: \"Guest@project-yellow-ghost.com\",\n  name:\"Guest\",\n  photoURL: default_pic,\n  streak_emoji:\"\\u{1F525}\",\n  imgs_sent: 0,\n  imgs_received: 0,\n  friends: ['Guest@project-yellow-ghost.com'],\n}\n\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // For swiping screen\n      index: 0,\n      height: window.innerHeight,\n      width: window.innerWidth,\n      mobile: false,\n      // All for Camera\n\n      // All for Messages\n      logged_in: false,\n      user_friends_dict: [dummy_dict],\n      user_strangers_dict: [dummy_dict],\n      everyone_dict: [dummy_dict],\n      // Properties for every user on firebase\n      user_email: \"Guest\",\n      user_name: \"Guest\",\n      user_pic: default_pic,\n      streak_emoji: \"\\u{1F525}\",\n      imgs_sent: 0,\n      imgs_received: 0,\n      user_friends: [\"Guest@mail\"],\n    }\n    window.addEventListener(\"resize\", this.update);\n  }\n\n  set_device = () => {\n    if (this.state.width < this.state.height) {\n      this.setState({\n        mobile:true\n      })\n    } else {\n      this.setState({\n        mobile:false\n      })\n    }\n  }\n\n  update = () => {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight\n    },\n    this.set_device()\n    );\n  };\n\n  // For Messages Component\n\n  login = () => {\n    auth.signInWithPopup(provider)\n    .then((result) => {\n      this.setState({\n          logged_in: true,\n          user_name: result.user.displayName,\n          user_email: result.user.email,\n          user_pic: result.user.photoURL,\n          user_friends: [result.user.email],\n      }, this.get_friends_list)\n    })\n    .catch((error) => console.log(error.message));\n  }\n  logout = () => {\n    firebase.auth().signOut()\n    this.setState({\n        logged_in: false,\n        streak_emoji: \"\\u{1F525}\",\n        user_name: \"Guest\",\n        user_email: \"Guest\",\n        user_friends_dict: [dummy_dict],\n        user_strangers_dict: [dummy_dict],\n        everyone_dict: [dummy_dict],\n        user_pic: \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png\",\n    })\n  }\n  check_user = () => {\n    firebase.auth().onAuthStateChanged(function(user) {\n        if (user) {\n            this.setState({\n                user_name: user.displayName,\n                user_email: user.email,\n                user_pic: user.photoURL,\n                logged_in: true,\n            }, this.get_friends_list\n            )\n        }\n    }.bind(this))\n\t}\n\tget_friends_list = () => {\n\n    if (this.state.user_email != \"Guest\") {\n      const userdb = db.collection(\"users\").doc(this.state.user_email);\n      userdb.get().then((doc) => {\n          if (!doc.exists) {\n            // It is a new user and creates a new doc\n            db.collection(\"users\").doc(this.state.user_email).set({\n                email: this.state.user_email,\n                name: this.state.user_name,\n                photoURL: this.state.user_pic,\n                streak_emoji: this.state.streak_emoji,\n                imgs_sent: 0,\n                imgs_received: 0,\n                friends: [this.state.user_email],\n            })\n            .catch((error) => {\n                console.log(\"Couldn't write user to DB, error: \", error);\n            });\n            this.get_all_users()\n          } else {\n            // User has logged in before and has friends\n            this.setState({\n              user_friends: doc.data()[\"friends\"],\n              imgs_sent: doc.data()[\"imgs_sent\"],\n              imgs_received: doc.data()[\"imgs_received\"],\n              streak_emoji: doc.data()[\"streak_emoji\"],\n            }, this.get_all_users);\n          }\n\n      }).catch((error) => {\n          console.log(\"Error getting document:\", error);\n      });\n    }\n  }\n  get_all_users = () => {\n    var friends_meta = [];\n    var strangers_meta = [];\n    var everyone_meta = [];\n    var meta_idx = 0;\n    var strangers_idx = 0;\n    var everyone_idx = 0;\n    const sender = db.collection(\"users\");\n    sender.get().then((doc) => {\n        for (var i=0;i<doc.docs.length;i++) {\n            if (this.state.user_friends.includes(doc.docs[i].data()['email'])) {\n                friends_meta[meta_idx] = doc.docs[i].data()\n                meta_idx = meta_idx + 1;\n            } else {\n                strangers_meta[strangers_idx] = doc.docs[i].data()\n                strangers_idx = strangers_idx + 1;\n            }\n            everyone_meta[everyone_idx] = doc.docs[i].data()\n            everyone_idx = everyone_idx + 1;\n        }\n        this.setState({\n            user_friends_dict: friends_meta,\n            user_strangers_dict: strangers_meta,\n            everyone_dict: everyone_meta,\n        })\n    });\n  }\n  componentDidMount() {\n      this.check_user();\n      this.set_device();\n  }\n\n\n  render() {\n    return (\n      <BindKeyboardSwipeableViews enableMouseEvents style={Object.assign({width: this.state.width, height: this.state.height, position: 'absolute', top: '0%', left: '0%'})}>\n        <div style={Object.assign({backgroundColor: 'white', minHeight: '100vh', width: '100%'})}>\n          <Helmet>\n            <meta name=\"viewport\" content=\"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\"></meta>\n          </Helmet>\n          <Messages\n            user_email={this.state.user_email}\n            user_name={this.state.user_name}\n            user_pic={this.state.user_pic}\n            user_friends_dict={this.state.user_friends_dict}\n            user_strangers_dict={this.state.user_strangers_dict}\n            everyone_dict={this.state.everyone_dict}\n            logged_in={this.state.logged_in}\n            login={this.login.bind(this)}\n            logout={this.logout.bind(this)}\n            get_friends_list={this.get_friends_list.bind(this)}\n            get_all_users={this.get_all_users.bind(this)}\n            friends_list={this.state.user_friends}\n            streak_emoji={this.state.streak_emoji}\n          />\n        </div>\n        <div style={Object.assign({backgroundColor: 'Plum'})} >\n          {/* <Helmet>\n            <meta name=\"viewport\" content=\"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes\"></meta>\n          </Helmet> */}\n          <Camera\n            height={this.state.height}\n            width={this.state.width}\n            mobile={this.state.mobile}\n            user_email={this.state.user_email}\n            user_name={this.state.user_name}\n            user_pic={this.state.user_pic}\n            user_friends_dict={this.state.user_friends_dict}\n            user_strangers_dict={this.state.user_strangers_dict}\n            everyone_dict={this.state.everyone_dict}\n            logged_in={this.state.logged_in}\n            login={this.login.bind(this)}\n            logout={this.logout.bind(this)}\n            get_friends_list={this.get_friends_list.bind(this)}\n            get_all_users={this.get_all_users.bind(this)}\n            friends_list={this.state.user_friends}\n          />\n        </div>\n      </BindKeyboardSwipeableViews>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Router, Route, Switch } from \"react-router\";\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}