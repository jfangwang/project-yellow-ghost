/*! For license information please see main.c6e2511e.js.LICENSE.txt */
!function(){var e={7228:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},2858:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3646:function(e,t,n){var r=n(7228);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},1506:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},4575:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3913:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},3269:function(e,t,n){var r=n(379);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},9713:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},7154:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9754:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},2205:function(e,t,n){var r=n(9489);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},5318:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6860:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3884:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}},e.exports.__esModule=!0,e.exports.default=e.exports},521:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},8206:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},8585:function(e,t,n){var r=n(8).default,a=n(1506);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9489:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3038:function(e,t,n){var r=n(2858),a=n(3884),i=n(379),o=n(521);e.exports=function(e,t){return r(e)||a(e,t)||i(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},319:function(e,t,n){var r=n(3646),a=n(6860),i=n(379),o=n(8206);e.exports=function(e){return r(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},379:function(e,t,n){var r=n(7228);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},7757:function(e,t,n){e.exports=n(9727)},619:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIdentifierChar=l,t.isIdentifierName=function(e){for(var t=!0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(55296===(64512&r)&&n+1<e.length){var a=e.charCodeAt(++n);56320===(64512&a)&&(r=65536+((1023&r)<<10)+(1023&a))}if(t){if(t=!1,!c(r))return!1}else if(!l(r))return!1}return!t},t.isIdentifierStart=c;var n="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u0870-\u0887\u0889-\u088e\u08a0-\u08c9\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c5d\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cdd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d04-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u1711\u171f-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4c\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31bf\u31f0-\u31ff\u3400-\u4dbf\u4e00-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7ca\ua7d0\ua7d1\ua7d3\ua7d5-\ua7d9\ua7f2-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab69\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",r="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u0898-\u089f\u08ca-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b55-\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3c\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d81-\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u180f-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1abf-\u1ace\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf4\u1cf7-\u1cf9\u1dc0-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua82c\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",a=new RegExp("["+n+"]"),i=new RegExp("["+n+r+"]");n=r=null;var o=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],s=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239];function u(e,t){for(var n=65536,r=0,a=t.length;r<a;r+=2){if((n+=t[r])>e)return!1;if((n+=t[r+1])>=e)return!0}return!1}function c(e){return e<65?36===e:e<=90||(e<97?95===e:e<=122||(e<=65535?e>=170&&a.test(String.fromCharCode(e)):u(e,o)))}function l(e){return e<48?36===e:e<58||!(e<65)&&(e<=90||(e<97?95===e:e<=122||(e<=65535?e>=170&&i.test(String.fromCharCode(e)):u(e,o)||u(e,s))))}},5208:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isIdentifierChar",{enumerable:!0,get:function(){return r.isIdentifierChar}}),Object.defineProperty(t,"isIdentifierName",{enumerable:!0,get:function(){return r.isIdentifierName}}),Object.defineProperty(t,"isIdentifierStart",{enumerable:!0,get:function(){return r.isIdentifierStart}}),Object.defineProperty(t,"isKeyword",{enumerable:!0,get:function(){return a.isKeyword}}),Object.defineProperty(t,"isReservedWord",{enumerable:!0,get:function(){return a.isReservedWord}}),Object.defineProperty(t,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return a.isStrictBindOnlyReservedWord}}),Object.defineProperty(t,"isStrictBindReservedWord",{enumerable:!0,get:function(){return a.isStrictBindReservedWord}}),Object.defineProperty(t,"isStrictReservedWord",{enumerable:!0,get:function(){return a.isStrictReservedWord}});var r=n(619),a=n(8254)},8254:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isKeyword=function(e){return a.has(e)},t.isReservedWord=s,t.isStrictBindOnlyReservedWord=c,t.isStrictBindReservedWord=function(e,t){return u(e,t)||c(e)},t.isStrictReservedWord=u;var n=["implements","interface","let","package","private","protected","public","static","yield"],r=["eval","arguments"],a=new Set(["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"]),i=new Set(n),o=new Set(r);function s(e,t){return t&&"await"===e||"enum"===e}function u(e,t){return s(e,t)||i.has(e)}function c(e){return o.has(e)}},5310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(0,r.default)(e)){var t,n=null!=(t=null==e?void 0:e.type)?t:JSON.stringify(e);throw new TypeError('Not a valid node of type "'.concat(n,'"'))}};var r=n(9953)},9342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertAccessor=function(e,t){a("Accessor",e,t)},t.assertAnyTypeAnnotation=function(e,t){a("AnyTypeAnnotation",e,t)},t.assertArgumentPlaceholder=function(e,t){a("ArgumentPlaceholder",e,t)},t.assertArrayExpression=function(e,t){a("ArrayExpression",e,t)},t.assertArrayPattern=function(e,t){a("ArrayPattern",e,t)},t.assertArrayTypeAnnotation=function(e,t){a("ArrayTypeAnnotation",e,t)},t.assertArrowFunctionExpression=function(e,t){a("ArrowFunctionExpression",e,t)},t.assertAssignmentExpression=function(e,t){a("AssignmentExpression",e,t)},t.assertAssignmentPattern=function(e,t){a("AssignmentPattern",e,t)},t.assertAwaitExpression=function(e,t){a("AwaitExpression",e,t)},t.assertBigIntLiteral=function(e,t){a("BigIntLiteral",e,t)},t.assertBinary=function(e,t){a("Binary",e,t)},t.assertBinaryExpression=function(e,t){a("BinaryExpression",e,t)},t.assertBindExpression=function(e,t){a("BindExpression",e,t)},t.assertBlock=function(e,t){a("Block",e,t)},t.assertBlockParent=function(e,t){a("BlockParent",e,t)},t.assertBlockStatement=function(e,t){a("BlockStatement",e,t)},t.assertBooleanLiteral=function(e,t){a("BooleanLiteral",e,t)},t.assertBooleanLiteralTypeAnnotation=function(e,t){a("BooleanLiteralTypeAnnotation",e,t)},t.assertBooleanTypeAnnotation=function(e,t){a("BooleanTypeAnnotation",e,t)},t.assertBreakStatement=function(e,t){a("BreakStatement",e,t)},t.assertCallExpression=function(e,t){a("CallExpression",e,t)},t.assertCatchClause=function(e,t){a("CatchClause",e,t)},t.assertClass=function(e,t){a("Class",e,t)},t.assertClassAccessorProperty=function(e,t){a("ClassAccessorProperty",e,t)},t.assertClassBody=function(e,t){a("ClassBody",e,t)},t.assertClassDeclaration=function(e,t){a("ClassDeclaration",e,t)},t.assertClassExpression=function(e,t){a("ClassExpression",e,t)},t.assertClassImplements=function(e,t){a("ClassImplements",e,t)},t.assertClassMethod=function(e,t){a("ClassMethod",e,t)},t.assertClassPrivateMethod=function(e,t){a("ClassPrivateMethod",e,t)},t.assertClassPrivateProperty=function(e,t){a("ClassPrivateProperty",e,t)},t.assertClassProperty=function(e,t){a("ClassProperty",e,t)},t.assertCompletionStatement=function(e,t){a("CompletionStatement",e,t)},t.assertConditional=function(e,t){a("Conditional",e,t)},t.assertConditionalExpression=function(e,t){a("ConditionalExpression",e,t)},t.assertContinueStatement=function(e,t){a("ContinueStatement",e,t)},t.assertDebuggerStatement=function(e,t){a("DebuggerStatement",e,t)},t.assertDecimalLiteral=function(e,t){a("DecimalLiteral",e,t)},t.assertDeclaration=function(e,t){a("Declaration",e,t)},t.assertDeclareClass=function(e,t){a("DeclareClass",e,t)},t.assertDeclareExportAllDeclaration=function(e,t){a("DeclareExportAllDeclaration",e,t)},t.assertDeclareExportDeclaration=function(e,t){a("DeclareExportDeclaration",e,t)},t.assertDeclareFunction=function(e,t){a("DeclareFunction",e,t)},t.assertDeclareInterface=function(e,t){a("DeclareInterface",e,t)},t.assertDeclareModule=function(e,t){a("DeclareModule",e,t)},t.assertDeclareModuleExports=function(e,t){a("DeclareModuleExports",e,t)},t.assertDeclareOpaqueType=function(e,t){a("DeclareOpaqueType",e,t)},t.assertDeclareTypeAlias=function(e,t){a("DeclareTypeAlias",e,t)},t.assertDeclareVariable=function(e,t){a("DeclareVariable",e,t)},t.assertDeclaredPredicate=function(e,t){a("DeclaredPredicate",e,t)},t.assertDecorator=function(e,t){a("Decorator",e,t)},t.assertDirective=function(e,t){a("Directive",e,t)},t.assertDirectiveLiteral=function(e,t){a("DirectiveLiteral",e,t)},t.assertDoExpression=function(e,t){a("DoExpression",e,t)},t.assertDoWhileStatement=function(e,t){a("DoWhileStatement",e,t)},t.assertEmptyStatement=function(e,t){a("EmptyStatement",e,t)},t.assertEmptyTypeAnnotation=function(e,t){a("EmptyTypeAnnotation",e,t)},t.assertEnumBody=function(e,t){a("EnumBody",e,t)},t.assertEnumBooleanBody=function(e,t){a("EnumBooleanBody",e,t)},t.assertEnumBooleanMember=function(e,t){a("EnumBooleanMember",e,t)},t.assertEnumDeclaration=function(e,t){a("EnumDeclaration",e,t)},t.assertEnumDefaultedMember=function(e,t){a("EnumDefaultedMember",e,t)},t.assertEnumMember=function(e,t){a("EnumMember",e,t)},t.assertEnumNumberBody=function(e,t){a("EnumNumberBody",e,t)},t.assertEnumNumberMember=function(e,t){a("EnumNumberMember",e,t)},t.assertEnumStringBody=function(e,t){a("EnumStringBody",e,t)},t.assertEnumStringMember=function(e,t){a("EnumStringMember",e,t)},t.assertEnumSymbolBody=function(e,t){a("EnumSymbolBody",e,t)},t.assertExistsTypeAnnotation=function(e,t){a("ExistsTypeAnnotation",e,t)},t.assertExportAllDeclaration=function(e,t){a("ExportAllDeclaration",e,t)},t.assertExportDeclaration=function(e,t){a("ExportDeclaration",e,t)},t.assertExportDefaultDeclaration=function(e,t){a("ExportDefaultDeclaration",e,t)},t.assertExportDefaultSpecifier=function(e,t){a("ExportDefaultSpecifier",e,t)},t.assertExportNamedDeclaration=function(e,t){a("ExportNamedDeclaration",e,t)},t.assertExportNamespaceSpecifier=function(e,t){a("ExportNamespaceSpecifier",e,t)},t.assertExportSpecifier=function(e,t){a("ExportSpecifier",e,t)},t.assertExpression=function(e,t){a("Expression",e,t)},t.assertExpressionStatement=function(e,t){a("ExpressionStatement",e,t)},t.assertExpressionWrapper=function(e,t){a("ExpressionWrapper",e,t)},t.assertFile=function(e,t){a("File",e,t)},t.assertFlow=function(e,t){a("Flow",e,t)},t.assertFlowBaseAnnotation=function(e,t){a("FlowBaseAnnotation",e,t)},t.assertFlowDeclaration=function(e,t){a("FlowDeclaration",e,t)},t.assertFlowPredicate=function(e,t){a("FlowPredicate",e,t)},t.assertFlowType=function(e,t){a("FlowType",e,t)},t.assertFor=function(e,t){a("For",e,t)},t.assertForInStatement=function(e,t){a("ForInStatement",e,t)},t.assertForOfStatement=function(e,t){a("ForOfStatement",e,t)},t.assertForStatement=function(e,t){a("ForStatement",e,t)},t.assertForXStatement=function(e,t){a("ForXStatement",e,t)},t.assertFunction=function(e,t){a("Function",e,t)},t.assertFunctionDeclaration=function(e,t){a("FunctionDeclaration",e,t)},t.assertFunctionExpression=function(e,t){a("FunctionExpression",e,t)},t.assertFunctionParent=function(e,t){a("FunctionParent",e,t)},t.assertFunctionTypeAnnotation=function(e,t){a("FunctionTypeAnnotation",e,t)},t.assertFunctionTypeParam=function(e,t){a("FunctionTypeParam",e,t)},t.assertGenericTypeAnnotation=function(e,t){a("GenericTypeAnnotation",e,t)},t.assertIdentifier=function(e,t){a("Identifier",e,t)},t.assertIfStatement=function(e,t){a("IfStatement",e,t)},t.assertImmutable=function(e,t){a("Immutable",e,t)},t.assertImport=function(e,t){a("Import",e,t)},t.assertImportAttribute=function(e,t){a("ImportAttribute",e,t)},t.assertImportDeclaration=function(e,t){a("ImportDeclaration",e,t)},t.assertImportDefaultSpecifier=function(e,t){a("ImportDefaultSpecifier",e,t)},t.assertImportNamespaceSpecifier=function(e,t){a("ImportNamespaceSpecifier",e,t)},t.assertImportSpecifier=function(e,t){a("ImportSpecifier",e,t)},t.assertIndexedAccessType=function(e,t){a("IndexedAccessType",e,t)},t.assertInferredPredicate=function(e,t){a("InferredPredicate",e,t)},t.assertInterfaceDeclaration=function(e,t){a("InterfaceDeclaration",e,t)},t.assertInterfaceExtends=function(e,t){a("InterfaceExtends",e,t)},t.assertInterfaceTypeAnnotation=function(e,t){a("InterfaceTypeAnnotation",e,t)},t.assertInterpreterDirective=function(e,t){a("InterpreterDirective",e,t)},t.assertIntersectionTypeAnnotation=function(e,t){a("IntersectionTypeAnnotation",e,t)},t.assertJSX=function(e,t){a("JSX",e,t)},t.assertJSXAttribute=function(e,t){a("JSXAttribute",e,t)},t.assertJSXClosingElement=function(e,t){a("JSXClosingElement",e,t)},t.assertJSXClosingFragment=function(e,t){a("JSXClosingFragment",e,t)},t.assertJSXElement=function(e,t){a("JSXElement",e,t)},t.assertJSXEmptyExpression=function(e,t){a("JSXEmptyExpression",e,t)},t.assertJSXExpressionContainer=function(e,t){a("JSXExpressionContainer",e,t)},t.assertJSXFragment=function(e,t){a("JSXFragment",e,t)},t.assertJSXIdentifier=function(e,t){a("JSXIdentifier",e,t)},t.assertJSXMemberExpression=function(e,t){a("JSXMemberExpression",e,t)},t.assertJSXNamespacedName=function(e,t){a("JSXNamespacedName",e,t)},t.assertJSXOpeningElement=function(e,t){a("JSXOpeningElement",e,t)},t.assertJSXOpeningFragment=function(e,t){a("JSXOpeningFragment",e,t)},t.assertJSXSpreadAttribute=function(e,t){a("JSXSpreadAttribute",e,t)},t.assertJSXSpreadChild=function(e,t){a("JSXSpreadChild",e,t)},t.assertJSXText=function(e,t){a("JSXText",e,t)},t.assertLVal=function(e,t){a("LVal",e,t)},t.assertLabeledStatement=function(e,t){a("LabeledStatement",e,t)},t.assertLiteral=function(e,t){a("Literal",e,t)},t.assertLogicalExpression=function(e,t){a("LogicalExpression",e,t)},t.assertLoop=function(e,t){a("Loop",e,t)},t.assertMemberExpression=function(e,t){a("MemberExpression",e,t)},t.assertMetaProperty=function(e,t){a("MetaProperty",e,t)},t.assertMethod=function(e,t){a("Method",e,t)},t.assertMiscellaneous=function(e,t){a("Miscellaneous",e,t)},t.assertMixedTypeAnnotation=function(e,t){a("MixedTypeAnnotation",e,t)},t.assertModuleDeclaration=function(e,t){a("ModuleDeclaration",e,t)},t.assertModuleExpression=function(e,t){a("ModuleExpression",e,t)},t.assertModuleSpecifier=function(e,t){a("ModuleSpecifier",e,t)},t.assertNewExpression=function(e,t){a("NewExpression",e,t)},t.assertNoop=function(e,t){a("Noop",e,t)},t.assertNullLiteral=function(e,t){a("NullLiteral",e,t)},t.assertNullLiteralTypeAnnotation=function(e,t){a("NullLiteralTypeAnnotation",e,t)},t.assertNullableTypeAnnotation=function(e,t){a("NullableTypeAnnotation",e,t)},t.assertNumberLiteral=function(e,t){console.trace("The node type NumberLiteral has been renamed to NumericLiteral"),a("NumberLiteral",e,t)},t.assertNumberLiteralTypeAnnotation=function(e,t){a("NumberLiteralTypeAnnotation",e,t)},t.assertNumberTypeAnnotation=function(e,t){a("NumberTypeAnnotation",e,t)},t.assertNumericLiteral=function(e,t){a("NumericLiteral",e,t)},t.assertObjectExpression=function(e,t){a("ObjectExpression",e,t)},t.assertObjectMember=function(e,t){a("ObjectMember",e,t)},t.assertObjectMethod=function(e,t){a("ObjectMethod",e,t)},t.assertObjectPattern=function(e,t){a("ObjectPattern",e,t)},t.assertObjectProperty=function(e,t){a("ObjectProperty",e,t)},t.assertObjectTypeAnnotation=function(e,t){a("ObjectTypeAnnotation",e,t)},t.assertObjectTypeCallProperty=function(e,t){a("ObjectTypeCallProperty",e,t)},t.assertObjectTypeIndexer=function(e,t){a("ObjectTypeIndexer",e,t)},t.assertObjectTypeInternalSlot=function(e,t){a("ObjectTypeInternalSlot",e,t)},t.assertObjectTypeProperty=function(e,t){a("ObjectTypeProperty",e,t)},t.assertObjectTypeSpreadProperty=function(e,t){a("ObjectTypeSpreadProperty",e,t)},t.assertOpaqueType=function(e,t){a("OpaqueType",e,t)},t.assertOptionalCallExpression=function(e,t){a("OptionalCallExpression",e,t)},t.assertOptionalIndexedAccessType=function(e,t){a("OptionalIndexedAccessType",e,t)},t.assertOptionalMemberExpression=function(e,t){a("OptionalMemberExpression",e,t)},t.assertParenthesizedExpression=function(e,t){a("ParenthesizedExpression",e,t)},t.assertPattern=function(e,t){a("Pattern",e,t)},t.assertPatternLike=function(e,t){a("PatternLike",e,t)},t.assertPipelineBareFunction=function(e,t){a("PipelineBareFunction",e,t)},t.assertPipelinePrimaryTopicReference=function(e,t){a("PipelinePrimaryTopicReference",e,t)},t.assertPipelineTopicExpression=function(e,t){a("PipelineTopicExpression",e,t)},t.assertPlaceholder=function(e,t){a("Placeholder",e,t)},t.assertPrivate=function(e,t){a("Private",e,t)},t.assertPrivateName=function(e,t){a("PrivateName",e,t)},t.assertProgram=function(e,t){a("Program",e,t)},t.assertProperty=function(e,t){a("Property",e,t)},t.assertPureish=function(e,t){a("Pureish",e,t)},t.assertQualifiedTypeIdentifier=function(e,t){a("QualifiedTypeIdentifier",e,t)},t.assertRecordExpression=function(e,t){a("RecordExpression",e,t)},t.assertRegExpLiteral=function(e,t){a("RegExpLiteral",e,t)},t.assertRegexLiteral=function(e,t){console.trace("The node type RegexLiteral has been renamed to RegExpLiteral"),a("RegexLiteral",e,t)},t.assertRestElement=function(e,t){a("RestElement",e,t)},t.assertRestProperty=function(e,t){console.trace("The node type RestProperty has been renamed to RestElement"),a("RestProperty",e,t)},t.assertReturnStatement=function(e,t){a("ReturnStatement",e,t)},t.assertScopable=function(e,t){a("Scopable",e,t)},t.assertSequenceExpression=function(e,t){a("SequenceExpression",e,t)},t.assertSpreadElement=function(e,t){a("SpreadElement",e,t)},t.assertSpreadProperty=function(e,t){console.trace("The node type SpreadProperty has been renamed to SpreadElement"),a("SpreadProperty",e,t)},t.assertStandardized=function(e,t){a("Standardized",e,t)},t.assertStatement=function(e,t){a("Statement",e,t)},t.assertStaticBlock=function(e,t){a("StaticBlock",e,t)},t.assertStringLiteral=function(e,t){a("StringLiteral",e,t)},t.assertStringLiteralTypeAnnotation=function(e,t){a("StringLiteralTypeAnnotation",e,t)},t.assertStringTypeAnnotation=function(e,t){a("StringTypeAnnotation",e,t)},t.assertSuper=function(e,t){a("Super",e,t)},t.assertSwitchCase=function(e,t){a("SwitchCase",e,t)},t.assertSwitchStatement=function(e,t){a("SwitchStatement",e,t)},t.assertSymbolTypeAnnotation=function(e,t){a("SymbolTypeAnnotation",e,t)},t.assertTSAnyKeyword=function(e,t){a("TSAnyKeyword",e,t)},t.assertTSArrayType=function(e,t){a("TSArrayType",e,t)},t.assertTSAsExpression=function(e,t){a("TSAsExpression",e,t)},t.assertTSBaseType=function(e,t){a("TSBaseType",e,t)},t.assertTSBigIntKeyword=function(e,t){a("TSBigIntKeyword",e,t)},t.assertTSBooleanKeyword=function(e,t){a("TSBooleanKeyword",e,t)},t.assertTSCallSignatureDeclaration=function(e,t){a("TSCallSignatureDeclaration",e,t)},t.assertTSConditionalType=function(e,t){a("TSConditionalType",e,t)},t.assertTSConstructSignatureDeclaration=function(e,t){a("TSConstructSignatureDeclaration",e,t)},t.assertTSConstructorType=function(e,t){a("TSConstructorType",e,t)},t.assertTSDeclareFunction=function(e,t){a("TSDeclareFunction",e,t)},t.assertTSDeclareMethod=function(e,t){a("TSDeclareMethod",e,t)},t.assertTSEntityName=function(e,t){a("TSEntityName",e,t)},t.assertTSEnumDeclaration=function(e,t){a("TSEnumDeclaration",e,t)},t.assertTSEnumMember=function(e,t){a("TSEnumMember",e,t)},t.assertTSExportAssignment=function(e,t){a("TSExportAssignment",e,t)},t.assertTSExpressionWithTypeArguments=function(e,t){a("TSExpressionWithTypeArguments",e,t)},t.assertTSExternalModuleReference=function(e,t){a("TSExternalModuleReference",e,t)},t.assertTSFunctionType=function(e,t){a("TSFunctionType",e,t)},t.assertTSImportEqualsDeclaration=function(e,t){a("TSImportEqualsDeclaration",e,t)},t.assertTSImportType=function(e,t){a("TSImportType",e,t)},t.assertTSIndexSignature=function(e,t){a("TSIndexSignature",e,t)},t.assertTSIndexedAccessType=function(e,t){a("TSIndexedAccessType",e,t)},t.assertTSInferType=function(e,t){a("TSInferType",e,t)},t.assertTSInterfaceBody=function(e,t){a("TSInterfaceBody",e,t)},t.assertTSInterfaceDeclaration=function(e,t){a("TSInterfaceDeclaration",e,t)},t.assertTSIntersectionType=function(e,t){a("TSIntersectionType",e,t)},t.assertTSIntrinsicKeyword=function(e,t){a("TSIntrinsicKeyword",e,t)},t.assertTSLiteralType=function(e,t){a("TSLiteralType",e,t)},t.assertTSMappedType=function(e,t){a("TSMappedType",e,t)},t.assertTSMethodSignature=function(e,t){a("TSMethodSignature",e,t)},t.assertTSModuleBlock=function(e,t){a("TSModuleBlock",e,t)},t.assertTSModuleDeclaration=function(e,t){a("TSModuleDeclaration",e,t)},t.assertTSNamedTupleMember=function(e,t){a("TSNamedTupleMember",e,t)},t.assertTSNamespaceExportDeclaration=function(e,t){a("TSNamespaceExportDeclaration",e,t)},t.assertTSNeverKeyword=function(e,t){a("TSNeverKeyword",e,t)},t.assertTSNonNullExpression=function(e,t){a("TSNonNullExpression",e,t)},t.assertTSNullKeyword=function(e,t){a("TSNullKeyword",e,t)},t.assertTSNumberKeyword=function(e,t){a("TSNumberKeyword",e,t)},t.assertTSObjectKeyword=function(e,t){a("TSObjectKeyword",e,t)},t.assertTSOptionalType=function(e,t){a("TSOptionalType",e,t)},t.assertTSParameterProperty=function(e,t){a("TSParameterProperty",e,t)},t.assertTSParenthesizedType=function(e,t){a("TSParenthesizedType",e,t)},t.assertTSPropertySignature=function(e,t){a("TSPropertySignature",e,t)},t.assertTSQualifiedName=function(e,t){a("TSQualifiedName",e,t)},t.assertTSRestType=function(e,t){a("TSRestType",e,t)},t.assertTSStringKeyword=function(e,t){a("TSStringKeyword",e,t)},t.assertTSSymbolKeyword=function(e,t){a("TSSymbolKeyword",e,t)},t.assertTSThisType=function(e,t){a("TSThisType",e,t)},t.assertTSTupleType=function(e,t){a("TSTupleType",e,t)},t.assertTSType=function(e,t){a("TSType",e,t)},t.assertTSTypeAliasDeclaration=function(e,t){a("TSTypeAliasDeclaration",e,t)},t.assertTSTypeAnnotation=function(e,t){a("TSTypeAnnotation",e,t)},t.assertTSTypeAssertion=function(e,t){a("TSTypeAssertion",e,t)},t.assertTSTypeElement=function(e,t){a("TSTypeElement",e,t)},t.assertTSTypeLiteral=function(e,t){a("TSTypeLiteral",e,t)},t.assertTSTypeOperator=function(e,t){a("TSTypeOperator",e,t)},t.assertTSTypeParameter=function(e,t){a("TSTypeParameter",e,t)},t.assertTSTypeParameterDeclaration=function(e,t){a("TSTypeParameterDeclaration",e,t)},t.assertTSTypeParameterInstantiation=function(e,t){a("TSTypeParameterInstantiation",e,t)},t.assertTSTypePredicate=function(e,t){a("TSTypePredicate",e,t)},t.assertTSTypeQuery=function(e,t){a("TSTypeQuery",e,t)},t.assertTSTypeReference=function(e,t){a("TSTypeReference",e,t)},t.assertTSUndefinedKeyword=function(e,t){a("TSUndefinedKeyword",e,t)},t.assertTSUnionType=function(e,t){a("TSUnionType",e,t)},t.assertTSUnknownKeyword=function(e,t){a("TSUnknownKeyword",e,t)},t.assertTSVoidKeyword=function(e,t){a("TSVoidKeyword",e,t)},t.assertTaggedTemplateExpression=function(e,t){a("TaggedTemplateExpression",e,t)},t.assertTemplateElement=function(e,t){a("TemplateElement",e,t)},t.assertTemplateLiteral=function(e,t){a("TemplateLiteral",e,t)},t.assertTerminatorless=function(e,t){a("Terminatorless",e,t)},t.assertThisExpression=function(e,t){a("ThisExpression",e,t)},t.assertThisTypeAnnotation=function(e,t){a("ThisTypeAnnotation",e,t)},t.assertThrowStatement=function(e,t){a("ThrowStatement",e,t)},t.assertTopicReference=function(e,t){a("TopicReference",e,t)},t.assertTryStatement=function(e,t){a("TryStatement",e,t)},t.assertTupleExpression=function(e,t){a("TupleExpression",e,t)},t.assertTupleTypeAnnotation=function(e,t){a("TupleTypeAnnotation",e,t)},t.assertTypeAlias=function(e,t){a("TypeAlias",e,t)},t.assertTypeAnnotation=function(e,t){a("TypeAnnotation",e,t)},t.assertTypeCastExpression=function(e,t){a("TypeCastExpression",e,t)},t.assertTypeParameter=function(e,t){a("TypeParameter",e,t)},t.assertTypeParameterDeclaration=function(e,t){a("TypeParameterDeclaration",e,t)},t.assertTypeParameterInstantiation=function(e,t){a("TypeParameterInstantiation",e,t)},t.assertTypeScript=function(e,t){a("TypeScript",e,t)},t.assertTypeofTypeAnnotation=function(e,t){a("TypeofTypeAnnotation",e,t)},t.assertUnaryExpression=function(e,t){a("UnaryExpression",e,t)},t.assertUnaryLike=function(e,t){a("UnaryLike",e,t)},t.assertUnionTypeAnnotation=function(e,t){a("UnionTypeAnnotation",e,t)},t.assertUpdateExpression=function(e,t){a("UpdateExpression",e,t)},t.assertUserWhitespacable=function(e,t){a("UserWhitespacable",e,t)},t.assertV8IntrinsicIdentifier=function(e,t){a("V8IntrinsicIdentifier",e,t)},t.assertVariableDeclaration=function(e,t){a("VariableDeclaration",e,t)},t.assertVariableDeclarator=function(e,t){a("VariableDeclarator",e,t)},t.assertVariance=function(e,t){a("Variance",e,t)},t.assertVoidTypeAnnotation=function(e,t){a("VoidTypeAnnotation",e,t)},t.assertWhile=function(e,t){a("While",e,t)},t.assertWhileStatement=function(e,t){a("WhileStatement",e,t)},t.assertWithStatement=function(e,t){a("WithStatement",e,t)},t.assertYieldExpression=function(e,t){a("YieldExpression",e,t)};var r=n(2072);function a(e,t,n){if(!(0,r.default)(e,t,n))throw new Error('Expected type "'.concat(e,'" with option ').concat(JSON.stringify(n),", ")+'but instead got "'.concat(t.type,'".'))}},4091:function(){},6424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=r.BUILDER_KEYS[e],n=arguments.length;if(n>t.length)throw new Error("".concat(e,": Too many arguments passed. Received ").concat(n," but can receive no more than ").concat(t.length));for(var i={type:e},o=0;o<t.length;++o){var s=t[o],u=r.NODE_FIELDS[e][s],c=void 0;o<n&&(c=arguments[o]),void 0===c&&(c=Array.isArray(u.default)?[]:u.default),i[s]=c}for(var l in i)(0,a.default)(i,l,i[l]);return i};var r=n(4376),a=n(3685)},9569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.default)(e);return 1===t.length?t[0]:(0,r.unionTypeAnnotation)(t)};var r=n(5056),a=n(2859)},6649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(5056),a=function(e){switch(e){case"string":return(0,r.stringTypeAnnotation)();case"number":return(0,r.numberTypeAnnotation)();case"undefined":return(0,r.voidTypeAnnotation)();case"boolean":return(0,r.booleanTypeAnnotation)();case"function":return(0,r.genericTypeAnnotation)((0,r.identifier)("Function"));case"object":return(0,r.genericTypeAnnotation)((0,r.identifier)("Object"));case"symbol":return(0,r.genericTypeAnnotation)((0,r.identifier)("Symbol"));case"bigint":return(0,r.anyTypeAnnotation)()}throw new Error("Invalid typeof value: "+e)};t.default=a},5056:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.anyTypeAnnotation=function(){return r.default.apply("AnyTypeAnnotation",arguments)},t.argumentPlaceholder=function(){return r.default.apply("ArgumentPlaceholder",arguments)},t.arrayExpression=function(e){return r.default.apply("ArrayExpression",arguments)},t.arrayPattern=function(e){return r.default.apply("ArrayPattern",arguments)},t.arrayTypeAnnotation=function(e){return r.default.apply("ArrayTypeAnnotation",arguments)},t.arrowFunctionExpression=function(e,t,n){return r.default.apply("ArrowFunctionExpression",arguments)},t.assignmentExpression=function(e,t,n){return r.default.apply("AssignmentExpression",arguments)},t.assignmentPattern=function(e,t){return r.default.apply("AssignmentPattern",arguments)},t.awaitExpression=function(e){return r.default.apply("AwaitExpression",arguments)},t.bigIntLiteral=function(e){return r.default.apply("BigIntLiteral",arguments)},t.binaryExpression=function(e,t,n){return r.default.apply("BinaryExpression",arguments)},t.bindExpression=function(e,t){return r.default.apply("BindExpression",arguments)},t.blockStatement=function(e,t){return r.default.apply("BlockStatement",arguments)},t.booleanLiteral=function(e){return r.default.apply("BooleanLiteral",arguments)},t.booleanLiteralTypeAnnotation=function(e){return r.default.apply("BooleanLiteralTypeAnnotation",arguments)},t.booleanTypeAnnotation=function(){return r.default.apply("BooleanTypeAnnotation",arguments)},t.breakStatement=function(e){return r.default.apply("BreakStatement",arguments)},t.callExpression=function(e,t){return r.default.apply("CallExpression",arguments)},t.catchClause=function(e,t){return r.default.apply("CatchClause",arguments)},t.classAccessorProperty=function(e,t,n,a,i,o){return r.default.apply("ClassAccessorProperty",arguments)},t.classBody=function(e){return r.default.apply("ClassBody",arguments)},t.classDeclaration=function(e,t,n,a){return r.default.apply("ClassDeclaration",arguments)},t.classExpression=function(e,t,n,a){return r.default.apply("ClassExpression",arguments)},t.classImplements=function(e,t){return r.default.apply("ClassImplements",arguments)},t.classMethod=function(e,t,n,a,i,o,s,u){return r.default.apply("ClassMethod",arguments)},t.classPrivateMethod=function(e,t,n,a,i){return r.default.apply("ClassPrivateMethod",arguments)},t.classPrivateProperty=function(e,t,n,a){return r.default.apply("ClassPrivateProperty",arguments)},t.classProperty=function(e,t,n,a,i,o){return r.default.apply("ClassProperty",arguments)},t.conditionalExpression=function(e,t,n){return r.default.apply("ConditionalExpression",arguments)},t.continueStatement=function(e){return r.default.apply("ContinueStatement",arguments)},t.debuggerStatement=function(){return r.default.apply("DebuggerStatement",arguments)},t.decimalLiteral=function(e){return r.default.apply("DecimalLiteral",arguments)},t.declareClass=function(e,t,n,a){return r.default.apply("DeclareClass",arguments)},t.declareExportAllDeclaration=function(e){return r.default.apply("DeclareExportAllDeclaration",arguments)},t.declareExportDeclaration=function(e,t,n){return r.default.apply("DeclareExportDeclaration",arguments)},t.declareFunction=function(e){return r.default.apply("DeclareFunction",arguments)},t.declareInterface=function(e,t,n,a){return r.default.apply("DeclareInterface",arguments)},t.declareModule=function(e,t,n){return r.default.apply("DeclareModule",arguments)},t.declareModuleExports=function(e){return r.default.apply("DeclareModuleExports",arguments)},t.declareOpaqueType=function(e,t,n){return r.default.apply("DeclareOpaqueType",arguments)},t.declareTypeAlias=function(e,t,n){return r.default.apply("DeclareTypeAlias",arguments)},t.declareVariable=function(e){return r.default.apply("DeclareVariable",arguments)},t.declaredPredicate=function(e){return r.default.apply("DeclaredPredicate",arguments)},t.decorator=function(e){return r.default.apply("Decorator",arguments)},t.directive=function(e){return r.default.apply("Directive",arguments)},t.directiveLiteral=function(e){return r.default.apply("DirectiveLiteral",arguments)},t.doExpression=function(e,t){return r.default.apply("DoExpression",arguments)},t.doWhileStatement=function(e,t){return r.default.apply("DoWhileStatement",arguments)},t.emptyStatement=function(){return r.default.apply("EmptyStatement",arguments)},t.emptyTypeAnnotation=function(){return r.default.apply("EmptyTypeAnnotation",arguments)},t.enumBooleanBody=function(e){return r.default.apply("EnumBooleanBody",arguments)},t.enumBooleanMember=function(e){return r.default.apply("EnumBooleanMember",arguments)},t.enumDeclaration=function(e,t){return r.default.apply("EnumDeclaration",arguments)},t.enumDefaultedMember=function(e){return r.default.apply("EnumDefaultedMember",arguments)},t.enumNumberBody=function(e){return r.default.apply("EnumNumberBody",arguments)},t.enumNumberMember=function(e,t){return r.default.apply("EnumNumberMember",arguments)},t.enumStringBody=function(e){return r.default.apply("EnumStringBody",arguments)},t.enumStringMember=function(e,t){return r.default.apply("EnumStringMember",arguments)},t.enumSymbolBody=function(e){return r.default.apply("EnumSymbolBody",arguments)},t.existsTypeAnnotation=function(){return r.default.apply("ExistsTypeAnnotation",arguments)},t.exportAllDeclaration=function(e){return r.default.apply("ExportAllDeclaration",arguments)},t.exportDefaultDeclaration=function(e){return r.default.apply("ExportDefaultDeclaration",arguments)},t.exportDefaultSpecifier=function(e){return r.default.apply("ExportDefaultSpecifier",arguments)},t.exportNamedDeclaration=function(e,t,n){return r.default.apply("ExportNamedDeclaration",arguments)},t.exportNamespaceSpecifier=function(e){return r.default.apply("ExportNamespaceSpecifier",arguments)},t.exportSpecifier=function(e,t){return r.default.apply("ExportSpecifier",arguments)},t.expressionStatement=function(e){return r.default.apply("ExpressionStatement",arguments)},t.file=function(e,t,n){return r.default.apply("File",arguments)},t.forInStatement=function(e,t,n){return r.default.apply("ForInStatement",arguments)},t.forOfStatement=function(e,t,n,a){return r.default.apply("ForOfStatement",arguments)},t.forStatement=function(e,t,n,a){return r.default.apply("ForStatement",arguments)},t.functionDeclaration=function(e,t,n,a,i){return r.default.apply("FunctionDeclaration",arguments)},t.functionExpression=function(e,t,n,a,i){return r.default.apply("FunctionExpression",arguments)},t.functionTypeAnnotation=function(e,t,n,a){return r.default.apply("FunctionTypeAnnotation",arguments)},t.functionTypeParam=function(e,t){return r.default.apply("FunctionTypeParam",arguments)},t.genericTypeAnnotation=function(e,t){return r.default.apply("GenericTypeAnnotation",arguments)},t.identifier=function(e){return r.default.apply("Identifier",arguments)},t.ifStatement=function(e,t,n){return r.default.apply("IfStatement",arguments)},t.import=function(){return r.default.apply("Import",arguments)},t.importAttribute=function(e,t){return r.default.apply("ImportAttribute",arguments)},t.importDeclaration=function(e,t){return r.default.apply("ImportDeclaration",arguments)},t.importDefaultSpecifier=function(e){return r.default.apply("ImportDefaultSpecifier",arguments)},t.importNamespaceSpecifier=function(e){return r.default.apply("ImportNamespaceSpecifier",arguments)},t.importSpecifier=function(e,t){return r.default.apply("ImportSpecifier",arguments)},t.indexedAccessType=function(e,t){return r.default.apply("IndexedAccessType",arguments)},t.inferredPredicate=function(){return r.default.apply("InferredPredicate",arguments)},t.interfaceDeclaration=function(e,t,n,a){return r.default.apply("InterfaceDeclaration",arguments)},t.interfaceExtends=function(e,t){return r.default.apply("InterfaceExtends",arguments)},t.interfaceTypeAnnotation=function(e,t){return r.default.apply("InterfaceTypeAnnotation",arguments)},t.interpreterDirective=function(e){return r.default.apply("InterpreterDirective",arguments)},t.intersectionTypeAnnotation=function(e){return r.default.apply("IntersectionTypeAnnotation",arguments)},t.jSXAttribute=t.jsxAttribute=function(e,t){return r.default.apply("JSXAttribute",arguments)},t.jSXClosingElement=t.jsxClosingElement=function(e){return r.default.apply("JSXClosingElement",arguments)},t.jSXClosingFragment=t.jsxClosingFragment=function(){return r.default.apply("JSXClosingFragment",arguments)},t.jSXElement=t.jsxElement=function(e,t,n,a){return r.default.apply("JSXElement",arguments)},t.jSXEmptyExpression=t.jsxEmptyExpression=function(){return r.default.apply("JSXEmptyExpression",arguments)},t.jSXExpressionContainer=t.jsxExpressionContainer=function(e){return r.default.apply("JSXExpressionContainer",arguments)},t.jSXFragment=t.jsxFragment=function(e,t,n){return r.default.apply("JSXFragment",arguments)},t.jSXIdentifier=t.jsxIdentifier=function(e){return r.default.apply("JSXIdentifier",arguments)},t.jSXMemberExpression=t.jsxMemberExpression=function(e,t){return r.default.apply("JSXMemberExpression",arguments)},t.jSXNamespacedName=t.jsxNamespacedName=function(e,t){return r.default.apply("JSXNamespacedName",arguments)},t.jSXOpeningElement=t.jsxOpeningElement=function(e,t,n){return r.default.apply("JSXOpeningElement",arguments)},t.jSXOpeningFragment=t.jsxOpeningFragment=function(){return r.default.apply("JSXOpeningFragment",arguments)},t.jSXSpreadAttribute=t.jsxSpreadAttribute=function(e){return r.default.apply("JSXSpreadAttribute",arguments)},t.jSXSpreadChild=t.jsxSpreadChild=function(e){return r.default.apply("JSXSpreadChild",arguments)},t.jSXText=t.jsxText=function(e){return r.default.apply("JSXText",arguments)},t.labeledStatement=function(e,t){return r.default.apply("LabeledStatement",arguments)},t.logicalExpression=function(e,t,n){return r.default.apply("LogicalExpression",arguments)},t.memberExpression=function(e,t,n,a){return r.default.apply("MemberExpression",arguments)},t.metaProperty=function(e,t){return r.default.apply("MetaProperty",arguments)},t.mixedTypeAnnotation=function(){return r.default.apply("MixedTypeAnnotation",arguments)},t.moduleExpression=function(e){return r.default.apply("ModuleExpression",arguments)},t.newExpression=function(e,t){return r.default.apply("NewExpression",arguments)},t.noop=function(){return r.default.apply("Noop",arguments)},t.nullLiteral=function(){return r.default.apply("NullLiteral",arguments)},t.nullLiteralTypeAnnotation=function(){return r.default.apply("NullLiteralTypeAnnotation",arguments)},t.nullableTypeAnnotation=function(e){return r.default.apply("NullableTypeAnnotation",arguments)},t.numberLiteral=function(e){return console.trace("The node type NumberLiteral has been renamed to NumericLiteral"),r.default.apply("NumberLiteral",arguments)},t.numberLiteralTypeAnnotation=function(e){return r.default.apply("NumberLiteralTypeAnnotation",arguments)},t.numberTypeAnnotation=function(){return r.default.apply("NumberTypeAnnotation",arguments)},t.numericLiteral=function(e){return r.default.apply("NumericLiteral",arguments)},t.objectExpression=function(e){return r.default.apply("ObjectExpression",arguments)},t.objectMethod=function(e,t,n,a,i,o,s){return r.default.apply("ObjectMethod",arguments)},t.objectPattern=function(e){return r.default.apply("ObjectPattern",arguments)},t.objectProperty=function(e,t,n,a,i){return r.default.apply("ObjectProperty",arguments)},t.objectTypeAnnotation=function(e,t,n,a,i){return r.default.apply("ObjectTypeAnnotation",arguments)},t.objectTypeCallProperty=function(e){return r.default.apply("ObjectTypeCallProperty",arguments)},t.objectTypeIndexer=function(e,t,n,a){return r.default.apply("ObjectTypeIndexer",arguments)},t.objectTypeInternalSlot=function(e,t,n,a,i){return r.default.apply("ObjectTypeInternalSlot",arguments)},t.objectTypeProperty=function(e,t,n){return r.default.apply("ObjectTypeProperty",arguments)},t.objectTypeSpreadProperty=function(e){return r.default.apply("ObjectTypeSpreadProperty",arguments)},t.opaqueType=function(e,t,n,a){return r.default.apply("OpaqueType",arguments)},t.optionalCallExpression=function(e,t,n){return r.default.apply("OptionalCallExpression",arguments)},t.optionalIndexedAccessType=function(e,t){return r.default.apply("OptionalIndexedAccessType",arguments)},t.optionalMemberExpression=function(e,t,n,a){return r.default.apply("OptionalMemberExpression",arguments)},t.parenthesizedExpression=function(e){return r.default.apply("ParenthesizedExpression",arguments)},t.pipelineBareFunction=function(e){return r.default.apply("PipelineBareFunction",arguments)},t.pipelinePrimaryTopicReference=function(){return r.default.apply("PipelinePrimaryTopicReference",arguments)},t.pipelineTopicExpression=function(e){return r.default.apply("PipelineTopicExpression",arguments)},t.placeholder=function(e,t){return r.default.apply("Placeholder",arguments)},t.privateName=function(e){return r.default.apply("PrivateName",arguments)},t.program=function(e,t,n,a){return r.default.apply("Program",arguments)},t.qualifiedTypeIdentifier=function(e,t){return r.default.apply("QualifiedTypeIdentifier",arguments)},t.recordExpression=function(e){return r.default.apply("RecordExpression",arguments)},t.regExpLiteral=function(e,t){return r.default.apply("RegExpLiteral",arguments)},t.regexLiteral=function(e,t){return console.trace("The node type RegexLiteral has been renamed to RegExpLiteral"),r.default.apply("RegexLiteral",arguments)},t.restElement=function(e){return r.default.apply("RestElement",arguments)},t.restProperty=function(e){return console.trace("The node type RestProperty has been renamed to RestElement"),r.default.apply("RestProperty",arguments)},t.returnStatement=function(e){return r.default.apply("ReturnStatement",arguments)},t.sequenceExpression=function(e){return r.default.apply("SequenceExpression",arguments)},t.spreadElement=function(e){return r.default.apply("SpreadElement",arguments)},t.spreadProperty=function(e){return console.trace("The node type SpreadProperty has been renamed to SpreadElement"),r.default.apply("SpreadProperty",arguments)},t.staticBlock=function(e){return r.default.apply("StaticBlock",arguments)},t.stringLiteral=function(e){return r.default.apply("StringLiteral",arguments)},t.stringLiteralTypeAnnotation=function(e){return r.default.apply("StringLiteralTypeAnnotation",arguments)},t.stringTypeAnnotation=function(){return r.default.apply("StringTypeAnnotation",arguments)},t.super=function(){return r.default.apply("Super",arguments)},t.switchCase=function(e,t){return r.default.apply("SwitchCase",arguments)},t.switchStatement=function(e,t){return r.default.apply("SwitchStatement",arguments)},t.symbolTypeAnnotation=function(){return r.default.apply("SymbolTypeAnnotation",arguments)},t.taggedTemplateExpression=function(e,t){return r.default.apply("TaggedTemplateExpression",arguments)},t.templateElement=function(e,t){return r.default.apply("TemplateElement",arguments)},t.templateLiteral=function(e,t){return r.default.apply("TemplateLiteral",arguments)},t.thisExpression=function(){return r.default.apply("ThisExpression",arguments)},t.thisTypeAnnotation=function(){return r.default.apply("ThisTypeAnnotation",arguments)},t.throwStatement=function(e){return r.default.apply("ThrowStatement",arguments)},t.topicReference=function(){return r.default.apply("TopicReference",arguments)},t.tryStatement=function(e,t,n){return r.default.apply("TryStatement",arguments)},t.tSAnyKeyword=t.tsAnyKeyword=function(){return r.default.apply("TSAnyKeyword",arguments)},t.tSArrayType=t.tsArrayType=function(e){return r.default.apply("TSArrayType",arguments)},t.tSAsExpression=t.tsAsExpression=function(e,t){return r.default.apply("TSAsExpression",arguments)},t.tSBigIntKeyword=t.tsBigIntKeyword=function(){return r.default.apply("TSBigIntKeyword",arguments)},t.tSBooleanKeyword=t.tsBooleanKeyword=function(){return r.default.apply("TSBooleanKeyword",arguments)},t.tSCallSignatureDeclaration=t.tsCallSignatureDeclaration=function(e,t,n){return r.default.apply("TSCallSignatureDeclaration",arguments)},t.tSConditionalType=t.tsConditionalType=function(e,t,n,a){return r.default.apply("TSConditionalType",arguments)},t.tSConstructSignatureDeclaration=t.tsConstructSignatureDeclaration=function(e,t,n){return r.default.apply("TSConstructSignatureDeclaration",arguments)},t.tSConstructorType=t.tsConstructorType=function(e,t,n){return r.default.apply("TSConstructorType",arguments)},t.tSDeclareFunction=t.tsDeclareFunction=function(e,t,n,a){return r.default.apply("TSDeclareFunction",arguments)},t.tSDeclareMethod=t.tsDeclareMethod=function(e,t,n,a,i){return r.default.apply("TSDeclareMethod",arguments)},t.tSEnumDeclaration=t.tsEnumDeclaration=function(e,t){return r.default.apply("TSEnumDeclaration",arguments)},t.tSEnumMember=t.tsEnumMember=function(e,t){return r.default.apply("TSEnumMember",arguments)},t.tSExportAssignment=t.tsExportAssignment=function(e){return r.default.apply("TSExportAssignment",arguments)},t.tSExpressionWithTypeArguments=t.tsExpressionWithTypeArguments=function(e,t){return r.default.apply("TSExpressionWithTypeArguments",arguments)},t.tSExternalModuleReference=t.tsExternalModuleReference=function(e){return r.default.apply("TSExternalModuleReference",arguments)},t.tSFunctionType=t.tsFunctionType=function(e,t,n){return r.default.apply("TSFunctionType",arguments)},t.tSImportEqualsDeclaration=t.tsImportEqualsDeclaration=function(e,t){return r.default.apply("TSImportEqualsDeclaration",arguments)},t.tSImportType=t.tsImportType=function(e,t,n){return r.default.apply("TSImportType",arguments)},t.tSIndexSignature=t.tsIndexSignature=function(e,t){return r.default.apply("TSIndexSignature",arguments)},t.tSIndexedAccessType=t.tsIndexedAccessType=function(e,t){return r.default.apply("TSIndexedAccessType",arguments)},t.tSInferType=t.tsInferType=function(e){return r.default.apply("TSInferType",arguments)},t.tSInterfaceBody=t.tsInterfaceBody=function(e){return r.default.apply("TSInterfaceBody",arguments)},t.tSInterfaceDeclaration=t.tsInterfaceDeclaration=function(e,t,n,a){return r.default.apply("TSInterfaceDeclaration",arguments)},t.tSIntersectionType=t.tsIntersectionType=function(e){return r.default.apply("TSIntersectionType",arguments)},t.tSIntrinsicKeyword=t.tsIntrinsicKeyword=function(){return r.default.apply("TSIntrinsicKeyword",arguments)},t.tSLiteralType=t.tsLiteralType=function(e){return r.default.apply("TSLiteralType",arguments)},t.tSMappedType=t.tsMappedType=function(e,t,n){return r.default.apply("TSMappedType",arguments)},t.tSMethodSignature=t.tsMethodSignature=function(e,t,n,a){return r.default.apply("TSMethodSignature",arguments)},t.tSModuleBlock=t.tsModuleBlock=function(e){return r.default.apply("TSModuleBlock",arguments)},t.tSModuleDeclaration=t.tsModuleDeclaration=function(e,t){return r.default.apply("TSModuleDeclaration",arguments)},t.tSNamedTupleMember=t.tsNamedTupleMember=function(e,t,n){return r.default.apply("TSNamedTupleMember",arguments)},t.tSNamespaceExportDeclaration=t.tsNamespaceExportDeclaration=function(e){return r.default.apply("TSNamespaceExportDeclaration",arguments)},t.tSNeverKeyword=t.tsNeverKeyword=function(){return r.default.apply("TSNeverKeyword",arguments)},t.tSNonNullExpression=t.tsNonNullExpression=function(e){return r.default.apply("TSNonNullExpression",arguments)},t.tSNullKeyword=t.tsNullKeyword=function(){return r.default.apply("TSNullKeyword",arguments)},t.tSNumberKeyword=t.tsNumberKeyword=function(){return r.default.apply("TSNumberKeyword",arguments)},t.tSObjectKeyword=t.tsObjectKeyword=function(){return r.default.apply("TSObjectKeyword",arguments)},t.tSOptionalType=t.tsOptionalType=function(e){return r.default.apply("TSOptionalType",arguments)},t.tSParameterProperty=t.tsParameterProperty=function(e){return r.default.apply("TSParameterProperty",arguments)},t.tSParenthesizedType=t.tsParenthesizedType=function(e){return r.default.apply("TSParenthesizedType",arguments)},t.tSPropertySignature=t.tsPropertySignature=function(e,t,n){return r.default.apply("TSPropertySignature",arguments)},t.tSQualifiedName=t.tsQualifiedName=function(e,t){return r.default.apply("TSQualifiedName",arguments)},t.tSRestType=t.tsRestType=function(e){return r.default.apply("TSRestType",arguments)},t.tSStringKeyword=t.tsStringKeyword=function(){return r.default.apply("TSStringKeyword",arguments)},t.tSSymbolKeyword=t.tsSymbolKeyword=function(){return r.default.apply("TSSymbolKeyword",arguments)},t.tSThisType=t.tsThisType=function(){return r.default.apply("TSThisType",arguments)},t.tSTupleType=t.tsTupleType=function(e){return r.default.apply("TSTupleType",arguments)},t.tSTypeAliasDeclaration=t.tsTypeAliasDeclaration=function(e,t,n){return r.default.apply("TSTypeAliasDeclaration",arguments)},t.tSTypeAnnotation=t.tsTypeAnnotation=function(e){return r.default.apply("TSTypeAnnotation",arguments)},t.tSTypeAssertion=t.tsTypeAssertion=function(e,t){return r.default.apply("TSTypeAssertion",arguments)},t.tSTypeLiteral=t.tsTypeLiteral=function(e){return r.default.apply("TSTypeLiteral",arguments)},t.tSTypeOperator=t.tsTypeOperator=function(e){return r.default.apply("TSTypeOperator",arguments)},t.tSTypeParameter=t.tsTypeParameter=function(e,t,n){return r.default.apply("TSTypeParameter",arguments)},t.tSTypeParameterDeclaration=t.tsTypeParameterDeclaration=function(e){return r.default.apply("TSTypeParameterDeclaration",arguments)},t.tSTypeParameterInstantiation=t.tsTypeParameterInstantiation=function(e){return r.default.apply("TSTypeParameterInstantiation",arguments)},t.tSTypePredicate=t.tsTypePredicate=function(e,t,n){return r.default.apply("TSTypePredicate",arguments)},t.tSTypeQuery=t.tsTypeQuery=function(e){return r.default.apply("TSTypeQuery",arguments)},t.tSTypeReference=t.tsTypeReference=function(e,t){return r.default.apply("TSTypeReference",arguments)},t.tSUndefinedKeyword=t.tsUndefinedKeyword=function(){return r.default.apply("TSUndefinedKeyword",arguments)},t.tSUnionType=t.tsUnionType=function(e){return r.default.apply("TSUnionType",arguments)},t.tSUnknownKeyword=t.tsUnknownKeyword=function(){return r.default.apply("TSUnknownKeyword",arguments)},t.tSVoidKeyword=t.tsVoidKeyword=function(){return r.default.apply("TSVoidKeyword",arguments)},t.tupleExpression=function(e){return r.default.apply("TupleExpression",arguments)},t.tupleTypeAnnotation=function(e){return r.default.apply("TupleTypeAnnotation",arguments)},t.typeAlias=function(e,t,n){return r.default.apply("TypeAlias",arguments)},t.typeAnnotation=function(e){return r.default.apply("TypeAnnotation",arguments)},t.typeCastExpression=function(e,t){return r.default.apply("TypeCastExpression",arguments)},t.typeParameter=function(e,t,n){return r.default.apply("TypeParameter",arguments)},t.typeParameterDeclaration=function(e){return r.default.apply("TypeParameterDeclaration",arguments)},t.typeParameterInstantiation=function(e){return r.default.apply("TypeParameterInstantiation",arguments)},t.typeofTypeAnnotation=function(e){return r.default.apply("TypeofTypeAnnotation",arguments)},t.unaryExpression=function(e,t,n){return r.default.apply("UnaryExpression",arguments)},t.unionTypeAnnotation=function(e){return r.default.apply("UnionTypeAnnotation",arguments)},t.updateExpression=function(e,t,n){return r.default.apply("UpdateExpression",arguments)},t.v8IntrinsicIdentifier=function(e){return r.default.apply("V8IntrinsicIdentifier",arguments)},t.variableDeclaration=function(e,t){return r.default.apply("VariableDeclaration",arguments)},t.variableDeclarator=function(e,t){return r.default.apply("VariableDeclarator",arguments)},t.variance=function(e){return r.default.apply("Variance",arguments)},t.voidTypeAnnotation=function(){return r.default.apply("VoidTypeAnnotation",arguments)},t.whileStatement=function(e,t){return r.default.apply("WhileStatement",arguments)},t.withStatement=function(e,t){return r.default.apply("WithStatement",arguments)},t.yieldExpression=function(e,t){return r.default.apply("YieldExpression",arguments)};var r=n(6424)},9625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AnyTypeAnnotation",{enumerable:!0,get:function(){return r.anyTypeAnnotation}}),Object.defineProperty(t,"ArgumentPlaceholder",{enumerable:!0,get:function(){return r.argumentPlaceholder}}),Object.defineProperty(t,"ArrayExpression",{enumerable:!0,get:function(){return r.arrayExpression}}),Object.defineProperty(t,"ArrayPattern",{enumerable:!0,get:function(){return r.arrayPattern}}),Object.defineProperty(t,"ArrayTypeAnnotation",{enumerable:!0,get:function(){return r.arrayTypeAnnotation}}),Object.defineProperty(t,"ArrowFunctionExpression",{enumerable:!0,get:function(){return r.arrowFunctionExpression}}),Object.defineProperty(t,"AssignmentExpression",{enumerable:!0,get:function(){return r.assignmentExpression}}),Object.defineProperty(t,"AssignmentPattern",{enumerable:!0,get:function(){return r.assignmentPattern}}),Object.defineProperty(t,"AwaitExpression",{enumerable:!0,get:function(){return r.awaitExpression}}),Object.defineProperty(t,"BigIntLiteral",{enumerable:!0,get:function(){return r.bigIntLiteral}}),Object.defineProperty(t,"BinaryExpression",{enumerable:!0,get:function(){return r.binaryExpression}}),Object.defineProperty(t,"BindExpression",{enumerable:!0,get:function(){return r.bindExpression}}),Object.defineProperty(t,"BlockStatement",{enumerable:!0,get:function(){return r.blockStatement}}),Object.defineProperty(t,"BooleanLiteral",{enumerable:!0,get:function(){return r.booleanLiteral}}),Object.defineProperty(t,"BooleanLiteralTypeAnnotation",{enumerable:!0,get:function(){return r.booleanLiteralTypeAnnotation}}),Object.defineProperty(t,"BooleanTypeAnnotation",{enumerable:!0,get:function(){return r.booleanTypeAnnotation}}),Object.defineProperty(t,"BreakStatement",{enumerable:!0,get:function(){return r.breakStatement}}),Object.defineProperty(t,"CallExpression",{enumerable:!0,get:function(){return r.callExpression}}),Object.defineProperty(t,"CatchClause",{enumerable:!0,get:function(){return r.catchClause}}),Object.defineProperty(t,"ClassAccessorProperty",{enumerable:!0,get:function(){return r.classAccessorProperty}}),Object.defineProperty(t,"ClassBody",{enumerable:!0,get:function(){return r.classBody}}),Object.defineProperty(t,"ClassDeclaration",{enumerable:!0,get:function(){return r.classDeclaration}}),Object.defineProperty(t,"ClassExpression",{enumerable:!0,get:function(){return r.classExpression}}),Object.defineProperty(t,"ClassImplements",{enumerable:!0,get:function(){return r.classImplements}}),Object.defineProperty(t,"ClassMethod",{enumerable:!0,get:function(){return r.classMethod}}),Object.defineProperty(t,"ClassPrivateMethod",{enumerable:!0,get:function(){return r.classPrivateMethod}}),Object.defineProperty(t,"ClassPrivateProperty",{enumerable:!0,get:function(){return r.classPrivateProperty}}),Object.defineProperty(t,"ClassProperty",{enumerable:!0,get:function(){return r.classProperty}}),Object.defineProperty(t,"ConditionalExpression",{enumerable:!0,get:function(){return r.conditionalExpression}}),Object.defineProperty(t,"ContinueStatement",{enumerable:!0,get:function(){return r.continueStatement}}),Object.defineProperty(t,"DebuggerStatement",{enumerable:!0,get:function(){return r.debuggerStatement}}),Object.defineProperty(t,"DecimalLiteral",{enumerable:!0,get:function(){return r.decimalLiteral}}),Object.defineProperty(t,"DeclareClass",{enumerable:!0,get:function(){return r.declareClass}}),Object.defineProperty(t,"DeclareExportAllDeclaration",{enumerable:!0,get:function(){return r.declareExportAllDeclaration}}),Object.defineProperty(t,"DeclareExportDeclaration",{enumerable:!0,get:function(){return r.declareExportDeclaration}}),Object.defineProperty(t,"DeclareFunction",{enumerable:!0,get:function(){return r.declareFunction}}),Object.defineProperty(t,"DeclareInterface",{enumerable:!0,get:function(){return r.declareInterface}}),Object.defineProperty(t,"DeclareModule",{enumerable:!0,get:function(){return r.declareModule}}),Object.defineProperty(t,"DeclareModuleExports",{enumerable:!0,get:function(){return r.declareModuleExports}}),Object.defineProperty(t,"DeclareOpaqueType",{enumerable:!0,get:function(){return r.declareOpaqueType}}),Object.defineProperty(t,"DeclareTypeAlias",{enumerable:!0,get:function(){return r.declareTypeAlias}}),Object.defineProperty(t,"DeclareVariable",{enumerable:!0,get:function(){return r.declareVariable}}),Object.defineProperty(t,"DeclaredPredicate",{enumerable:!0,get:function(){return r.declaredPredicate}}),Object.defineProperty(t,"Decorator",{enumerable:!0,get:function(){return r.decorator}}),Object.defineProperty(t,"Directive",{enumerable:!0,get:function(){return r.directive}}),Object.defineProperty(t,"DirectiveLiteral",{enumerable:!0,get:function(){return r.directiveLiteral}}),Object.defineProperty(t,"DoExpression",{enumerable:!0,get:function(){return r.doExpression}}),Object.defineProperty(t,"DoWhileStatement",{enumerable:!0,get:function(){return r.doWhileStatement}}),Object.defineProperty(t,"EmptyStatement",{enumerable:!0,get:function(){return r.emptyStatement}}),Object.defineProperty(t,"EmptyTypeAnnotation",{enumerable:!0,get:function(){return r.emptyTypeAnnotation}}),Object.defineProperty(t,"EnumBooleanBody",{enumerable:!0,get:function(){return r.enumBooleanBody}}),Object.defineProperty(t,"EnumBooleanMember",{enumerable:!0,get:function(){return r.enumBooleanMember}}),Object.defineProperty(t,"EnumDeclaration",{enumerable:!0,get:function(){return r.enumDeclaration}}),Object.defineProperty(t,"EnumDefaultedMember",{enumerable:!0,get:function(){return r.enumDefaultedMember}}),Object.defineProperty(t,"EnumNumberBody",{enumerable:!0,get:function(){return r.enumNumberBody}}),Object.defineProperty(t,"EnumNumberMember",{enumerable:!0,get:function(){return r.enumNumberMember}}),Object.defineProperty(t,"EnumStringBody",{enumerable:!0,get:function(){return r.enumStringBody}}),Object.defineProperty(t,"EnumStringMember",{enumerable:!0,get:function(){return r.enumStringMember}}),Object.defineProperty(t,"EnumSymbolBody",{enumerable:!0,get:function(){return r.enumSymbolBody}}),Object.defineProperty(t,"ExistsTypeAnnotation",{enumerable:!0,get:function(){return r.existsTypeAnnotation}}),Object.defineProperty(t,"ExportAllDeclaration",{enumerable:!0,get:function(){return r.exportAllDeclaration}}),Object.defineProperty(t,"ExportDefaultDeclaration",{enumerable:!0,get:function(){return r.exportDefaultDeclaration}}),Object.defineProperty(t,"ExportDefaultSpecifier",{enumerable:!0,get:function(){return r.exportDefaultSpecifier}}),Object.defineProperty(t,"ExportNamedDeclaration",{enumerable:!0,get:function(){return r.exportNamedDeclaration}}),Object.defineProperty(t,"ExportNamespaceSpecifier",{enumerable:!0,get:function(){return r.exportNamespaceSpecifier}}),Object.defineProperty(t,"ExportSpecifier",{enumerable:!0,get:function(){return r.exportSpecifier}}),Object.defineProperty(t,"ExpressionStatement",{enumerable:!0,get:function(){return r.expressionStatement}}),Object.defineProperty(t,"File",{enumerable:!0,get:function(){return r.file}}),Object.defineProperty(t,"ForInStatement",{enumerable:!0,get:function(){return r.forInStatement}}),Object.defineProperty(t,"ForOfStatement",{enumerable:!0,get:function(){return r.forOfStatement}}),Object.defineProperty(t,"ForStatement",{enumerable:!0,get:function(){return r.forStatement}}),Object.defineProperty(t,"FunctionDeclaration",{enumerable:!0,get:function(){return r.functionDeclaration}}),Object.defineProperty(t,"FunctionExpression",{enumerable:!0,get:function(){return r.functionExpression}}),Object.defineProperty(t,"FunctionTypeAnnotation",{enumerable:!0,get:function(){return r.functionTypeAnnotation}}),Object.defineProperty(t,"FunctionTypeParam",{enumerable:!0,get:function(){return r.functionTypeParam}}),Object.defineProperty(t,"GenericTypeAnnotation",{enumerable:!0,get:function(){return r.genericTypeAnnotation}}),Object.defineProperty(t,"Identifier",{enumerable:!0,get:function(){return r.identifier}}),Object.defineProperty(t,"IfStatement",{enumerable:!0,get:function(){return r.ifStatement}}),Object.defineProperty(t,"Import",{enumerable:!0,get:function(){return r.import}}),Object.defineProperty(t,"ImportAttribute",{enumerable:!0,get:function(){return r.importAttribute}}),Object.defineProperty(t,"ImportDeclaration",{enumerable:!0,get:function(){return r.importDeclaration}}),Object.defineProperty(t,"ImportDefaultSpecifier",{enumerable:!0,get:function(){return r.importDefaultSpecifier}}),Object.defineProperty(t,"ImportNamespaceSpecifier",{enumerable:!0,get:function(){return r.importNamespaceSpecifier}}),Object.defineProperty(t,"ImportSpecifier",{enumerable:!0,get:function(){return r.importSpecifier}}),Object.defineProperty(t,"IndexedAccessType",{enumerable:!0,get:function(){return r.indexedAccessType}}),Object.defineProperty(t,"InferredPredicate",{enumerable:!0,get:function(){return r.inferredPredicate}}),Object.defineProperty(t,"InterfaceDeclaration",{enumerable:!0,get:function(){return r.interfaceDeclaration}}),Object.defineProperty(t,"InterfaceExtends",{enumerable:!0,get:function(){return r.interfaceExtends}}),Object.defineProperty(t,"InterfaceTypeAnnotation",{enumerable:!0,get:function(){return r.interfaceTypeAnnotation}}),Object.defineProperty(t,"InterpreterDirective",{enumerable:!0,get:function(){return r.interpreterDirective}}),Object.defineProperty(t,"IntersectionTypeAnnotation",{enumerable:!0,get:function(){return r.intersectionTypeAnnotation}}),Object.defineProperty(t,"JSXAttribute",{enumerable:!0,get:function(){return r.jsxAttribute}}),Object.defineProperty(t,"JSXClosingElement",{enumerable:!0,get:function(){return r.jsxClosingElement}}),Object.defineProperty(t,"JSXClosingFragment",{enumerable:!0,get:function(){return r.jsxClosingFragment}}),Object.defineProperty(t,"JSXElement",{enumerable:!0,get:function(){return r.jsxElement}}),Object.defineProperty(t,"JSXEmptyExpression",{enumerable:!0,get:function(){return r.jsxEmptyExpression}}),Object.defineProperty(t,"JSXExpressionContainer",{enumerable:!0,get:function(){return r.jsxExpressionContainer}}),Object.defineProperty(t,"JSXFragment",{enumerable:!0,get:function(){return r.jsxFragment}}),Object.defineProperty(t,"JSXIdentifier",{enumerable:!0,get:function(){return r.jsxIdentifier}}),Object.defineProperty(t,"JSXMemberExpression",{enumerable:!0,get:function(){return r.jsxMemberExpression}}),Object.defineProperty(t,"JSXNamespacedName",{enumerable:!0,get:function(){return r.jsxNamespacedName}}),Object.defineProperty(t,"JSXOpeningElement",{enumerable:!0,get:function(){return r.jsxOpeningElement}}),Object.defineProperty(t,"JSXOpeningFragment",{enumerable:!0,get:function(){return r.jsxOpeningFragment}}),Object.defineProperty(t,"JSXSpreadAttribute",{enumerable:!0,get:function(){return r.jsxSpreadAttribute}}),Object.defineProperty(t,"JSXSpreadChild",{enumerable:!0,get:function(){return r.jsxSpreadChild}}),Object.defineProperty(t,"JSXText",{enumerable:!0,get:function(){return r.jsxText}}),Object.defineProperty(t,"LabeledStatement",{enumerable:!0,get:function(){return r.labeledStatement}}),Object.defineProperty(t,"LogicalExpression",{enumerable:!0,get:function(){return r.logicalExpression}}),Object.defineProperty(t,"MemberExpression",{enumerable:!0,get:function(){return r.memberExpression}}),Object.defineProperty(t,"MetaProperty",{enumerable:!0,get:function(){return r.metaProperty}}),Object.defineProperty(t,"MixedTypeAnnotation",{enumerable:!0,get:function(){return r.mixedTypeAnnotation}}),Object.defineProperty(t,"ModuleExpression",{enumerable:!0,get:function(){return r.moduleExpression}}),Object.defineProperty(t,"NewExpression",{enumerable:!0,get:function(){return r.newExpression}}),Object.defineProperty(t,"Noop",{enumerable:!0,get:function(){return r.noop}}),Object.defineProperty(t,"NullLiteral",{enumerable:!0,get:function(){return r.nullLiteral}}),Object.defineProperty(t,"NullLiteralTypeAnnotation",{enumerable:!0,get:function(){return r.nullLiteralTypeAnnotation}}),Object.defineProperty(t,"NullableTypeAnnotation",{enumerable:!0,get:function(){return r.nullableTypeAnnotation}}),Object.defineProperty(t,"NumberLiteral",{enumerable:!0,get:function(){return r.numberLiteral}}),Object.defineProperty(t,"NumberLiteralTypeAnnotation",{enumerable:!0,get:function(){return r.numberLiteralTypeAnnotation}}),Object.defineProperty(t,"NumberTypeAnnotation",{enumerable:!0,get:function(){return r.numberTypeAnnotation}}),Object.defineProperty(t,"NumericLiteral",{enumerable:!0,get:function(){return r.numericLiteral}}),Object.defineProperty(t,"ObjectExpression",{enumerable:!0,get:function(){return r.objectExpression}}),Object.defineProperty(t,"ObjectMethod",{enumerable:!0,get:function(){return r.objectMethod}}),Object.defineProperty(t,"ObjectPattern",{enumerable:!0,get:function(){return r.objectPattern}}),Object.defineProperty(t,"ObjectProperty",{enumerable:!0,get:function(){return r.objectProperty}}),Object.defineProperty(t,"ObjectTypeAnnotation",{enumerable:!0,get:function(){return r.objectTypeAnnotation}}),Object.defineProperty(t,"ObjectTypeCallProperty",{enumerable:!0,get:function(){return r.objectTypeCallProperty}}),Object.defineProperty(t,"ObjectTypeIndexer",{enumerable:!0,get:function(){return r.objectTypeIndexer}}),Object.defineProperty(t,"ObjectTypeInternalSlot",{enumerable:!0,get:function(){return r.objectTypeInternalSlot}}),Object.defineProperty(t,"ObjectTypeProperty",{enumerable:!0,get:function(){return r.objectTypeProperty}}),Object.defineProperty(t,"ObjectTypeSpreadProperty",{enumerable:!0,get:function(){return r.objectTypeSpreadProperty}}),Object.defineProperty(t,"OpaqueType",{enumerable:!0,get:function(){return r.opaqueType}}),Object.defineProperty(t,"OptionalCallExpression",{enumerable:!0,get:function(){return r.optionalCallExpression}}),Object.defineProperty(t,"OptionalIndexedAccessType",{enumerable:!0,get:function(){return r.optionalIndexedAccessType}}),Object.defineProperty(t,"OptionalMemberExpression",{enumerable:!0,get:function(){return r.optionalMemberExpression}}),Object.defineProperty(t,"ParenthesizedExpression",{enumerable:!0,get:function(){return r.parenthesizedExpression}}),Object.defineProperty(t,"PipelineBareFunction",{enumerable:!0,get:function(){return r.pipelineBareFunction}}),Object.defineProperty(t,"PipelinePrimaryTopicReference",{enumerable:!0,get:function(){return r.pipelinePrimaryTopicReference}}),Object.defineProperty(t,"PipelineTopicExpression",{enumerable:!0,get:function(){return r.pipelineTopicExpression}}),Object.defineProperty(t,"Placeholder",{enumerable:!0,get:function(){return r.placeholder}}),Object.defineProperty(t,"PrivateName",{enumerable:!0,get:function(){return r.privateName}}),Object.defineProperty(t,"Program",{enumerable:!0,get:function(){return r.program}}),Object.defineProperty(t,"QualifiedTypeIdentifier",{enumerable:!0,get:function(){return r.qualifiedTypeIdentifier}}),Object.defineProperty(t,"RecordExpression",{enumerable:!0,get:function(){return r.recordExpression}}),Object.defineProperty(t,"RegExpLiteral",{enumerable:!0,get:function(){return r.regExpLiteral}}),Object.defineProperty(t,"RegexLiteral",{enumerable:!0,get:function(){return r.regexLiteral}}),Object.defineProperty(t,"RestElement",{enumerable:!0,get:function(){return r.restElement}}),Object.defineProperty(t,"RestProperty",{enumerable:!0,get:function(){return r.restProperty}}),Object.defineProperty(t,"ReturnStatement",{enumerable:!0,get:function(){return r.returnStatement}}),Object.defineProperty(t,"SequenceExpression",{enumerable:!0,get:function(){return r.sequenceExpression}}),Object.defineProperty(t,"SpreadElement",{enumerable:!0,get:function(){return r.spreadElement}}),Object.defineProperty(t,"SpreadProperty",{enumerable:!0,get:function(){return r.spreadProperty}}),Object.defineProperty(t,"StaticBlock",{enumerable:!0,get:function(){return r.staticBlock}}),Object.defineProperty(t,"StringLiteral",{enumerable:!0,get:function(){return r.stringLiteral}}),Object.defineProperty(t,"StringLiteralTypeAnnotation",{enumerable:!0,get:function(){return r.stringLiteralTypeAnnotation}}),Object.defineProperty(t,"StringTypeAnnotation",{enumerable:!0,get:function(){return r.stringTypeAnnotation}}),Object.defineProperty(t,"Super",{enumerable:!0,get:function(){return r.super}}),Object.defineProperty(t,"SwitchCase",{enumerable:!0,get:function(){return r.switchCase}}),Object.defineProperty(t,"SwitchStatement",{enumerable:!0,get:function(){return r.switchStatement}}),Object.defineProperty(t,"SymbolTypeAnnotation",{enumerable:!0,get:function(){return r.symbolTypeAnnotation}}),Object.defineProperty(t,"TSAnyKeyword",{enumerable:!0,get:function(){return r.tsAnyKeyword}}),Object.defineProperty(t,"TSArrayType",{enumerable:!0,get:function(){return r.tsArrayType}}),Object.defineProperty(t,"TSAsExpression",{enumerable:!0,get:function(){return r.tsAsExpression}}),Object.defineProperty(t,"TSBigIntKeyword",{enumerable:!0,get:function(){return r.tsBigIntKeyword}}),Object.defineProperty(t,"TSBooleanKeyword",{enumerable:!0,get:function(){return r.tsBooleanKeyword}}),Object.defineProperty(t,"TSCallSignatureDeclaration",{enumerable:!0,get:function(){return r.tsCallSignatureDeclaration}}),Object.defineProperty(t,"TSConditionalType",{enumerable:!0,get:function(){return r.tsConditionalType}}),Object.defineProperty(t,"TSConstructSignatureDeclaration",{enumerable:!0,get:function(){return r.tsConstructSignatureDeclaration}}),Object.defineProperty(t,"TSConstructorType",{enumerable:!0,get:function(){return r.tsConstructorType}}),Object.defineProperty(t,"TSDeclareFunction",{enumerable:!0,get:function(){return r.tsDeclareFunction}}),Object.defineProperty(t,"TSDeclareMethod",{enumerable:!0,get:function(){return r.tsDeclareMethod}}),Object.defineProperty(t,"TSEnumDeclaration",{enumerable:!0,get:function(){return r.tsEnumDeclaration}}),Object.defineProperty(t,"TSEnumMember",{enumerable:!0,get:function(){return r.tsEnumMember}}),Object.defineProperty(t,"TSExportAssignment",{enumerable:!0,get:function(){return r.tsExportAssignment}}),Object.defineProperty(t,"TSExpressionWithTypeArguments",{enumerable:!0,get:function(){return r.tsExpressionWithTypeArguments}}),Object.defineProperty(t,"TSExternalModuleReference",{enumerable:!0,get:function(){return r.tsExternalModuleReference}}),Object.defineProperty(t,"TSFunctionType",{enumerable:!0,get:function(){return r.tsFunctionType}}),Object.defineProperty(t,"TSImportEqualsDeclaration",{enumerable:!0,get:function(){return r.tsImportEqualsDeclaration}}),Object.defineProperty(t,"TSImportType",{enumerable:!0,get:function(){return r.tsImportType}}),Object.defineProperty(t,"TSIndexSignature",{enumerable:!0,get:function(){return r.tsIndexSignature}}),Object.defineProperty(t,"TSIndexedAccessType",{enumerable:!0,get:function(){return r.tsIndexedAccessType}}),Object.defineProperty(t,"TSInferType",{enumerable:!0,get:function(){return r.tsInferType}}),Object.defineProperty(t,"TSInterfaceBody",{enumerable:!0,get:function(){return r.tsInterfaceBody}}),Object.defineProperty(t,"TSInterfaceDeclaration",{enumerable:!0,get:function(){return r.tsInterfaceDeclaration}}),Object.defineProperty(t,"TSIntersectionType",{enumerable:!0,get:function(){return r.tsIntersectionType}}),Object.defineProperty(t,"TSIntrinsicKeyword",{enumerable:!0,get:function(){return r.tsIntrinsicKeyword}}),Object.defineProperty(t,"TSLiteralType",{enumerable:!0,get:function(){return r.tsLiteralType}}),Object.defineProperty(t,"TSMappedType",{enumerable:!0,get:function(){return r.tsMappedType}}),Object.defineProperty(t,"TSMethodSignature",{enumerable:!0,get:function(){return r.tsMethodSignature}}),Object.defineProperty(t,"TSModuleBlock",{enumerable:!0,get:function(){return r.tsModuleBlock}}),Object.defineProperty(t,"TSModuleDeclaration",{enumerable:!0,get:function(){return r.tsModuleDeclaration}}),Object.defineProperty(t,"TSNamedTupleMember",{enumerable:!0,get:function(){return r.tsNamedTupleMember}}),Object.defineProperty(t,"TSNamespaceExportDeclaration",{enumerable:!0,get:function(){return r.tsNamespaceExportDeclaration}}),Object.defineProperty(t,"TSNeverKeyword",{enumerable:!0,get:function(){return r.tsNeverKeyword}}),Object.defineProperty(t,"TSNonNullExpression",{enumerable:!0,get:function(){return r.tsNonNullExpression}}),Object.defineProperty(t,"TSNullKeyword",{enumerable:!0,get:function(){return r.tsNullKeyword}}),Object.defineProperty(t,"TSNumberKeyword",{enumerable:!0,get:function(){return r.tsNumberKeyword}}),Object.defineProperty(t,"TSObjectKeyword",{enumerable:!0,get:function(){return r.tsObjectKeyword}}),Object.defineProperty(t,"TSOptionalType",{enumerable:!0,get:function(){return r.tsOptionalType}}),Object.defineProperty(t,"TSParameterProperty",{enumerable:!0,get:function(){return r.tsParameterProperty}}),Object.defineProperty(t,"TSParenthesizedType",{enumerable:!0,get:function(){return r.tsParenthesizedType}}),Object.defineProperty(t,"TSPropertySignature",{enumerable:!0,get:function(){return r.tsPropertySignature}}),Object.defineProperty(t,"TSQualifiedName",{enumerable:!0,get:function(){return r.tsQualifiedName}}),Object.defineProperty(t,"TSRestType",{enumerable:!0,get:function(){return r.tsRestType}}),Object.defineProperty(t,"TSStringKeyword",{enumerable:!0,get:function(){return r.tsStringKeyword}}),Object.defineProperty(t,"TSSymbolKeyword",{enumerable:!0,get:function(){return r.tsSymbolKeyword}}),Object.defineProperty(t,"TSThisType",{enumerable:!0,get:function(){return r.tsThisType}}),Object.defineProperty(t,"TSTupleType",{enumerable:!0,get:function(){return r.tsTupleType}}),Object.defineProperty(t,"TSTypeAliasDeclaration",{enumerable:!0,get:function(){return r.tsTypeAliasDeclaration}}),Object.defineProperty(t,"TSTypeAnnotation",{enumerable:!0,get:function(){return r.tsTypeAnnotation}}),Object.defineProperty(t,"TSTypeAssertion",{enumerable:!0,get:function(){return r.tsTypeAssertion}}),Object.defineProperty(t,"TSTypeLiteral",{enumerable:!0,get:function(){return r.tsTypeLiteral}}),Object.defineProperty(t,"TSTypeOperator",{enumerable:!0,get:function(){return r.tsTypeOperator}}),Object.defineProperty(t,"TSTypeParameter",{enumerable:!0,get:function(){return r.tsTypeParameter}}),Object.defineProperty(t,"TSTypeParameterDeclaration",{enumerable:!0,get:function(){return r.tsTypeParameterDeclaration}}),Object.defineProperty(t,"TSTypeParameterInstantiation",{enumerable:!0,get:function(){return r.tsTypeParameterInstantiation}}),Object.defineProperty(t,"TSTypePredicate",{enumerable:!0,get:function(){return r.tsTypePredicate}}),Object.defineProperty(t,"TSTypeQuery",{enumerable:!0,get:function(){return r.tsTypeQuery}}),Object.defineProperty(t,"TSTypeReference",{enumerable:!0,get:function(){return r.tsTypeReference}}),Object.defineProperty(t,"TSUndefinedKeyword",{enumerable:!0,get:function(){return r.tsUndefinedKeyword}}),Object.defineProperty(t,"TSUnionType",{enumerable:!0,get:function(){return r.tsUnionType}}),Object.defineProperty(t,"TSUnknownKeyword",{enumerable:!0,get:function(){return r.tsUnknownKeyword}}),Object.defineProperty(t,"TSVoidKeyword",{enumerable:!0,get:function(){return r.tsVoidKeyword}}),Object.defineProperty(t,"TaggedTemplateExpression",{enumerable:!0,get:function(){return r.taggedTemplateExpression}}),Object.defineProperty(t,"TemplateElement",{enumerable:!0,get:function(){return r.templateElement}}),Object.defineProperty(t,"TemplateLiteral",{enumerable:!0,get:function(){return r.templateLiteral}}),Object.defineProperty(t,"ThisExpression",{enumerable:!0,get:function(){return r.thisExpression}}),Object.defineProperty(t,"ThisTypeAnnotation",{enumerable:!0,get:function(){return r.thisTypeAnnotation}}),Object.defineProperty(t,"ThrowStatement",{enumerable:!0,get:function(){return r.throwStatement}}),Object.defineProperty(t,"TopicReference",{enumerable:!0,get:function(){return r.topicReference}}),Object.defineProperty(t,"TryStatement",{enumerable:!0,get:function(){return r.tryStatement}}),Object.defineProperty(t,"TupleExpression",{enumerable:!0,get:function(){return r.tupleExpression}}),Object.defineProperty(t,"TupleTypeAnnotation",{enumerable:!0,get:function(){return r.tupleTypeAnnotation}}),Object.defineProperty(t,"TypeAlias",{enumerable:!0,get:function(){return r.typeAlias}}),Object.defineProperty(t,"TypeAnnotation",{enumerable:!0,get:function(){return r.typeAnnotation}}),Object.defineProperty(t,"TypeCastExpression",{enumerable:!0,get:function(){return r.typeCastExpression}}),Object.defineProperty(t,"TypeParameter",{enumerable:!0,get:function(){return r.typeParameter}}),Object.defineProperty(t,"TypeParameterDeclaration",{enumerable:!0,get:function(){return r.typeParameterDeclaration}}),Object.defineProperty(t,"TypeParameterInstantiation",{enumerable:!0,get:function(){return r.typeParameterInstantiation}}),Object.defineProperty(t,"TypeofTypeAnnotation",{enumerable:!0,get:function(){return r.typeofTypeAnnotation}}),Object.defineProperty(t,"UnaryExpression",{enumerable:!0,get:function(){return r.unaryExpression}}),Object.defineProperty(t,"UnionTypeAnnotation",{enumerable:!0,get:function(){return r.unionTypeAnnotation}}),Object.defineProperty(t,"UpdateExpression",{enumerable:!0,get:function(){return r.updateExpression}}),Object.defineProperty(t,"V8IntrinsicIdentifier",{enumerable:!0,get:function(){return r.v8IntrinsicIdentifier}}),Object.defineProperty(t,"VariableDeclaration",{enumerable:!0,get:function(){return r.variableDeclaration}}),Object.defineProperty(t,"VariableDeclarator",{enumerable:!0,get:function(){return r.variableDeclarator}}),Object.defineProperty(t,"Variance",{enumerable:!0,get:function(){return r.variance}}),Object.defineProperty(t,"VoidTypeAnnotation",{enumerable:!0,get:function(){return r.voidTypeAnnotation}}),Object.defineProperty(t,"WhileStatement",{enumerable:!0,get:function(){return r.whileStatement}}),Object.defineProperty(t,"WithStatement",{enumerable:!0,get:function(){return r.withStatement}}),Object.defineProperty(t,"YieldExpression",{enumerable:!0,get:function(){return r.yieldExpression}});var r=n(5056)},7919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=0;n<e.children.length;n++){var i=e.children[n];(0,r.isJSXText)(i)?(0,a.default)(i,t):((0,r.isJSXExpressionContainer)(i)&&(i=i.expression),(0,r.isJSXEmptyExpression)(i)||t.push(i))}return t};var r=n(2029),a=n(3357)},8187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.map((function(e){return e.typeAnnotation})),n=(0,a.default)(t);return 1===n.length?n[0]:(0,r.tsUnionType)(n)};var r=n(5056),a=n(6470)},6207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e,!1)};var r=n(8378)},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e)};var r=n(8378)},4301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e,!0,!0)};var r=n(8378)},8378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var r=n(4376),a=n(2029),i=Function.call.bind(Object.prototype.hasOwnProperty);function o(e,t,n){return e&&"string"===typeof e.type?u(e,t,n):e}function s(e,t,n){return Array.isArray(e)?e.map((function(e){return o(e,t,n)})):o(e,t,n)}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return e;var o=e.type,u={type:e.type};if((0,a.isIdentifier)(e))u.name=e.name,i(e,"optional")&&"boolean"===typeof e.optional&&(u.optional=e.optional),i(e,"typeAnnotation")&&(u.typeAnnotation=t?s(e.typeAnnotation,!0,n):e.typeAnnotation);else{if(!i(r.NODE_FIELDS,o))throw new Error('Unknown node type: "'.concat(o,'"'));for(var l=0,d=Object.keys(r.NODE_FIELDS[o]);l<d.length;l++){var f=d[l];i(e,f)&&(u[f]=t?(0,a.isFile)(e)&&"comments"===f?c(e.comments,t,n):s(e[f],!0,n):e[f])}}return i(e,"loc")&&(u.loc=n?null:e.loc),i(e,"leadingComments")&&(u.leadingComments=c(e.leadingComments,t,n)),i(e,"innerComments")&&(u.innerComments=c(e.innerComments,t,n)),i(e,"trailingComments")&&(u.trailingComments=c(e.trailingComments,t,n)),i(e,"extra")&&(u.extra=Object.assign({},e.extra)),u}function c(e,t,n){return e&&t?e.map((function(e){var t=e.type,r=e.value,a=e.loc;return n?{type:t,value:r,loc:null}:{type:t,value:r,loc:a}})):e}},5638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e,!1,!0)};var r=n(8378)},1121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){return(0,r.default)(e,t,[{type:a?"CommentLine":"CommentBlock",value:n}])};var r=n(4139)},4139:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!n||!e)return e;var a="".concat(t,"Comments");if(e[a]){var i;if("leading"===t)e[a]=n.concat(e[a]);else(i=e[a]).push.apply(i,r(n))}else e[a]=n;return e}},9033:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)("innerComments",e,t)};var r=n(3918)},2951:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)("leadingComments",e,t)};var r=n(3918)},2342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){(0,r.default)("trailingComments",e,t)};var r=n(3918)},9508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e,t),(0,a.default)(e,t),(0,i.default)(e,t),e};var r=n(2342),a=n(2951),i=n(9033)},6614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.COMMENT_KEYS.forEach((function(t){e[t]=null})),e};var r=n(9735)},727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WHILE_TYPES=t.USERWHITESPACABLE_TYPES=t.UNARYLIKE_TYPES=t.TYPESCRIPT_TYPES=t.TSTYPE_TYPES=t.TSTYPEELEMENT_TYPES=t.TSENTITYNAME_TYPES=t.TSBASETYPE_TYPES=t.TERMINATORLESS_TYPES=t.STATEMENT_TYPES=t.STANDARDIZED_TYPES=t.SCOPABLE_TYPES=t.PUREISH_TYPES=t.PROPERTY_TYPES=t.PRIVATE_TYPES=t.PATTERN_TYPES=t.PATTERNLIKE_TYPES=t.OBJECTMEMBER_TYPES=t.MODULESPECIFIER_TYPES=t.MODULEDECLARATION_TYPES=t.MISCELLANEOUS_TYPES=t.METHOD_TYPES=t.LVAL_TYPES=t.LOOP_TYPES=t.LITERAL_TYPES=t.JSX_TYPES=t.IMMUTABLE_TYPES=t.FUNCTION_TYPES=t.FUNCTIONPARENT_TYPES=t.FOR_TYPES=t.FORXSTATEMENT_TYPES=t.FLOW_TYPES=t.FLOWTYPE_TYPES=t.FLOWPREDICATE_TYPES=t.FLOWDECLARATION_TYPES=t.FLOWBASEANNOTATION_TYPES=t.EXPRESSION_TYPES=t.EXPRESSIONWRAPPER_TYPES=t.EXPORTDECLARATION_TYPES=t.ENUMMEMBER_TYPES=t.ENUMBODY_TYPES=t.DECLARATION_TYPES=t.CONDITIONAL_TYPES=t.COMPLETIONSTATEMENT_TYPES=t.CLASS_TYPES=t.BLOCK_TYPES=t.BLOCKPARENT_TYPES=t.BINARY_TYPES=t.ACCESSOR_TYPES=void 0;var r=n(4376),a=r.FLIPPED_ALIAS_KEYS.Standardized;t.STANDARDIZED_TYPES=a;var i=r.FLIPPED_ALIAS_KEYS.Expression;t.EXPRESSION_TYPES=i;var o=r.FLIPPED_ALIAS_KEYS.Binary;t.BINARY_TYPES=o;var s=r.FLIPPED_ALIAS_KEYS.Scopable;t.SCOPABLE_TYPES=s;var u=r.FLIPPED_ALIAS_KEYS.BlockParent;t.BLOCKPARENT_TYPES=u;var c=r.FLIPPED_ALIAS_KEYS.Block;t.BLOCK_TYPES=c;var l=r.FLIPPED_ALIAS_KEYS.Statement;t.STATEMENT_TYPES=l;var d=r.FLIPPED_ALIAS_KEYS.Terminatorless;t.TERMINATORLESS_TYPES=d;var f=r.FLIPPED_ALIAS_KEYS.CompletionStatement;t.COMPLETIONSTATEMENT_TYPES=f;var p=r.FLIPPED_ALIAS_KEYS.Conditional;t.CONDITIONAL_TYPES=p;var h=r.FLIPPED_ALIAS_KEYS.Loop;t.LOOP_TYPES=h;var v=r.FLIPPED_ALIAS_KEYS.While;t.WHILE_TYPES=v;var m=r.FLIPPED_ALIAS_KEYS.ExpressionWrapper;t.EXPRESSIONWRAPPER_TYPES=m;var y=r.FLIPPED_ALIAS_KEYS.For;t.FOR_TYPES=y;var g=r.FLIPPED_ALIAS_KEYS.ForXStatement;t.FORXSTATEMENT_TYPES=g;var b=r.FLIPPED_ALIAS_KEYS.Function;t.FUNCTION_TYPES=b;var x=r.FLIPPED_ALIAS_KEYS.FunctionParent;t.FUNCTIONPARENT_TYPES=x;var k=r.FLIPPED_ALIAS_KEYS.Pureish;t.PUREISH_TYPES=k;var w=r.FLIPPED_ALIAS_KEYS.Declaration;t.DECLARATION_TYPES=w;var _=r.FLIPPED_ALIAS_KEYS.PatternLike;t.PATTERNLIKE_TYPES=_;var T=r.FLIPPED_ALIAS_KEYS.LVal;t.LVAL_TYPES=T;var S=r.FLIPPED_ALIAS_KEYS.TSEntityName;t.TSENTITYNAME_TYPES=S;var E=r.FLIPPED_ALIAS_KEYS.Literal;t.LITERAL_TYPES=E;var I=r.FLIPPED_ALIAS_KEYS.Immutable;t.IMMUTABLE_TYPES=I;var C=r.FLIPPED_ALIAS_KEYS.UserWhitespacable;t.USERWHITESPACABLE_TYPES=C;var N=r.FLIPPED_ALIAS_KEYS.Method;t.METHOD_TYPES=N;var A=r.FLIPPED_ALIAS_KEYS.ObjectMember;t.OBJECTMEMBER_TYPES=A;var O=r.FLIPPED_ALIAS_KEYS.Property;t.PROPERTY_TYPES=O;var P=r.FLIPPED_ALIAS_KEYS.UnaryLike;t.UNARYLIKE_TYPES=P;var R=r.FLIPPED_ALIAS_KEYS.Pattern;t.PATTERN_TYPES=R;var D=r.FLIPPED_ALIAS_KEYS.Class;t.CLASS_TYPES=D;var M=r.FLIPPED_ALIAS_KEYS.ModuleDeclaration;t.MODULEDECLARATION_TYPES=M;var L=r.FLIPPED_ALIAS_KEYS.ExportDeclaration;t.EXPORTDECLARATION_TYPES=L;var F=r.FLIPPED_ALIAS_KEYS.ModuleSpecifier;t.MODULESPECIFIER_TYPES=F;var B=r.FLIPPED_ALIAS_KEYS.Accessor;t.ACCESSOR_TYPES=B;var j=r.FLIPPED_ALIAS_KEYS.Private;t.PRIVATE_TYPES=j;var U=r.FLIPPED_ALIAS_KEYS.Flow;t.FLOW_TYPES=U;var V=r.FLIPPED_ALIAS_KEYS.FlowType;t.FLOWTYPE_TYPES=V;var W=r.FLIPPED_ALIAS_KEYS.FlowBaseAnnotation;t.FLOWBASEANNOTATION_TYPES=W;var z=r.FLIPPED_ALIAS_KEYS.FlowDeclaration;t.FLOWDECLARATION_TYPES=z;var q=r.FLIPPED_ALIAS_KEYS.FlowPredicate;t.FLOWPREDICATE_TYPES=q;var K=r.FLIPPED_ALIAS_KEYS.EnumBody;t.ENUMBODY_TYPES=K;var G=r.FLIPPED_ALIAS_KEYS.EnumMember;t.ENUMMEMBER_TYPES=G;var H=r.FLIPPED_ALIAS_KEYS.JSX;t.JSX_TYPES=H;var Z=r.FLIPPED_ALIAS_KEYS.Miscellaneous;t.MISCELLANEOUS_TYPES=Z;var Y=r.FLIPPED_ALIAS_KEYS.TypeScript;t.TYPESCRIPT_TYPES=Y;var X=r.FLIPPED_ALIAS_KEYS.TSTypeElement;t.TSTYPEELEMENT_TYPES=X;var Q=r.FLIPPED_ALIAS_KEYS.TSType;t.TSTYPE_TYPES=Q;var J=r.FLIPPED_ALIAS_KEYS.TSBaseType;t.TSBASETYPE_TYPES=J},9735:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UPDATE_OPERATORS=t.UNARY_OPERATORS=t.STRING_UNARY_OPERATORS=t.STATEMENT_OR_BLOCK_KEYS=t.NUMBER_UNARY_OPERATORS=t.NUMBER_BINARY_OPERATORS=t.NOT_LOCAL_BINDING=t.LOGICAL_OPERATORS=t.INHERIT_KEYS=t.FOR_INIT_KEYS=t.FLATTENABLE_KEYS=t.EQUALITY_BINARY_OPERATORS=t.COMPARISON_BINARY_OPERATORS=t.COMMENT_KEYS=t.BOOLEAN_UNARY_OPERATORS=t.BOOLEAN_NUMBER_BINARY_OPERATORS=t.BOOLEAN_BINARY_OPERATORS=t.BLOCK_SCOPED_SYMBOL=t.BINARY_OPERATORS=t.ASSIGNMENT_OPERATORS=void 0;t.STATEMENT_OR_BLOCK_KEYS=["consequent","body","alternate"];t.FLATTENABLE_KEYS=["body","expressions"];t.FOR_INIT_KEYS=["left","init"];t.COMMENT_KEYS=["leadingComments","trailingComments","innerComments"];var a=["||","&&","??"];t.LOGICAL_OPERATORS=a;t.UPDATE_OPERATORS=["++","--"];var i=[">","<",">=","<="];t.BOOLEAN_NUMBER_BINARY_OPERATORS=i;var o=["==","===","!=","!=="];t.EQUALITY_BINARY_OPERATORS=o;var s=[].concat(o,["in","instanceof"]);t.COMPARISON_BINARY_OPERATORS=s;var u=[].concat(r(s),i);t.BOOLEAN_BINARY_OPERATORS=u;var c=["-","/","%","*","**","&","|",">>",">>>","<<","^"];t.NUMBER_BINARY_OPERATORS=c;var l=["+"].concat(c,r(u));t.BINARY_OPERATORS=l;var d=["=","+="].concat(r(c.map((function(e){return e+"="}))),r(a.map((function(e){return e+"="}))));t.ASSIGNMENT_OPERATORS=d;var f=["delete","!"];t.BOOLEAN_UNARY_OPERATORS=f;var p=["+","-","~"];t.NUMBER_UNARY_OPERATORS=p;var h=["typeof"];t.STRING_UNARY_OPERATORS=h;var v=["void","throw"].concat(f,p,h);t.UNARY_OPERATORS=v;t.INHERIT_KEYS={optional:["typeAnnotation","typeParameters","returnType"],force:["start","loc","end"]};var m=Symbol.for("var used to be block scoped");t.BLOCK_SCOPED_SYMBOL=m;var y=Symbol.for("should not be considered a local binding");t.NOT_LOCAL_BINDING=y},105:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body";return e[t]=(0,r.default)(e[t],e)};var r=n(4448)},5845:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,u){var c,l=[],d=!0,f=r(t);try{for(f.s();!(c=f.n()).done;){var p=c.value;if((0,i.isEmptyStatement)(p)||(d=!1),(0,i.isExpression)(p))l.push(p);else if((0,i.isExpressionStatement)(p))l.push(p.expression);else if((0,i.isVariableDeclaration)(p)){if("var"!==p.kind)return;var h,v=r(p.declarations);try{for(v.s();!(h=v.n()).done;){for(var m=h.value,y=(0,a.default)(m),g=0,b=Object.keys(y);g<b.length;g++){var x=b[g];u.push({kind:p.kind,id:(0,s.default)(y[x])})}m.init&&l.push((0,o.assignmentExpression)("=",m.id,m.init))}}catch(T){v.e(T)}finally{v.f()}d=!0}else if((0,i.isIfStatement)(p)){var k=p.consequent?e([p.consequent],n,u):n.buildUndefinedNode(),w=p.alternate?e([p.alternate],n,u):n.buildUndefinedNode();if(!k||!w)return;l.push((0,o.conditionalExpression)(p.test,k,w))}else if((0,i.isBlockStatement)(p)){var _=e(p.body,n,u);if(!_)return;l.push(_)}else{if(!(0,i.isEmptyStatement)(p))return;0===t.indexOf(p)&&(d=!0)}}}catch(T){f.e(T)}finally{f.f()}d&&l.push(n.buildUndefinedNode());return 1===l.length?l[0]:(0,o.sequenceExpression)(l)};var a=n(4321),i=n(2029),o=n(5056),s=n(8378)},4324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){"eval"!==(e=(0,r.default)(e))&&"arguments"!==e||(e="_"+e);return e};var r=n(2348)},4448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.isBlockStatement)(e))return e;var n=[];(0,r.isEmptyStatement)(e)?n=[]:((0,r.isStatement)(e)||(e=(0,r.isFunction)(t)?(0,a.returnStatement)(e):(0,a.expressionStatement)(e)),n=[e]);return(0,a.blockStatement)(n)};var r=n(2029),a=n(5056)},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key||e.property;!e.computed&&(0,r.isIdentifier)(t)&&(t=(0,a.stringLiteral)(t.name));return t};var r=n(2029),a=n(5056)},9459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2029),a=function(e){(0,r.isExpressionStatement)(e)&&(e=e.expression);if((0,r.isExpression)(e))return e;(0,r.isClass)(e)?e.type="ClassExpression":(0,r.isFunction)(e)&&(e.type="FunctionExpression");if(!(0,r.isExpression)(e))throw new Error("cannot turn ".concat(e.type," to an expression"));return e};t.default=a},2348:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n="",o=r(e+="");try{for(o.s();!(t=o.n()).done;){var s=t.value;n+=(0,i.isIdentifierChar)(s.codePointAt(0))?s:"-"}}catch(u){o.e(u)}finally{o.f()}n=(n=n.replace(/^[-0-9]+/,"")).replace(/[-\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""})),(0,a.default)(n)||(n="_".concat(n));return n||"_"};var a=n(9086),i=n(5208)},2410:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=n(2029),a=n(8378),i=n(2590);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.key;return"method"===e.kind?o.increment()+"":(t=(0,r.isIdentifier)(n)?n.name:(0,r.isStringLiteral)(n)?JSON.stringify(n.value):JSON.stringify((0,i.default)((0,a.default)(n))),e.computed&&(t="[".concat(t,"]")),e.static&&(t="static:".concat(t)),t)}o.uid=0,o.increment=function(){return o.uid>=Number.MAX_SAFE_INTEGER?o.uid=0:o.uid++}},3667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(null==e||!e.length)return;var n=[],a=(0,r.default)(e,t,n);if(!a)return;for(var i=0,o=n;i<o.length;i++){var s=o[i];t.push(s)}return a};var r=n(5845)},2248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2029),a=n(5056),i=function(e,t){if((0,r.isStatement)(e))return e;var n,i=!1;if((0,r.isClass)(e))i=!0,n="ClassDeclaration";else if((0,r.isFunction)(e))i=!0,n="FunctionDeclaration";else if((0,r.isAssignmentExpression)(e))return(0,a.expressionStatement)(e);i&&!e.id&&(n=!1);if(!n){if(t)return!1;throw new Error("cannot turn ".concat(e.type," to a statement"))}return e.type=n,e};t.default=i},9506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(9086),a=n(5056),i=function e(t){if(void 0===t)return(0,a.identifier)("undefined");if(!0===t||!1===t)return(0,a.booleanLiteral)(t);if(null===t)return(0,a.nullLiteral)();if("string"===typeof t)return(0,a.stringLiteral)(t);if("number"===typeof t){var n,i;if(Number.isFinite(t))n=(0,a.numericLiteral)(Math.abs(t));else i=Number.isNaN(t)?(0,a.numericLiteral)(0):(0,a.numericLiteral)(1),n=(0,a.binaryExpression)("/",i,(0,a.numericLiteral)(0));return(t<0||Object.is(t,-0))&&(n=(0,a.unaryExpression)("-",n)),n}if(function(e){return"[object RegExp]"===o(e)}(t)){var s=t.source,u=t.toString().match(/\/([a-z]+|)$/)[1];return(0,a.regExpLiteral)(s,u)}if(Array.isArray(t))return(0,a.arrayExpression)(t.map(e));if(function(e){if("object"!==typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||null===Object.getPrototypeOf(t)}(t)){for(var c=[],l=0,d=Object.keys(t);l<d.length;l++){var f=d[l],p=void 0;p=(0,r.default)(f)?(0,a.identifier)(f):(0,a.stringLiteral)(f),c.push((0,a.objectProperty)(p,e(t[f])))}return(0,a.objectExpression)(c)}throw new Error("don't know how to turn this value into a node")};t.default=i;var o=Function.call.bind(Object.prototype.toString)},7265:function(e,t,n){"use strict";var r=n(3038).default,a=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.patternLikeCommon=t.functionTypeAnnotationCommon=t.functionDeclarationCommon=t.functionCommon=t.classMethodOrPropertyCommon=t.classMethodOrDeclareMethodCommon=void 0;var i=n(2072),o=n(9086),s=n(5208),u=n(9735),c=n(6810),l=(0,c.defineAliasedType)("Standardized");l("ArrayExpression",{fields:{elements:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeOrValueType)("null","Expression","SpreadElement"))),default:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?void 0:[]}},visitor:["elements"],aliases:["Expression"]}),l("AssignmentExpression",{fields:{operator:{validate:function(){if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING)return(0,c.assertValueType)("string");var e=c.assertOneOf.apply(void 0,a(u.ASSIGNMENT_OPERATORS)),t=(0,c.assertOneOf)("=");return function(n,r,a){((0,i.default)("Pattern",n.left)?t:e)(n,r,a)}}()},left:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.assertNodeType)("Identifier","MemberExpression","ArrayPattern","ObjectPattern"):(0,c.assertNodeType)("LVal")},right:{validate:(0,c.assertNodeType)("Expression")}},builder:["operator","left","right"],visitor:["left","right"],aliases:["Expression"]}),l("BinaryExpression",{builder:["operator","left","right"],fields:{operator:{validate:c.assertOneOf.apply(void 0,a(u.BINARY_OPERATORS))},left:{validate:function(){var e=(0,c.assertNodeType)("Expression"),t=(0,c.assertNodeType)("Expression","PrivateName"),n=function(n,r,a){var i="in"===n.operator?t:e;i(n,r,a)};return n.oneOfNodeTypes=["Expression","PrivateName"],n}()},right:{validate:(0,c.assertNodeType)("Expression")}},visitor:["left","right"],aliases:["Binary","Expression"]}),l("InterpreterDirective",{builder:["value"],fields:{value:{validate:(0,c.assertValueType)("string")}}}),l("Directive",{visitor:["value"],fields:{value:{validate:(0,c.assertNodeType)("DirectiveLiteral")}}}),l("DirectiveLiteral",{builder:["value"],fields:{value:{validate:(0,c.assertValueType)("string")}}}),l("BlockStatement",{builder:["body","directives"],visitor:["directives","body"],fields:{directives:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Directive"))),default:[]},body:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Statement")))}},aliases:["Scopable","BlockParent","Block","Statement"]}),l("BreakStatement",{visitor:["label"],fields:{label:{validate:(0,c.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]}),l("CallExpression",{visitor:["callee","arguments","typeParameters","typeArguments"],builder:["callee","arguments"],aliases:["Expression"],fields:Object.assign({callee:{validate:(0,c.assertNodeType)("Expression","V8IntrinsicIdentifier")},arguments:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Expression","SpreadElement","JSXNamespacedName","ArgumentPlaceholder")))}},{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?{}:{optional:{validate:(0,c.assertOneOf)(!0,!1),optional:!0}},{typeArguments:{validate:(0,c.assertNodeType)("TypeParameterInstantiation"),optional:!0},typeParameters:{validate:(0,c.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}})}),l("CatchClause",{visitor:["param","body"],fields:{param:{validate:(0,c.assertNodeType)("Identifier","ArrayPattern","ObjectPattern"),optional:!0},body:{validate:(0,c.assertNodeType)("BlockStatement")}},aliases:["Scopable","BlockParent"]}),l("ConditionalExpression",{visitor:["test","consequent","alternate"],fields:{test:{validate:(0,c.assertNodeType)("Expression")},consequent:{validate:(0,c.assertNodeType)("Expression")},alternate:{validate:(0,c.assertNodeType)("Expression")}},aliases:["Expression","Conditional"]}),l("ContinueStatement",{visitor:["label"],fields:{label:{validate:(0,c.assertNodeType)("Identifier"),optional:!0}},aliases:["Statement","Terminatorless","CompletionStatement"]}),l("DebuggerStatement",{aliases:["Statement"]}),l("DoWhileStatement",{visitor:["test","body"],fields:{test:{validate:(0,c.assertNodeType)("Expression")},body:{validate:(0,c.assertNodeType)("Statement")}},aliases:["Statement","BlockParent","Loop","While","Scopable"]}),l("EmptyStatement",{aliases:["Statement"]}),l("ExpressionStatement",{visitor:["expression"],fields:{expression:{validate:(0,c.assertNodeType)("Expression")}},aliases:["Statement","ExpressionWrapper"]}),l("File",{builder:["program","comments","tokens"],visitor:["program"],fields:{program:{validate:(0,c.assertNodeType)("Program")},comments:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.assertEach)((0,c.assertNodeType)("CommentBlock","CommentLine")):Object.assign((function(){}),{each:{oneOfNodeTypes:["CommentBlock","CommentLine"]}}),optional:!0},tokens:{validate:(0,c.assertEach)(Object.assign((function(){}),{type:"any"})),optional:!0}}}),l("ForInStatement",{visitor:["left","right","body"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.assertNodeType)("VariableDeclaration","Identifier","MemberExpression","ArrayPattern","ObjectPattern"):(0,c.assertNodeType)("VariableDeclaration","LVal")},right:{validate:(0,c.assertNodeType)("Expression")},body:{validate:(0,c.assertNodeType)("Statement")}}}),l("ForStatement",{visitor:["init","test","update","body"],aliases:["Scopable","Statement","For","BlockParent","Loop"],fields:{init:{validate:(0,c.assertNodeType)("VariableDeclaration","Expression"),optional:!0},test:{validate:(0,c.assertNodeType)("Expression"),optional:!0},update:{validate:(0,c.assertNodeType)("Expression"),optional:!0},body:{validate:(0,c.assertNodeType)("Statement")}}});var d={params:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Identifier","Pattern","RestElement")))},generator:{default:!1},async:{default:!1}};t.functionCommon=d;var f={returnType:{validate:(0,c.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,c.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0}};t.functionTypeAnnotationCommon=f;var p=Object.assign({},d,{declare:{validate:(0,c.assertValueType)("boolean"),optional:!0},id:{validate:(0,c.assertNodeType)("Identifier"),optional:!0}});t.functionDeclarationCommon=p,l("FunctionDeclaration",{builder:["id","params","body","generator","async"],visitor:["id","params","body","returnType","typeParameters"],fields:Object.assign({},p,f,{body:{validate:(0,c.assertNodeType)("BlockStatement")}}),aliases:["Scopable","Function","BlockParent","FunctionParent","Statement","Pureish","Declaration"],validate:function(){if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING)return function(){};var e=(0,c.assertNodeType)("Identifier");return function(t,n,r){(0,i.default)("ExportDefaultDeclaration",t)||e(r,"id",r.id)}}()}),l("FunctionExpression",{inherits:"FunctionDeclaration",aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},d,f,{id:{validate:(0,c.assertNodeType)("Identifier"),optional:!0},body:{validate:(0,c.assertNodeType)("BlockStatement")}})});var h={typeAnnotation:{validate:(0,c.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator")))}};t.patternLikeCommon=h,l("Identifier",{builder:["name"],visitor:["typeAnnotation","decorators"],aliases:["Expression","PatternLike","LVal","TSEntityName"],fields:Object.assign({},h,{name:{validate:(0,c.chain)((0,c.assertValueType)("string"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&!(0,o.default)(n,!1))throw new TypeError('"'.concat(n,'" is not a valid identifier name'))}),{type:"string"}))},optional:{validate:(0,c.assertValueType)("boolean"),optional:!0}}),validate:function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING){var a=/\.(\w+)$/.exec(t);if(a){var o=r(a,2)[1],u={computed:!1};if("property"===o){if((0,i.default)("MemberExpression",e,u))return;if((0,i.default)("OptionalMemberExpression",e,u))return}else if("key"===o){if((0,i.default)("Property",e,u))return;if((0,i.default)("Method",e,u))return}else if("exported"===o){if((0,i.default)("ExportSpecifier",e))return}else if("imported"===o){if((0,i.default)("ImportSpecifier",e,{imported:n}))return}else if("meta"===o&&(0,i.default)("MetaProperty",e,{meta:n}))return;if(((0,s.isKeyword)(n.name)||(0,s.isReservedWord)(n.name,!1))&&"this"!==n.name)throw new TypeError('"'.concat(n.name,'" is not a valid identifier'))}}}}),l("IfStatement",{visitor:["test","consequent","alternate"],aliases:["Statement","Conditional"],fields:{test:{validate:(0,c.assertNodeType)("Expression")},consequent:{validate:(0,c.assertNodeType)("Statement")},alternate:{optional:!0,validate:(0,c.assertNodeType)("Statement")}}}),l("LabeledStatement",{visitor:["label","body"],aliases:["Statement"],fields:{label:{validate:(0,c.assertNodeType)("Identifier")},body:{validate:(0,c.assertNodeType)("Statement")}}}),l("StringLiteral",{builder:["value"],fields:{value:{validate:(0,c.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]}),l("NumericLiteral",{builder:["value"],deprecatedAlias:"NumberLiteral",fields:{value:{validate:(0,c.assertValueType)("number")}},aliases:["Expression","Pureish","Literal","Immutable"]}),l("NullLiteral",{aliases:["Expression","Pureish","Literal","Immutable"]}),l("BooleanLiteral",{builder:["value"],fields:{value:{validate:(0,c.assertValueType)("boolean")}},aliases:["Expression","Pureish","Literal","Immutable"]}),l("RegExpLiteral",{builder:["pattern","flags"],deprecatedAlias:"RegexLiteral",aliases:["Expression","Pureish","Literal"],fields:{pattern:{validate:(0,c.assertValueType)("string")},flags:{validate:(0,c.chain)((0,c.assertValueType)("string"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING){var r=/[^gimsuy]/.exec(n);if(r)throw new TypeError('"'.concat(r[0],'" is not a valid RegExp flag'))}}),{type:"string"})),default:""}}}),l("LogicalExpression",{builder:["operator","left","right"],visitor:["left","right"],aliases:["Binary","Expression"],fields:{operator:{validate:c.assertOneOf.apply(void 0,a(u.LOGICAL_OPERATORS))},left:{validate:(0,c.assertNodeType)("Expression")},right:{validate:(0,c.assertNodeType)("Expression")}}}),l("MemberExpression",{builder:["object","property","computed"].concat(a({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?[]:["optional"])),visitor:["object","property"],aliases:["Expression","LVal"],fields:Object.assign({object:{validate:(0,c.assertNodeType)("Expression")},property:{validate:function(){var e=(0,c.assertNodeType)("Identifier","PrivateName"),t=(0,c.assertNodeType)("Expression"),n=function(n,r,a){var i=n.computed?t:e;i(n,r,a)};return n.oneOfNodeTypes=["Expression","Identifier","PrivateName"],n}()},computed:{default:!1}},{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?{}:{optional:{validate:(0,c.assertOneOf)(!0,!1),optional:!0}})}),l("NewExpression",{inherits:"CallExpression"}),l("Program",{visitor:["directives","body"],builder:["body","directives","sourceType","interpreter"],fields:{sourceFile:{validate:(0,c.assertValueType)("string")},sourceType:{validate:(0,c.assertOneOf)("script","module"),default:"script"},interpreter:{validate:(0,c.assertNodeType)("InterpreterDirective"),default:null,optional:!0},directives:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Directive"))),default:[]},body:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Statement")))}},aliases:["Scopable","BlockParent","Block"]}),l("ObjectExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ObjectMethod","ObjectProperty","SpreadElement")))}}}),l("ObjectMethod",{builder:["kind","key","params","body","computed","generator","async"],fields:Object.assign({},d,f,{kind:Object.assign({validate:(0,c.assertOneOf)("method","get","set")},{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?{}:{default:"method"}),computed:{default:!1},key:{validate:function(){var e=(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral"),t=(0,c.assertNodeType)("Expression"),n=function(n,r,a){var i=n.computed?t:e;i(n,r,a)};return n.oneOfNodeTypes=["Expression","Identifier","StringLiteral","NumericLiteral"],n}()},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},body:{validate:(0,c.assertNodeType)("BlockStatement")}}),visitor:["key","params","body","decorators","returnType","typeParameters"],aliases:["UserWhitespacable","Function","Scopable","BlockParent","FunctionParent","Method","ObjectMember"]}),l("ObjectProperty",{builder:["key","value","computed","shorthand"].concat(a({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?[]:["decorators"])),fields:{computed:{default:!1},key:{validate:function(){var e=(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral"),t=(0,c.assertNodeType)("Expression"),n=function(n,r,a){var i=n.computed?t:e;i(n,r,a)};return n.oneOfNodeTypes=["Expression","Identifier","StringLiteral","NumericLiteral"],n}()},value:{validate:(0,c.assertNodeType)("Expression","PatternLike")},shorthand:{validate:(0,c.chain)((0,c.assertValueType)("boolean"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&n&&e.computed)throw new TypeError("Property shorthand of ObjectProperty cannot be true if computed is true")}),{type:"boolean"}),(function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&n&&!(0,i.default)("Identifier",e.key))throw new TypeError("Property shorthand of ObjectProperty cannot be true if key is not an Identifier")})),default:!1},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0}},visitor:["key","value","decorators"],aliases:["UserWhitespacable","Property","ObjectMember"],validate:function(){var e=(0,c.assertNodeType)("Identifier","Pattern"),t=(0,c.assertNodeType)("Expression");return function(n,r,a){({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BABEL_TYPES_8_BREAKING&&((0,i.default)("ObjectPattern",n)?e:t)(a,"value",a.value)}}()}),l("RestElement",{visitor:["argument","typeAnnotation"],builder:["argument"],aliases:["LVal","PatternLike"],deprecatedAlias:"RestProperty",fields:Object.assign({},h,{argument:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.assertNodeType)("Identifier","ArrayPattern","ObjectPattern","MemberExpression"):(0,c.assertNodeType)("LVal")},optional:{validate:(0,c.assertValueType)("boolean"),optional:!0}}),validate:function(e,t){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING){var n=/(\w+)\[(\d+)\]/.exec(t);if(!n)throw new Error("Internal Babel error: malformed key.");var a=r(n,3),i=a[1],o=a[2];if(e[i].length>o+1)throw new TypeError("RestElement must be last element of ".concat(i))}}}),l("ReturnStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,c.assertNodeType)("Expression"),optional:!0}}}),l("SequenceExpression",{visitor:["expressions"],fields:{expressions:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Expression")))}},aliases:["Expression"]}),l("ParenthesizedExpression",{visitor:["expression"],aliases:["Expression","ExpressionWrapper"],fields:{expression:{validate:(0,c.assertNodeType)("Expression")}}}),l("SwitchCase",{visitor:["test","consequent"],fields:{test:{validate:(0,c.assertNodeType)("Expression"),optional:!0},consequent:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Statement")))}}}),l("SwitchStatement",{visitor:["discriminant","cases"],aliases:["Statement","BlockParent","Scopable"],fields:{discriminant:{validate:(0,c.assertNodeType)("Expression")},cases:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("SwitchCase")))}}}),l("ThisExpression",{aliases:["Expression"]}),l("ThrowStatement",{visitor:["argument"],aliases:["Statement","Terminatorless","CompletionStatement"],fields:{argument:{validate:(0,c.assertNodeType)("Expression")}}}),l("TryStatement",{visitor:["block","handler","finalizer"],aliases:["Statement"],fields:{block:{validate:(0,c.chain)((0,c.assertNodeType)("BlockStatement"),Object.assign((function(e){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&!e.handler&&!e.finalizer)throw new TypeError("TryStatement expects either a handler or finalizer, or both")}),{oneOfNodeTypes:["BlockStatement"]}))},handler:{optional:!0,validate:(0,c.assertNodeType)("CatchClause")},finalizer:{optional:!0,validate:(0,c.assertNodeType)("BlockStatement")}}}),l("UnaryExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!0},argument:{validate:(0,c.assertNodeType)("Expression")},operator:{validate:c.assertOneOf.apply(void 0,a(u.UNARY_OPERATORS))}},visitor:["argument"],aliases:["UnaryLike","Expression"]}),l("UpdateExpression",{builder:["operator","argument","prefix"],fields:{prefix:{default:!1},argument:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.assertNodeType)("Identifier","MemberExpression"):(0,c.assertNodeType)("Expression")},operator:{validate:c.assertOneOf.apply(void 0,a(u.UPDATE_OPERATORS))}},visitor:["argument"],aliases:["Expression"]}),l("VariableDeclaration",{builder:["kind","declarations"],visitor:["declarations"],aliases:["Statement","Declaration"],fields:{declare:{validate:(0,c.assertValueType)("boolean"),optional:!0},kind:{validate:(0,c.assertOneOf)("var","let","const")},declarations:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("VariableDeclarator")))}},validate:function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&(0,i.default)("ForXStatement",e,{left:n})&&1!==n.declarations.length)throw new TypeError("Exactly one VariableDeclarator is required in the VariableDeclaration of a ".concat(e.type))}}),l("VariableDeclarator",{visitor:["id","init"],fields:{id:{validate:function(){if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING)return(0,c.assertNodeType)("LVal");var e=(0,c.assertNodeType)("Identifier","ArrayPattern","ObjectPattern"),t=(0,c.assertNodeType)("Identifier");return function(n,r,a){(n.init?e:t)(n,r,a)}}()},definite:{optional:!0,validate:(0,c.assertValueType)("boolean")},init:{optional:!0,validate:(0,c.assertNodeType)("Expression")}}}),l("WhileStatement",{visitor:["test","body"],aliases:["Statement","BlockParent","Loop","While","Scopable"],fields:{test:{validate:(0,c.assertNodeType)("Expression")},body:{validate:(0,c.assertNodeType)("Statement")}}}),l("WithStatement",{visitor:["object","body"],aliases:["Statement"],fields:{object:{validate:(0,c.assertNodeType)("Expression")},body:{validate:(0,c.assertNodeType)("Statement")}}}),l("AssignmentPattern",{visitor:["left","right","decorators"],builder:["left","right"],aliases:["Pattern","PatternLike","LVal"],fields:Object.assign({},h,{left:{validate:(0,c.assertNodeType)("Identifier","ObjectPattern","ArrayPattern","MemberExpression")},right:{validate:(0,c.assertNodeType)("Expression")},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0}})}),l("ArrayPattern",{visitor:["elements","typeAnnotation"],builder:["elements"],aliases:["Pattern","PatternLike","LVal"],fields:Object.assign({},h,{elements:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeOrValueType)("null","PatternLike")))},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},optional:{validate:(0,c.assertValueType)("boolean"),optional:!0}})}),l("ArrowFunctionExpression",{builder:["params","body","async"],visitor:["params","body","returnType","typeParameters"],aliases:["Scopable","Function","BlockParent","FunctionParent","Expression","Pureish"],fields:Object.assign({},d,f,{expression:{validate:(0,c.assertValueType)("boolean")},body:{validate:(0,c.assertNodeType)("BlockStatement","Expression")}})}),l("ClassBody",{visitor:["body"],fields:{body:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ClassMethod","ClassPrivateMethod","ClassProperty","ClassPrivateProperty","ClassAccessorProperty","TSDeclareMethod","TSIndexSignature","StaticBlock")))}}}),l("ClassExpression",{builder:["id","superClass","body","decorators"],visitor:["id","body","superClass","mixins","typeParameters","superTypeParameters","implements","decorators"],aliases:["Scopable","Class","Expression"],fields:{id:{validate:(0,c.assertNodeType)("Identifier"),optional:!0},typeParameters:{validate:(0,c.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,c.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,c.assertNodeType)("Expression")},superTypeParameters:{validate:(0,c.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("TSExpressionWithTypeArguments","ClassImplements"))),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},mixins:{validate:(0,c.assertNodeType)("InterfaceExtends"),optional:!0}}}),l("ClassDeclaration",{inherits:"ClassExpression",aliases:["Scopable","Class","Statement","Declaration"],fields:{id:{validate:(0,c.assertNodeType)("Identifier")},typeParameters:{validate:(0,c.assertNodeType)("TypeParameterDeclaration","TSTypeParameterDeclaration","Noop"),optional:!0},body:{validate:(0,c.assertNodeType)("ClassBody")},superClass:{optional:!0,validate:(0,c.assertNodeType)("Expression")},superTypeParameters:{validate:(0,c.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0},implements:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("TSExpressionWithTypeArguments","ClassImplements"))),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},mixins:{validate:(0,c.assertNodeType)("InterfaceExtends"),optional:!0},declare:{validate:(0,c.assertValueType)("boolean"),optional:!0},abstract:{validate:(0,c.assertValueType)("boolean"),optional:!0}},validate:function(){var e=(0,c.assertNodeType)("Identifier");return function(t,n,r){({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).BABEL_TYPES_8_BREAKING&&((0,i.default)("ExportDefaultDeclaration",t)||e(r,"id",r.id))}}()}),l("ExportAllDeclaration",{visitor:["source"],aliases:["Statement","Declaration","ModuleDeclaration","ExportDeclaration"],fields:{source:{validate:(0,c.assertNodeType)("StringLiteral")},exportKind:(0,c.validateOptional)((0,c.assertOneOf)("type","value")),assertions:{optional:!0,validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ImportAttribute")))}}}),l("ExportDefaultDeclaration",{visitor:["declaration"],aliases:["Statement","Declaration","ModuleDeclaration","ExportDeclaration"],fields:{declaration:{validate:(0,c.assertNodeType)("FunctionDeclaration","TSDeclareFunction","ClassDeclaration","Expression")},exportKind:(0,c.validateOptional)((0,c.assertOneOf)("value"))}}),l("ExportNamedDeclaration",{visitor:["declaration","specifiers","source"],aliases:["Statement","Declaration","ModuleDeclaration","ExportDeclaration"],fields:{declaration:{optional:!0,validate:(0,c.chain)((0,c.assertNodeType)("Declaration"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&n&&e.specifiers.length)throw new TypeError("Only declaration or specifiers is allowed on ExportNamedDeclaration")}),{oneOfNodeTypes:["Declaration"]}),(function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&n&&e.source)throw new TypeError("Cannot export a declaration from a source")}))},assertions:{optional:!0,validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ImportAttribute")))},specifiers:{default:[],validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)(function(){var e=(0,c.assertNodeType)("ExportSpecifier","ExportDefaultSpecifier","ExportNamespaceSpecifier"),t=(0,c.assertNodeType)("ExportSpecifier");return{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?function(n,r,a){(n.source?e:t)(n,r,a)}:e}()))},source:{validate:(0,c.assertNodeType)("StringLiteral"),optional:!0},exportKind:(0,c.validateOptional)((0,c.assertOneOf)("type","value"))}}),l("ExportSpecifier",{visitor:["local","exported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,c.assertNodeType)("Identifier")},exported:{validate:(0,c.assertNodeType)("Identifier","StringLiteral")},exportKind:{validate:(0,c.assertOneOf)("type","value"),optional:!0}}}),l("ForOfStatement",{visitor:["left","right","body"],builder:["left","right","body","await"],aliases:["Scopable","Statement","For","BlockParent","Loop","ForXStatement"],fields:{left:{validate:function(){if(!{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING)return(0,c.assertNodeType)("VariableDeclaration","LVal");var e=(0,c.assertNodeType)("VariableDeclaration"),t=(0,c.assertNodeType)("Identifier","MemberExpression","ArrayPattern","ObjectPattern");return function(n,r,a){(0,i.default)("VariableDeclaration",a)?e(n,r,a):t(n,r,a)}}()},right:{validate:(0,c.assertNodeType)("Expression")},body:{validate:(0,c.assertNodeType)("Statement")},await:{default:!1}}}),l("ImportDeclaration",{visitor:["specifiers","source"],aliases:["Statement","Declaration","ModuleDeclaration"],fields:{assertions:{optional:!0,validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ImportAttribute")))},specifiers:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("ImportSpecifier","ImportDefaultSpecifier","ImportNamespaceSpecifier")))},source:{validate:(0,c.assertNodeType)("StringLiteral")},importKind:{validate:(0,c.assertOneOf)("type","typeof","value"),optional:!0}}}),l("ImportDefaultSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,c.assertNodeType)("Identifier")}}}),l("ImportNamespaceSpecifier",{visitor:["local"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,c.assertNodeType)("Identifier")}}}),l("ImportSpecifier",{visitor:["local","imported"],aliases:["ModuleSpecifier"],fields:{local:{validate:(0,c.assertNodeType)("Identifier")},imported:{validate:(0,c.assertNodeType)("Identifier","StringLiteral")},importKind:{validate:(0,c.assertOneOf)("type","typeof","value"),optional:!0}}}),l("MetaProperty",{visitor:["meta","property"],aliases:["Expression"],fields:{meta:{validate:(0,c.chain)((0,c.assertNodeType)("Identifier"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING){var r;switch(n.name){case"function":r="sent";break;case"new":r="target";break;case"import":r="meta"}if(!(0,i.default)("Identifier",e.property,{name:r}))throw new TypeError("Unrecognised MetaProperty")}}),{oneOfNodeTypes:["Identifier"]}))},property:{validate:(0,c.assertNodeType)("Identifier")}}});var v={abstract:{validate:(0,c.assertValueType)("boolean"),optional:!0},accessibility:{validate:(0,c.assertOneOf)("public","private","protected"),optional:!0},static:{default:!1},override:{default:!1},computed:{default:!1},optional:{validate:(0,c.assertValueType)("boolean"),optional:!0},key:{validate:(0,c.chain)(function(){var e=(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral"),t=(0,c.assertNodeType)("Expression");return function(n,r,a){(n.computed?t:e)(n,r,a)}}(),(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral","Expression"))}};t.classMethodOrPropertyCommon=v;var m=Object.assign({},d,v,{params:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Identifier","Pattern","RestElement","TSParameterProperty")))},kind:{validate:(0,c.assertOneOf)("get","set","method","constructor"),default:"method"},access:{validate:(0,c.chain)((0,c.assertValueType)("string"),(0,c.assertOneOf)("public","private","protected")),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0}});t.classMethodOrDeclareMethodCommon=m,l("ClassMethod",{aliases:["Function","Scopable","BlockParent","FunctionParent","Method"],builder:["kind","key","params","body","computed","static","generator","async"],visitor:["key","params","body","decorators","returnType","typeParameters"],fields:Object.assign({},m,f,{body:{validate:(0,c.assertNodeType)("BlockStatement")}})}),l("ObjectPattern",{visitor:["properties","typeAnnotation","decorators"],builder:["properties"],aliases:["Pattern","PatternLike","LVal"],fields:Object.assign({},h,{properties:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("RestElement","ObjectProperty")))}})}),l("SpreadElement",{visitor:["argument"],aliases:["UnaryLike"],deprecatedAlias:"SpreadProperty",fields:{argument:{validate:(0,c.assertNodeType)("Expression")}}}),l("Super",{aliases:["Expression"]}),l("TaggedTemplateExpression",{visitor:["tag","quasi","typeParameters"],builder:["tag","quasi"],aliases:["Expression"],fields:{tag:{validate:(0,c.assertNodeType)("Expression")},quasi:{validate:(0,c.assertNodeType)("TemplateLiteral")},typeParameters:{validate:(0,c.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0}}}),l("TemplateElement",{builder:["value","tail"],fields:{value:{validate:(0,c.assertShape)({raw:{validate:(0,c.assertValueType)("string")},cooked:{validate:(0,c.assertValueType)("string"),optional:!0}})},tail:{default:!1}}}),l("TemplateLiteral",{visitor:["quasis","expressions"],aliases:["Expression","Literal"],fields:{quasis:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("TemplateElement")))},expressions:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Expression","TSType")),(function(e,t,n){if(e.quasis.length!==n.length+1)throw new TypeError("Number of ".concat(e.type," quasis should be exactly one more than the number of expressions.\nExpected ").concat(n.length+1," quasis but got ").concat(e.quasis.length))}))}}}),l("YieldExpression",{builder:["argument","delegate"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{delegate:{validate:(0,c.chain)((0,c.assertValueType)("boolean"),Object.assign((function(e,t,n){if({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&n&&!e.argument)throw new TypeError("Property delegate of YieldExpression cannot be true if there is no argument")}),{type:"boolean"})),default:!1},argument:{optional:!0,validate:(0,c.assertNodeType)("Expression")}}}),l("AwaitExpression",{builder:["argument"],visitor:["argument"],aliases:["Expression","Terminatorless"],fields:{argument:{validate:(0,c.assertNodeType)("Expression")}}}),l("Import",{aliases:["Expression"]}),l("BigIntLiteral",{builder:["value"],fields:{value:{validate:(0,c.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]}),l("ExportNamespaceSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,c.assertNodeType)("Identifier")}}}),l("OptionalMemberExpression",{builder:["object","property","computed","optional"],visitor:["object","property"],aliases:["Expression"],fields:{object:{validate:(0,c.assertNodeType)("Expression")},property:{validate:function(){var e=(0,c.assertNodeType)("Identifier"),t=(0,c.assertNodeType)("Expression"),n=function(n,r,a){var i=n.computed?t:e;i(n,r,a)};return n.oneOfNodeTypes=["Expression","Identifier"],n}()},computed:{default:!1},optional:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.chain)((0,c.assertValueType)("boolean"),(0,c.assertOptionalChainStart)()):(0,c.assertValueType)("boolean")}}}),l("OptionalCallExpression",{visitor:["callee","arguments","typeParameters","typeArguments"],builder:["callee","arguments","optional"],aliases:["Expression"],fields:{callee:{validate:(0,c.assertNodeType)("Expression")},arguments:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Expression","SpreadElement","JSXNamespacedName","ArgumentPlaceholder")))},optional:{validate:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?(0,c.chain)((0,c.assertValueType)("boolean"),(0,c.assertOptionalChainStart)()):(0,c.assertValueType)("boolean")},typeArguments:{validate:(0,c.assertNodeType)("TypeParameterInstantiation"),optional:!0},typeParameters:{validate:(0,c.assertNodeType)("TSTypeParameterInstantiation"),optional:!0}}}),l("ClassProperty",{visitor:["key","value","typeAnnotation","decorators"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property"],fields:Object.assign({},v,{value:{validate:(0,c.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,c.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,c.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},readonly:{validate:(0,c.assertValueType)("boolean"),optional:!0},declare:{validate:(0,c.assertValueType)("boolean"),optional:!0},variance:{validate:(0,c.assertNodeType)("Variance"),optional:!0}})}),l("ClassAccessorProperty",{visitor:["key","value","typeAnnotation","decorators"],builder:["key","value","typeAnnotation","decorators","computed","static"],aliases:["Property","Accessor"],fields:Object.assign({},v,{key:{validate:(0,c.chain)(function(){var e=(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral","PrivateName"),t=(0,c.assertNodeType)("Expression");return function(n,r,a){(n.computed?t:e)(n,r,a)}}(),(0,c.assertNodeType)("Identifier","StringLiteral","NumericLiteral","Expression","PrivateName"))},value:{validate:(0,c.assertNodeType)("Expression"),optional:!0},definite:{validate:(0,c.assertValueType)("boolean"),optional:!0},typeAnnotation:{validate:(0,c.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},readonly:{validate:(0,c.assertValueType)("boolean"),optional:!0},declare:{validate:(0,c.assertValueType)("boolean"),optional:!0},variance:{validate:(0,c.assertNodeType)("Variance"),optional:!0}})}),l("ClassPrivateProperty",{visitor:["key","value","decorators","typeAnnotation"],builder:["key","value","decorators","static"],aliases:["Property","Private"],fields:{key:{validate:(0,c.assertNodeType)("PrivateName")},value:{validate:(0,c.assertNodeType)("Expression"),optional:!0},typeAnnotation:{validate:(0,c.assertNodeType)("TypeAnnotation","TSTypeAnnotation","Noop"),optional:!0},decorators:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Decorator"))),optional:!0},readonly:{validate:(0,c.assertValueType)("boolean"),optional:!0},definite:{validate:(0,c.assertValueType)("boolean"),optional:!0},variance:{validate:(0,c.assertNodeType)("Variance"),optional:!0}}}),l("ClassPrivateMethod",{builder:["kind","key","params","body","static"],visitor:["key","params","body","decorators","returnType","typeParameters"],aliases:["Function","Scopable","BlockParent","FunctionParent","Method","Private"],fields:Object.assign({},m,f,{key:{validate:(0,c.assertNodeType)("PrivateName")},body:{validate:(0,c.assertNodeType)("BlockStatement")}})}),l("PrivateName",{visitor:["id"],aliases:["Private"],fields:{id:{validate:(0,c.assertNodeType)("Identifier")}}}),l("StaticBlock",{visitor:["body"],fields:{body:{validate:(0,c.chain)((0,c.assertValueType)("array"),(0,c.assertEach)((0,c.assertNodeType)("Statement")))}},aliases:["Scopable","BlockParent","FunctionParent"]})},3814:function(e,t,n){"use strict";var r=n(6810);(0,r.default)("ArgumentPlaceholder",{}),(0,r.default)("BindExpression",{visitor:["object","callee"],aliases:["Expression"],fields:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING?{object:{validate:(0,r.assertNodeType)("Expression")},callee:{validate:(0,r.assertNodeType)("Expression")}}:{object:{validate:Object.assign((function(){}),{oneOfNodeTypes:["Expression"]})},callee:{validate:Object.assign((function(){}),{oneOfNodeTypes:["Expression"]})}}}),(0,r.default)("ImportAttribute",{visitor:["key","value"],fields:{key:{validate:(0,r.assertNodeType)("Identifier","StringLiteral")},value:{validate:(0,r.assertNodeType)("StringLiteral")}}}),(0,r.default)("Decorator",{visitor:["expression"],fields:{expression:{validate:(0,r.assertNodeType)("Expression")}}}),(0,r.default)("DoExpression",{visitor:["body"],builder:["body","async"],aliases:["Expression"],fields:{body:{validate:(0,r.assertNodeType)("BlockStatement")},async:{validate:(0,r.assertValueType)("boolean"),default:!1}}}),(0,r.default)("ExportDefaultSpecifier",{visitor:["exported"],aliases:["ModuleSpecifier"],fields:{exported:{validate:(0,r.assertNodeType)("Identifier")}}}),(0,r.default)("RecordExpression",{visitor:["properties"],aliases:["Expression"],fields:{properties:{validate:(0,r.chain)((0,r.assertValueType)("array"),(0,r.assertEach)((0,r.assertNodeType)("ObjectProperty","SpreadElement")))}}}),(0,r.default)("TupleExpression",{fields:{elements:{validate:(0,r.chain)((0,r.assertValueType)("array"),(0,r.assertEach)((0,r.assertNodeType)("Expression","SpreadElement"))),default:[]}},visitor:["elements"],aliases:["Expression"]}),(0,r.default)("DecimalLiteral",{builder:["value"],fields:{value:{validate:(0,r.assertValueType)("string")}},aliases:["Expression","Pureish","Literal","Immutable"]}),(0,r.default)("ModuleExpression",{visitor:["body"],fields:{body:{validate:(0,r.assertNodeType)("Program")}},aliases:["Expression"]}),(0,r.default)("TopicReference",{aliases:["Expression"]}),(0,r.default)("PipelineTopicExpression",{builder:["expression"],visitor:["expression"],fields:{expression:{validate:(0,r.assertNodeType)("Expression")}},aliases:["Expression"]}),(0,r.default)("PipelineBareFunction",{builder:["callee"],visitor:["callee"],fields:{callee:{validate:(0,r.assertNodeType)("Expression")}},aliases:["Expression"]}),(0,r.default)("PipelinePrimaryTopicReference",{aliases:["Expression"]})},1571:function(e,t,n){"use strict";var r=n(6810),a=(0,r.defineAliasedType)("Flow"),i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TypeParameterDeclaration";a(e,{builder:["id","typeParameters","extends","body"],visitor:["id","typeParameters","extends","mixins","implements","body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)(t),extends:(0,r.validateOptional)((0,r.arrayOfType)("InterfaceExtends")),mixins:(0,r.validateOptional)((0,r.arrayOfType)("InterfaceExtends")),implements:(0,r.validateOptional)((0,r.arrayOfType)("ClassImplements")),body:(0,r.validateType)("ObjectTypeAnnotation")}})};a("AnyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("ArrayTypeAnnotation",{visitor:["elementType"],aliases:["FlowType"],fields:{elementType:(0,r.validateType)("FlowType")}}),a("BooleanTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("BooleanLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("NullLiteralTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("ClassImplements",{visitor:["id","typeParameters"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)("TypeParameterInstantiation")}}),i("DeclareClass"),a("DeclareFunction",{visitor:["id"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),predicate:(0,r.validateOptionalType)("DeclaredPredicate")}}),i("DeclareInterface"),a("DeclareModule",{builder:["id","body","kind"],visitor:["id","body"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)(["Identifier","StringLiteral"]),body:(0,r.validateType)("BlockStatement"),kind:(0,r.validateOptional)((0,r.assertOneOf)("CommonJS","ES"))}}),a("DeclareModuleExports",{visitor:["typeAnnotation"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{typeAnnotation:(0,r.validateType)("TypeAnnotation")}}),a("DeclareTypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)("TypeParameterDeclaration"),right:(0,r.validateType)("FlowType")}}),a("DeclareOpaqueType",{visitor:["id","typeParameters","supertype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,r.validateOptionalType)("FlowType"),impltype:(0,r.validateOptionalType)("FlowType")}}),a("DeclareVariable",{visitor:["id"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier")}}),a("DeclareExportDeclaration",{visitor:["declaration","specifiers","source"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{declaration:(0,r.validateOptionalType)("Flow"),specifiers:(0,r.validateOptional)((0,r.arrayOfType)(["ExportSpecifier","ExportNamespaceSpecifier"])),source:(0,r.validateOptionalType)("StringLiteral"),default:(0,r.validateOptional)((0,r.assertValueType)("boolean"))}}),a("DeclareExportAllDeclaration",{visitor:["source"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{source:(0,r.validateType)("StringLiteral"),exportKind:(0,r.validateOptional)((0,r.assertOneOf)("type","value"))}}),a("DeclaredPredicate",{visitor:["value"],aliases:["FlowPredicate"],fields:{value:(0,r.validateType)("Flow")}}),a("ExistsTypeAnnotation",{aliases:["FlowType"]}),a("FunctionTypeAnnotation",{visitor:["typeParameters","params","rest","returnType"],aliases:["FlowType"],fields:{typeParameters:(0,r.validateOptionalType)("TypeParameterDeclaration"),params:(0,r.validate)((0,r.arrayOfType)("FunctionTypeParam")),rest:(0,r.validateOptionalType)("FunctionTypeParam"),this:(0,r.validateOptionalType)("FunctionTypeParam"),returnType:(0,r.validateType)("FlowType")}}),a("FunctionTypeParam",{visitor:["name","typeAnnotation"],fields:{name:(0,r.validateOptionalType)("Identifier"),typeAnnotation:(0,r.validateType)("FlowType"),optional:(0,r.validateOptional)((0,r.assertValueType)("boolean"))}}),a("GenericTypeAnnotation",{visitor:["id","typeParameters"],aliases:["FlowType"],fields:{id:(0,r.validateType)(["Identifier","QualifiedTypeIdentifier"]),typeParameters:(0,r.validateOptionalType)("TypeParameterInstantiation")}}),a("InferredPredicate",{aliases:["FlowPredicate"]}),a("InterfaceExtends",{visitor:["id","typeParameters"],fields:{id:(0,r.validateType)(["Identifier","QualifiedTypeIdentifier"]),typeParameters:(0,r.validateOptionalType)("TypeParameterInstantiation")}}),i("InterfaceDeclaration"),a("InterfaceTypeAnnotation",{visitor:["extends","body"],aliases:["FlowType"],fields:{extends:(0,r.validateOptional)((0,r.arrayOfType)("InterfaceExtends")),body:(0,r.validateType)("ObjectTypeAnnotation")}}),a("IntersectionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,r.validate)((0,r.arrayOfType)("FlowType"))}}),a("MixedTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("EmptyTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("NullableTypeAnnotation",{visitor:["typeAnnotation"],aliases:["FlowType"],fields:{typeAnnotation:(0,r.validateType)("FlowType")}}),a("NumberLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,r.validate)((0,r.assertValueType)("number"))}}),a("NumberTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("ObjectTypeAnnotation",{visitor:["properties","indexers","callProperties","internalSlots"],aliases:["FlowType"],builder:["properties","indexers","callProperties","internalSlots","exact"],fields:{properties:(0,r.validate)((0,r.arrayOfType)(["ObjectTypeProperty","ObjectTypeSpreadProperty"])),indexers:(0,r.validateOptional)((0,r.arrayOfType)("ObjectTypeIndexer")),callProperties:(0,r.validateOptional)((0,r.arrayOfType)("ObjectTypeCallProperty")),internalSlots:(0,r.validateOptional)((0,r.arrayOfType)("ObjectTypeInternalSlot")),exact:{validate:(0,r.assertValueType)("boolean"),default:!1},inexact:(0,r.validateOptional)((0,r.assertValueType)("boolean"))}}),a("ObjectTypeInternalSlot",{visitor:["id","value","optional","static","method"],aliases:["UserWhitespacable"],fields:{id:(0,r.validateType)("Identifier"),value:(0,r.validateType)("FlowType"),optional:(0,r.validate)((0,r.assertValueType)("boolean")),static:(0,r.validate)((0,r.assertValueType)("boolean")),method:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("ObjectTypeCallProperty",{visitor:["value"],aliases:["UserWhitespacable"],fields:{value:(0,r.validateType)("FlowType"),static:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("ObjectTypeIndexer",{visitor:["id","key","value","variance"],aliases:["UserWhitespacable"],fields:{id:(0,r.validateOptionalType)("Identifier"),key:(0,r.validateType)("FlowType"),value:(0,r.validateType)("FlowType"),static:(0,r.validate)((0,r.assertValueType)("boolean")),variance:(0,r.validateOptionalType)("Variance")}}),a("ObjectTypeProperty",{visitor:["key","value","variance"],aliases:["UserWhitespacable"],fields:{key:(0,r.validateType)(["Identifier","StringLiteral"]),value:(0,r.validateType)("FlowType"),kind:(0,r.validate)((0,r.assertOneOf)("init","get","set")),static:(0,r.validate)((0,r.assertValueType)("boolean")),proto:(0,r.validate)((0,r.assertValueType)("boolean")),optional:(0,r.validate)((0,r.assertValueType)("boolean")),variance:(0,r.validateOptionalType)("Variance"),method:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("ObjectTypeSpreadProperty",{visitor:["argument"],aliases:["UserWhitespacable"],fields:{argument:(0,r.validateType)("FlowType")}}),a("OpaqueType",{visitor:["id","typeParameters","supertype","impltype"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)("TypeParameterDeclaration"),supertype:(0,r.validateOptionalType)("FlowType"),impltype:(0,r.validateType)("FlowType")}}),a("QualifiedTypeIdentifier",{visitor:["id","qualification"],fields:{id:(0,r.validateType)("Identifier"),qualification:(0,r.validateType)(["Identifier","QualifiedTypeIdentifier"])}}),a("StringLiteralTypeAnnotation",{builder:["value"],aliases:["FlowType"],fields:{value:(0,r.validate)((0,r.assertValueType)("string"))}}),a("StringTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("SymbolTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("ThisTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("TupleTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,r.validate)((0,r.arrayOfType)("FlowType"))}}),a("TypeofTypeAnnotation",{visitor:["argument"],aliases:["FlowType"],fields:{argument:(0,r.validateType)("FlowType")}}),a("TypeAlias",{visitor:["id","typeParameters","right"],aliases:["FlowDeclaration","Statement","Declaration"],fields:{id:(0,r.validateType)("Identifier"),typeParameters:(0,r.validateOptionalType)("TypeParameterDeclaration"),right:(0,r.validateType)("FlowType")}}),a("TypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:(0,r.validateType)("FlowType")}}),a("TypeCastExpression",{visitor:["expression","typeAnnotation"],aliases:["ExpressionWrapper","Expression"],fields:{expression:(0,r.validateType)("Expression"),typeAnnotation:(0,r.validateType)("TypeAnnotation")}}),a("TypeParameter",{visitor:["bound","default","variance"],fields:{name:(0,r.validate)((0,r.assertValueType)("string")),bound:(0,r.validateOptionalType)("TypeAnnotation"),default:(0,r.validateOptionalType)("FlowType"),variance:(0,r.validateOptionalType)("Variance")}}),a("TypeParameterDeclaration",{visitor:["params"],fields:{params:(0,r.validate)((0,r.arrayOfType)("TypeParameter"))}}),a("TypeParameterInstantiation",{visitor:["params"],fields:{params:(0,r.validate)((0,r.arrayOfType)("FlowType"))}}),a("UnionTypeAnnotation",{visitor:["types"],aliases:["FlowType"],fields:{types:(0,r.validate)((0,r.arrayOfType)("FlowType"))}}),a("Variance",{builder:["kind"],fields:{kind:(0,r.validate)((0,r.assertOneOf)("minus","plus"))}}),a("VoidTypeAnnotation",{aliases:["FlowType","FlowBaseAnnotation"]}),a("EnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:{id:(0,r.validateType)("Identifier"),body:(0,r.validateType)(["EnumBooleanBody","EnumNumberBody","EnumStringBody","EnumSymbolBody"])}}),a("EnumBooleanBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,r.validate)((0,r.assertValueType)("boolean")),members:(0,r.validateArrayOfType)("EnumBooleanMember"),hasUnknownMembers:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("EnumNumberBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,r.validate)((0,r.assertValueType)("boolean")),members:(0,r.validateArrayOfType)("EnumNumberMember"),hasUnknownMembers:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("EnumStringBody",{aliases:["EnumBody"],visitor:["members"],fields:{explicitType:(0,r.validate)((0,r.assertValueType)("boolean")),members:(0,r.validateArrayOfType)(["EnumStringMember","EnumDefaultedMember"]),hasUnknownMembers:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("EnumSymbolBody",{aliases:["EnumBody"],visitor:["members"],fields:{members:(0,r.validateArrayOfType)("EnumDefaultedMember"),hasUnknownMembers:(0,r.validate)((0,r.assertValueType)("boolean"))}}),a("EnumBooleanMember",{aliases:["EnumMember"],visitor:["id"],fields:{id:(0,r.validateType)("Identifier"),init:(0,r.validateType)("BooleanLiteral")}}),a("EnumNumberMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,r.validateType)("Identifier"),init:(0,r.validateType)("NumericLiteral")}}),a("EnumStringMember",{aliases:["EnumMember"],visitor:["id","init"],fields:{id:(0,r.validateType)("Identifier"),init:(0,r.validateType)("StringLiteral")}}),a("EnumDefaultedMember",{aliases:["EnumMember"],visitor:["id"],fields:{id:(0,r.validateType)("Identifier")}}),a("IndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,r.validateType)("FlowType"),indexType:(0,r.validateType)("FlowType")}}),a("OptionalIndexedAccessType",{visitor:["objectType","indexType"],aliases:["FlowType"],fields:{objectType:(0,r.validateType)("FlowType"),indexType:(0,r.validateType)("FlowType"),optional:(0,r.validate)((0,r.assertValueType)("boolean"))}})},4376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ALIAS_KEYS",{enumerable:!0,get:function(){return a.ALIAS_KEYS}}),Object.defineProperty(t,"BUILDER_KEYS",{enumerable:!0,get:function(){return a.BUILDER_KEYS}}),Object.defineProperty(t,"DEPRECATED_KEYS",{enumerable:!0,get:function(){return a.DEPRECATED_KEYS}}),Object.defineProperty(t,"FLIPPED_ALIAS_KEYS",{enumerable:!0,get:function(){return a.FLIPPED_ALIAS_KEYS}}),Object.defineProperty(t,"NODE_FIELDS",{enumerable:!0,get:function(){return a.NODE_FIELDS}}),Object.defineProperty(t,"NODE_PARENT_VALIDATIONS",{enumerable:!0,get:function(){return a.NODE_PARENT_VALIDATIONS}}),Object.defineProperty(t,"PLACEHOLDERS",{enumerable:!0,get:function(){return i.PLACEHOLDERS}}),Object.defineProperty(t,"PLACEHOLDERS_ALIAS",{enumerable:!0,get:function(){return i.PLACEHOLDERS_ALIAS}}),Object.defineProperty(t,"PLACEHOLDERS_FLIPPED_ALIAS",{enumerable:!0,get:function(){return i.PLACEHOLDERS_FLIPPED_ALIAS}}),t.TYPES=void 0,Object.defineProperty(t,"VISITOR_KEYS",{enumerable:!0,get:function(){return a.VISITOR_KEYS}});var r=n(1158);n(7265),n(1571),n(7426),n(1996),n(3814),n(7524);var a=n(6810),i=n(6104);r(a.VISITOR_KEYS),r(a.ALIAS_KEYS),r(a.FLIPPED_ALIAS_KEYS),r(a.NODE_FIELDS),r(a.BUILDER_KEYS),r(a.DEPRECATED_KEYS),r(i.PLACEHOLDERS_ALIAS),r(i.PLACEHOLDERS_FLIPPED_ALIAS);var o=[].concat(Object.keys(a.VISITOR_KEYS),Object.keys(a.FLIPPED_ALIAS_KEYS),Object.keys(a.DEPRECATED_KEYS));t.TYPES=o},7426:function(e,t,n){"use strict";var r=n(6810),a=(0,r.defineAliasedType)("JSX");a("JSXAttribute",{visitor:["name","value"],aliases:["Immutable"],fields:{name:{validate:(0,r.assertNodeType)("JSXIdentifier","JSXNamespacedName")},value:{optional:!0,validate:(0,r.assertNodeType)("JSXElement","JSXFragment","StringLiteral","JSXExpressionContainer")}}}),a("JSXClosingElement",{visitor:["name"],aliases:["Immutable"],fields:{name:{validate:(0,r.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")}}}),a("JSXElement",{builder:["openingElement","closingElement","children","selfClosing"],visitor:["openingElement","children","closingElement"],aliases:["Immutable","Expression"],fields:{openingElement:{validate:(0,r.assertNodeType)("JSXOpeningElement")},closingElement:{optional:!0,validate:(0,r.assertNodeType)("JSXClosingElement")},children:{validate:(0,r.chain)((0,r.assertValueType)("array"),(0,r.assertEach)((0,r.assertNodeType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")))},selfClosing:{validate:(0,r.assertValueType)("boolean"),optional:!0}}}),a("JSXEmptyExpression",{}),a("JSXExpressionContainer",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,r.assertNodeType)("Expression","JSXEmptyExpression")}}}),a("JSXSpreadChild",{visitor:["expression"],aliases:["Immutable"],fields:{expression:{validate:(0,r.assertNodeType)("Expression")}}}),a("JSXIdentifier",{builder:["name"],fields:{name:{validate:(0,r.assertValueType)("string")}}}),a("JSXMemberExpression",{visitor:["object","property"],fields:{object:{validate:(0,r.assertNodeType)("JSXMemberExpression","JSXIdentifier")},property:{validate:(0,r.assertNodeType)("JSXIdentifier")}}}),a("JSXNamespacedName",{visitor:["namespace","name"],fields:{namespace:{validate:(0,r.assertNodeType)("JSXIdentifier")},name:{validate:(0,r.assertNodeType)("JSXIdentifier")}}}),a("JSXOpeningElement",{builder:["name","attributes","selfClosing"],visitor:["name","attributes"],aliases:["Immutable"],fields:{name:{validate:(0,r.assertNodeType)("JSXIdentifier","JSXMemberExpression","JSXNamespacedName")},selfClosing:{default:!1},attributes:{validate:(0,r.chain)((0,r.assertValueType)("array"),(0,r.assertEach)((0,r.assertNodeType)("JSXAttribute","JSXSpreadAttribute")))},typeParameters:{validate:(0,r.assertNodeType)("TypeParameterInstantiation","TSTypeParameterInstantiation"),optional:!0}}}),a("JSXSpreadAttribute",{visitor:["argument"],fields:{argument:{validate:(0,r.assertNodeType)("Expression")}}}),a("JSXText",{aliases:["Immutable"],builder:["value"],fields:{value:{validate:(0,r.assertValueType)("string")}}}),a("JSXFragment",{builder:["openingFragment","closingFragment","children"],visitor:["openingFragment","children","closingFragment"],aliases:["Immutable","Expression"],fields:{openingFragment:{validate:(0,r.assertNodeType)("JSXOpeningFragment")},closingFragment:{validate:(0,r.assertNodeType)("JSXClosingFragment")},children:{validate:(0,r.chain)((0,r.assertValueType)("array"),(0,r.assertEach)((0,r.assertNodeType)("JSXText","JSXExpressionContainer","JSXSpreadChild","JSXElement","JSXFragment")))}}}),a("JSXOpeningFragment",{aliases:["Immutable"]}),a("JSXClosingFragment",{aliases:["Immutable"]})},1996:function(e,t,n){"use strict";var r=n(319).default,a=n(6810),i=n(6104),o=(0,a.defineAliasedType)("Miscellaneous");o("Noop",{visitor:[]}),o("Placeholder",{visitor:[],builder:["expectedNode","name"],fields:{name:{validate:(0,a.assertNodeType)("Identifier")},expectedNode:{validate:a.assertOneOf.apply(void 0,r(i.PLACEHOLDERS))}}}),o("V8IntrinsicIdentifier",{builder:["name"],fields:{name:{validate:(0,a.assertValueType)("string")}}})},6104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLACEHOLDERS_FLIPPED_ALIAS=t.PLACEHOLDERS_ALIAS=t.PLACEHOLDERS=void 0;var r=n(6810),a=["Identifier","StringLiteral","Expression","Statement","Declaration","BlockStatement","ClassBody","Pattern"];t.PLACEHOLDERS=a;var i={Declaration:["Statement"],Pattern:["PatternLike","LVal"]};t.PLACEHOLDERS_ALIAS=i;for(var o=0,s=a;o<s.length;o++){var u=s[o],c=r.ALIAS_KEYS[u];null!=c&&c.length&&(i[u]=c)}var l={};t.PLACEHOLDERS_FLIPPED_ALIAS=l,Object.keys(i).forEach((function(e){i[e].forEach((function(t){Object.hasOwnProperty.call(l,t)||(l[t]=[]),l[t].push(e)}))}))},7524:function(e,t,n){"use strict";var r,a=n(9713).default,i=n(6810),o=n(7265),s=n(2072),u=(0,i.defineAliasedType)("TypeScript"),c=(0,i.assertValueType)("boolean"),l={returnType:{validate:(0,i.assertNodeType)("TSTypeAnnotation","Noop"),optional:!0},typeParameters:{validate:(0,i.assertNodeType)("TSTypeParameterDeclaration","Noop"),optional:!0}};u("TSParameterProperty",{aliases:["LVal"],visitor:["parameter"],fields:{accessibility:{validate:(0,i.assertOneOf)("public","private","protected"),optional:!0},readonly:{validate:(0,i.assertValueType)("boolean"),optional:!0},parameter:{validate:(0,i.assertNodeType)("Identifier","AssignmentPattern")},override:{validate:(0,i.assertValueType)("boolean"),optional:!0},decorators:{validate:(0,i.chain)((0,i.assertValueType)("array"),(0,i.assertEach)((0,i.assertNodeType)("Decorator"))),optional:!0}}}),u("TSDeclareFunction",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","params","returnType"],fields:Object.assign({},o.functionDeclarationCommon,l)}),u("TSDeclareMethod",{visitor:["decorators","key","typeParameters","params","returnType"],fields:Object.assign({},o.classMethodOrDeclareMethodCommon,l)}),u("TSQualifiedName",{aliases:["TSEntityName"],visitor:["left","right"],fields:{left:(0,i.validateType)("TSEntityName"),right:(0,i.validateType)("Identifier")}});var d=(a(r={typeParameters:(0,i.validateOptionalType)("TSTypeParameterDeclaration")},"parameters",(0,i.validateArrayOfType)(["Identifier","RestElement"])),a(r,"typeAnnotation",(0,i.validateOptionalType)("TSTypeAnnotation")),r),f={aliases:["TSTypeElement"],visitor:["typeParameters","parameters","typeAnnotation"],fields:d};u("TSCallSignatureDeclaration",f),u("TSConstructSignatureDeclaration",f);var p={key:(0,i.validateType)("Expression"),computed:(0,i.validate)(c),optional:(0,i.validateOptional)(c)};u("TSPropertySignature",{aliases:["TSTypeElement"],visitor:["key","typeAnnotation","initializer"],fields:Object.assign({},p,{readonly:(0,i.validateOptional)(c),typeAnnotation:(0,i.validateOptionalType)("TSTypeAnnotation"),initializer:(0,i.validateOptionalType)("Expression"),kind:{validate:(0,i.assertOneOf)("get","set")}})}),u("TSMethodSignature",{aliases:["TSTypeElement"],visitor:["key","typeParameters","parameters","typeAnnotation"],fields:Object.assign({},d,p,{kind:{validate:(0,i.assertOneOf)("method","get","set")}})}),u("TSIndexSignature",{aliases:["TSTypeElement"],visitor:["parameters","typeAnnotation"],fields:{readonly:(0,i.validateOptional)(c),static:(0,i.validateOptional)(c),parameters:(0,i.validateArrayOfType)("Identifier"),typeAnnotation:(0,i.validateOptionalType)("TSTypeAnnotation")}});for(var h=0,v=["TSAnyKeyword","TSBooleanKeyword","TSBigIntKeyword","TSIntrinsicKeyword","TSNeverKeyword","TSNullKeyword","TSNumberKeyword","TSObjectKeyword","TSStringKeyword","TSSymbolKeyword","TSUndefinedKeyword","TSUnknownKeyword","TSVoidKeyword"];h<v.length;h++){u(v[h],{aliases:["TSType","TSBaseType"],visitor:[],fields:{}})}u("TSThisType",{aliases:["TSType","TSBaseType"],visitor:[],fields:{}});var m={aliases:["TSType"],visitor:["typeParameters","parameters","typeAnnotation"]};u("TSFunctionType",Object.assign({},m,{fields:d})),u("TSConstructorType",Object.assign({},m,{fields:Object.assign({},d,{abstract:(0,i.validateOptional)(c)})})),u("TSTypeReference",{aliases:["TSType"],visitor:["typeName","typeParameters"],fields:{typeName:(0,i.validateType)("TSEntityName"),typeParameters:(0,i.validateOptionalType)("TSTypeParameterInstantiation")}}),u("TSTypePredicate",{aliases:["TSType"],visitor:["parameterName","typeAnnotation"],builder:["parameterName","typeAnnotation","asserts"],fields:{parameterName:(0,i.validateType)(["Identifier","TSThisType"]),typeAnnotation:(0,i.validateOptionalType)("TSTypeAnnotation"),asserts:(0,i.validateOptional)(c)}}),u("TSTypeQuery",{aliases:["TSType"],visitor:["exprName"],fields:{exprName:(0,i.validateType)(["TSEntityName","TSImportType"])}}),u("TSTypeLiteral",{aliases:["TSType"],visitor:["members"],fields:{members:(0,i.validateArrayOfType)("TSTypeElement")}}),u("TSArrayType",{aliases:["TSType"],visitor:["elementType"],fields:{elementType:(0,i.validateType)("TSType")}}),u("TSTupleType",{aliases:["TSType"],visitor:["elementTypes"],fields:{elementTypes:(0,i.validateArrayOfType)(["TSType","TSNamedTupleMember"])}}),u("TSOptionalType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,i.validateType)("TSType")}}),u("TSRestType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,i.validateType)("TSType")}}),u("TSNamedTupleMember",{visitor:["label","elementType"],builder:["label","elementType","optional"],fields:{label:(0,i.validateType)("Identifier"),optional:{validate:c,default:!1},elementType:(0,i.validateType)("TSType")}});var y={aliases:["TSType"],visitor:["types"],fields:{types:(0,i.validateArrayOfType)("TSType")}};u("TSUnionType",y),u("TSIntersectionType",y),u("TSConditionalType",{aliases:["TSType"],visitor:["checkType","extendsType","trueType","falseType"],fields:{checkType:(0,i.validateType)("TSType"),extendsType:(0,i.validateType)("TSType"),trueType:(0,i.validateType)("TSType"),falseType:(0,i.validateType)("TSType")}}),u("TSInferType",{aliases:["TSType"],visitor:["typeParameter"],fields:{typeParameter:(0,i.validateType)("TSTypeParameter")}}),u("TSParenthesizedType",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{typeAnnotation:(0,i.validateType)("TSType")}}),u("TSTypeOperator",{aliases:["TSType"],visitor:["typeAnnotation"],fields:{operator:(0,i.validate)((0,i.assertValueType)("string")),typeAnnotation:(0,i.validateType)("TSType")}}),u("TSIndexedAccessType",{aliases:["TSType"],visitor:["objectType","indexType"],fields:{objectType:(0,i.validateType)("TSType"),indexType:(0,i.validateType)("TSType")}}),u("TSMappedType",{aliases:["TSType"],visitor:["typeParameter","typeAnnotation","nameType"],fields:{readonly:(0,i.validateOptional)(c),typeParameter:(0,i.validateType)("TSTypeParameter"),optional:(0,i.validateOptional)(c),typeAnnotation:(0,i.validateOptionalType)("TSType"),nameType:(0,i.validateOptionalType)("TSType")}}),u("TSLiteralType",{aliases:["TSType","TSBaseType"],visitor:["literal"],fields:{literal:{validate:function(){var e=(0,i.assertNodeType)("NumericLiteral","BigIntLiteral"),t=(0,i.assertOneOf)("-"),n=(0,i.assertNodeType)("NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral");function r(r,a,i){(0,s.default)("UnaryExpression",i)?(t(i,"operator",i.operator),e(i,"argument",i.argument)):n(r,a,i)}return r.oneOfNodeTypes=["NumericLiteral","StringLiteral","BooleanLiteral","BigIntLiteral","UnaryExpression"],r}()}}}),u("TSExpressionWithTypeArguments",{aliases:["TSType"],visitor:["expression","typeParameters"],fields:{expression:(0,i.validateType)("TSEntityName"),typeParameters:(0,i.validateOptionalType)("TSTypeParameterInstantiation")}}),u("TSInterfaceDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","extends","body"],fields:{declare:(0,i.validateOptional)(c),id:(0,i.validateType)("Identifier"),typeParameters:(0,i.validateOptionalType)("TSTypeParameterDeclaration"),extends:(0,i.validateOptional)((0,i.arrayOfType)("TSExpressionWithTypeArguments")),body:(0,i.validateType)("TSInterfaceBody")}}),u("TSInterfaceBody",{visitor:["body"],fields:{body:(0,i.validateArrayOfType)("TSTypeElement")}}),u("TSTypeAliasDeclaration",{aliases:["Statement","Declaration"],visitor:["id","typeParameters","typeAnnotation"],fields:{declare:(0,i.validateOptional)(c),id:(0,i.validateType)("Identifier"),typeParameters:(0,i.validateOptionalType)("TSTypeParameterDeclaration"),typeAnnotation:(0,i.validateType)("TSType")}}),u("TSAsExpression",{aliases:["Expression"],visitor:["expression","typeAnnotation"],fields:{expression:(0,i.validateType)("Expression"),typeAnnotation:(0,i.validateType)("TSType")}}),u("TSTypeAssertion",{aliases:["Expression"],visitor:["typeAnnotation","expression"],fields:{typeAnnotation:(0,i.validateType)("TSType"),expression:(0,i.validateType)("Expression")}}),u("TSEnumDeclaration",{aliases:["Statement","Declaration"],visitor:["id","members"],fields:{declare:(0,i.validateOptional)(c),const:(0,i.validateOptional)(c),id:(0,i.validateType)("Identifier"),members:(0,i.validateArrayOfType)("TSEnumMember"),initializer:(0,i.validateOptionalType)("Expression")}}),u("TSEnumMember",{visitor:["id","initializer"],fields:{id:(0,i.validateType)(["Identifier","StringLiteral"]),initializer:(0,i.validateOptionalType)("Expression")}}),u("TSModuleDeclaration",{aliases:["Statement","Declaration"],visitor:["id","body"],fields:{declare:(0,i.validateOptional)(c),global:(0,i.validateOptional)(c),id:(0,i.validateType)(["Identifier","StringLiteral"]),body:(0,i.validateType)(["TSModuleBlock","TSModuleDeclaration"])}}),u("TSModuleBlock",{aliases:["Scopable","Block","BlockParent"],visitor:["body"],fields:{body:(0,i.validateArrayOfType)("Statement")}}),u("TSImportType",{aliases:["TSType"],visitor:["argument","qualifier","typeParameters"],fields:{argument:(0,i.validateType)("StringLiteral"),qualifier:(0,i.validateOptionalType)("TSEntityName"),typeParameters:(0,i.validateOptionalType)("TSTypeParameterInstantiation")}}),u("TSImportEqualsDeclaration",{aliases:["Statement"],visitor:["id","moduleReference"],fields:{isExport:(0,i.validate)(c),id:(0,i.validateType)("Identifier"),moduleReference:(0,i.validateType)(["TSEntityName","TSExternalModuleReference"]),importKind:{validate:(0,i.assertOneOf)("type","value"),optional:!0}}}),u("TSExternalModuleReference",{visitor:["expression"],fields:{expression:(0,i.validateType)("StringLiteral")}}),u("TSNonNullExpression",{aliases:["Expression"],visitor:["expression"],fields:{expression:(0,i.validateType)("Expression")}}),u("TSExportAssignment",{aliases:["Statement"],visitor:["expression"],fields:{expression:(0,i.validateType)("Expression")}}),u("TSNamespaceExportDeclaration",{aliases:["Statement"],visitor:["id"],fields:{id:(0,i.validateType)("Identifier")}}),u("TSTypeAnnotation",{visitor:["typeAnnotation"],fields:{typeAnnotation:{validate:(0,i.assertNodeType)("TSType")}}}),u("TSTypeParameterInstantiation",{visitor:["params"],fields:{params:{validate:(0,i.chain)((0,i.assertValueType)("array"),(0,i.assertEach)((0,i.assertNodeType)("TSType")))}}}),u("TSTypeParameterDeclaration",{visitor:["params"],fields:{params:{validate:(0,i.chain)((0,i.assertValueType)("array"),(0,i.assertEach)((0,i.assertNodeType)("TSTypeParameter")))}}}),u("TSTypeParameter",{builder:["constraint","default","name"],visitor:["constraint","default"],fields:{name:{validate:(0,i.assertValueType)("string")},constraint:{validate:(0,i.assertNodeType)("TSType"),optional:!0},default:{validate:(0,i.assertNodeType)("TSType"),optional:!0}}})},6810:function(e,t,n){"use strict";var r=n(3269).default,a=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VISITOR_KEYS=t.NODE_PARENT_VALIDATIONS=t.NODE_FIELDS=t.FLIPPED_ALIAS_KEYS=t.DEPRECATED_KEYS=t.BUILDER_KEYS=t.ALIAS_KEYS=void 0,t.arrayOf=y,t.arrayOfType=g,t.assertEach=b,t.assertNodeOrValueType=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];function a(e,n,a){var s,u=r(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(h(a)===c||(0,i.default)(c,a))return void(0,o.validateChild)(e,n,a)}}catch(l){u.e(l)}finally{u.f()}throw new TypeError("Property ".concat(n," of ").concat(e.type," expected node to be of a type ").concat(JSON.stringify(t)," but instead got ").concat(JSON.stringify(null==a?void 0:a.type)))}return a.oneOfNodeOrValueTypes=t,a},t.assertNodeType=x,t.assertOneOf=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];function r(e,n,r){if(t.indexOf(r)<0)throw new TypeError("Property ".concat(n," expected value to be one of ").concat(JSON.stringify(t)," but got ").concat(JSON.stringify(r)))}return r.oneOf=t,r},t.assertOptionalChainStart=function(){return function(e){for(var t,n=e;e;){var r=n.type;if("OptionalCallExpression"!==r){if("OptionalMemberExpression"!==r)break;if(n.optional)return;n=n.object}else{if(n.optional)return;n=n.callee}}throw new TypeError("Non-optional ".concat(e.type," must chain from an optional OptionalMemberExpression or OptionalCallExpression. Found chain from ").concat(null==(t=n)?void 0:t.type))}},t.assertShape=function(e){function t(t,n,r){for(var a=[],i=0,s=Object.keys(e);i<s.length;i++){var u=s[i];try{(0,o.validateField)(t,u,r[u],e[u])}catch(c){if(c instanceof TypeError){a.push(c.message);continue}throw c}}if(a.length)throw new TypeError("Property ".concat(n," of ").concat(t.type," expected to have the following:\n").concat(a.join("\n")))}return t.shapeOf=e,t},t.assertValueType=k,t.chain=w,t.default=S,t.defineAliasedType=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.aliases;o||(i.inherits&&(o=null==(r=E[i.inherits].aliases)?void 0:r.slice()),null!=o||(o=[]),i.aliases=o);var s=t.filter((function(e){return!o.includes(e)}));return(n=o).unshift.apply(n,a(s)),S(e,i)}},t.typeIs=m,t.validate=v,t.validateArrayOfType=function(e){return v(g(e))},t.validateOptional=function(e){return{validate:e,optional:!0}},t.validateOptionalType=function(e){return{validate:m(e),optional:!0}},t.validateType=function(e){return v(m(e))};var i=n(2072),o=n(3685),s={};t.VISITOR_KEYS=s;var u={};t.ALIAS_KEYS=u;var c={};t.FLIPPED_ALIAS_KEYS=c;var l={};t.NODE_FIELDS=l;var d={};t.BUILDER_KEYS=d;var f={};t.DEPRECATED_KEYS=f;var p={};function h(e){return Array.isArray(e)?"array":null===e?"null":typeof e}function v(e){return{validate:e}}function m(e){return"string"===typeof e?x(e):x.apply(void 0,a(e))}function y(e){return w(k("array"),b(e))}function g(e){return y(m(e))}function b(e){function t(t,n,r){if(Array.isArray(r))for(var a=0;a<r.length;a++){var i="".concat(n,"[").concat(a,"]"),s=r[a];e(t,i,s),{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BABEL_TYPES_8_BREAKING&&(0,o.validateChild)(t,i,s)}}return t.each=e,t}function x(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];function a(e,n,a){var s,u=r(t);try{for(u.s();!(s=u.n()).done;){var c=s.value;if((0,i.default)(c,a))return void(0,o.validateChild)(e,n,a)}}catch(l){u.e(l)}finally{u.f()}throw new TypeError("Property ".concat(n," of ").concat(e.type," expected node to be of a type ").concat(JSON.stringify(t)," but instead got ").concat(JSON.stringify(null==a?void 0:a.type)))}return a.oneOfNodeTypes=t,a}function k(e){function t(t,n,r){if(!(h(r)===e))throw new TypeError("Property ".concat(n," expected type of ").concat(e," but got ").concat(h(r)))}return t.type=e,t}function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];function a(){var e,n=r(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.apply(void 0,arguments)}}catch(i){n.e(i)}finally{n.f()}}if(a.chainOf=t,t.length>=2&&"type"in t[0]&&"array"===t[0].type&&!("each"in t[1]))throw new Error('An assertValueType("array") validator can only be followed by an assertEach(...) validator.');return a}t.NODE_PARENT_VALIDATIONS=p;var _=["aliases","builder","deprecatedAlias","fields","inherits","visitor","validate"],T=["default","optional","validate"];function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.inherits&&E[t.inherits]||{},a=t.fields;if(!a&&(a={},n.fields)){var i,o=Object.getOwnPropertyNames(n.fields),v=r(o);try{for(v.s();!(i=v.n()).done;){var m=i.value,y=n.fields[m],g=y.default;if(Array.isArray(g)?g.length>0:g&&"object"===typeof g)throw new Error("field defaults can only be primitives or empty arrays currently");a[m]={default:Array.isArray(g)?[]:g,optional:y.optional,validate:y.validate}}}catch(j){v.e(j)}finally{v.f()}}for(var b=t.visitor||n.visitor||[],x=t.aliases||n.aliases||[],w=t.builder||n.builder||t.visitor||[],S=0,I=Object.keys(t);S<I.length;S++){var C=I[S];if(-1===_.indexOf(C))throw new Error('Unknown type option "'.concat(C,'" on ').concat(e))}t.deprecatedAlias&&(f[t.deprecatedAlias]=e);var N,A=r(b.concat(w));try{for(A.s();!(N=A.n()).done;){var O=N.value;a[O]=a[O]||{}}}catch(j){A.e(j)}finally{A.f()}for(var P=0,R=Object.keys(a);P<R.length;P++){var D=R[P],M=a[D];void 0!==M.default&&-1===w.indexOf(D)&&(M.optional=!0),void 0===M.default?M.default=null:M.validate||null==M.default||(M.validate=k(h(M.default)));for(var L=0,F=Object.keys(M);L<F.length;L++){var B=F[L];if(-1===T.indexOf(B))throw new Error('Unknown field key "'.concat(B,'" on ').concat(e,".").concat(D))}}s[e]=t.visitor=b,d[e]=t.builder=w,l[e]=t.fields=a,u[e]=t.aliases=x,x.forEach((function(t){c[t]=c[t]||[],c[t].push(e)})),t.validate&&(p[e]=t.validate),E[e]=t}var E={}},6106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={react:!0,assertNode:!0,createTypeAnnotationBasedOnTypeof:!0,createUnionTypeAnnotation:!0,createFlowUnionType:!0,createTSUnionType:!0,cloneNode:!0,clone:!0,cloneDeep:!0,cloneDeepWithoutLoc:!0,cloneWithoutLoc:!0,addComment:!0,addComments:!0,inheritInnerComments:!0,inheritLeadingComments:!0,inheritsComments:!0,inheritTrailingComments:!0,removeComments:!0,ensureBlock:!0,toBindingIdentifierName:!0,toBlock:!0,toComputedKey:!0,toExpression:!0,toIdentifier:!0,toKeyAlias:!0,toSequenceExpression:!0,toStatement:!0,valueToNode:!0,appendToMemberExpression:!0,inherits:!0,prependToMemberExpression:!0,removeProperties:!0,removePropertiesDeep:!0,removeTypeDuplicates:!0,getBindingIdentifiers:!0,getOuterBindingIdentifiers:!0,traverse:!0,traverseFast:!0,shallowEqual:!0,is:!0,isBinding:!0,isBlockScoped:!0,isImmutable:!0,isLet:!0,isNode:!0,isNodesEquivalent:!0,isPlaceholderType:!0,isReferenced:!0,isScope:!0,isSpecifierDefault:!0,isType:!0,isValidES3Identifier:!0,isValidIdentifier:!0,isVar:!0,matchesPattern:!0,validate:!0,buildMatchMemberExpression:!0};Object.defineProperty(t,"addComment",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"addComments",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(t,"appendToMemberExpression",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(t,"assertNode",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"buildMatchMemberExpression",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"cloneDeep",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"cloneDeepWithoutLoc",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"cloneNode",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"cloneWithoutLoc",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"createFlowUnionType",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"createTSUnionType",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"createTypeAnnotationBasedOnTypeof",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"createUnionTypeAnnotation",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"ensureBlock",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"getBindingIdentifiers",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(t,"getOuterBindingIdentifiers",{enumerable:!0,get:function(){return G.default}}),Object.defineProperty(t,"inheritInnerComments",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"inheritLeadingComments",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"inheritTrailingComments",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"inherits",{enumerable:!0,get:function(){return U.default}}),Object.defineProperty(t,"inheritsComments",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"is",{enumerable:!0,get:function(){return X.default}}),Object.defineProperty(t,"isBinding",{enumerable:!0,get:function(){return Q.default}}),Object.defineProperty(t,"isBlockScoped",{enumerable:!0,get:function(){return J.default}}),Object.defineProperty(t,"isImmutable",{enumerable:!0,get:function(){return $.default}}),Object.defineProperty(t,"isLet",{enumerable:!0,get:function(){return ee.default}}),Object.defineProperty(t,"isNode",{enumerable:!0,get:function(){return te.default}}),Object.defineProperty(t,"isNodesEquivalent",{enumerable:!0,get:function(){return ne.default}}),Object.defineProperty(t,"isPlaceholderType",{enumerable:!0,get:function(){return re.default}}),Object.defineProperty(t,"isReferenced",{enumerable:!0,get:function(){return ae.default}}),Object.defineProperty(t,"isScope",{enumerable:!0,get:function(){return ie.default}}),Object.defineProperty(t,"isSpecifierDefault",{enumerable:!0,get:function(){return oe.default}}),Object.defineProperty(t,"isType",{enumerable:!0,get:function(){return se.default}}),Object.defineProperty(t,"isValidES3Identifier",{enumerable:!0,get:function(){return ue.default}}),Object.defineProperty(t,"isValidIdentifier",{enumerable:!0,get:function(){return ce.default}}),Object.defineProperty(t,"isVar",{enumerable:!0,get:function(){return le.default}}),Object.defineProperty(t,"matchesPattern",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(t,"prependToMemberExpression",{enumerable:!0,get:function(){return V.default}}),t.react=void 0,Object.defineProperty(t,"removeComments",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"removeProperties",{enumerable:!0,get:function(){return W.default}}),Object.defineProperty(t,"removePropertiesDeep",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(t,"removeTypeDuplicates",{enumerable:!0,get:function(){return q.default}}),Object.defineProperty(t,"shallowEqual",{enumerable:!0,get:function(){return Y.default}}),Object.defineProperty(t,"toBindingIdentifierName",{enumerable:!0,get:function(){return N.default}}),Object.defineProperty(t,"toBlock",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"toComputedKey",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"toExpression",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"toIdentifier",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"toKeyAlias",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(t,"toSequenceExpression",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(t,"toStatement",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(t,"traverse",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(t,"traverseFast",{enumerable:!0,get:function(){return Z.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(t,"valueToNode",{enumerable:!0,get:function(){return F.default}});var a=n(4834),i=n(6092),o=n(7919),s=n(5310),u=n(9342);Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=n(6649),l=n(9569),d=n(8187),f=n(5056);Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var p=n(9625);Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var h=n(8378),v=n(6207),m=n(217),y=n(4301),g=n(5638),b=n(1121),x=n(4139),k=n(9033),w=n(2951),_=n(9508),T=n(2342),S=n(6614),E=n(727);Object.keys(E).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===E[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return E[e]}}))}));var I=n(9735);Object.keys(I).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===I[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return I[e]}}))}));var C=n(105),N=n(4324),A=n(4448),O=n(638),P=n(9459),R=n(2348),D=n(2410),M=n(3667),L=n(2248),F=n(9506),B=n(4376);Object.keys(B).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===B[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return B[e]}}))}));var j=n(3087),U=n(5465),V=n(9851),W=n(2831),z=n(2590),q=n(2859),K=n(4321),G=n(3711),H=n(9343);Object.keys(H).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===H[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return H[e]}}))}));var Z=n(272),Y=n(5162),X=n(2072),Q=n(5181),J=n(9919),$=n(6696),ee=n(838),te=n(9953),ne=n(6416),re=n(9520),ae=n(3596),ie=n(5995),oe=n(4848),se=n(141),ue=n(2805),ce=n(9086),le=n(9184),de=n(3561),fe=n(3685),pe=n(7029),he=n(2029);Object.keys(he).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===he[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return he[e]}}))}));var ve=n(4091);Object.keys(ve).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===ve[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return ve[e]}}))}));var me={isReactComponent:a.default,isCompatTag:i.default,buildChildren:o.default};t.react=me},3087:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.object=(0,r.memberExpression)(e.object,e.property,e.computed),e.property=t,e.computed=!!n,e};var r=n(5056)},2859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t){for(var n={},i={},o=new Set,s=[],u=0;u<t.length;u++){var c=t[u];if(c&&!(s.indexOf(c)>=0)){if((0,r.isAnyTypeAnnotation)(c))return[c];if((0,r.isFlowBaseAnnotation)(c))i[c.type]=c;else if((0,r.isUnionTypeAnnotation)(c))o.has(c.types)||(t=t.concat(c.types),o.add(c.types));else if((0,r.isGenericTypeAnnotation)(c)){var l=a(c.id);if(n[l]){var d=n[l];d.typeParameters?c.typeParameters&&(d.typeParameters.params=e(d.typeParameters.params.concat(c.typeParameters.params))):d=c.typeParameters}else n[l]=c}else s.push(c)}}for(var f=0,p=Object.keys(i);f<p.length;f++){var h=p[f];s.push(i[h])}for(var v=0,m=Object.keys(n);v<m.length;v++){var y=m[v];s.push(n[y])}return s};var r=n(2029);function a(e){return(0,r.isIdentifier)(e)?e.name:"".concat(e.id.name,".").concat(a(e.qualification))}},5465:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e||!t)return e;var n,o=r(a.INHERIT_KEYS.optional);try{for(o.s();!(n=o.n()).done;){var s=n.value;null==e[s]&&(e[s]=t[s])}}catch(h){o.e(h)}finally{o.f()}for(var u=0,c=Object.keys(t);u<c.length;u++){var l=c[u];"_"===l[0]&&"__clone"!==l&&(e[l]=t[l])}var d,f=r(a.INHERIT_KEYS.force);try{for(f.s();!(d=f.n()).done;){var p=d.value;e[p]=t[p]}}catch(h){f.e(h)}finally{f.f()}return(0,i.default)(e,t),e};var a=n(9735),i=n(9508)},9851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.object=(0,r.memberExpression)(t,e.object),e};var r=n(5056)},2831:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.preserveComments?i:o,s=r(a);try{for(s.s();!(t=s.n()).done;){var u=t.value;null!=e[u]&&(e[u]=void 0)}}catch(m){s.e(m)}finally{s.f()}for(var c=0,l=Object.keys(e);c<l.length;c++){var d=l[c];"_"===d[0]&&null!=e[d]&&(e[d]=void 0)}var f,p=Object.getOwnPropertySymbols(e),h=r(p);try{for(h.s();!(f=h.n()).done;){var v=f.value;e[v]=null}}catch(m){h.e(m)}finally{h.f()}};var a=n(9735),i=["tokens","start","end","loc","raw","rawValue"],o=a.COMMENT_KEYS.concat(["comments"]).concat(i)},2590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return(0,r.default)(e,a.default,t),e};var r=n(272),a=n(2831)},6470:function(e,t,n){"use strict";var r=n(319).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t={},n={},i=new Set,o=[],s=0;s<e.length;s++){var u=e[s];if(u&&!(o.indexOf(u)>=0)){if((0,a.isTSAnyKeyword)(u))return[u];(0,a.isTSBaseType)(u)?n[u.type]=u:(0,a.isTSUnionType)(u)?i.has(u.types)||(e.push.apply(e,r(u.types)),i.add(u.types)):o.push(u)}}for(var c=0,l=Object.keys(n);c<l.length;c++){var d=l[c];o.push(n[d])}for(var f=0,p=Object.keys(t);f<p.length;f++){var h=p[f];o.push(t[h])}return o};var a=n(2029)},4321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=n(2029);function a(e,t,n){for(var i=[].concat(e),o=Object.create(null);i.length;){var s=i.shift();if(s){var u=a.keys[s.type];if((0,r.isIdentifier)(s))t?(o[s.name]=o[s.name]||[]).push(s):o[s.name]=s;else if(!(0,r.isExportDeclaration)(s)||(0,r.isExportAllDeclaration)(s)){if(n){if((0,r.isFunctionDeclaration)(s)){i.push(s.id);continue}if((0,r.isFunctionExpression)(s))continue}if(u)for(var c=0;c<u.length;c++){var l=u[c];s[l]&&(i=i.concat(s[l]))}}else(0,r.isDeclaration)(s.declaration)&&i.push(s.declaration)}}return o}a.keys={DeclareClass:["id"],DeclareFunction:["id"],DeclareModule:["id"],DeclareVariable:["id"],DeclareInterface:["id"],DeclareTypeAlias:["id"],DeclareOpaqueType:["id"],InterfaceDeclaration:["id"],TypeAlias:["id"],OpaqueType:["id"],CatchClause:["param"],LabeledStatement:["label"],UnaryExpression:["argument"],AssignmentExpression:["left"],ImportSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportDefaultSpecifier:["local"],ImportDeclaration:["specifiers"],ExportSpecifier:["exported"],ExportNamespaceSpecifier:["exported"],ExportDefaultSpecifier:["exported"],FunctionDeclaration:["id","params"],FunctionExpression:["id","params"],ArrowFunctionExpression:["params"],ObjectMethod:["params"],ClassMethod:["params"],ClassPrivateMethod:["params"],ForInStatement:["left"],ForOfStatement:["left"],ClassDeclaration:["id"],ClassExpression:["id"],RestElement:["argument"],UpdateExpression:["argument"],ObjectProperty:["value"],AssignmentPattern:["left"],ArrayPattern:["elements"],ObjectPattern:["properties"],VariableDeclaration:["declarations"],VariableDeclarator:["id"]}},3711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4321),a=function(e,t){return(0,r.default)(e,t,!0)};t.default=a},9343:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){"function"===typeof t&&(t={enter:t});var r=t,a=r.enter,o=r.exit;i(e,a,o,n,[])};var a=n(4376);function i(e,t,n,o,s){var u=a.VISITOR_KEYS[e.type];if(u){t&&t(e,s,o);var c,l=r(u);try{for(l.s();!(c=l.n()).done;){var d=c.value,f=e[d];if(Array.isArray(f))for(var p=0;p<f.length;p++){var h=f[p];h&&(s.push({node:e,key:d,index:p}),i(h,t,n,o,s),s.pop())}else f&&(s.push({node:e,key:d}),i(f,t,n,o,s),s.pop())}}catch(v){l.e(v)}finally{l.f()}n&&n(e,s,o)}}},272:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n,i){if(!t)return;var o=a.VISITOR_KEYS[t.type];if(!o)return;n(t,i=i||{});var s,u=r(o);try{for(u.s();!(s=u.n()).done;){var c=s.value,l=t[c];if(Array.isArray(l)){var d,f=r(l);try{for(f.s();!(d=f.n()).done;){var p=d.value;e(p,n,i)}}catch(h){f.e(h)}finally{f.f()}}else e(l,n,i)}}catch(h){u.e(h)}finally{u.f()}};var a=n(4376)},3918:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){t&&n&&(t[e]=Array.from(new Set([].concat(t[e],n[e]).filter(Boolean))))}},3357:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=e.value.split(/\r\n|\n|\r/),a=0,i=0;i<n.length;i++)n[i].match(/[^ \t]/)&&(a=i);for(var o="",s=0;s<n.length;s++){var u=n[s],c=0===s,l=s===n.length-1,d=s===a,f=u.replace(/\t/g," ");c||(f=f.replace(/^[ ]+/,"")),l||(f=f.replace(/[ ]+$/,"")),f&&(d||(f+=" "),o+=f)}o&&t.push((0,r.stringLiteral)(o))};var r=n(5056)},5162:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=Object.keys(t),r=0,a=n;r<a.length;r++){var i=a[r];if(e[i]!==t[i])return!1}return!0}},7029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.split(".");return function(e){return(0,r.default)(e,n,t)}};var r=n(3561)},2029:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAccessor=function(e,t){if(!e)return!1;if("ClassAccessorProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isAnyTypeAnnotation=function(e,t){if(!e)return!1;if("AnyTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isArgumentPlaceholder=function(e,t){if(!e)return!1;if("ArgumentPlaceholder"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isArrayExpression=function(e,t){if(!e)return!1;if("ArrayExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isArrayPattern=function(e,t){if(!e)return!1;if("ArrayPattern"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isArrayTypeAnnotation=function(e,t){if(!e)return!1;if("ArrayTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isArrowFunctionExpression=function(e,t){if(!e)return!1;if("ArrowFunctionExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isAssignmentExpression=function(e,t){if(!e)return!1;if("AssignmentExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isAssignmentPattern=function(e,t){if(!e)return!1;if("AssignmentPattern"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isAwaitExpression=function(e,t){if(!e)return!1;if("AwaitExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBigIntLiteral=function(e,t){if(!e)return!1;if("BigIntLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBinary=function(e,t){if(!e)return!1;var n=e.type;if("BinaryExpression"===n||"LogicalExpression"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBinaryExpression=function(e,t){if(!e)return!1;if("BinaryExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBindExpression=function(e,t){if(!e)return!1;if("BindExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBlock=function(e,t){if(!e)return!1;var n=e.type;if("BlockStatement"===n||"Program"===n||"TSModuleBlock"===n||"Placeholder"===n&&"BlockStatement"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBlockParent=function(e,t){if(!e)return!1;var n=e.type;if("BlockStatement"===n||"CatchClause"===n||"DoWhileStatement"===n||"ForInStatement"===n||"ForStatement"===n||"FunctionDeclaration"===n||"FunctionExpression"===n||"Program"===n||"ObjectMethod"===n||"SwitchStatement"===n||"WhileStatement"===n||"ArrowFunctionExpression"===n||"ForOfStatement"===n||"ClassMethod"===n||"ClassPrivateMethod"===n||"StaticBlock"===n||"TSModuleBlock"===n||"Placeholder"===n&&"BlockStatement"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBlockStatement=function(e,t){if(!e)return!1;if("BlockStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBooleanLiteral=function(e,t){if(!e)return!1;if("BooleanLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBooleanLiteralTypeAnnotation=function(e,t){if(!e)return!1;if("BooleanLiteralTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBooleanTypeAnnotation=function(e,t){if(!e)return!1;if("BooleanTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isBreakStatement=function(e,t){if(!e)return!1;if("BreakStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isCallExpression=function(e,t){if(!e)return!1;if("CallExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isCatchClause=function(e,t){if(!e)return!1;if("CatchClause"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClass=function(e,t){if(!e)return!1;var n=e.type;if("ClassExpression"===n||"ClassDeclaration"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassAccessorProperty=function(e,t){if(!e)return!1;if("ClassAccessorProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassBody=function(e,t){if(!e)return!1;if("ClassBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassDeclaration=function(e,t){if(!e)return!1;if("ClassDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassExpression=function(e,t){if(!e)return!1;if("ClassExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassImplements=function(e,t){if(!e)return!1;if("ClassImplements"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassMethod=function(e,t){if(!e)return!1;if("ClassMethod"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassPrivateMethod=function(e,t){if(!e)return!1;if("ClassPrivateMethod"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassPrivateProperty=function(e,t){if(!e)return!1;if("ClassPrivateProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isClassProperty=function(e,t){if(!e)return!1;if("ClassProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isCompletionStatement=function(e,t){if(!e)return!1;var n=e.type;if("BreakStatement"===n||"ContinueStatement"===n||"ReturnStatement"===n||"ThrowStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isConditional=function(e,t){if(!e)return!1;var n=e.type;if("ConditionalExpression"===n||"IfStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isConditionalExpression=function(e,t){if(!e)return!1;if("ConditionalExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isContinueStatement=function(e,t){if(!e)return!1;if("ContinueStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDebuggerStatement=function(e,t){if(!e)return!1;if("DebuggerStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDecimalLiteral=function(e,t){if(!e)return!1;if("DecimalLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclaration=function(e,t){if(!e)return!1;var n=e.type;if("FunctionDeclaration"===n||"VariableDeclaration"===n||"ClassDeclaration"===n||"ExportAllDeclaration"===n||"ExportDefaultDeclaration"===n||"ExportNamedDeclaration"===n||"ImportDeclaration"===n||"DeclareClass"===n||"DeclareFunction"===n||"DeclareInterface"===n||"DeclareModule"===n||"DeclareModuleExports"===n||"DeclareTypeAlias"===n||"DeclareOpaqueType"===n||"DeclareVariable"===n||"DeclareExportDeclaration"===n||"DeclareExportAllDeclaration"===n||"InterfaceDeclaration"===n||"OpaqueType"===n||"TypeAlias"===n||"EnumDeclaration"===n||"TSDeclareFunction"===n||"TSInterfaceDeclaration"===n||"TSTypeAliasDeclaration"===n||"TSEnumDeclaration"===n||"TSModuleDeclaration"===n||"Placeholder"===n&&"Declaration"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareClass=function(e,t){if(!e)return!1;if("DeclareClass"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareExportAllDeclaration=function(e,t){if(!e)return!1;if("DeclareExportAllDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareExportDeclaration=function(e,t){if(!e)return!1;if("DeclareExportDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareFunction=function(e,t){if(!e)return!1;if("DeclareFunction"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareInterface=function(e,t){if(!e)return!1;if("DeclareInterface"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareModule=function(e,t){if(!e)return!1;if("DeclareModule"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareModuleExports=function(e,t){if(!e)return!1;if("DeclareModuleExports"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareOpaqueType=function(e,t){if(!e)return!1;if("DeclareOpaqueType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareTypeAlias=function(e,t){if(!e)return!1;if("DeclareTypeAlias"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclareVariable=function(e,t){if(!e)return!1;if("DeclareVariable"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDeclaredPredicate=function(e,t){if(!e)return!1;if("DeclaredPredicate"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDecorator=function(e,t){if(!e)return!1;if("Decorator"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDirective=function(e,t){if(!e)return!1;if("Directive"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDirectiveLiteral=function(e,t){if(!e)return!1;if("DirectiveLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDoExpression=function(e,t){if(!e)return!1;if("DoExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isDoWhileStatement=function(e,t){if(!e)return!1;if("DoWhileStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEmptyStatement=function(e,t){if(!e)return!1;if("EmptyStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEmptyTypeAnnotation=function(e,t){if(!e)return!1;if("EmptyTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumBody=function(e,t){if(!e)return!1;var n=e.type;if("EnumBooleanBody"===n||"EnumNumberBody"===n||"EnumStringBody"===n||"EnumSymbolBody"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumBooleanBody=function(e,t){if(!e)return!1;if("EnumBooleanBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumBooleanMember=function(e,t){if(!e)return!1;if("EnumBooleanMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumDeclaration=function(e,t){if(!e)return!1;if("EnumDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumDefaultedMember=function(e,t){if(!e)return!1;if("EnumDefaultedMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumMember=function(e,t){if(!e)return!1;var n=e.type;if("EnumBooleanMember"===n||"EnumNumberMember"===n||"EnumStringMember"===n||"EnumDefaultedMember"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumNumberBody=function(e,t){if(!e)return!1;if("EnumNumberBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumNumberMember=function(e,t){if(!e)return!1;if("EnumNumberMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumStringBody=function(e,t){if(!e)return!1;if("EnumStringBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumStringMember=function(e,t){if(!e)return!1;if("EnumStringMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isEnumSymbolBody=function(e,t){if(!e)return!1;if("EnumSymbolBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExistsTypeAnnotation=function(e,t){if(!e)return!1;if("ExistsTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportAllDeclaration=function(e,t){if(!e)return!1;if("ExportAllDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportDeclaration=function(e,t){if(!e)return!1;var n=e.type;if("ExportAllDeclaration"===n||"ExportDefaultDeclaration"===n||"ExportNamedDeclaration"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportDefaultDeclaration=function(e,t){if(!e)return!1;if("ExportDefaultDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportDefaultSpecifier=function(e,t){if(!e)return!1;if("ExportDefaultSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportNamedDeclaration=function(e,t){if(!e)return!1;if("ExportNamedDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportNamespaceSpecifier=function(e,t){if(!e)return!1;if("ExportNamespaceSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExportSpecifier=function(e,t){if(!e)return!1;if("ExportSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExpression=function(e,t){if(!e)return!1;var n=e.type;if("ArrayExpression"===n||"AssignmentExpression"===n||"BinaryExpression"===n||"CallExpression"===n||"ConditionalExpression"===n||"FunctionExpression"===n||"Identifier"===n||"StringLiteral"===n||"NumericLiteral"===n||"NullLiteral"===n||"BooleanLiteral"===n||"RegExpLiteral"===n||"LogicalExpression"===n||"MemberExpression"===n||"NewExpression"===n||"ObjectExpression"===n||"SequenceExpression"===n||"ParenthesizedExpression"===n||"ThisExpression"===n||"UnaryExpression"===n||"UpdateExpression"===n||"ArrowFunctionExpression"===n||"ClassExpression"===n||"MetaProperty"===n||"Super"===n||"TaggedTemplateExpression"===n||"TemplateLiteral"===n||"YieldExpression"===n||"AwaitExpression"===n||"Import"===n||"BigIntLiteral"===n||"OptionalMemberExpression"===n||"OptionalCallExpression"===n||"TypeCastExpression"===n||"JSXElement"===n||"JSXFragment"===n||"BindExpression"===n||"DoExpression"===n||"RecordExpression"===n||"TupleExpression"===n||"DecimalLiteral"===n||"ModuleExpression"===n||"TopicReference"===n||"PipelineTopicExpression"===n||"PipelineBareFunction"===n||"PipelinePrimaryTopicReference"===n||"TSAsExpression"===n||"TSTypeAssertion"===n||"TSNonNullExpression"===n||"Placeholder"===n&&("Expression"===e.expectedNode||"Identifier"===e.expectedNode||"StringLiteral"===e.expectedNode))return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExpressionStatement=function(e,t){if(!e)return!1;if("ExpressionStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isExpressionWrapper=function(e,t){if(!e)return!1;var n=e.type;if("ExpressionStatement"===n||"ParenthesizedExpression"===n||"TypeCastExpression"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFile=function(e,t){if(!e)return!1;if("File"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFlow=function(e,t){if(!e)return!1;var n=e.type;if("AnyTypeAnnotation"===n||"ArrayTypeAnnotation"===n||"BooleanTypeAnnotation"===n||"BooleanLiteralTypeAnnotation"===n||"NullLiteralTypeAnnotation"===n||"ClassImplements"===n||"DeclareClass"===n||"DeclareFunction"===n||"DeclareInterface"===n||"DeclareModule"===n||"DeclareModuleExports"===n||"DeclareTypeAlias"===n||"DeclareOpaqueType"===n||"DeclareVariable"===n||"DeclareExportDeclaration"===n||"DeclareExportAllDeclaration"===n||"DeclaredPredicate"===n||"ExistsTypeAnnotation"===n||"FunctionTypeAnnotation"===n||"FunctionTypeParam"===n||"GenericTypeAnnotation"===n||"InferredPredicate"===n||"InterfaceExtends"===n||"InterfaceDeclaration"===n||"InterfaceTypeAnnotation"===n||"IntersectionTypeAnnotation"===n||"MixedTypeAnnotation"===n||"EmptyTypeAnnotation"===n||"NullableTypeAnnotation"===n||"NumberLiteralTypeAnnotation"===n||"NumberTypeAnnotation"===n||"ObjectTypeAnnotation"===n||"ObjectTypeInternalSlot"===n||"ObjectTypeCallProperty"===n||"ObjectTypeIndexer"===n||"ObjectTypeProperty"===n||"ObjectTypeSpreadProperty"===n||"OpaqueType"===n||"QualifiedTypeIdentifier"===n||"StringLiteralTypeAnnotation"===n||"StringTypeAnnotation"===n||"SymbolTypeAnnotation"===n||"ThisTypeAnnotation"===n||"TupleTypeAnnotation"===n||"TypeofTypeAnnotation"===n||"TypeAlias"===n||"TypeAnnotation"===n||"TypeCastExpression"===n||"TypeParameter"===n||"TypeParameterDeclaration"===n||"TypeParameterInstantiation"===n||"UnionTypeAnnotation"===n||"Variance"===n||"VoidTypeAnnotation"===n||"EnumDeclaration"===n||"EnumBooleanBody"===n||"EnumNumberBody"===n||"EnumStringBody"===n||"EnumSymbolBody"===n||"EnumBooleanMember"===n||"EnumNumberMember"===n||"EnumStringMember"===n||"EnumDefaultedMember"===n||"IndexedAccessType"===n||"OptionalIndexedAccessType"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFlowBaseAnnotation=function(e,t){if(!e)return!1;var n=e.type;if("AnyTypeAnnotation"===n||"BooleanTypeAnnotation"===n||"NullLiteralTypeAnnotation"===n||"MixedTypeAnnotation"===n||"EmptyTypeAnnotation"===n||"NumberTypeAnnotation"===n||"StringTypeAnnotation"===n||"SymbolTypeAnnotation"===n||"ThisTypeAnnotation"===n||"VoidTypeAnnotation"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFlowDeclaration=function(e,t){if(!e)return!1;var n=e.type;if("DeclareClass"===n||"DeclareFunction"===n||"DeclareInterface"===n||"DeclareModule"===n||"DeclareModuleExports"===n||"DeclareTypeAlias"===n||"DeclareOpaqueType"===n||"DeclareVariable"===n||"DeclareExportDeclaration"===n||"DeclareExportAllDeclaration"===n||"InterfaceDeclaration"===n||"OpaqueType"===n||"TypeAlias"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFlowPredicate=function(e,t){if(!e)return!1;var n=e.type;if("DeclaredPredicate"===n||"InferredPredicate"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFlowType=function(e,t){if(!e)return!1;var n=e.type;if("AnyTypeAnnotation"===n||"ArrayTypeAnnotation"===n||"BooleanTypeAnnotation"===n||"BooleanLiteralTypeAnnotation"===n||"NullLiteralTypeAnnotation"===n||"ExistsTypeAnnotation"===n||"FunctionTypeAnnotation"===n||"GenericTypeAnnotation"===n||"InterfaceTypeAnnotation"===n||"IntersectionTypeAnnotation"===n||"MixedTypeAnnotation"===n||"EmptyTypeAnnotation"===n||"NullableTypeAnnotation"===n||"NumberLiteralTypeAnnotation"===n||"NumberTypeAnnotation"===n||"ObjectTypeAnnotation"===n||"StringLiteralTypeAnnotation"===n||"StringTypeAnnotation"===n||"SymbolTypeAnnotation"===n||"ThisTypeAnnotation"===n||"TupleTypeAnnotation"===n||"TypeofTypeAnnotation"===n||"UnionTypeAnnotation"===n||"VoidTypeAnnotation"===n||"IndexedAccessType"===n||"OptionalIndexedAccessType"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFor=function(e,t){if(!e)return!1;var n=e.type;if("ForInStatement"===n||"ForStatement"===n||"ForOfStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isForInStatement=function(e,t){if(!e)return!1;if("ForInStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isForOfStatement=function(e,t){if(!e)return!1;if("ForOfStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isForStatement=function(e,t){if(!e)return!1;if("ForStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isForXStatement=function(e,t){if(!e)return!1;var n=e.type;if("ForInStatement"===n||"ForOfStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunction=function(e,t){if(!e)return!1;var n=e.type;if("FunctionDeclaration"===n||"FunctionExpression"===n||"ObjectMethod"===n||"ArrowFunctionExpression"===n||"ClassMethod"===n||"ClassPrivateMethod"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunctionDeclaration=function(e,t){if(!e)return!1;if("FunctionDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunctionExpression=function(e,t){if(!e)return!1;if("FunctionExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunctionParent=function(e,t){if(!e)return!1;var n=e.type;if("FunctionDeclaration"===n||"FunctionExpression"===n||"ObjectMethod"===n||"ArrowFunctionExpression"===n||"ClassMethod"===n||"ClassPrivateMethod"===n||"StaticBlock"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunctionTypeAnnotation=function(e,t){if(!e)return!1;if("FunctionTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isFunctionTypeParam=function(e,t){if(!e)return!1;if("FunctionTypeParam"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isGenericTypeAnnotation=function(e,t){if(!e)return!1;if("GenericTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isIdentifier=function(e,t){if(!e)return!1;if("Identifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isIfStatement=function(e,t){if(!e)return!1;if("IfStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImmutable=function(e,t){if(!e)return!1;var n=e.type;if("StringLiteral"===n||"NumericLiteral"===n||"NullLiteral"===n||"BooleanLiteral"===n||"BigIntLiteral"===n||"JSXAttribute"===n||"JSXClosingElement"===n||"JSXElement"===n||"JSXExpressionContainer"===n||"JSXSpreadChild"===n||"JSXOpeningElement"===n||"JSXText"===n||"JSXFragment"===n||"JSXOpeningFragment"===n||"JSXClosingFragment"===n||"DecimalLiteral"===n||"Placeholder"===n&&"StringLiteral"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImport=function(e,t){if(!e)return!1;if("Import"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImportAttribute=function(e,t){if(!e)return!1;if("ImportAttribute"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImportDeclaration=function(e,t){if(!e)return!1;if("ImportDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImportDefaultSpecifier=function(e,t){if(!e)return!1;if("ImportDefaultSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImportNamespaceSpecifier=function(e,t){if(!e)return!1;if("ImportNamespaceSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isImportSpecifier=function(e,t){if(!e)return!1;if("ImportSpecifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isIndexedAccessType=function(e,t){if(!e)return!1;if("IndexedAccessType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isInferredPredicate=function(e,t){if(!e)return!1;if("InferredPredicate"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isInterfaceDeclaration=function(e,t){if(!e)return!1;if("InterfaceDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isInterfaceExtends=function(e,t){if(!e)return!1;if("InterfaceExtends"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isInterfaceTypeAnnotation=function(e,t){if(!e)return!1;if("InterfaceTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isInterpreterDirective=function(e,t){if(!e)return!1;if("InterpreterDirective"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isIntersectionTypeAnnotation=function(e,t){if(!e)return!1;if("IntersectionTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSX=function(e,t){if(!e)return!1;var n=e.type;if("JSXAttribute"===n||"JSXClosingElement"===n||"JSXElement"===n||"JSXEmptyExpression"===n||"JSXExpressionContainer"===n||"JSXSpreadChild"===n||"JSXIdentifier"===n||"JSXMemberExpression"===n||"JSXNamespacedName"===n||"JSXOpeningElement"===n||"JSXSpreadAttribute"===n||"JSXText"===n||"JSXFragment"===n||"JSXOpeningFragment"===n||"JSXClosingFragment"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXAttribute=function(e,t){if(!e)return!1;if("JSXAttribute"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXClosingElement=function(e,t){if(!e)return!1;if("JSXClosingElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXClosingFragment=function(e,t){if(!e)return!1;if("JSXClosingFragment"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXElement=function(e,t){if(!e)return!1;if("JSXElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXEmptyExpression=function(e,t){if(!e)return!1;if("JSXEmptyExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXExpressionContainer=function(e,t){if(!e)return!1;if("JSXExpressionContainer"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXFragment=function(e,t){if(!e)return!1;if("JSXFragment"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXIdentifier=function(e,t){if(!e)return!1;if("JSXIdentifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXMemberExpression=function(e,t){if(!e)return!1;if("JSXMemberExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXNamespacedName=function(e,t){if(!e)return!1;if("JSXNamespacedName"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXOpeningElement=function(e,t){if(!e)return!1;if("JSXOpeningElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXOpeningFragment=function(e,t){if(!e)return!1;if("JSXOpeningFragment"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXSpreadAttribute=function(e,t){if(!e)return!1;if("JSXSpreadAttribute"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXSpreadChild=function(e,t){if(!e)return!1;if("JSXSpreadChild"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isJSXText=function(e,t){if(!e)return!1;if("JSXText"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isLVal=function(e,t){if(!e)return!1;var n=e.type;if("Identifier"===n||"MemberExpression"===n||"RestElement"===n||"AssignmentPattern"===n||"ArrayPattern"===n||"ObjectPattern"===n||"TSParameterProperty"===n||"Placeholder"===n&&("Pattern"===e.expectedNode||"Identifier"===e.expectedNode))return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isLabeledStatement=function(e,t){if(!e)return!1;if("LabeledStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isLiteral=function(e,t){if(!e)return!1;var n=e.type;if("StringLiteral"===n||"NumericLiteral"===n||"NullLiteral"===n||"BooleanLiteral"===n||"RegExpLiteral"===n||"TemplateLiteral"===n||"BigIntLiteral"===n||"DecimalLiteral"===n||"Placeholder"===n&&"StringLiteral"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isLogicalExpression=function(e,t){if(!e)return!1;if("LogicalExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isLoop=function(e,t){if(!e)return!1;var n=e.type;if("DoWhileStatement"===n||"ForInStatement"===n||"ForStatement"===n||"WhileStatement"===n||"ForOfStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isMemberExpression=function(e,t){if(!e)return!1;if("MemberExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isMetaProperty=function(e,t){if(!e)return!1;if("MetaProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isMethod=function(e,t){if(!e)return!1;var n=e.type;if("ObjectMethod"===n||"ClassMethod"===n||"ClassPrivateMethod"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isMiscellaneous=function(e,t){if(!e)return!1;var n=e.type;if("Noop"===n||"Placeholder"===n||"V8IntrinsicIdentifier"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isMixedTypeAnnotation=function(e,t){if(!e)return!1;if("MixedTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isModuleDeclaration=function(e,t){if(!e)return!1;var n=e.type;if("ExportAllDeclaration"===n||"ExportDefaultDeclaration"===n||"ExportNamedDeclaration"===n||"ImportDeclaration"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isModuleExpression=function(e,t){if(!e)return!1;if("ModuleExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isModuleSpecifier=function(e,t){if(!e)return!1;var n=e.type;if("ExportSpecifier"===n||"ImportDefaultSpecifier"===n||"ImportNamespaceSpecifier"===n||"ImportSpecifier"===n||"ExportNamespaceSpecifier"===n||"ExportDefaultSpecifier"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNewExpression=function(e,t){if(!e)return!1;if("NewExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNoop=function(e,t){if(!e)return!1;if("Noop"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNullLiteral=function(e,t){if(!e)return!1;if("NullLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNullLiteralTypeAnnotation=function(e,t){if(!e)return!1;if("NullLiteralTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNullableTypeAnnotation=function(e,t){if(!e)return!1;if("NullableTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNumberLiteral=function(e,t){if(console.trace("The node type NumberLiteral has been renamed to NumericLiteral"),!e)return!1;if("NumberLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNumberLiteralTypeAnnotation=function(e,t){if(!e)return!1;if("NumberLiteralTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNumberTypeAnnotation=function(e,t){if(!e)return!1;if("NumberTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isNumericLiteral=function(e,t){if(!e)return!1;if("NumericLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectExpression=function(e,t){if(!e)return!1;if("ObjectExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectMember=function(e,t){if(!e)return!1;var n=e.type;if("ObjectMethod"===n||"ObjectProperty"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectMethod=function(e,t){if(!e)return!1;if("ObjectMethod"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectPattern=function(e,t){if(!e)return!1;if("ObjectPattern"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectProperty=function(e,t){if(!e)return!1;if("ObjectProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeAnnotation=function(e,t){if(!e)return!1;if("ObjectTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeCallProperty=function(e,t){if(!e)return!1;if("ObjectTypeCallProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeIndexer=function(e,t){if(!e)return!1;if("ObjectTypeIndexer"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeInternalSlot=function(e,t){if(!e)return!1;if("ObjectTypeInternalSlot"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeProperty=function(e,t){if(!e)return!1;if("ObjectTypeProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isObjectTypeSpreadProperty=function(e,t){if(!e)return!1;if("ObjectTypeSpreadProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isOpaqueType=function(e,t){if(!e)return!1;if("OpaqueType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isOptionalCallExpression=function(e,t){if(!e)return!1;if("OptionalCallExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isOptionalIndexedAccessType=function(e,t){if(!e)return!1;if("OptionalIndexedAccessType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isOptionalMemberExpression=function(e,t){if(!e)return!1;if("OptionalMemberExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isParenthesizedExpression=function(e,t){if(!e)return!1;if("ParenthesizedExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPattern=function(e,t){if(!e)return!1;var n=e.type;if("AssignmentPattern"===n||"ArrayPattern"===n||"ObjectPattern"===n||"Placeholder"===n&&"Pattern"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPatternLike=function(e,t){if(!e)return!1;var n=e.type;if("Identifier"===n||"RestElement"===n||"AssignmentPattern"===n||"ArrayPattern"===n||"ObjectPattern"===n||"Placeholder"===n&&("Pattern"===e.expectedNode||"Identifier"===e.expectedNode))return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPipelineBareFunction=function(e,t){if(!e)return!1;if("PipelineBareFunction"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPipelinePrimaryTopicReference=function(e,t){if(!e)return!1;if("PipelinePrimaryTopicReference"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPipelineTopicExpression=function(e,t){if(!e)return!1;if("PipelineTopicExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPlaceholder=function(e,t){if(!e)return!1;if("Placeholder"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPrivate=function(e,t){if(!e)return!1;var n=e.type;if("ClassPrivateProperty"===n||"ClassPrivateMethod"===n||"PrivateName"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPrivateName=function(e,t){if(!e)return!1;if("PrivateName"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isProgram=function(e,t){if(!e)return!1;if("Program"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isProperty=function(e,t){if(!e)return!1;var n=e.type;if("ObjectProperty"===n||"ClassProperty"===n||"ClassAccessorProperty"===n||"ClassPrivateProperty"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isPureish=function(e,t){if(!e)return!1;var n=e.type;if("FunctionDeclaration"===n||"FunctionExpression"===n||"StringLiteral"===n||"NumericLiteral"===n||"NullLiteral"===n||"BooleanLiteral"===n||"RegExpLiteral"===n||"ArrowFunctionExpression"===n||"BigIntLiteral"===n||"DecimalLiteral"===n||"Placeholder"===n&&"StringLiteral"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isQualifiedTypeIdentifier=function(e,t){if(!e)return!1;if("QualifiedTypeIdentifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isRecordExpression=function(e,t){if(!e)return!1;if("RecordExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isRegExpLiteral=function(e,t){if(!e)return!1;if("RegExpLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isRegexLiteral=function(e,t){if(console.trace("The node type RegexLiteral has been renamed to RegExpLiteral"),!e)return!1;if("RegexLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isRestElement=function(e,t){if(!e)return!1;if("RestElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isRestProperty=function(e,t){if(console.trace("The node type RestProperty has been renamed to RestElement"),!e)return!1;if("RestProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isReturnStatement=function(e,t){if(!e)return!1;if("ReturnStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isScopable=function(e,t){if(!e)return!1;var n=e.type;if("BlockStatement"===n||"CatchClause"===n||"DoWhileStatement"===n||"ForInStatement"===n||"ForStatement"===n||"FunctionDeclaration"===n||"FunctionExpression"===n||"Program"===n||"ObjectMethod"===n||"SwitchStatement"===n||"WhileStatement"===n||"ArrowFunctionExpression"===n||"ClassExpression"===n||"ClassDeclaration"===n||"ForOfStatement"===n||"ClassMethod"===n||"ClassPrivateMethod"===n||"StaticBlock"===n||"TSModuleBlock"===n||"Placeholder"===n&&"BlockStatement"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSequenceExpression=function(e,t){if(!e)return!1;if("SequenceExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSpreadElement=function(e,t){if(!e)return!1;if("SpreadElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSpreadProperty=function(e,t){if(console.trace("The node type SpreadProperty has been renamed to SpreadElement"),!e)return!1;if("SpreadProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStandardized=function(e,t){if(!e)return!1;var n=e.type;if("ArrayExpression"===n||"AssignmentExpression"===n||"BinaryExpression"===n||"InterpreterDirective"===n||"Directive"===n||"DirectiveLiteral"===n||"BlockStatement"===n||"BreakStatement"===n||"CallExpression"===n||"CatchClause"===n||"ConditionalExpression"===n||"ContinueStatement"===n||"DebuggerStatement"===n||"DoWhileStatement"===n||"EmptyStatement"===n||"ExpressionStatement"===n||"File"===n||"ForInStatement"===n||"ForStatement"===n||"FunctionDeclaration"===n||"FunctionExpression"===n||"Identifier"===n||"IfStatement"===n||"LabeledStatement"===n||"StringLiteral"===n||"NumericLiteral"===n||"NullLiteral"===n||"BooleanLiteral"===n||"RegExpLiteral"===n||"LogicalExpression"===n||"MemberExpression"===n||"NewExpression"===n||"Program"===n||"ObjectExpression"===n||"ObjectMethod"===n||"ObjectProperty"===n||"RestElement"===n||"ReturnStatement"===n||"SequenceExpression"===n||"ParenthesizedExpression"===n||"SwitchCase"===n||"SwitchStatement"===n||"ThisExpression"===n||"ThrowStatement"===n||"TryStatement"===n||"UnaryExpression"===n||"UpdateExpression"===n||"VariableDeclaration"===n||"VariableDeclarator"===n||"WhileStatement"===n||"WithStatement"===n||"AssignmentPattern"===n||"ArrayPattern"===n||"ArrowFunctionExpression"===n||"ClassBody"===n||"ClassExpression"===n||"ClassDeclaration"===n||"ExportAllDeclaration"===n||"ExportDefaultDeclaration"===n||"ExportNamedDeclaration"===n||"ExportSpecifier"===n||"ForOfStatement"===n||"ImportDeclaration"===n||"ImportDefaultSpecifier"===n||"ImportNamespaceSpecifier"===n||"ImportSpecifier"===n||"MetaProperty"===n||"ClassMethod"===n||"ObjectPattern"===n||"SpreadElement"===n||"Super"===n||"TaggedTemplateExpression"===n||"TemplateElement"===n||"TemplateLiteral"===n||"YieldExpression"===n||"AwaitExpression"===n||"Import"===n||"BigIntLiteral"===n||"ExportNamespaceSpecifier"===n||"OptionalMemberExpression"===n||"OptionalCallExpression"===n||"ClassProperty"===n||"ClassAccessorProperty"===n||"ClassPrivateProperty"===n||"ClassPrivateMethod"===n||"PrivateName"===n||"StaticBlock"===n||"Placeholder"===n&&("Identifier"===e.expectedNode||"StringLiteral"===e.expectedNode||"BlockStatement"===e.expectedNode||"ClassBody"===e.expectedNode))return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStatement=function(e,t){if(!e)return!1;var n=e.type;if("BlockStatement"===n||"BreakStatement"===n||"ContinueStatement"===n||"DebuggerStatement"===n||"DoWhileStatement"===n||"EmptyStatement"===n||"ExpressionStatement"===n||"ForInStatement"===n||"ForStatement"===n||"FunctionDeclaration"===n||"IfStatement"===n||"LabeledStatement"===n||"ReturnStatement"===n||"SwitchStatement"===n||"ThrowStatement"===n||"TryStatement"===n||"VariableDeclaration"===n||"WhileStatement"===n||"WithStatement"===n||"ClassDeclaration"===n||"ExportAllDeclaration"===n||"ExportDefaultDeclaration"===n||"ExportNamedDeclaration"===n||"ForOfStatement"===n||"ImportDeclaration"===n||"DeclareClass"===n||"DeclareFunction"===n||"DeclareInterface"===n||"DeclareModule"===n||"DeclareModuleExports"===n||"DeclareTypeAlias"===n||"DeclareOpaqueType"===n||"DeclareVariable"===n||"DeclareExportDeclaration"===n||"DeclareExportAllDeclaration"===n||"InterfaceDeclaration"===n||"OpaqueType"===n||"TypeAlias"===n||"EnumDeclaration"===n||"TSDeclareFunction"===n||"TSInterfaceDeclaration"===n||"TSTypeAliasDeclaration"===n||"TSEnumDeclaration"===n||"TSModuleDeclaration"===n||"TSImportEqualsDeclaration"===n||"TSExportAssignment"===n||"TSNamespaceExportDeclaration"===n||"Placeholder"===n&&("Statement"===e.expectedNode||"Declaration"===e.expectedNode||"BlockStatement"===e.expectedNode))return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStaticBlock=function(e,t){if(!e)return!1;if("StaticBlock"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStringLiteral=function(e,t){if(!e)return!1;if("StringLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStringLiteralTypeAnnotation=function(e,t){if(!e)return!1;if("StringLiteralTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isStringTypeAnnotation=function(e,t){if(!e)return!1;if("StringTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSuper=function(e,t){if(!e)return!1;if("Super"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSwitchCase=function(e,t){if(!e)return!1;if("SwitchCase"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSwitchStatement=function(e,t){if(!e)return!1;if("SwitchStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isSymbolTypeAnnotation=function(e,t){if(!e)return!1;if("SymbolTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSAnyKeyword=function(e,t){if(!e)return!1;if("TSAnyKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSArrayType=function(e,t){if(!e)return!1;if("TSArrayType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSAsExpression=function(e,t){if(!e)return!1;if("TSAsExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSBaseType=function(e,t){if(!e)return!1;var n=e.type;if("TSAnyKeyword"===n||"TSBooleanKeyword"===n||"TSBigIntKeyword"===n||"TSIntrinsicKeyword"===n||"TSNeverKeyword"===n||"TSNullKeyword"===n||"TSNumberKeyword"===n||"TSObjectKeyword"===n||"TSStringKeyword"===n||"TSSymbolKeyword"===n||"TSUndefinedKeyword"===n||"TSUnknownKeyword"===n||"TSVoidKeyword"===n||"TSThisType"===n||"TSLiteralType"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSBigIntKeyword=function(e,t){if(!e)return!1;if("TSBigIntKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSBooleanKeyword=function(e,t){if(!e)return!1;if("TSBooleanKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSCallSignatureDeclaration=function(e,t){if(!e)return!1;if("TSCallSignatureDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSConditionalType=function(e,t){if(!e)return!1;if("TSConditionalType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSConstructSignatureDeclaration=function(e,t){if(!e)return!1;if("TSConstructSignatureDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSConstructorType=function(e,t){if(!e)return!1;if("TSConstructorType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSDeclareFunction=function(e,t){if(!e)return!1;if("TSDeclareFunction"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSDeclareMethod=function(e,t){if(!e)return!1;if("TSDeclareMethod"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSEntityName=function(e,t){if(!e)return!1;var n=e.type;if("Identifier"===n||"TSQualifiedName"===n||"Placeholder"===n&&"Identifier"===e.expectedNode)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSEnumDeclaration=function(e,t){if(!e)return!1;if("TSEnumDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSEnumMember=function(e,t){if(!e)return!1;if("TSEnumMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSExportAssignment=function(e,t){if(!e)return!1;if("TSExportAssignment"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSExpressionWithTypeArguments=function(e,t){if(!e)return!1;if("TSExpressionWithTypeArguments"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSExternalModuleReference=function(e,t){if(!e)return!1;if("TSExternalModuleReference"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSFunctionType=function(e,t){if(!e)return!1;if("TSFunctionType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSImportEqualsDeclaration=function(e,t){if(!e)return!1;if("TSImportEqualsDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSImportType=function(e,t){if(!e)return!1;if("TSImportType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSIndexSignature=function(e,t){if(!e)return!1;if("TSIndexSignature"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSIndexedAccessType=function(e,t){if(!e)return!1;if("TSIndexedAccessType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSInferType=function(e,t){if(!e)return!1;if("TSInferType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSInterfaceBody=function(e,t){if(!e)return!1;if("TSInterfaceBody"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSInterfaceDeclaration=function(e,t){if(!e)return!1;if("TSInterfaceDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSIntersectionType=function(e,t){if(!e)return!1;if("TSIntersectionType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSIntrinsicKeyword=function(e,t){if(!e)return!1;if("TSIntrinsicKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSLiteralType=function(e,t){if(!e)return!1;if("TSLiteralType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSMappedType=function(e,t){if(!e)return!1;if("TSMappedType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSMethodSignature=function(e,t){if(!e)return!1;if("TSMethodSignature"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSModuleBlock=function(e,t){if(!e)return!1;if("TSModuleBlock"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSModuleDeclaration=function(e,t){if(!e)return!1;if("TSModuleDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNamedTupleMember=function(e,t){if(!e)return!1;if("TSNamedTupleMember"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNamespaceExportDeclaration=function(e,t){if(!e)return!1;if("TSNamespaceExportDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNeverKeyword=function(e,t){if(!e)return!1;if("TSNeverKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNonNullExpression=function(e,t){if(!e)return!1;if("TSNonNullExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNullKeyword=function(e,t){if(!e)return!1;if("TSNullKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSNumberKeyword=function(e,t){if(!e)return!1;if("TSNumberKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSObjectKeyword=function(e,t){if(!e)return!1;if("TSObjectKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSOptionalType=function(e,t){if(!e)return!1;if("TSOptionalType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSParameterProperty=function(e,t){if(!e)return!1;if("TSParameterProperty"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSParenthesizedType=function(e,t){if(!e)return!1;if("TSParenthesizedType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSPropertySignature=function(e,t){if(!e)return!1;if("TSPropertySignature"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSQualifiedName=function(e,t){if(!e)return!1;if("TSQualifiedName"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSRestType=function(e,t){if(!e)return!1;if("TSRestType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSStringKeyword=function(e,t){if(!e)return!1;if("TSStringKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSSymbolKeyword=function(e,t){if(!e)return!1;if("TSSymbolKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSThisType=function(e,t){if(!e)return!1;if("TSThisType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTupleType=function(e,t){if(!e)return!1;if("TSTupleType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSType=function(e,t){if(!e)return!1;var n=e.type;if("TSAnyKeyword"===n||"TSBooleanKeyword"===n||"TSBigIntKeyword"===n||"TSIntrinsicKeyword"===n||"TSNeverKeyword"===n||"TSNullKeyword"===n||"TSNumberKeyword"===n||"TSObjectKeyword"===n||"TSStringKeyword"===n||"TSSymbolKeyword"===n||"TSUndefinedKeyword"===n||"TSUnknownKeyword"===n||"TSVoidKeyword"===n||"TSThisType"===n||"TSFunctionType"===n||"TSConstructorType"===n||"TSTypeReference"===n||"TSTypePredicate"===n||"TSTypeQuery"===n||"TSTypeLiteral"===n||"TSArrayType"===n||"TSTupleType"===n||"TSOptionalType"===n||"TSRestType"===n||"TSUnionType"===n||"TSIntersectionType"===n||"TSConditionalType"===n||"TSInferType"===n||"TSParenthesizedType"===n||"TSTypeOperator"===n||"TSIndexedAccessType"===n||"TSMappedType"===n||"TSLiteralType"===n||"TSExpressionWithTypeArguments"===n||"TSImportType"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeAliasDeclaration=function(e,t){if(!e)return!1;if("TSTypeAliasDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeAnnotation=function(e,t){if(!e)return!1;if("TSTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeAssertion=function(e,t){if(!e)return!1;if("TSTypeAssertion"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeElement=function(e,t){if(!e)return!1;var n=e.type;if("TSCallSignatureDeclaration"===n||"TSConstructSignatureDeclaration"===n||"TSPropertySignature"===n||"TSMethodSignature"===n||"TSIndexSignature"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeLiteral=function(e,t){if(!e)return!1;if("TSTypeLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeOperator=function(e,t){if(!e)return!1;if("TSTypeOperator"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeParameter=function(e,t){if(!e)return!1;if("TSTypeParameter"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeParameterDeclaration=function(e,t){if(!e)return!1;if("TSTypeParameterDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeParameterInstantiation=function(e,t){if(!e)return!1;if("TSTypeParameterInstantiation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypePredicate=function(e,t){if(!e)return!1;if("TSTypePredicate"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeQuery=function(e,t){if(!e)return!1;if("TSTypeQuery"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSTypeReference=function(e,t){if(!e)return!1;if("TSTypeReference"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSUndefinedKeyword=function(e,t){if(!e)return!1;if("TSUndefinedKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSUnionType=function(e,t){if(!e)return!1;if("TSUnionType"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSUnknownKeyword=function(e,t){if(!e)return!1;if("TSUnknownKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTSVoidKeyword=function(e,t){if(!e)return!1;if("TSVoidKeyword"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTaggedTemplateExpression=function(e,t){if(!e)return!1;if("TaggedTemplateExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTemplateElement=function(e,t){if(!e)return!1;if("TemplateElement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTemplateLiteral=function(e,t){if(!e)return!1;if("TemplateLiteral"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTerminatorless=function(e,t){if(!e)return!1;var n=e.type;if("BreakStatement"===n||"ContinueStatement"===n||"ReturnStatement"===n||"ThrowStatement"===n||"YieldExpression"===n||"AwaitExpression"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isThisExpression=function(e,t){if(!e)return!1;if("ThisExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isThisTypeAnnotation=function(e,t){if(!e)return!1;if("ThisTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isThrowStatement=function(e,t){if(!e)return!1;if("ThrowStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTopicReference=function(e,t){if(!e)return!1;if("TopicReference"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTryStatement=function(e,t){if(!e)return!1;if("TryStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTupleExpression=function(e,t){if(!e)return!1;if("TupleExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTupleTypeAnnotation=function(e,t){if(!e)return!1;if("TupleTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeAlias=function(e,t){if(!e)return!1;if("TypeAlias"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeAnnotation=function(e,t){if(!e)return!1;if("TypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeCastExpression=function(e,t){if(!e)return!1;if("TypeCastExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeParameter=function(e,t){if(!e)return!1;if("TypeParameter"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeParameterDeclaration=function(e,t){if(!e)return!1;if("TypeParameterDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeParameterInstantiation=function(e,t){if(!e)return!1;if("TypeParameterInstantiation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeScript=function(e,t){if(!e)return!1;var n=e.type;if("TSParameterProperty"===n||"TSDeclareFunction"===n||"TSDeclareMethod"===n||"TSQualifiedName"===n||"TSCallSignatureDeclaration"===n||"TSConstructSignatureDeclaration"===n||"TSPropertySignature"===n||"TSMethodSignature"===n||"TSIndexSignature"===n||"TSAnyKeyword"===n||"TSBooleanKeyword"===n||"TSBigIntKeyword"===n||"TSIntrinsicKeyword"===n||"TSNeverKeyword"===n||"TSNullKeyword"===n||"TSNumberKeyword"===n||"TSObjectKeyword"===n||"TSStringKeyword"===n||"TSSymbolKeyword"===n||"TSUndefinedKeyword"===n||"TSUnknownKeyword"===n||"TSVoidKeyword"===n||"TSThisType"===n||"TSFunctionType"===n||"TSConstructorType"===n||"TSTypeReference"===n||"TSTypePredicate"===n||"TSTypeQuery"===n||"TSTypeLiteral"===n||"TSArrayType"===n||"TSTupleType"===n||"TSOptionalType"===n||"TSRestType"===n||"TSNamedTupleMember"===n||"TSUnionType"===n||"TSIntersectionType"===n||"TSConditionalType"===n||"TSInferType"===n||"TSParenthesizedType"===n||"TSTypeOperator"===n||"TSIndexedAccessType"===n||"TSMappedType"===n||"TSLiteralType"===n||"TSExpressionWithTypeArguments"===n||"TSInterfaceDeclaration"===n||"TSInterfaceBody"===n||"TSTypeAliasDeclaration"===n||"TSAsExpression"===n||"TSTypeAssertion"===n||"TSEnumDeclaration"===n||"TSEnumMember"===n||"TSModuleDeclaration"===n||"TSModuleBlock"===n||"TSImportType"===n||"TSImportEqualsDeclaration"===n||"TSExternalModuleReference"===n||"TSNonNullExpression"===n||"TSExportAssignment"===n||"TSNamespaceExportDeclaration"===n||"TSTypeAnnotation"===n||"TSTypeParameterInstantiation"===n||"TSTypeParameterDeclaration"===n||"TSTypeParameter"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isTypeofTypeAnnotation=function(e,t){if(!e)return!1;if("TypeofTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isUnaryExpression=function(e,t){if(!e)return!1;if("UnaryExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isUnaryLike=function(e,t){if(!e)return!1;var n=e.type;if("UnaryExpression"===n||"SpreadElement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isUnionTypeAnnotation=function(e,t){if(!e)return!1;if("UnionTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isUpdateExpression=function(e,t){if(!e)return!1;if("UpdateExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isUserWhitespacable=function(e,t){if(!e)return!1;var n=e.type;if("ObjectMethod"===n||"ObjectProperty"===n||"ObjectTypeInternalSlot"===n||"ObjectTypeCallProperty"===n||"ObjectTypeIndexer"===n||"ObjectTypeProperty"===n||"ObjectTypeSpreadProperty"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isV8IntrinsicIdentifier=function(e,t){if(!e)return!1;if("V8IntrinsicIdentifier"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isVariableDeclaration=function(e,t){if(!e)return!1;if("VariableDeclaration"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isVariableDeclarator=function(e,t){if(!e)return!1;if("VariableDeclarator"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isVariance=function(e,t){if(!e)return!1;if("Variance"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isVoidTypeAnnotation=function(e,t){if(!e)return!1;if("VoidTypeAnnotation"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isWhile=function(e,t){if(!e)return!1;var n=e.type;if("DoWhileStatement"===n||"WhileStatement"===n)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isWhileStatement=function(e,t){if(!e)return!1;if("WhileStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isWithStatement=function(e,t){if(!e)return!1;if("WithStatement"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1},t.isYieldExpression=function(e,t){if(!e)return!1;if("YieldExpression"===e.type)return"undefined"===typeof t||(0,r.default)(e,t);return!1};var r=n(5162)},2072:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!t)return!1;if(!(0,a.default)(t.type,e))return!n&&"Placeholder"===t.type&&e in o.FLIPPED_ALIAS_KEYS&&(0,i.default)(t.expectedNode,e);return"undefined"===typeof n||(0,r.default)(t,n)};var r=n(5162),a=n(141),i=n(9520),o=n(4376)},5181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n&&"Identifier"===e.type&&"ObjectProperty"===t.type&&"ObjectExpression"===n.type)return!1;var a=r.default.keys[t.type];if(a)for(var i=0;i<a.length;i++){var o=a[i],s=t[o];if(Array.isArray(s)){if(s.indexOf(e)>=0)return!0}else if(s===e)return!0}return!1};var r=n(4321)},9919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.isFunctionDeclaration)(e)||(0,r.isClassDeclaration)(e)||(0,a.default)(e)};var r=n(2029),a=n(838)},6696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,r.default)(e.type,"Immutable"))return!0;if((0,a.isIdentifier)(e))return"undefined"===e.name;return!1};var r=n(141),a=n(2029)},838:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.isVariableDeclaration)(e)&&("var"!==e.kind||e[a.BLOCK_SCOPED_SYMBOL])};var r=n(2029),a=n(9735)},9953:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!(!e||!r.VISITOR_KEYS[e.type])};var r=n(4376)},6416:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,n){if("object"!==typeof t||"object"!==typeof n||null==t||null==n)return t===n;if(t.type!==n.type)return!1;for(var a=Object.keys(r.NODE_FIELDS[t.type]||t.type),i=r.VISITOR_KEYS[t.type],o=0,s=a;o<s.length;o++){var u=s[o];if(typeof t[u]!==typeof n[u])return!1;if(null!=t[u]||null!=n[u]){if(null==t[u]||null==n[u])return!1;if(Array.isArray(t[u])){if(!Array.isArray(n[u]))return!1;if(t[u].length!==n[u].length)return!1;for(var c=0;c<t[u].length;c++)if(!e(t[u][c],n[u][c]))return!1}else if("object"!==typeof t[u]||null!=i&&i.includes(u)){if(!e(t[u],n[u]))return!1}else for(var l=0,d=Object.keys(t[u]);l<d.length;l++){var f=d[l];if(t[u][f]!==n[u][f])return!1}}}return!0};var r=n(4376)},9520:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;var n=a.PLACEHOLDERS_ALIAS[e];if(n){var i,o=r(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(t===s)return!0}}catch(u){o.e(u)}finally{o.f()}}return!1};var a=n(4376)},3596:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){switch(t.type){case"MemberExpression":case"OptionalMemberExpression":return t.property===e?!!t.computed:t.object===e;case"JSXMemberExpression":return t.object===e;case"VariableDeclarator":return t.init===e;case"ArrowFunctionExpression":return t.body===e;case"PrivateName":case"LabeledStatement":case"CatchClause":case"RestElement":case"BreakStatement":case"ContinueStatement":case"FunctionDeclaration":case"FunctionExpression":case"ExportNamespaceSpecifier":case"ExportDefaultSpecifier":case"ImportDefaultSpecifier":case"ImportNamespaceSpecifier":case"ImportSpecifier":case"ImportAttribute":case"JSXAttribute":case"ObjectPattern":case"ArrayPattern":case"MetaProperty":return!1;case"ClassMethod":case"ClassPrivateMethod":case"ObjectMethod":return t.key===e&&!!t.computed;case"ObjectProperty":return t.key===e?!!t.computed:!n||"ObjectPattern"!==n.type;case"ClassProperty":case"ClassAccessorProperty":case"TSPropertySignature":return t.key!==e||!!t.computed;case"ClassPrivateProperty":case"ObjectTypeProperty":return t.key!==e;case"ClassDeclaration":case"ClassExpression":return t.superClass===e;case"AssignmentExpression":case"AssignmentPattern":return t.right===e;case"ExportSpecifier":return(null==n||!n.source)&&t.local===e;case"TSEnumMember":return t.id!==e}return!0}},5995:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if((0,r.isBlockStatement)(e)&&((0,r.isFunction)(t)||(0,r.isCatchClause)(t)))return!1;if((0,r.isPattern)(e)&&((0,r.isFunction)(t)||(0,r.isCatchClause)(t)))return!0;return(0,r.isScopable)(e)};var r=n(2029)},4848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.isImportDefaultSpecifier)(e)||(0,r.isIdentifier)(e.imported||e.exported,{name:"default"})};var r=n(2029)},141:function(e,t,n){"use strict";var r=n(3269).default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e===t)return!0;if(a.ALIAS_KEYS[t])return!1;var n=a.FLIPPED_ALIAS_KEYS[t];if(n){if(n[0]===e)return!0;var i,o=r(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(e===s)return!0}}catch(u){o.e(u)}finally{o.f()}}return!1};var a=n(4376)},2805:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(e)&&!a.has(e)};var r=n(9086),a=new Set(["abstract","boolean","byte","char","double","enum","final","float","goto","implements","int","interface","long","native","package","private","protected","public","short","static","synchronized","throws","transient","volatile"])},9086:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("string"!==typeof e)return!1;if(t&&((0,r.isKeyword)(e)||(0,r.isStrictReservedWord)(e,!0)))return!1;return(0,r.isIdentifierName)(e)};var r=n(5208)},9184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.isVariableDeclaration)(e,{kind:"var"})&&!e[a.BLOCK_SCOPED_SYMBOL]};var r=n(2029),a=n(9735)},3561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!(0,r.isMemberExpression)(e))return!1;var a,i=Array.isArray(t)?t:t.split("."),o=[];for(a=e;(0,r.isMemberExpression)(a);a=a.object)o.push(a.property);if(o.push(a),o.length<i.length)return!1;if(!n&&o.length>i.length)return!1;for(var s=0,u=o.length-1;s<i.length;s++,u--){var c=o[u],l=void 0;if((0,r.isIdentifier)(c))l=c.name;else if((0,r.isStringLiteral)(c))l=c.value;else{if(!(0,r.isThisExpression)(c))return!1;l="this"}if(i[s]!==l)return!1}return!0};var r=n(2029)},6092:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return!!e&&/^[a-z]/.test(e)}},4834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(0,n(7029).default)("React.Component");t.default=r},3685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(!e)return;var o=r.NODE_FIELDS[e.type];if(!o)return;var s=o[t];a(e,t,n,s),i(e,t,n)},t.validateChild=i,t.validateField=a;var r=n(4376);function a(e,t,n,r){null!=r&&r.validate&&(r.optional&&null==n||r.validate(e,t,n))}function i(e,t,n){if(null!=n){var a=r.NODE_PARENT_VALIDATIONS[n.type];a&&a(e,t,n)}}},76:function(e,t,n){"use strict";n.d(t,{Z:function(){return ae}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),a=Math.abs,i=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function d(e,t,n){return e.slice(t,n)}function f(e){return e.length}function p(e){return e.length}function h(e,t){return t.push(e),e}var v=1,m=1,y=0,g=0,b=0,x="";function k(e,t,n,r,a,i,o){return{value:e,root:t,parent:n,type:r,props:a,children:i,line:v,column:m,length:o,return:""}}function w(e,t){return o(k("",null,null,"",null,null,0),e,{length:-e.length},t)}function _(){return b=g>0?l(x,--g):0,m--,10===b&&(m=1,v--),b}function T(){return b=g<y?l(x,g++):0,m++,10===b&&(m=1,v++),b}function S(){return l(x,g)}function E(){return g}function I(e,t){return d(x,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function N(e){return v=m=1,y=f(x=e),g=0,[]}function A(e){return x="",e}function O(e){return s(I(g-1,D(91===e?e+2:40===e?e+1:e)))}function P(e){for(;(b=S())&&b<33;)T();return C(e)>2||C(b)>3?"":" "}function R(e,t){for(;--t&&T()&&!(b<48||b>102||b>57&&b<65||b>70&&b<97););return I(e,E()+(t<6&&32==S()&&32==T()))}function D(e){for(;T();)switch(b){case e:return g;case 34:case 39:34!==e&&39!==e&&D(b);break;case 40:41===e&&D(e);break;case 92:T()}return g}function M(e,t){for(;T()&&e+b!==57&&(e+b!==84||47!==S()););return"/*"+I(t,g-1)+"*"+i(47===e?e:T())}function L(e){for(;!C(S());)T();return I(e,g)}var F="-ms-",B="-moz-",j="-webkit-",U="comm",V="rule",W="decl",z="@keyframes";function q(e,t){for(var n="",r=p(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function K(e,t,n,r){switch(e.type){case"@import":case W:return e.return=e.return||e.value;case U:return"";case z:return e.return=e.value+"{"+q(e.children,r)+"}";case V:e.value=e.props.join(",")}return f(n=q(e.children,r))?e.return=e.value+"{"+n+"}":""}function G(e,t){switch(function(e,t){return(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3)}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+B+e+F+e+e;case 6828:case 4268:return j+e+F+e+e;case 6165:return j+e+F+"flex-"+e+e;case 5187:return j+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return j+e+F+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return j+e+F+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+F+u(e,"shrink","negative")+e;case 5292:return j+e+F+u(e,"basis","preferred-size")+e;case 6060:return j+"box-"+u(e,"-grow","")+j+e+F+u(e,"grow","positive")+e;case 4554:return j+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+B+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?G(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,f(e)-3-(~c(e,"!important")&&10))){case 107:return u(e,":",":"+j)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===l(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+F+e+e}return e}function H(e){return A(Z("",null,null,null,[""],e=N(e),0,[0],e))}function Z(e,t,n,r,a,o,s,l,d){for(var p=0,v=0,m=s,y=0,g=0,b=0,x=1,k=1,w=1,I=0,C="",N=a,A=o,D=r,F=C;k;)switch(b=I,I=T()){case 40:if(108!=b&&58==F.charCodeAt(m-1)){-1!=c(F+=u(O(I),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:F+=O(I);break;case 9:case 10:case 13:case 32:F+=P(b);break;case 92:F+=R(E()-1,7);continue;case 47:switch(S()){case 42:case 47:h(X(M(T(),E()),t,n),d);break;default:F+="/"}break;case 123*x:l[p++]=f(F)*w;case 125*x:case 59:case 0:switch(I){case 0:case 125:k=0;case 59+v:g>0&&f(F)-m&&h(g>32?Q(F+";",r,n,m-1):Q(u(F," ","")+";",r,n,m-2),d);break;case 59:F+=";";default:if(h(D=Y(F,t,n,p,v,a,l,C,N=[],A=[],m),o),123===I)if(0===v)Z(F,t,D,D,N,o,m,l,A);else switch(y){case 100:case 109:case 115:Z(e,D,D,r&&h(Y(e,D,D,0,0,a,l,C,a,N=[],m),A),a,A,m,l,r?N:A);break;default:Z(F,D,D,D,[""],A,0,l,A)}}p=v=g=0,x=w=1,C=F="",m=s;break;case 58:m=1+f(F),g=b;default:if(x<1)if(123==I)--x;else if(125==I&&0==x++&&125==_())continue;switch(F+=i(I),I*x){case 38:w=v>0?1:(F+="\f",-1);break;case 44:l[p++]=(f(F)-1)*w,w=1;break;case 64:45===S()&&(F+=O(T())),y=S(),v=m=f(C=F+=L(E())),I++;break;case 45:45===b&&2==f(F)&&(x=0)}}return o}function Y(e,t,n,r,i,o,c,l,f,h,v){for(var m=i-1,y=0===i?o:[""],g=p(y),b=0,x=0,w=0;b<r;++b)for(var _=0,T=d(e,m+1,m=a(x=c[b])),S=e;_<g;++_)(S=s(x>0?y[_]+" "+T:u(T,/&\f/g,y[_])))&&(f[w++]=S);return k(e,t,n,0===i?V:l,f,h,v)}function X(e,t,n){return k(e,t,n,U,i(b),d(e,2,-2),0)}function Q(e,t,n,r){return k(e,t,n,W,d(e,0,r),d(e,r+1,-1),r)}var J=function(e,t,n){for(var r=0,a=0;r=a,a=S(),38===r&&12===a&&(t[n]=1),!C(a);)T();return I(e,g)},$=function(e,t){return A(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=J(g-1,t,n);break;case 2:e[n]+=O(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=i(r)}}while(r=T());return e}(N(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var a=[],i=$(t,a),o=n.props,s=0,u=0;s<i.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=a[s]?i[s].replace(/&\f/g,o[c]):o[c]+" "+i[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case W:e.return=G(e.value,e.length);break;case z:return q([w(e,{value:u(e.value,"@","@"+j)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return q([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return q([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ae=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||re;var i,o,s={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var c,l,d=[K,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],f=function(e){var t=p(e);return function(n,r,a,i){for(var o="",s=0;s<t;s++)o+=e[s](n,r,a,i)||"";return o}}([te,ne].concat(a,d));o=function(e,t,n,r){c=n,q(H(e?e+"{"+t.styles+"}":t.styles),f),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new r({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return h.sheet.hydrate(u),h}},3782:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},1346:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},a={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i=n(3782),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,i.Z)((function(e){return u(e)?e:e.replace(o,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return p={name:t,styles:n,next:p},t}))}return 1===a[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return p={name:n.name,styles:n.styles,next:p},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)p={name:r.name,styles:r.styles,next:p},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=f(e,t,n[a])+";";else for(var i in n){var o=n[i];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=i+"{"+t[o]+"}":c(o)&&(r+=l(i)+":"+d(i,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=f(e,t,o);switch(i){case"animation":case"animationName":r+=l(i)+":"+s+";";break;default:r+=i+"{"+s+"}"}}else for(var u=0;u<o.length;u++)c(o[u])&&(r+=l(i)+":"+d(i,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var a=p,i=n(e);return p=a,f(e,t,i)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var p,h=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,i="";p=void 0;var o=e[0];null==o||void 0===o.raw?(a=!1,i+=f(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=f(n,t,e[s]),a&&(i+=o[s]);h.lastIndex=0;for(var u,c="";null!==(u=h.exec(i));)c+="-"+u[1];return{name:r(i)+c,styles:i,next:p}}},7829:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},767:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(a){r[a]=e[a].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},5159:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7829),a={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function i(e,t){return a[t]||"".concat(r.Z.generate(e),"-").concat(t)}},208:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5159);function a(e,t){var n={};return t.forEach((function(t){n[t]=(0,r.Z)(e,t)})),n}},5545:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"}),"AccountCircle");t.Z=o},8365:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"}),"CameraAltOutlined");t.Z=o},6711:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");t.Z=o},8996:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");t.Z=o},9905:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M18.3 5.71a.9959.9959 0 0 0-1.41 0L12 10.59 7.11 5.7a.9959.9959 0 0 0-1.41 0c-.39.39-.39 1.02 0 1.41L10.59 12 5.7 16.89c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0L12 13.41l4.89 4.89c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L13.41 12l4.89-4.89c.38-.38.38-1.02 0-1.4z"}),"CloseRounded");t.Z=o},3911:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M20 5h-3.17L15 3H9L7.17 5H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm-8 13c-2.76 0-5-2.24-5-5H5l2.5-2.5L10 13H8c0 2.21 1.79 4 4 4 .58 0 1.13-.13 1.62-.35l.74.74c-.71.37-1.5.61-2.36.61zm4.5-2.5L14 13h2c0-2.21-1.79-4-4-4-.58 0-1.13.13-1.62.35l-.74-.73C10.35 8.24 11.14 8 12 8c2.76 0 5 2.24 5 5h2l-2.5 2.5z"}),"FlipCameraIos");t.Z=o},8243:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"Group");t.Z=o},3863:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}),"InsertEmoticon");t.Z=o},5172:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");t.Z=o},8477:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M20 17.17 18.83 16H4V4h16v13.17zM20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4V4c0-1.1-.9-2-2-2z"}),"ModeCommentOutlined");t.Z=o},2094:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");t.Z=o},7750:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"PersonAdd");t.Z=o},5403:function(e,t,n){"use strict";var r=n(5318);t.Z=void 0;var a=r(n(5649)),i=n(184),o=(0,a.default)((0,i.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=o},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3519)},7107:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(7462),a=n(3366),i=n(2466),o=n(5080),s=n(4942);function u(e,t,n){var a;return(0,r.Z)({toolbar:(a={minHeight:56},(0,s.Z)(a,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,s.Z)(a,e.up("sm"),{minHeight:64}),a)},n)}var c=n(6189),l=n(2065),d={black:"#000",white:"#fff"},f={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},p={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},h={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},y={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},b=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:d.white,default:d.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},k={text:{primary:d.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:d.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var a=r.light||r,i=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,l.$n)(e.main,a):"dark"===t&&(e.dark=(0,l._j)(e.main,i)))}function _(e){var t=e.mode,n=void 0===t?"light":t,o=e.contrastThreshold,s=void 0===o?3:o,u=e.tonalOffset,_=void 0===u?.2:u,T=(0,a.Z)(e,b),S=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(n),E=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[200],light:p[50],dark:p[400]}:{main:p[500],light:p[300],dark:p[700]}}(n),I=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:h[500],light:h[300],dark:h[700]}:{main:h[700],light:h[400],dark:h[800]}}(n),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[700],light:y[500],dark:y[900]}}(n),N=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[800],light:g[500],dark:g[900]}}(n),A=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function O(e){return(0,l.mi)(e,k.text.primary)>=s?k.text.primary:x.text.primary}var P=function(e){var t=e.color,n=e.name,a=e.mainShade,i=void 0===a?500:a,o=e.lightShade,s=void 0===o?300:o,u=e.darkShade,l=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error((0,c.Z)(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error((0,c.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",s,_),w(t,"dark",l,_),t.contrastText||(t.contrastText=O(t.main)),t},R={dark:k,light:x};return(0,i.Z)((0,r.Z)({common:d,mode:n,primary:P({color:S,name:"primary"}),secondary:P({color:E,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:I,name:"error"}),warning:P({color:A,name:"warning"}),info:P({color:C,name:"info"}),success:P({color:N,name:"success"}),grey:f,contrastThreshold:s,getContrastText:O,augmentColor:P,tonalOffset:_},R[n]),T)}var T=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function I(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?E:o,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,d=void 0===l?300:l,f=n.fontWeightRegular,p=void 0===f?400:f,h=n.fontWeightMedium,v=void 0===h?500:h,m=n.fontWeightBold,y=void 0===m?700:m,g=n.htmlFontSize,b=void 0===g?16:g,x=n.allVariants,k=n.pxToRem,w=(0,a.Z)(n,T);var _=c/14,I=k||function(e){return"".concat(e/b*_,"rem")},C=function(e,t,n,a,i){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:I(t),lineHeight:n},s===E?{letterSpacing:"".concat((o=a/t,Math.round(1e5*o)/1e5),"em")}:{},i,x);var o},N={h1:C(d,96,1.167,-1.5),h2:C(d,60,1.2,-.5),h3:C(p,48,1.167,0),h4:C(p,34,1.235,.25),h5:C(p,24,1.334,0),h6:C(v,20,1.6,.15),subtitle1:C(p,16,1.75,.15),subtitle2:C(v,14,1.57,.1),body1:C(p,16,1.5,.15),body2:C(p,14,1.43,.15),button:C(v,14,1.75,.4,S),caption:C(p,12,1.66,.4),overline:C(p,12,2.66,1,S)};return(0,i.Z)((0,r.Z)({htmlFontSize:b,pxToRem:I,fontFamily:s,fontSize:c,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:v,fontWeightBold:y},N),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var N=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],A=["duration","easing","delay"],O={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function R(e){return"".concat(Math.round(e),"ms")}function D(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function M(e){var t=(0,r.Z)({},O,e.easing),n=(0,r.Z)({},P,e.duration);return(0,r.Z)({getAutoHeightDuration:D,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,o=void 0===i?n.standard:i,s=r.easing,u=void 0===s?t.easeInOut:s,c=r.delay,l=void 0===c?0:c;(0,a.Z)(r,A);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:R(o)," ").concat(u," ").concat("string"===typeof l?l:R(l))})).join(",")}},e,{easing:t,duration:n})}var L={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,s=e.palette,c=void 0===s?{}:s,l=e.transitions,d=void 0===l?{}:l,f=e.typography,p=void 0===f?{}:f,h=(0,a.Z)(e,F),v=_(c),m=(0,o.Z)(e),y=(0,i.Z)(m,{mixins:u(m.breakpoints,m.spacing,n),palette:v,shadows:N.slice(),typography:I(v,p),transitions:M(d),zIndex:(0,r.Z)({},L)});y=(0,i.Z)(y,h);for(var g=arguments.length,b=new Array(g>1?g-1:0),x=1;x<g;x++)b[x-1]=arguments[x];return y=b.reduce((function(e,t){return(0,i.Z)(e,t)}),y)}var j=B},6482:function(e,t,n){"use strict";var r=(0,n(7107).Z)();t.Z=r},7630:function(e,t,n){"use strict";n.d(t,{ZP:function(){return E},FO:function(){return T}});var r=n(3433),a=n(9439),i=n(7462),o=n(3366),s=n(9451),u=n(5080),c=n(7312),l=["variant"];function d(e){return 0===e.length}function f(e){var t=e.variant,n=(0,o.Z)(e,l),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?d(r)?e[t]:(0,c.Z)(e[t]):"".concat(d(r)?t:(0,c.Z)(t)).concat((0,c.Z)(e[t].toString()))})),r}var p=n(104),h=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],v=["theme"],m=["theme"];function y(e){return 0===Object.keys(e).length}var g=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},b=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=f(e.props);r[t]=e.style})),r},x=function(e,t,n,r){var a,i,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(a=n.components)||null==(i=a[r])?void 0:i.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[f(n.props)])})),u};function k(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var w=(0,u.Z)();var _=n(6482),T=function(e){return k(e)&&"classes"!==e},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?w:t,u=e.rootShouldForwardProp,c=void 0===u?k:u,l=e.slotShouldForwardProp,d=void 0===l?k:l,f=e.styleFunctionSx,_=void 0===f?p.Z:f;return function(e){var t,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=u.name,f=u.slot,p=u.skipVariantsResolver,w=u.skipSx,T=u.overridesResolver,S=(0,o.Z)(u,h),E=void 0!==p?p:f&&"Root"!==f||!1,I=w||!1;var C=k;"Root"===f?C=c:f&&(C=d);var N=(0,s.ZP)(e,(0,i.Z)({shouldForwardProp:C,label:t},S)),A=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),u=1;u<t;u++)s[u-1]=arguments[u];var c=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,a=(0,o.Z)(t,v);return e((0,i.Z)({theme:y(r)?n:r},a))}:e})):[],d=e;l&&T&&c.push((function(e){var t=y(e.theme)?n:e.theme,r=g(l,t);if(r){var i={};return Object.entries(r).forEach((function(t){var n=(0,a.Z)(t,2),r=n[0],o=n[1];i[r]="function"===typeof o?o(e):o})),T(e,i)}return null})),l&&!E&&c.push((function(e){var t=y(e.theme)?n:e.theme;return x(e,b(l,t),t,l)})),I||c.push((function(e){var t=y(e.theme)?n:e.theme;return _((0,i.Z)({},e,{theme:t}))}));var f=c.length-s.length;if(Array.isArray(e)&&f>0){var p=new Array(f).fill("");(d=[].concat((0,r.Z)(e),(0,r.Z)(p))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(p))}else"function"===typeof e&&e.__emotion_real!==e&&(d=function(t){var r=t.theme,a=(0,o.Z)(t,m);return e((0,i.Z)({theme:y(r)?n:r},a))});var h=N.apply(void 0,[d].concat((0,r.Z)(c)));return h};return N.withConfig&&(A.withConfig=N.withConfig),A}}({defaultTheme:_.Z,rootShouldForwardProp:T}),E=S},1046:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(5735);var a=n(886);function i(e){var t=e.props,n=e.name,i=e.defaultTheme,o=function(e){var t=e.theme,n=e.name,a=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,a):a}({theme:(0,a.Z)(i),name:n,props:t});return o}var o=n(6482);function s(e){return i({props:e.props,name:e.name,defaultTheme:o.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},3519:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return a.Z},createChainedFunction:function(){return i},createSvgIcon:function(){return k},debounce:function(){return w},deprecatedPropType:function(){return _},isMuiElement:function(){return T},ownerDocument:function(){return E},ownerWindow:function(){return I},requirePropFactory:function(){return C},setRef:function(){return N},unstable_ClassNameGenerator:function(){return U},unstable_useEnhancedEffect:function(){return A},unstable_useId:function(){return D},unsupportedProp:function(){return M},useControlled:function(){return L},useEventCallback:function(){return F.Z},useForkRef:function(){return B.Z},useIsFocusVisible:function(){return j.Z}});var r=n(7829),a=n(4036);var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),(function(){}))},o=n(7462),s=n(2791),u=n.t(s,2),c=n(3366),l=n(8182),d=n(767),f=n(1046),p=n(7630),h=n(5159);function v(e){return(0,h.Z)("MuiSvgIcon",e)}(0,n(208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var m=n(184),y=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],g=(0,p.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,a.Z)(n.color))],t["fontSize".concat((0,a.Z)(n.fontSize))]]}})((function(e){var t,n,r,a,i,o,s,u,c,l,d,f,p,h,v,m,y,g=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=g.transitions)||null==(a=r.duration)?void 0:a.shorter}),fontSize:{inherit:"inherit",small:(null==(i=g.typography)||null==(o=i.pxToRem)?void 0:o.call(i,20))||"1.25rem",medium:(null==(s=g.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=g.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875"}[b.fontSize],color:null!=(d=null==(f=g.palette)||null==(p=f[b.color])?void 0:p.main)?d:{action:null==(h=g.palette)||null==(v=h.action)?void 0:v.active,disabled:null==(m=g.palette)||null==(y=m.action)?void 0:y.disabled,inherit:void 0}[b.color]}})),b=s.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,s=n.color,u=void 0===s?"inherit":s,p=n.component,h=void 0===p?"svg":p,b=n.fontSize,x=void 0===b?"medium":b,k=n.htmlColor,w=n.inheritViewBox,_=void 0!==w&&w,T=n.titleAccess,S=n.viewBox,E=void 0===S?"0 0 24 24":S,I=(0,c.Z)(n,y),C=(0,o.Z)({},n,{color:u,component:h,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:_,viewBox:E}),N={};_||(N.viewBox=E);var A=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,a.Z)(t)),"fontSize".concat((0,a.Z)(n))]};return(0,d.Z)(i,v,r)}(C);return(0,m.jsxs)(g,(0,o.Z)({as:h,className:(0,l.Z)(A.root,i),ownerState:C,focusable:"false",color:k,"aria-hidden":!T||void 0,role:T?"img":void 0,ref:t},N,I,{children:[r,T?(0,m.jsx)("title",{children:T}):null]}))}));b.muiName="SvgIcon";var x=b;function k(e,t){var n=function(n,r){return(0,m.jsx)(x,(0,o.Z)({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))};return n.muiName=x.muiName,s.memo(s.forwardRef(n))}var w=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var s=function(){e.apply(r,i)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var _=function(e,t){return function(){return null}};var T=function(e,t){return s.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function S(e){return e&&e.ownerDocument||document}var E=S;var I=function(e){return S(e).defaultView||window};var C=function(e,t){return function(){return null}},N=n(2971).Z,A=n(5721).Z,O=n(9439),P=0;var R=u.useId;var D=function(e){if(void 0!==R){var t=R();return null!=e?e:t}return function(e){var t=s.useState(e),n=(0,O.Z)(t,2),r=n[0],a=n[1],i=e||r;return s.useEffect((function(){null==r&&a("mui-".concat(P+=1))}),[r]),i}(e)};var M=function(e,t,n,r,a){return null};var L=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,s.useRef(void 0!==t).current),a=s.useState(n),i=(0,O.Z)(a,2),o=i[0],u=i[1];return[r?t:o,s.useCallback((function(e){r||u(e)}),[])]},F=n(6868),B=n(4843),j=n(3031),U={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},6868:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(5721);var i=function(e){var t=r.useRef(e);return(0,a.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},4843:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791),a=n(2971);var i=function(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,a.Z)(e,n),(0,a.Z)(t,n)}}),[e,t])}},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,a=n(2791),i=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(i=!0)}function c(){i=!1}function l(){"hidden"===this.visibilityState&&o&&(i=!0)}function d(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return i||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=a.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=a.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!d(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},9451:function(e,t,n){"use strict";n.d(t,{ZP:function(){return S}});var r=n(2791),a=n.t(r,2),i=n(7462),o=n(3782),s=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,u=(0,o.Z)((function(e){return s.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),c=n(76),l=n(1346),d=(0,r.createContext)("undefined"!==typeof HTMLElement?(0,c.Z)({key:"css"}):null);d.Provider;var f=function(e){return(0,r.forwardRef)((function(t,n){var a=(0,r.useContext)(d);return e(t,a,n)}))},p=(0,r.createContext)({});a.useInsertionEffect&&a.useInsertionEffect;function h(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var v=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},m=u,y=function(e){return"theme"!==e},g=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?m:y},b=function(e,t,n){var r;if(t){var a=t.shouldForwardProp;r=e.__emotion_forwardProp&&a?function(t){return e.__emotion_forwardProp(t)&&a(t)}:a}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},x=a.useInsertionEffect?a.useInsertionEffect:function(e){e()};var k=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;v(t,n,r);var a;a=function(){return function(e,t,n){v(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)},x(a);return null},w=function e(t,n){var a,o,s=t.__emotion_real===t,u=s&&t.__emotion_base||t;void 0!==n&&(a=n.label,o=n.target);var c=b(t,n,s),d=c||g(u),v=!d("as");return function(){var m=arguments,y=s&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&y.push("label:"+a+";"),null==m[0]||void 0===m[0].raw)y.push.apply(y,m);else{0,y.push(m[0][0]);for(var x=m.length,w=1;w<x;w++)y.push(m[w],m[0][w])}var _=f((function(e,t,n){var a=v&&e.as||u,i="",s=[],f=e;if(null==e.theme){for(var m in f={},e)f[m]=e[m];f.theme=(0,r.useContext)(p)}"string"===typeof e.className?i=h(t.registered,s,e.className):null!=e.className&&(i=e.className+" ");var b=(0,l.O)(y.concat(s),t.registered,f);i+=t.key+"-"+b.name,void 0!==o&&(i+=" "+o);var x=v&&void 0===c?g(a):d,w={};for(var _ in e)v&&"as"===_||x(_)&&(w[_]=e[_]);return w.className=i,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(k,{cache:t,serialized:b,isStringTag:"string"===typeof a}),(0,r.createElement)(a,w))}));return _.displayName=void 0!==a?a:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",_.defaultProps=t.defaultProps,_.__emotion_real=_,_.__emotion_base=u,_.__emotion_styles=y,_.__emotion_forwardProp=c,Object.defineProperty(_,"toString",{value:function(){return"."+o}}),_.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:b(_,r,!0)})).apply(void 0,y)},_}},_=w.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){_[e]=_(e)}));var T=_;function S(e,t){return T(e,t)}},1184:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},VO:function(){return r},W8:function(){return o},k9:function(){return i}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},a={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function i(e,t,n){var i=e.theme||{};if(Array.isArray(t)){var o=i.breakpoints||a;return t.reduce((function(e,r,a){return e[o.up(o.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var s=i.breakpoints||a;return Object.keys(t).reduce((function(e,a){if(-1!==Object.keys(s.values||r).indexOf(a)){e[s.up(a)]=n(t[a],a)}else{var i=a;e[i]=t[i]}return e}),{})}return n(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{$n:function(){return d},Fq:function(){return c},_j:function(){return l},mi:function(){return u}});var r=n(6189);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function i(e){if(e.type)return e;if("#"===e.charAt(0))return i(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var a,o=e.substring(t+1,e.length-1);if("color"===n){if(a=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(a))throw new Error((0,r.Z)(10,a))}else o=o.split(",");return{type:n,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:a}}function o(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=i(e)).type?i(function(e){var t=(e=i(e)).values,n=t[0],r=t[1]/100,a=t[2]/100,s=r*Math.min(a,1-a),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return a-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=i(e),t=a(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function l(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function d(e,t){if(e=i(e),t=a(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return o(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(7462),a=n(3366),i=n(2466),o=n(4942),s=["values","unit","step"];function u(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,i=e.unit,u=void 0===i?"px":i,c=e.step,l=void 0===c?5:c,d=(0,a.Z)(e,s),f=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})}(n),p=Object.keys(f);function h(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(u,")")}function m(e,t){var r=p.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[p[r]]?n[p[r]]:t)-l/100).concat(u,")")}return(0,r.Z)({keys:p,values:f,up:h,down:v,between:m,only:function(e){return p.indexOf(e)+1<p.length?m(e,p[p.indexOf(e)+1]):h(e)},not:function(e){var t=p.indexOf(e);return 0===t?h(p[1]):t===p.length-1?v(p[t]):m(e,p[p.indexOf(e)+1]).replace("@media","@media not all and")},unit:u},d)}var c={borderRadius:4},l=n(5682);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=0===n.length?[1]:n;return a.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var f=["breakpoints","palette","spacing","shape"];var p=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.palette,s=void 0===o?{}:o,l=e.spacing,p=e.shape,h=void 0===p?{}:p,v=(0,a.Z)(e,f),m=u(n),y=d(l),g=(0,i.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:y,shape:(0,r.Z)({},c,h)},v),b=arguments.length,x=new Array(b>1?b-1:0),k=1;k<b;k++)x[k-1]=arguments[k];return g=x.reduce((function(e,t){return(0,i.Z)(e,t)}),g)}},6001:function(e,t,n){"use strict";n.d(t,{Gc:function(){return Y},G$:function(){return Z}});var r=n(8529),a=n(8247);var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,a.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},o=n(5682),s=n(1184);function u(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var c=(0,r.Z)({prop:"border",themeKey:"borders",transform:u}),l=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:u}),d=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:u}),f=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:u}),p=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:u}),h=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),b=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,o.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,o.NA)(t,e)}}))}return null};b.propTypes={},b.filterProps=["borderRadius"];var x=i(c,l,d,f,p,h,v,m,y,g,b),k=i((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),w=i((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),_=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,o.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,o.NA)(t,e)}}))}return null};_.propTypes={},_.filterProps=["gap"];var T=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,o.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,o.NA)(t,e)}}))}return null};T.propTypes={},T.filterProps=["columnGap"];var S=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,o.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,o.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];var E=i(_,T,S,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),I=i((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),C=i((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),N=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function A(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var O=(0,r.Z)({prop:"width",transform:A}),P=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,a;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(a=r.values)?void 0:a[t])||s.VO[t]||A(t)}}))}return null};P.filterProps=["maxWidth"];var R=(0,r.Z)({prop:"minWidth",transform:A}),D=(0,r.Z)({prop:"height",transform:A}),M=(0,r.Z)({prop:"maxHeight",transform:A}),L=(0,r.Z)({prop:"minHeight",transform:A}),F=((0,r.Z)({prop:"size",cssProperty:"width",transform:A}),(0,r.Z)({prop:"size",cssProperty:"height",transform:A}),i(O,P,R,D,M,L,(0,r.Z)({prop:"boxSizing"}))),B=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),j=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),U=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),V=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),W=(0,r.Z)({prop:"letterSpacing"}),z=(0,r.Z)({prop:"textTransform"}),q=(0,r.Z)({prop:"lineHeight"}),K=(0,r.Z)({prop:"textAlign"}),G=i((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),B,j,U,V,W,q,K,z),H={borders:x.filterProps,display:k.filterProps,flexbox:w.filterProps,grid:E.filterProps,positions:I.filterProps,palette:C.filterProps,shadows:N.filterProps,sizing:F.filterProps,spacing:o.ZP.filterProps,typography:G.filterProps},Z={borders:x,display:k,flexbox:w,grid:E,positions:I,palette:C,shadows:N,sizing:F,spacing:o.ZP,typography:G},Y=Object.keys(H).reduce((function(e,t){return H[t].forEach((function(n){e[n]=Z[t]})),e}),{})},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return h},ZP:function(){return w},NA:function(){return m}});var r=n(9439),a=n(1184),i=n(8529),o=n(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=(0,r.Z)(t,2),a=n[0],i=n[1],o=s[a],l=u[i]||"";return Array.isArray(l)?l.map((function(e){return o+e})):[o+l]})),d=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],p=[].concat(d,f);function h(e,t,n,r){var a=(0,i.D)(e,t)||n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function v(e){return h(e,"spacing",8)}function m(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function y(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=m(t,n),e}),{})}}(l(n),r),o=e[n];return(0,a.k9)(e,o,i)}function g(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return y(e,t,r,n)})).reduce(o.Z,{})}function b(e){return g(e,d)}function x(e){return g(e,f)}function k(e){return g(e,p)}b.propTypes={},b.filterProps=d,x.propTypes={},x.filterProps=f,k.propTypes={},k.filterProps=p;var w=k},8529:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(4942),a=n(7312),i=n(1184);function o(e,t){return t&&"string"===typeof t?t.split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e):null}function s(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||a:o(e,n)||a,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,c=e.themeKey,l=e.transform,d=function(e){if(null==e[t])return null;var n=e[t],d=o(e.theme,c)||{};return(0,i.k9)(e,n,(function(e){var n=s(d,l,e);return e===n&&"string"===typeof e&&(n=s(d,l,"".concat(t).concat("default"===e?"":(0,a.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return d.propTypes={},d.filterProps=[t],d}},104:function(e,t,n){"use strict";var r=n(4942),a=n(8247),i=n(6001),o=n(1184);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),a=new Set(r);return t.every((function(e){return a.size===Object.keys(e).length}))}function u(e,t){return"function"===typeof e?e(t):e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.G$,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,a){var i,o=(i={},(0,r.Z)(i,e,n),(0,r.Z)(i,"theme",a),i),s=t[e];return s?s(o):(0,r.Z)({},e,n)}function c(e){var i=e||{},l=i.sx,d=i.theme,f=void 0===d?{}:d;if(!l)return null;function p(e){var i=e;if("function"===typeof e)i=e(f);else if("object"!==typeof e)return e;if(!i)return null;var l=(0,o.W8)(f.breakpoints),d=Object.keys(l),p=l;return Object.keys(i).forEach((function(e){var l=u(i[e],f);if(null!==l&&void 0!==l)if("object"===typeof l)if(t[e])p=(0,a.Z)(p,n(e,l,f));else{var d=(0,o.k9)({theme:f},l,(function(t){return(0,r.Z)({},e,t)}));s(d,l)?p[e]=c({sx:l,theme:f}):p=(0,a.Z)(p,d)}else p=(0,a.Z)(p,n(e,l,f))})),(0,o.L7)(d,p)}return Array.isArray(l)?l.map(p):p(l)}return c}();c.filterProps=["sx"],t.Z=c},886:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(5080),a=n(2791);var i=a.createContext(null);function o(){return a.useContext(i)}function s(e){return 0===Object.keys(e).length}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o();return!t||s(t)?e:t},c=(0,r.Z)();var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return u(e)}},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(6189);function a(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return a},Z:function(){return i}});var r=n(7462);function a(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},e):e;return a(e)&&a(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(a(t[r])&&r in e&&a(e[r])?o[r]=i(e[r],t[r],n):o[r]=t[r])})),o}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function a(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),a="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=a},8834:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){function r(){return R.buffer!=K&&X(R.buffer),G}function a(){return R.buffer!=K&&X(R.buffer),H}function i(){return R.buffer!=K&&X(R.buffer),Z}function o(){return R.buffer!=K&&X(R.buffer),Y}var s,u,c,l="undefined"!==typeof(t=t||{})?t:{};l.ready=new Promise((function(e,t){s=e,u=t})),"undefined"!==typeof process&&process.listeners&&(c={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var d,f,p,h,v,m,y=Object.assign({},l),g=[],b=function(e,t){throw t},x="object"===typeof window,k="function"===typeof importScripts,w="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,_=l.ENVIRONMENT_IS_PTHREAD||!1,T="";function S(e){return l.locateFile?l.locateFile(e,T):T+e}if(w){var E;T=k?n(2980).dirname(T)+"/":"//",m=function(){v||(h=n(7256),v=n(2980))},d=function(e,t){return m(),e=v.normalize(e),h.readFileSync(e,t?void 0:"utf8")},p=function(e){var t=d(e,!0);return t.buffer||(t=new Uint8Array(t)),t},f=function(e,t,n){m(),e=v.normalize(e),h.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),g=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ct))throw e})),process.on("unhandledRejection",(function(e){throw e})),b=function(e,t){if(re())throw process.exitCode=e,t;var n;(n=t)instanceof ct||A("exiting due to exception: "+n),process.exit(e)},l.inspect=function(){return"[Emscripten Module object]"};try{E=n(7958)}catch(ft){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),ft}n.g.Worker=E.Worker}else(x||k)&&(k?T=self.location.href:"undefined"!==typeof document&&document.currentScript&&(T=document.currentScript.src),"undefined"!==typeof e&&e&&(T=e),T=0!==T.indexOf("blob:")?T.substr(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(d=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(p=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}),function(e){return document.title=e});w&&"undefined"===typeof performance&&(n.g.performance=n(4862).performance);var I=console.log.bind(console),C=console.warn.bind(console);w&&(m(),I=function(e){return h.writeSync(1,e+"\n")},C=function(e){return h.writeSync(2,e+"\n")});var N=l.print||I,A=l.printErr||C;Object.assign(l,y),y=null,l.arguments&&(g=l.arguments),l.thisProgram&&l.thisProgram,l.quit&&(b=l.quit);function O(e){O.shown||(O.shown={}),O.shown[e]||(O.shown[e]=1,A(e))}var P;Atomics.load,Atomics.store,Atomics.compareExchange;l.wasmBinary&&(P=l.wasmBinary);var R,D,M=l.noExitRuntime||!0;"object"!==typeof WebAssembly&&ue("no native wasm support detected");var L,F=!1;function B(e){return l["_"+e]}function j(e,t,n,a,i){var o={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);q(e,t=st(n),n)}return t},array:function(e){var t=st(e.length);return function(e,t){r().set(e,t)}(e,t),t}};var s=B(e),u=[],c=0;if(a)for(var l=0;l<a.length;l++){var d=o[n[l]];d?(0===c&&(c=it()),u[l]=d(a[l])):u[l]=a[l]}var f=s.apply(null,u);return f=function(e){return 0!==c&&ot(c),function(e){return"string"===t?z(e):"boolean"===t?Boolean(e):e}(e)}(f)}function U(e){var t=new TextDecoder(e);this.decode=function(e){return e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode.call(t,e)}}var V="undefined"!==typeof TextDecoder?new U("utf8"):void 0;function W(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&V)return V.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function z(e,t){return e?W(a(),e,t):""}function q(e,t,n){return function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-a}(e,a(),t,n)}var K,G,H,Z,Y;"undefined"!==typeof TextDecoder&&new U("utf-16le");function X(e){K=e,l.HEAP8=G=new Int8Array(e),l.HEAP16=new Int16Array(e),l.HEAP32=Z=new Int32Array(e),l.HEAPU8=H=new Uint8Array(e),l.HEAPU16=new Uint16Array(e),l.HEAPU32=new Uint32Array(e),l.HEAPF32=new Float32Array(e),l.HEAPF64=Y=new Float64Array(e)}_&&(K=l.buffer);var Q,J=l.INITIAL_MEMORY||16777216;if(_)R=l.wasmMemory,K=l.buffer;else if(l.wasmMemory)R=l.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:J/65536,maximum:32768,shared:!0})).buffer instanceof SharedArrayBuffer))throw A("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&console.log("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and also use a recent version)"),Error("bad memory");R&&(K=R.buffer),J=K.byteLength,X(K);var $=[],ee=[],te=[],ne=[];function re(){return M||!1}function ae(){!0,_||he(ee)}var ie=0,oe=null,se=null;function ue(e){_?postMessage({cmd:"onAbort",arg:e}):l.onAbort&&l.onAbort(e),A(e="Aborted("+e+")"),F=!0,L=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw u(t),t}l.preloadedImages={},l.preloadedAudios={};var ce;function le(e){return e.startsWith("data:application/octet-stream;base64,")}function de(e){return e.startsWith("file://")}function fe(e){try{if(e==ce&&P)return new Uint8Array(P);if(p)return p(e);throw"both async and sync fetching of the wasm failed"}catch(A){ue(A)}}le(ce="tfjs-backend-wasm-threaded-simd.wasm")||(ce=S(ce));var pe={};function he(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?we(n)():we(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(l)}}function ve(e){var t=it(),n=e();return ot(t),n}function me(e){var t=ge.pthreads[e];if(t){i()[e>>2]=0;var n=t.worker;ge.returnWorkerToPool(n)}}function ye(e){!function(e,t){if(L=e,!t&&_)throw be(e),"unwind";re()||_||(ge.terminateAllThreads(),!0);!function(e){L=e,re()||(ge.terminateAllThreads(),l.onExit&&l.onExit(e),F=!0);b(e,new ct(e))}(e)}(e)}var ge={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],init:function(){_?ge.initWorker():ge.initMainThread()},initMainThread:function(){for(var e=0;e<8;++e)ge.allocateUnusedWorker()},initWorker:function(){M=!1},pthreads:{},setExitStatus:function(e){L=e},terminateAllThreads:function(){for(var e in ge.pthreads){var t=ge.pthreads[e];t&&t.worker&&ge.returnWorkerToPool(t.worker)}for(var n=0;n<ge.unusedWorkers.length;++n){ge.unusedWorkers[n].terminate()}ge.unusedWorkers=[]},returnWorkerToPool:function(e){ge.runWithoutMainThreadQueuedCalls((function(){delete ge.pthreads[e.pthread.threadInfoStruct],ge.unusedWorkers.push(e),ge.runningWorkers.splice(ge.runningWorkers.indexOf(e),1),rt(e.pthread.threadInfoStruct),e.pthread=void 0}))},runWithoutMainThreadQueuedCalls:function(e){i()[ut>>2]=0;try{e()}finally{i()[ut>>2]=1}},receiveObjectTransfer:function(e){},threadInit:function(){for(var e in ge.tlsInitFunctions)ge.tlsInitFunctions[e]()},loadWasmModuleToWorker:function(t,n){t.onmessage=function(e){var r,a=e.data,o=a.cmd;if(t.pthread&&(ge.currentProxiedOperationCallerThread=t.pthread.threadInfoStruct),a.targetThread&&a.targetThread!=Qe()){var s=ge.pthreads[a.targetThread];return s?s.worker.postMessage(a,a.transferList):A('Internal error! Worker sent a message "'+o+'" to target pthread '+a.targetThread+", but that thread no longer exists!"),void(ge.currentProxiedOperationCallerThread=void 0)}"processQueuedMainThreadWork"===o?Je():"spawnThread"===o?Te(a):"cleanupThread"===o?me(a.thread):"killThread"===o?function(e){i()[e>>2]=0;var t=ge.pthreads[e];delete ge.pthreads[e],t.worker.terminate(),rt(e),ge.runningWorkers.splice(ge.runningWorkers.indexOf(t.worker),1),t.worker.pthread=void 0}(a.thread):"cancelThread"===o?(r=a.thread,ge.pthreads[r].worker.postMessage({cmd:"cancel"})):"loaded"===o?(t.loaded=!0,n&&n(t),t.runPthread&&(t.runPthread(),delete t.runPthread)):"print"===o?N("Thread "+a.threadId+": "+a.text):"printErr"===o?A("Thread "+a.threadId+": "+a.text):"alert"===o?alert("Thread "+a.threadId+": "+a.text):"setimmediate"===a.target?t.postMessage(a):"onAbort"===o?l.onAbort&&l.onAbort(a.arg):A("worker sent an unknown command "+o),ge.currentProxiedOperationCallerThread=void 0},t.onerror=function(e){throw A("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(t.on("message",(function(e){t.onmessage({data:e})})),t.on("error",(function(e){t.onerror(e)})),t.on("detachedExit",(function(){}))),t.postMessage({cmd:"load",urlOrBlob:l.mainScriptUrlOrBlob||e,wasmMemory:R,wasmModule:D})},allocateUnusedWorker:function(){var e=S("tfjs-backend-wasm-threaded-simd.worker.js");ge.unusedWorkers.push(new Worker(e))},getNewWorker:function(){return 0==ge.unusedWorkers.length&&(ge.allocateUnusedWorker(),ge.loadWasmModuleToWorker(ge.unusedWorkers[0])),ge.unusedWorkers.pop()}};function be(e){if(_)return Ee(1,0,e);try{ye(e)}catch(ft){!function(e){if(e instanceof ct||"unwind"==e)return L;b(1,e)}(ft)}}l.establishStackSpace=function(){var e=Qe(),t=i()[e+44>>2],n=i()[e+48>>2];at(t,t-n),ot(t)};var xe,ke=[];function we(e){var t=ke[e];return t||(e>=ke.length&&(ke.length=e+1),ke[e]=t=Q.get(e)),t}l.invokeEntryPoint=function(e,t){return we(e)(t)},xe=w?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:_?function(){return performance.now()-l.__performance_now_clock_drift}:function(){return performance.now()};function _e(e,t){var n,r;if(0===e)n=Date.now();else{if(1!==e&&4!==e)return r=28,i()[Xe()>>2]=r,-1;n=xe()}return i()[t>>2]=n/1e3|0,i()[t+4>>2]=n%1e3*1e3*1e3|0,0}function Te(e){var t=ge.getNewWorker();if(!t)return 6;ge.runningWorkers.push(t);var n=ge.pthreads[e.pthread_ptr]={worker:t,threadInfoStruct:e.pthread_ptr};t.pthread=n;var r={cmd:"run",start_routine:e.startRoutine,arg:e.arg,threadInfoStruct:e.pthread_ptr};return t.runPthread=function(){r.time=performance.now(),t.postMessage(r,e.transferList)},t.loaded&&(t.runPthread(),delete t.runPthread),0}function Se(){return 2147483648}function Ee(e,t){var n=arguments.length-2,r=arguments;return ve((function(){for(var a=n,i=st(8*a),s=i>>3,u=0;u<n;u++){var c=r[2+u];o()[s+u]=c}return tt(e,a,i,t)}))}var Ie=[];function Ce(e){try{return R.grow(e-K.byteLength+65535>>>16),X(R.buffer),1}catch(ft){}}var Ne={inEventHandler:0,removeAllEventListeners:function(){for(var e=Ne.eventHandlers.length-1;e>=0;--e)Ne._removeHandler(e);Ne.eventHandlers=[],Ne.deferredCalls=[]},registerRemoveEventListeners:function(){Ne.removeEventListenersRegistered||(te.push(Ne.removeAllEventListeners),Ne.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(e,t,n){function r(e,t){if(e.length!=t.length)return!1;for(var n in e)if(e[n]!=t[n])return!1;return!0}for(var a in Ne.deferredCalls){var i=Ne.deferredCalls[a];if(i.targetFunction==e&&r(i.argsList,n))return}Ne.deferredCalls.push({targetFunction:e,precedence:t,argsList:n}),Ne.deferredCalls.sort((function(e,t){return e.precedence<t.precedence}))},removeDeferredCalls:function(e){for(var t=0;t<Ne.deferredCalls.length;++t)Ne.deferredCalls[t].targetFunction==e&&(Ne.deferredCalls.splice(t,1),--t)},canPerformEventHandlerRequests:function(){return Ne.inEventHandler&&Ne.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(Ne.canPerformEventHandlerRequests())for(var e=0;e<Ne.deferredCalls.length;++e){var t=Ne.deferredCalls[e];Ne.deferredCalls.splice(e,1),--e,t.targetFunction.apply(null,t.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(e,t){for(var n=0;n<Ne.eventHandlers.length;++n)Ne.eventHandlers[n].target!=e||t&&t!=Ne.eventHandlers[n].eventTypeString||Ne._removeHandler(n--)},_removeHandler:function(e){var t=Ne.eventHandlers[e];t.target.removeEventListener(t.eventTypeString,t.eventListenerFunc,t.useCapture),Ne.eventHandlers.splice(e,1)},registerOrRemoveHandler:function(e){var t=function(t){++Ne.inEventHandler,Ne.currentEventHandler=e,Ne.runDeferredCalls(),e.handlerFunc(t),Ne.runDeferredCalls(),--Ne.inEventHandler};if(e.callbackfunc)e.eventListenerFunc=t,e.target.addEventListener(e.eventTypeString,t,e.useCapture),Ne.eventHandlers.push(e),Ne.registerRemoveEventListeners();else for(var n=0;n<Ne.eventHandlers.length;++n)Ne.eventHandlers[n].target==e.target&&Ne.eventHandlers[n].eventTypeString==e.eventTypeString&&Ne._removeHandler(n--)},queueEventHandlerOnThread_iiii:function(e,t,n,r,a){ve((function(){var o=st(12);i()[o>>2]=n,i()[o+4>>2]=r,i()[o+8>>2]=a,nt(e,637534208,t,r,o)}))},getTargetThreadForEventCallback:function(e){switch(e){case 1:return 0;case 2:return ge.currentProxiedOperationCallerThread;default:return e}},getNodeNameForTarget:function(e){return e?e==window?"#window":e==screen?"#screen":e&&e.nodeName?e.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}};function Ae(e,t,n,r){ve((function(){var a=st(12),o=0;t&&(o=function(e){var t=function(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&e.charCodeAt(++n)),r<=127?++t:t+=r<=2047?2:r<=65535?3:4}return t}(e)+1,n=Ze(t);return q(e,n,t),n}(t)),i()[a>>2]=o,i()[a+4>>2]=n,i()[a+8>>2]=r,nt(e,657457152,0,o,a)}))}var Oe=[0,"undefined"!==typeof document?document:0,"undefined"!==typeof window?window:0];function Pe(e){var t;return e=(t=e)>2?z(t):t,Oe[e]||("undefined"!==typeof document?document.querySelector(e):void 0)}function Re(e){return Pe(e)}function De(e,t,n){var r=Re(e);if(!r)return-4;if(r.canvasSharedPtr&&(i()[r.canvasSharedPtr>>2]=t,i()[r.canvasSharedPtr+4>>2]=n),!r.offscreenCanvas&&r.controlTransferredOffscreen)return r.canvasSharedPtr?(function(e,t,n,r){Ae(e,t=t?z(t):"",n,r)}(i()[r.canvasSharedPtr+8>>2],e,t,n),1):-4;r.offscreenCanvas&&(r=r.offscreenCanvas);var a=!1;if(r.GLctxObject&&r.GLctxObject.GLctx){var o=r.GLctxObject.GLctx.getParameter(2978);a=0===o[0]&&0===o[1]&&o[2]===r.width&&o[3]===r.height}return r.width=t,r.height=n,a&&r.GLctxObject.GLctx.viewport(0,0,t,n),0}function Me(e,t,n){return _?Ee(2,1,e,t,n):De(e,t,n)}var Le={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:{},offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(e){Le.lastError||(Le.lastError=e)},getNewId:function(e){for(var t=Le.counter++,n=e.length;n<t;n++)e[n]=null;return t},getSource:function(e,t,n,r){for(var a="",o=0;o<t;++o){var s=r?i()[r+4*o>>2]:-1;a+=z(i()[n+4*o>>2],s<0?void 0:s)}return a},createContext:function(e,t){e.getContextSafariWebGL2Fixed||(e.getContextSafariWebGL2Fixed=e.getContext,e.getContext=function(t,n){var r=e.getContextSafariWebGL2Fixed(t,n);return"webgl"==t==r instanceof WebGLRenderingContext?r:null});var n=e.getContext("webgl",t);return n?Le.registerContext(n,t):0},registerContext:function(e,t){var n=Ze(8);i()[n+4>>2]=Qe();var r={handle:n,attributes:t,version:t.majorVersion,GLctx:e};return e.canvas&&(e.canvas.GLctxObject=r),Le.contexts[n]=r,("undefined"===typeof t.enableExtensionsByDefault||t.enableExtensionsByDefault)&&Le.initExtensions(r),n},makeContextCurrent:function(e){return Le.currentContext=Le.contexts[e],l.ctx=Be=Le.currentContext&&Le.currentContext.GLctx,!(e&&!Be)},getContext:function(e){return Le.contexts[e]},deleteContext:function(e){Le.currentContext===Le.contexts[e]&&(Le.currentContext=null),"object"===typeof Ne&&Ne.removeAllHandlersOnTarget(Le.contexts[e].GLctx.canvas),Le.contexts[e]&&Le.contexts[e].GLctx.canvas&&(Le.contexts[e].GLctx.canvas.GLctxObject=void 0),Ye(Le.contexts[e].handle),Le.contexts[e]=null},initExtensions:function(e){if(e||(e=Le.currentContext),!e.initExtensionsDone){e.initExtensionsDone=!0;var t,n=e.GLctx;!function(e){var t=e.getExtension("ANGLE_instanced_arrays");if(t)e.vertexAttribDivisor=function(e,n){t.vertexAttribDivisorANGLE(e,n)},e.drawArraysInstanced=function(e,n,r,a){t.drawArraysInstancedANGLE(e,n,r,a)},e.drawElementsInstanced=function(e,n,r,a,i){t.drawElementsInstancedANGLE(e,n,r,a,i)}}(n),function(e){var t=e.getExtension("OES_vertex_array_object");if(t)e.createVertexArray=function(){return t.createVertexArrayOES()},e.deleteVertexArray=function(e){t.deleteVertexArrayOES(e)},e.bindVertexArray=function(e){t.bindVertexArrayOES(e)},e.isVertexArray=function(e){return t.isVertexArrayOES(e)}}(n),function(e){var t=e.getExtension("WEBGL_draw_buffers");if(t)e.drawBuffers=function(e,n){t.drawBuffersWEBGL(e,n)}}(n),n.disjointTimerQueryExt=n.getExtension("EXT_disjoint_timer_query"),(t=n).multiDrawWebgl=t.getExtension("WEBGL_multi_draw"),(n.getSupportedExtensions()||[]).forEach((function(e){e.includes("lose_context")||e.includes("debug")||n.getExtension(e)}))}}},Fe=["default","low-power","high-performance"];var Be,je={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=je.buffers[e];0===t||10===t?((1===e?N:A)(W(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return je.varargs+=4,i()[je.varargs-4>>2]},getStr:function(e){return z(e)},get64:function(e,t){return e}};function Ue(e){return _?Ee(3,1,e):0}function Ve(e,t,n,r,a){if(_)return Ee(4,1,e,t,n,r,a)}function We(e,t,n,r){if(_)return Ee(5,1,e,t,n,r);for(var o=0,s=0;s<n;s++){var u=i()[t>>2],c=i()[t+4>>2];t+=8;for(var l=0;l<c;l++)je.printChar(e,a()[u+l]);o+=c}return i()[r>>2]=o,0}ge.init();var ze,qe,Ke,Ge=[null,be,Me,Ue,Ve,We],He={__clock_gettime:function(e,t){return _e(e,t)},__emscripten_init_main_thread_js:function(e){$e(e,!k,1,!x),ge.threadInit()},__emscripten_thread_cleanup:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):me(e)},__pthread_create_js:function(e,t,n,r){if("undefined"===typeof SharedArrayBuffer)return A("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var a=[];if(_&&0===a.length)return et(687865856,e,t,n,r);var i={startRoutine:n,pthread_ptr:e,arg:r,transferList:a};return _?(i.cmd="spawnThread",postMessage(i,a),0):Te(i)},_emscripten_default_pthread_stack_size:function(){return 2097152},_emscripten_notify_thread_queue:function(e,t){if(e==t)postMessage({cmd:"processQueuedMainThreadWork"});else if(_)postMessage({targetThread:e,cmd:"processThreadQueue"});else{var n=ge.pthreads[e],r=n&&n.worker;if(!r)return;r.postMessage({cmd:"processThreadQueue"})}return 1},abort:function(){ue("")},emscripten_check_blocking_allowed:function(){w||k||O("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_get_heap_max:Se,emscripten_get_now:xe,emscripten_memcpy_big:function(e,t,n){a().copyWithin(e,t,t+n)},emscripten_num_logical_cores:function(){return w?n(2578).cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Ie.length=t;for(var r=n>>3,a=0;a<t;a++)Ie[a]=o()[r+a];return(e<0?pe[-e-1]:Ge[e]).apply(null,Ie)},emscripten_resize_heap:function(e){var t=a().length;if((e>>>=0)<=t)return!1;var n,r,i=2147483648;if(e>i)return!1;for(var o=1;o<=4;o*=2){var s=t*(1+.2/o);if(s=Math.min(s,e+100663296),Ce(Math.min(i,((n=Math.max(e,s))%(r=65536)>0&&(n+=r-n%r),n))))return!0}return!1},emscripten_set_canvas_element_size:function(e,t,n){return Re(e)?De(e,t,n):Me(e,t,n)},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},emscripten_webgl_create_context:function(e,t){return function(e,t){var n=t>>2,r=i()[n+6],a={alpha:!!i()[n+0],depth:!!i()[n+1],stencil:!!i()[n+2],antialias:!!i()[n+3],premultipliedAlpha:!!i()[n+4],preserveDrawingBuffer:!!i()[n+5],powerPreference:Fe[r],failIfMajorPerformanceCaveat:!!i()[n+7],majorVersion:i()[n+8],minorVersion:i()[n+9],enableExtensionsByDefault:i()[n+10],explicitSwapControl:i()[n+11],proxyContextToMainThread:i()[n+12],renderViaOffscreenBackBuffer:i()[n+13]},o=Re(e);return o?a.explicitSwapControl?0:Le.createContext(o,a):0}(e,t)},exit:ye,fd_close:Ue,fd_seek:Ve,fd_write:We,memory:R||l.wasmMemory,setTempRet0:function(e){e}},Ze=(function(){var e={env:He,wasi_snapshot_preview1:He};function t(e,t){var n,r,a=e.exports;if(l.asm=a,n=l.asm.emscripten_tls_init,ge.tlsInitFunctions.push(n),Q=l.asm.__indirect_function_table,r=l.asm.__wasm_call_ctors,ee.unshift(r),D=t,!_){var i=ge.unusedWorkers.length;ge.unusedWorkers.forEach((function(e){ge.loadWasmModuleToWorker(e,(function(){--i||function(e){if(ie--,l.monitorRunDependencies&&l.monitorRunDependencies(ie),0==ie&&(null!==oe&&(clearInterval(oe),oe=null),se)){var t=se;se=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!P&&(x||k)){if("function"===typeof fetch&&!de(ce))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return fe(ce)}));if(f)return new Promise((function(e,t){f(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return fe(ce)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){A("failed to asynchronously prepare wasm: "+e),ue(e)}))}if(_||(ie++,l.monitorRunDependencies&&l.monitorRunDependencies(ie)),l.instantiateWasm)try{return l.instantiateWasm(e,t)}catch(ft){return A("Module.instantiateWasm callback failed with error: "+ft),!1}(P||"function"!==typeof WebAssembly.instantiateStreaming||le(ce)||de(ce)||"function"!==typeof fetch?r(n):fetch(ce,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return A("wasm streaming compile failed: "+e),A("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(u)}(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.__wasm_call_ctors).apply(null,arguments)},l._init=function(){return(l._init=l.asm.init).apply(null,arguments)},l._init_with_threads_count=function(){return(l._init_with_threads_count=l.asm.init_with_threads_count).apply(null,arguments)},l._get_threads_count=function(){return(l._get_threads_count=l.asm.get_threads_count).apply(null,arguments)},l._register_tensor=function(){return(l._register_tensor=l.asm.register_tensor).apply(null,arguments)},l._dispose_data=function(){return(l._dispose_data=l.asm.dispose_data).apply(null,arguments)},l._dispose=function(){return(l._dispose=l.asm.dispose).apply(null,arguments)},l._Abs=function(){return(l._Abs=l.asm.Abs).apply(null,arguments)},l._Add=function(){return(l._Add=l.asm.Add).apply(null,arguments)},l._AddN=function(){return(l._AddN=l.asm.AddN).apply(null,arguments)},l._All=function(){return(l._All=l.asm.All).apply(null,arguments)},l._Any=function(){return(l._Any=l.asm.Any).apply(null,arguments)},l._ArgMax=function(){return(l._ArgMax=l.asm.ArgMax).apply(null,arguments)},l._AvgPool=function(){return(l._AvgPool=l.asm.AvgPool).apply(null,arguments)},l._BatchMatMul=function(){return(l._BatchMatMul=l.asm.BatchMatMul).apply(null,arguments)},l._Ceil=function(){return(l._Ceil=l.asm.Ceil).apply(null,arguments)},l._ClipByValue=function(){return(l._ClipByValue=l.asm.ClipByValue).apply(null,arguments)},l._Conv2D=function(){return(l._Conv2D=l.asm.Conv2D).apply(null,arguments)},l._Conv2DBackpropInput=function(){return(l._Conv2DBackpropInput=l.asm.Conv2DBackpropInput).apply(null,arguments)},l._Cos=function(){return(l._Cos=l.asm.Cos).apply(null,arguments)},l._Cosh=function(){return(l._Cosh=l.asm.Cosh).apply(null,arguments)},l._CropAndResize=function(){return(l._CropAndResize=l.asm.CropAndResize).apply(null,arguments)},l._Cumsum=function(){return(l._Cumsum=l.asm.Cumsum).apply(null,arguments)},l._DepthToSpace=function(){return(l._DepthToSpace=l.asm.DepthToSpace).apply(null,arguments)},l._DepthwiseConv2dNative=function(){return(l._DepthwiseConv2dNative=l.asm.DepthwiseConv2dNative).apply(null,arguments)},l._Elu=function(){return(l._Elu=l.asm.Elu).apply(null,arguments)},l._Equal=function(){return(l._Equal=l.asm.Equal).apply(null,arguments)},l._Exp=function(){return(l._Exp=l.asm.Exp).apply(null,arguments)},l._FlipLeftRight=function(){return(l._FlipLeftRight=l.asm.FlipLeftRight).apply(null,arguments)},l._Floor=function(){return(l._Floor=l.asm.Floor).apply(null,arguments)},l._FloorDiv=function(){return(l._FloorDiv=l.asm.FloorDiv).apply(null,arguments)},l._FusedBatchNorm=function(){return(l._FusedBatchNorm=l.asm.FusedBatchNorm).apply(null,arguments)},l._FusedConv2D=function(){return(l._FusedConv2D=l.asm.FusedConv2D).apply(null,arguments)},l._FusedDepthwiseConv2D=function(){return(l._FusedDepthwiseConv2D=l.asm.FusedDepthwiseConv2D).apply(null,arguments)},l._Gather=function(){return(l._Gather=l.asm.Gather).apply(null,arguments)},l._GatherNd=function(){return(l._GatherNd=l.asm.GatherNd).apply(null,arguments)},l._Greater=function(){return(l._Greater=l.asm.Greater).apply(null,arguments)},l._GreaterEqual=function(){return(l._GreaterEqual=l.asm.GreaterEqual).apply(null,arguments)},l._LeakyRelu=function(){return(l._LeakyRelu=l.asm.LeakyRelu).apply(null,arguments)},l._Less=function(){return(l._Less=l.asm.Less).apply(null,arguments)},l._LessEqual=function(){return(l._LessEqual=l.asm.LessEqual).apply(null,arguments)},l._Log=function(){return(l._Log=l.asm.Log).apply(null,arguments)},l._LogicalAnd=function(){return(l._LogicalAnd=l.asm.LogicalAnd).apply(null,arguments)},l._Max=function(){return(l._Max=l.asm.Max).apply(null,arguments)},l._MaxPool=function(){return(l._MaxPool=l.asm.MaxPool).apply(null,arguments)},l._Maximum=function(){return(l._Maximum=l.asm.Maximum).apply(null,arguments)},l._Mean=function(){return(l._Mean=l.asm.Mean).apply(null,arguments)},l._Min=function(){return(l._Min=l.asm.Min).apply(null,arguments)},l._Minimum=function(){return(l._Minimum=l.asm.Minimum).apply(null,arguments)},l._MirrorPad=function(){return(l._MirrorPad=l.asm.MirrorPad).apply(null,arguments)},l._Multiply=function(){return(l._Multiply=l.asm.Multiply).apply(null,arguments)},l._Neg=function(){return(l._Neg=l.asm.Neg).apply(null,arguments)},l._NonMaxSuppressionV3=function(){return(l._NonMaxSuppressionV3=l.asm.NonMaxSuppressionV3).apply(null,arguments)},l._NonMaxSuppressionV4=function(){return(l._NonMaxSuppressionV4=l.asm.NonMaxSuppressionV4).apply(null,arguments)},l._NonMaxSuppressionV5=function(){return(l._NonMaxSuppressionV5=l.asm.NonMaxSuppressionV5).apply(null,arguments)},l._NotEqual=function(){return(l._NotEqual=l.asm.NotEqual).apply(null,arguments)},l._OneHot=function(){return(l._OneHot=l.asm.OneHot).apply(null,arguments)},l._PadV2=function(){return(l._PadV2=l.asm.PadV2).apply(null,arguments)},l._Pow=function(){return(l._Pow=l.asm.Pow).apply(null,arguments)},l._Prelu=function(){return(l._Prelu=l.asm.Prelu).apply(null,arguments)},l._Prod=function(){return(l._Prod=l.asm.Prod).apply(null,arguments)},l._RealDiv=function(){return(l._RealDiv=l.asm.RealDiv).apply(null,arguments)},l._Relu=function(){return(l._Relu=l.asm.Relu).apply(null,arguments)},l._Relu6=function(){return(l._Relu6=l.asm.Relu6).apply(null,arguments)},l._ResizeBilinear=function(){return(l._ResizeBilinear=l.asm.ResizeBilinear).apply(null,arguments)},l._Reverse=function(){return(l._Reverse=l.asm.Reverse).apply(null,arguments)},l._RotateWithOffset=function(){return(l._RotateWithOffset=l.asm.RotateWithOffset).apply(null,arguments)},l._Round=function(){return(l._Round=l.asm.Round).apply(null,arguments)},l._Rsqrt=function(){return(l._Rsqrt=l.asm.Rsqrt).apply(null,arguments)},l._ScatterNd=function(){return(l._ScatterNd=l.asm.ScatterNd).apply(null,arguments)},l._SelectV2=function(){return(l._SelectV2=l.asm.SelectV2).apply(null,arguments)},l._Sigmoid=function(){return(l._Sigmoid=l.asm.Sigmoid).apply(null,arguments)},l._Sin=function(){return(l._Sin=l.asm.Sin).apply(null,arguments)},l._Softmax=function(){return(l._Softmax=l.asm.Softmax).apply(null,arguments)},l._SparseFillEmptyRows=function(){return(l._SparseFillEmptyRows=l.asm.SparseFillEmptyRows).apply(null,arguments)},l._SparseReshape=function(){return(l._SparseReshape=l.asm.SparseReshape).apply(null,arguments)},l._SparseSegmentReduction=function(){return(l._SparseSegmentReduction=l.asm.SparseSegmentReduction).apply(null,arguments)},l._Sqrt=function(){return(l._Sqrt=l.asm.Sqrt).apply(null,arguments)},l._Square=function(){return(l._Square=l.asm.Square).apply(null,arguments)},l._SquaredDifference=function(){return(l._SquaredDifference=l.asm.SquaredDifference).apply(null,arguments)},l._Step=function(){return(l._Step=l.asm.Step).apply(null,arguments)},l._StridedSlice=function(){return(l._StridedSlice=l.asm.StridedSlice).apply(null,arguments)},l._Sub=function(){return(l._Sub=l.asm.Sub).apply(null,arguments)},l._Sum=function(){return(l._Sum=l.asm.Sum).apply(null,arguments)},l._Tan=function(){return(l._Tan=l.asm.Tan).apply(null,arguments)},l._Tanh=function(){return(l._Tanh=l.asm.Tanh).apply(null,arguments)},l._Tile=function(){return(l._Tile=l.asm.Tile).apply(null,arguments)},l._TopK=function(){return(l._TopK=l.asm.TopK).apply(null,arguments)},l._Transform=function(){return(l._Transform=l.asm.Transform).apply(null,arguments)},l._Transpose=function(){return(l._Transpose=l.asm.Transpose).apply(null,arguments)},l.__FusedMatMul=function(){return(l.__FusedMatMul=l.asm._FusedMatMul).apply(null,arguments)},l._malloc=function(){return(Ze=l._malloc=l.asm.malloc).apply(null,arguments)}),Ye=l._free=function(){return(Ye=l._free=l.asm.free).apply(null,arguments)},Xe=(l._emscripten_tls_init=function(){return(l._emscripten_tls_init=l.asm.emscripten_tls_init).apply(null,arguments)},l.___errno_location=function(){return(Xe=l.___errno_location=l.asm.__errno_location).apply(null,arguments)}),Qe=l._pthread_self=function(){return(Qe=l._pthread_self=l.asm.pthread_self).apply(null,arguments)},Je=l._emscripten_main_thread_process_queued_calls=function(){return(Je=l._emscripten_main_thread_process_queued_calls=l.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},$e=(l.__emscripten_thread_crashed=function(){return(l.__emscripten_thread_crashed=l.asm._emscripten_thread_crashed).apply(null,arguments)},l.__emscripten_thread_init=function(){return($e=l.__emscripten_thread_init=l.asm._emscripten_thread_init).apply(null,arguments)}),et=(l._emscripten_current_thread_process_queued_calls=function(){return(l._emscripten_current_thread_process_queued_calls=l.asm.emscripten_current_thread_process_queued_calls).apply(null,arguments)},l._emscripten_main_browser_thread_id=function(){return(l._emscripten_main_browser_thread_id=l.asm.emscripten_main_browser_thread_id).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_2=function(){return(l._emscripten_sync_run_in_main_thread_2=l.asm.emscripten_sync_run_in_main_thread_2).apply(null,arguments)},l._emscripten_sync_run_in_main_thread_4=function(){return(et=l._emscripten_sync_run_in_main_thread_4=l.asm.emscripten_sync_run_in_main_thread_4).apply(null,arguments)}),tt=l._emscripten_run_in_main_runtime_thread_js=function(){return(tt=l._emscripten_run_in_main_runtime_thread_js=l.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)},nt=l._emscripten_dispatch_to_thread_=function(){return(nt=l._emscripten_dispatch_to_thread_=l.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},rt=l.__emscripten_thread_free_data=function(){return(rt=l.__emscripten_thread_free_data=l.asm._emscripten_thread_free_data).apply(null,arguments)},at=(l.__emscripten_thread_exit=function(){return(l.__emscripten_thread_exit=l.asm._emscripten_thread_exit).apply(null,arguments)},l._memalign=function(){return(l._memalign=l.asm.memalign).apply(null,arguments)},l._emscripten_stack_set_limits=function(){return(at=l._emscripten_stack_set_limits=l.asm.emscripten_stack_set_limits).apply(null,arguments)}),it=l.stackSave=function(){return(it=l.stackSave=l.asm.stackSave).apply(null,arguments)},ot=l.stackRestore=function(){return(ot=l.stackRestore=l.asm.stackRestore).apply(null,arguments)},st=l.stackAlloc=function(){return(st=l.stackAlloc=l.asm.stackAlloc).apply(null,arguments)},ut=(l.dynCall_iijjiiii=function(){return(l.dynCall_iijjiiii=l.asm.dynCall_iijjiiii).apply(null,arguments)},l.dynCall_jiji=function(){return(l.dynCall_jiji=l.asm.dynCall_jiji).apply(null,arguments)},l.__emscripten_allow_main_runtime_queued_calls=21416);function ct(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function lt(e){if(e=e||g,!(ie>0)){if(_)return s(l),ae(),void postMessage({cmd:"loaded"});!function(){if(l.preRun)for("function"==typeof l.preRun&&(l.preRun=[l.preRun]);l.preRun.length;)e=l.preRun.shift(),$.unshift(e);var e;he($)}(),ie>0||(l.setStatus?(l.setStatus("Running..."),setTimeout((function(){setTimeout((function(){l.setStatus("")}),1),t()}),1)):t())}function t(){ze||(ze=!0,l.calledRun=!0,F||(ae(),s(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),function(){if(!_){if(l.postRun)for("function"==typeof l.postRun&&(l.postRun=[l.postRun]);l.postRun.length;)e=l.postRun.shift(),ne.unshift(e);var e;he(ne)}}()))}}if(l.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?B(e):function(){return j(e,t,n,arguments)}},l.keepRuntimeAlive=re,l.PThread=ge,l.PThread=ge,l.wasmMemory=R,l.ExitStatus=ct,se=function e(){ze||lt(),ze||(se=e)},l.run=lt,l.preInit)for("function"==typeof l.preInit&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();if(lt(),c&&(qe={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!c.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!c.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof WasmBackendModule)Ke=WasmBackendModule;else{if("undefined"===typeof t)throw new Error("Could not find wasm module in post.js");Ke=t}if(qe){var dt=Ke._dispose;Ke._dispose=function(){dt(),qe.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),qe.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},9926:function(e,t,n){var r=function(){var e="undefined"!==typeof document&&document.currentScript?document.currentScript.src:void 0;return e=e||"/index.js",function(t){var r,a,i,o="undefined"!==typeof(t=t||{})?t:{};o.ready=new Promise((function(e,t){r=e,a=t})),"undefined"!==typeof process&&process.listeners&&(i={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,u,c,l,d,f,p=Object.assign({},o),h=[],v="object"===typeof window,m="function"===typeof importScripts,y="object"===typeof process&&"object"===typeof process.versions&&"string"===typeof process.versions.node,g="";y?(g=m?n(2980).dirname(g)+"/":"//",f=function(){d||(l=n(7256),d=n(2980))},s=function(e,t){return f(),e=d.normalize(e),l.readFileSync(e,t?void 0:"utf8")},c=function(e){var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=function(e,t,n){f(),e=d.normalize(e),l.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),h=process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ue))throw e})),process.on("unhandledRejection",(function(e){throw e})),function(e,t){if(j())throw process.exitCode=e,t;var n;(n=t)instanceof ue||x("exiting due to exception: "+n),process.exit(e)},o.inspect=function(){return"[Emscripten Module object]"}):(v||m)&&(m?g=self.location.href:"undefined"!==typeof document&&document.currentScript&&(g=document.currentScript.src),e&&(g=e),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},m&&(c=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var b=o.print||console.log.bind(console),x=o.printErr||console.warn.bind(console);Object.assign(o,p),p=null,o.arguments&&(h=o.arguments),o.thisProgram&&o.thisProgram,o.quit&&o.quit;var k;o.wasmBinary&&(k=o.wasmBinary);var w,_=o.noExitRuntime||!0;"object"!==typeof WebAssembly&&z("no native wasm support detected");var T=!1;function S(e){return o["_"+e]}function E(e,t,n,r,a){var i={string:function(e){var t=0;if(null!==e&&void 0!==e&&0!==e){var n=1+(e.length<<2);(function(e,t,n){(function(e,t,n,r){if(!(r>0))return 0;for(var a=n,i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343)s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o);if(s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0})(e,P,t,n)})(e,t=se(n),n)}return t},array:function(e){var t=se(e.length);return function(e,t){O.set(e,t)}(e,t),t}};var o=S(e),s=[],u=0;if(r)for(var c=0;c<r.length;c++){var l=i[n[c]];l?(0===u&&(u=ie()),s[c]=l(r[c])):s[c]=r[c]}var d=o.apply(null,s);return d=function(e){return 0!==u&&oe(u),function(e){return"string"===t?N(e):"boolean"===t?Boolean(e):e}(e)}(d)}var I="undefined"!==typeof TextDecoder?new TextDecoder("utf8"):void 0;function C(e,t,n){for(var r=t+n,a=t;e[a]&&!(a>=r);)++a;if(a-t>16&&e.subarray&&I)return I.decode(e.subarray(t,a));for(var i="";t<a;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if((o=224==(240&o)?(15&o)<<12|s<<6|u:(7&o)<<18|s<<12|u<<6|63&e[t++])<65536)i+=String.fromCharCode(o);else{var c=o-65536;i+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else i+=String.fromCharCode((31&o)<<6|s)}else i+=String.fromCharCode(o)}return i}function N(e,t){return e?C(P,e,t):""}var A,O,P,R;"undefined"!==typeof TextDecoder&&new TextDecoder("utf-16le");function D(e){A=e,o.HEAP8=O=new Int8Array(e),o.HEAP16=new Int16Array(e),o.HEAP32=R=new Int32Array(e),o.HEAPU8=P=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAPU32=new Uint32Array(e),o.HEAPF32=new Float32Array(e),o.HEAPF64=new Float64Array(e)}o.INITIAL_MEMORY;var M,L=[],F=[],B=[];function j(){return _||!1}var U=0,V=null,W=null;function z(e){o.onAbort&&o.onAbort(e),x(e="Aborted("+e+")"),T=!0,1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw a(t),t}o.preloadedImages={},o.preloadedAudios={};var q,K;function G(e){return e.startsWith("data:application/octet-stream;base64,")}function H(e){return e.startsWith("file://")}function Z(e){try{if(e==q&&k)return new Uint8Array(k);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(x){z(x)}}function Y(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"===typeof n?void 0===t.arg?Q(n)():Q(n)(t.arg):n(void 0===t.arg?null:t.arg)}else t(o)}}G(q="tfjs-backend-wasm.wasm")||(K=q,q=o.locateFile?o.locateFile(K,g):g+K);var X=[];function Q(e){var t=X[e];return t||(e>=X.length&&(X.length=e+1),X[e]=t=M.get(e)),t}function J(){return 2147483648}function $(e){try{return w.grow(e-A.byteLength+65535>>>16),D(w.buffer),1}catch(t){}}var ee={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var n=ee.buffers[e];0===t||10===t?((1===e?b:x)(C(n,0)),n.length=0):n.push(t)},varargs:void 0,get:function(){return ee.varargs+=4,R[ee.varargs-4>>2]},getStr:function(e){return N(e)},get64:function(e,t){return e}};var te,ne,re,ae={abort:function(){z("")},emscripten_get_heap_max:J,emscripten_memcpy_big:function(e,t,n){P.copyWithin(e,t,t+n)},emscripten_resize_heap:function(e){var t,n,r=P.length,a=2147483648;if((e>>>=0)>a)return!1;for(var i=1;i<=4;i*=2){var o=r*(1+.2/i);if(o=Math.min(o,e+100663296),$(Math.min(a,((t=Math.max(e,o))%(n=65536)>0&&(t+=n-t%n),t))))return!0}return!1},fd_close:function(e){return 0},fd_seek:function(e,t,n,r,a){},fd_write:function(e,t,n,r){for(var a=0,i=0;i<n;i++){var o=R[t>>2],s=R[t+4>>2];t+=8;for(var u=0;u<s;u++)ee.printChar(e,P[o+u]);a+=s}return R[r>>2]=a,0},setTempRet0:function(e){e}},ie=(function(){var e={env:ae,wasi_snapshot_preview1:ae};function t(e,t){var n,r=e.exports;o.asm=r,D((w=o.asm.memory).buffer),M=o.asm.__indirect_function_table,n=o.asm.__wasm_call_ctors,F.unshift(n),function(e){if(U--,o.monitorRunDependencies&&o.monitorRunDependencies(U),0==U&&(null!==V&&(clearInterval(V),V=null),W)){var t=W;W=null,t()}}()}function n(e){t(e.instance)}function r(t){return function(){if(!k&&(v||m)){if("function"===typeof fetch&&!H(q))return fetch(q,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+q+"'";return e.arrayBuffer()})).catch((function(){return Z(q)}));if(u)return new Promise((function(e,t){u(q,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return Z(q)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){x("failed to asynchronously prepare wasm: "+e),z(e)}))}if(U++,o.monitorRunDependencies&&o.monitorRunDependencies(U),o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(i){return x("Module.instantiateWasm callback failed with error: "+i),!1}(k||"function"!==typeof WebAssembly.instantiateStreaming||G(q)||H(q)||"function"!==typeof fetch?r(n):fetch(q,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(a)}(),o.___wasm_call_ctors=function(){return(o.___wasm_call_ctors=o.asm.__wasm_call_ctors).apply(null,arguments)},o._init=function(){return(o._init=o.asm.init).apply(null,arguments)},o._init_with_threads_count=function(){return(o._init_with_threads_count=o.asm.init_with_threads_count).apply(null,arguments)},o._get_threads_count=function(){return(o._get_threads_count=o.asm.get_threads_count).apply(null,arguments)},o._register_tensor=function(){return(o._register_tensor=o.asm.register_tensor).apply(null,arguments)},o._dispose_data=function(){return(o._dispose_data=o.asm.dispose_data).apply(null,arguments)},o._dispose=function(){return(o._dispose=o.asm.dispose).apply(null,arguments)},o._Abs=function(){return(o._Abs=o.asm.Abs).apply(null,arguments)},o._Add=function(){return(o._Add=o.asm.Add).apply(null,arguments)},o._AddN=function(){return(o._AddN=o.asm.AddN).apply(null,arguments)},o._All=function(){return(o._All=o.asm.All).apply(null,arguments)},o._Any=function(){return(o._Any=o.asm.Any).apply(null,arguments)},o._ArgMax=function(){return(o._ArgMax=o.asm.ArgMax).apply(null,arguments)},o._AvgPool=function(){return(o._AvgPool=o.asm.AvgPool).apply(null,arguments)},o._BatchMatMul=function(){return(o._BatchMatMul=o.asm.BatchMatMul).apply(null,arguments)},o._Ceil=function(){return(o._Ceil=o.asm.Ceil).apply(null,arguments)},o._ClipByValue=function(){return(o._ClipByValue=o.asm.ClipByValue).apply(null,arguments)},o._Conv2D=function(){return(o._Conv2D=o.asm.Conv2D).apply(null,arguments)},o._Conv2DBackpropInput=function(){return(o._Conv2DBackpropInput=o.asm.Conv2DBackpropInput).apply(null,arguments)},o._Cos=function(){return(o._Cos=o.asm.Cos).apply(null,arguments)},o._Cosh=function(){return(o._Cosh=o.asm.Cosh).apply(null,arguments)},o._CropAndResize=function(){return(o._CropAndResize=o.asm.CropAndResize).apply(null,arguments)},o._Cumsum=function(){return(o._Cumsum=o.asm.Cumsum).apply(null,arguments)},o._DepthToSpace=function(){return(o._DepthToSpace=o.asm.DepthToSpace).apply(null,arguments)},o._DepthwiseConv2dNative=function(){return(o._DepthwiseConv2dNative=o.asm.DepthwiseConv2dNative).apply(null,arguments)},o._Elu=function(){return(o._Elu=o.asm.Elu).apply(null,arguments)},o._Equal=function(){return(o._Equal=o.asm.Equal).apply(null,arguments)},o._Exp=function(){return(o._Exp=o.asm.Exp).apply(null,arguments)},o._FlipLeftRight=function(){return(o._FlipLeftRight=o.asm.FlipLeftRight).apply(null,arguments)},o._Floor=function(){return(o._Floor=o.asm.Floor).apply(null,arguments)},o._FloorDiv=function(){return(o._FloorDiv=o.asm.FloorDiv).apply(null,arguments)},o._FusedBatchNorm=function(){return(o._FusedBatchNorm=o.asm.FusedBatchNorm).apply(null,arguments)},o._FusedConv2D=function(){return(o._FusedConv2D=o.asm.FusedConv2D).apply(null,arguments)},o._FusedDepthwiseConv2D=function(){return(o._FusedDepthwiseConv2D=o.asm.FusedDepthwiseConv2D).apply(null,arguments)},o._Gather=function(){return(o._Gather=o.asm.Gather).apply(null,arguments)},o._GatherNd=function(){return(o._GatherNd=o.asm.GatherNd).apply(null,arguments)},o._Greater=function(){return(o._Greater=o.asm.Greater).apply(null,arguments)},o._GreaterEqual=function(){return(o._GreaterEqual=o.asm.GreaterEqual).apply(null,arguments)},o._LeakyRelu=function(){return(o._LeakyRelu=o.asm.LeakyRelu).apply(null,arguments)},o._Less=function(){return(o._Less=o.asm.Less).apply(null,arguments)},o._LessEqual=function(){return(o._LessEqual=o.asm.LessEqual).apply(null,arguments)},o._Log=function(){return(o._Log=o.asm.Log).apply(null,arguments)},o._LogicalAnd=function(){return(o._LogicalAnd=o.asm.LogicalAnd).apply(null,arguments)},o._Max=function(){return(o._Max=o.asm.Max).apply(null,arguments)},o._MaxPool=function(){return(o._MaxPool=o.asm.MaxPool).apply(null,arguments)},o._Maximum=function(){return(o._Maximum=o.asm.Maximum).apply(null,arguments)},o._Mean=function(){return(o._Mean=o.asm.Mean).apply(null,arguments)},o._Min=function(){return(o._Min=o.asm.Min).apply(null,arguments)},o._Minimum=function(){return(o._Minimum=o.asm.Minimum).apply(null,arguments)},o._MirrorPad=function(){return(o._MirrorPad=o.asm.MirrorPad).apply(null,arguments)},o._Multiply=function(){return(o._Multiply=o.asm.Multiply).apply(null,arguments)},o._Neg=function(){return(o._Neg=o.asm.Neg).apply(null,arguments)},o._NonMaxSuppressionV3=function(){return(o._NonMaxSuppressionV3=o.asm.NonMaxSuppressionV3).apply(null,arguments)},o._NonMaxSuppressionV4=function(){return(o._NonMaxSuppressionV4=o.asm.NonMaxSuppressionV4).apply(null,arguments)},o._NonMaxSuppressionV5=function(){return(o._NonMaxSuppressionV5=o.asm.NonMaxSuppressionV5).apply(null,arguments)},o._NotEqual=function(){return(o._NotEqual=o.asm.NotEqual).apply(null,arguments)},o._OneHot=function(){return(o._OneHot=o.asm.OneHot).apply(null,arguments)},o._PadV2=function(){return(o._PadV2=o.asm.PadV2).apply(null,arguments)},o._Pow=function(){return(o._Pow=o.asm.Pow).apply(null,arguments)},o._Prelu=function(){return(o._Prelu=o.asm.Prelu).apply(null,arguments)},o._Prod=function(){return(o._Prod=o.asm.Prod).apply(null,arguments)},o._RealDiv=function(){return(o._RealDiv=o.asm.RealDiv).apply(null,arguments)},o._Relu=function(){return(o._Relu=o.asm.Relu).apply(null,arguments)},o._Relu6=function(){return(o._Relu6=o.asm.Relu6).apply(null,arguments)},o._ResizeBilinear=function(){return(o._ResizeBilinear=o.asm.ResizeBilinear).apply(null,arguments)},o._Reverse=function(){return(o._Reverse=o.asm.Reverse).apply(null,arguments)},o._RotateWithOffset=function(){return(o._RotateWithOffset=o.asm.RotateWithOffset).apply(null,arguments)},o._Round=function(){return(o._Round=o.asm.Round).apply(null,arguments)},o._Rsqrt=function(){return(o._Rsqrt=o.asm.Rsqrt).apply(null,arguments)},o._ScatterNd=function(){return(o._ScatterNd=o.asm.ScatterNd).apply(null,arguments)},o._SelectV2=function(){return(o._SelectV2=o.asm.SelectV2).apply(null,arguments)},o._Sigmoid=function(){return(o._Sigmoid=o.asm.Sigmoid).apply(null,arguments)},o._Sin=function(){return(o._Sin=o.asm.Sin).apply(null,arguments)},o._Softmax=function(){return(o._Softmax=o.asm.Softmax).apply(null,arguments)},o._SparseFillEmptyRows=function(){return(o._SparseFillEmptyRows=o.asm.SparseFillEmptyRows).apply(null,arguments)},o._SparseReshape=function(){return(o._SparseReshape=o.asm.SparseReshape).apply(null,arguments)},o._SparseSegmentReduction=function(){return(o._SparseSegmentReduction=o.asm.SparseSegmentReduction).apply(null,arguments)},o._Sqrt=function(){return(o._Sqrt=o.asm.Sqrt).apply(null,arguments)},o._Square=function(){return(o._Square=o.asm.Square).apply(null,arguments)},o._SquaredDifference=function(){return(o._SquaredDifference=o.asm.SquaredDifference).apply(null,arguments)},o._Step=function(){return(o._Step=o.asm.Step).apply(null,arguments)},o._StridedSlice=function(){return(o._StridedSlice=o.asm.StridedSlice).apply(null,arguments)},o._Sub=function(){return(o._Sub=o.asm.Sub).apply(null,arguments)},o._Sum=function(){return(o._Sum=o.asm.Sum).apply(null,arguments)},o._Tan=function(){return(o._Tan=o.asm.Tan).apply(null,arguments)},o._Tanh=function(){return(o._Tanh=o.asm.Tanh).apply(null,arguments)},o._Tile=function(){return(o._Tile=o.asm.Tile).apply(null,arguments)},o._TopK=function(){return(o._TopK=o.asm.TopK).apply(null,arguments)},o._Transform=function(){return(o._Transform=o.asm.Transform).apply(null,arguments)},o._Transpose=function(){return(o._Transpose=o.asm.Transpose).apply(null,arguments)},o.__FusedMatMul=function(){return(o.__FusedMatMul=o.asm._FusedMatMul).apply(null,arguments)},o._malloc=function(){return(o._malloc=o.asm.malloc).apply(null,arguments)},o._free=function(){return(o._free=o.asm.free).apply(null,arguments)},o.___errno_location=function(){return(o.___errno_location=o.asm.__errno_location).apply(null,arguments)},o._emscripten_main_thread_process_queued_calls=function(){return(o._emscripten_main_thread_process_queued_calls=o.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},o.stackSave=function(){return(ie=o.stackSave=o.asm.stackSave).apply(null,arguments)}),oe=o.stackRestore=function(){return(oe=o.stackRestore=o.asm.stackRestore).apply(null,arguments)},se=o.stackAlloc=function(){return(se=o.stackAlloc=o.asm.stackAlloc).apply(null,arguments)};o.dynCall_iijjiiii=function(){return(o.dynCall_iijjiiii=o.asm.dynCall_iijjiiii).apply(null,arguments)},o.dynCall_jiji=function(){return(o.dynCall_jiji=o.asm.dynCall_jiji).apply(null,arguments)};function ue(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ce(e){function t(){te||(te=!0,o.calledRun=!0,T||(!0,Y(F),r(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),function(){if(o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;)e=o.postRun.shift(),B.unshift(e);var e;Y(B)}()))}e=e||h,U>0||(!function(){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)e=o.preRun.shift(),L.unshift(e);var e;Y(L)}(),U>0||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t()))}if(o.cwrap=function(e,t,n,r){var a=(n=n||[]).every((function(e){return"number"===e}));return"string"!==t&&a&&!r?S(e):function(){return E(e,t,n,arguments)}},W=function e(){te||ce(),te||(W=e)},o.run=ce,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();if(ce(),i&&(ne={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!i.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!i.unhandledRejection.indexOf(e)>-1}))}),"undefined"!==typeof t)re=t;else{if("undefined"===typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");re=WasmBackendModuleThreadedSimd}if(ne){var le=re._dispose;re._dispose=function(){le(),ne.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),ne.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return t.ready}}();e.exports=r},8182:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"===typeof e||"number"===typeof e)a+=e;else if("object"===typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function a(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}n.d(t,{Z:function(){return a}})},2110:function(e,t,n){"use strict";var r=n(7441),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(h){var a=p(n);a&&a!==h&&e(t,a,r)}var o=l(n);d&&(o=o.concat(d(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!i[y]&&(!r||!r[y])&&(!v||!v[y])&&(!s||!s[y])){var g=f(n,y);try{c(t,y,g)}catch(b){}}}}return t}},7943:function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var n,i=String(e);return(n=r[i.toLowerCase()])?n:(n=a[i.toLowerCase()])||(1===i.length?i.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var i;if(i=r[t.toLowerCase()])return i===n;if(i=a[t.toLowerCase()])return i===n}else if("number"===typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},a=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(i=97;i<123;i++)r[String.fromCharCode(i)]=i-32;for(var i=48;i<58;i++)r[i-48]=i;for(i=1;i<13;i++)r["f"+i]=i+111;for(i=0;i<10;i++)r["numpad "+i]=i+96;var o=t.names=t.title={};for(i in r)o[r[i]]=i;for(var s in a)r[s]=a[s]},8987:function(e){e.exports=n;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(S){}function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var a={},i={};function o(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=i[e])?r:(n=u(e,(0|e)<0?-1:0,!0),o&&(i[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=a[e])?r:(n=u(e,e<0?-1:0,!1),o&&(a[e]=n),n)}function s(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=p)return w}else{if(e<=-h)return _;if(e+1>=h)return k}return e<0?s(-e,t).neg():u(e%f|0,e/f|0,t)}function u(e,t,r){return new n(e,t,r)}n.fromInt=o,n.fromNumber=s,n.fromBits=u;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"===typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,n).neg();for(var a=s(c(n,8)),i=m,o=0;o<e.length;o+=8){var u=Math.min(8,e.length-o),d=parseInt(e.substring(o,o+u),n);if(u<8){var f=s(c(n,u));i=i.mul(f).add(s(d))}else i=(i=i.mul(a)).add(s(d))}return i.unsigned=t,i}function d(e,t){return"number"===typeof e?s(e,t):"string"===typeof e?l(e,t):u(e.low,e.high,"boolean"===typeof t?t:e.unsigned)}n.fromString=l,n.fromValue=d;var f=4294967296,p=f*f,h=p/2,v=o(1<<24),m=o(0);n.ZERO=m;var y=o(0,!0);n.UZERO=y;var g=o(1);n.ONE=g;var b=o(1,!0);n.UONE=b;var x=o(-1);n.NEG_ONE=x;var k=u(-1,2147483647,!1);n.MAX_VALUE=k;var w=u(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var _=u(0,-2147483648,!1);n.MIN_VALUE=_;var T=n.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},T.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(_)){var t=s(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=s(c(e,6),this.unsigned),i=this,o="";;){var u=i.div(a),l=(i.sub(u.mul(a)).toInt()>>>0).toString(e);if((i=u).isZero())return l+o;for(;l.length<6;)l="0"+l;o=""+l+o}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(_)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1===(1&this.low)},T.isEven=function(){return 0===(1&this.low)},T.equals=function(e){return r(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return this.comp(e)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return this.comp(e)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return this.comp(e)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return this.comp(e)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(r(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(_)?_:this.not().add(g)},T.neg=T.negate,T.add=function(e){r(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,a=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,c=e.low>>>16,l=0,f=0,p=0,h=0;return p+=(h+=i+(65535&e.low))>>>16,f+=(p+=a+c)>>>16,l+=(f+=n+s)>>>16,l+=t+o,u((p&=65535)<<16|(h&=65535),(l&=65535)<<16|(f&=65535),this.unsigned)},T.subtract=function(e){return r(e)||(e=d(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return m;if(r(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return m;if(this.eq(_))return e.isOdd()?_:m;if(e.eq(_))return this.isOdd()?_:m;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return s(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,i=this.low>>>16,o=65535&this.low,c=e.high>>>16,l=65535&e.high,f=e.low>>>16,p=65535&e.low,h=0,y=0,g=0,b=0;return g+=(b+=o*p)>>>16,y+=(g+=i*p)>>>16,g&=65535,y+=(g+=o*f)>>>16,h+=(y+=a*p)>>>16,y&=65535,h+=(y+=i*f)>>>16,y&=65535,h+=(y+=o*l)>>>16,h+=n*p+a*f+i*l+o*c,u((g&=65535)<<16|(b&=65535),(h&=65535)<<16|(y&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(r(e)||(e=d(e)),e.isZero())throw Error("division by zero");var n,a,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return y;if(e.gt(this.shru(1)))return b;i=y}else{if(this.eq(_))return e.eq(g)||e.eq(x)?_:e.eq(_)?g:(n=this.shr(1).div(e).shl(1)).eq(m)?e.isNegative()?g:x:(a=this.sub(e.mul(n)),i=n.add(a.div(e)));if(e.eq(_))return this.unsigned?y:m;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=m}for(a=this;a.gte(e);){n=Math.max(1,Math.floor(a.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(n)/Math.LN2),l=o<=48?1:c(2,o-48),f=s(n),p=f.mul(e);p.isNegative()||p.gt(a);)p=(f=s(n-=l,this.unsigned)).mul(e);f.isZero()&&(f=g),i=i.add(f),a=a.sub(p)}return i},T.div=T.divide,T.modulo=function(e){return r(e)||(e=d(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return u(~this.low,~this.high,this.unsigned)},T.and=function(e){return r(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return r(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return r(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return r(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}},1725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function a(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(a){return!1}}()?Object.assign:function(e,i){for(var o,s,u=a(e),c=1;c<arguments.length;c++){for(var l in o=Object(arguments[c]))n.call(o,l)&&(u[l]=o[l]);if(t){s=t(o);for(var d=0;d<s.length;d++)r.call(o,s[d])&&(u[s[d]]=o[s[d]])}}return u}},888:function(e,t,n){"use strict";var r=n(9047);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},173:function(e,t,n){"use strict";var r,a=n(2791),i=(r=a)&&"object"===typeof r&&"default"in r?r.default:r,o=n(1338),s=new o,u=s.getBrowser(),c=s.getCPU(),l=s.getDevice(),d=s.getEngine(),f=s.getOS(),p=s.getUA(),h=function(e){return s.setUA(e)},v=function(e){if(e){var t=new o(e);return{UA:t,browser:t.getBrowser(),cpu:t.getCPU(),device:t.getDevice(),engine:t.getEngine(),os:t.getOS(),ua:t.getUA(),setUserAgent:function(e){return t.setUA(e)}}}console.error("No userAgent string was provided")},m=Object.freeze({ClientUAInstance:s,browser:u,cpu:c,device:l,engine:d,os:f,ua:p,setUa:h,parseUserAgent:v});function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){return g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(){return k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(e,t){return _=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_(e,t)}function T(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var C="mobile",N="tablet",A="smarttv",O="console",P="wearable",R="embedded",D=void 0,M={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},L={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},F={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return e||t},j=function(){return!("undefined"===typeof window||!window.navigator&&!navigator)&&(window.navigator||navigator)},U=function(e){var t=j();return t&&t.platform&&(-1!==t.platform.indexOf(e)||"MacIntel"===t.platform&&t.maxTouchPoints>1&&!window.MSStream)},V=function(e,t,n,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{vendor:B(t.vendor),model:B(t.model),os:B(n.name),osVersion:B(n.version),ua:B(r)})};var W=function(e){return e.type===C},z=function(e){return e.type===N},q=function(e){var t=e.type;return t===C||t===N},K=function(e){return e.type===A},G=function(e){return e.type===D},H=function(e){return e.type===P},Z=function(e){return e.type===O},Y=function(e){return e.type===R},X=function(e){var t=e.vendor;return B(t)},Q=function(e){var t=e.model;return B(t)},J=function(e){var t=e.type;return B(t,"browser")},$=function(e){return e.name===L.Android},ee=function(e){return e.name===L.Windows},te=function(e){return e.name===L.MAC_OS},ne=function(e){return e.name===L.WindowsPhone},re=function(e){return e.name===L.IOS},ae=function(e){var t=e.version;return B(t)},ie=function(e){var t=e.name;return B(t)},oe=function(e){return e.name===M.Chrome},se=function(e){return e.name===M.Firefox},ue=function(e){return e.name===M.Chromium},ce=function(e){return e.name===M.Edge},le=function(e){return e.name===M.Yandex},de=function(e){var t=e.name;return t===M.Safari||t===M.MobileSafari},fe=function(e){return e.name===M.MobileSafari},pe=function(e){return e.name===M.Opera},he=function(e){var t=e.name;return t===M.InternetExplorer||t===M.Ie},ve=function(e){return e.name===M.MIUI},me=function(e){return e.name===M.SamsungBrowser},ye=function(e){var t=e.version;return B(t)},ge=function(e){var t=e.major;return B(t)},be=function(e){var t=e.name;return B(t)},xe=function(e){var t=e.name;return B(t)},ke=function(e){var t=e.version;return B(t)},we=function(){var e=j(),t=e&&e.userAgent&&e.userAgent.toLowerCase();return"string"===typeof t&&/electron/.test(t)},_e=function(e){return"string"===typeof e&&-1!==e.indexOf("Edg/")},Te=function(){var e=j();return e&&(/iPad|iPhone|iPod/.test(e.platform)||"MacIntel"===e.platform&&e.maxTouchPoints>1)&&!window.MSStream},Se=function(){return U("iPad")},Ee=function(){return U("iPhone")},Ie=function(){return U("iPod")},Ce=function(e){return B(e)};function Ne(e){var t=e||m,n=t.device,r=t.browser,a=t.os,i=t.engine,o=t.ua;return{isSmartTV:K(n),isConsole:Z(n),isWearable:H(n),isEmbedded:Y(n),isMobileSafari:fe(r)||Se(),isChromium:ue(r),isMobile:q(n)||Se(),isMobileOnly:W(n),isTablet:z(n)||Se(),isBrowser:G(n),isDesktop:G(n),isAndroid:$(a),isWinPhone:ne(a),isIOS:re(a)||Se(),isChrome:oe(r),isFirefox:se(r),isSafari:de(r),isOpera:pe(r),isIE:he(r),osVersion:ae(a),osName:ie(a),fullBrowserVersion:ye(r),browserVersion:ge(r),browserName:be(r),mobileVendor:X(n),mobileModel:Q(n),engineName:xe(i),engineVersion:ke(i),getUA:Ce(o),isEdge:ce(r)||_e(o),isYandex:le(r),deviceType:J(n),isIOS13:Te(),isIPad13:Se(),isIPhone13:Ee(),isIPod13:Ie(),isElectron:we(),isEdgeChromium:_e(o),isLegacyEdge:ce(r)&&!_e(o),isWindows:ee(a),isMacOs:te(a),isMIUI:ve(r),isSamsungBrowser:me(r)}}var Ae=K(l),Oe=Z(l),Pe=H(l),Re=Y(l),De=fe(u)||Se(),Me=ue(u),Le=q(l)||Se(),Fe=W(l),Be=z(l)||Se(),je=G(l),Ue=G(l),Ve=$(f),We=ne(f),ze=re(f)||Se(),qe=oe(u),Ke=se(u),Ge=de(u),He=pe(u),Ze=he(u),Ye=ae(f),Xe=ie(f),Qe=ye(u),Je=ge(u),$e=be(u),et=X(l),tt=Q(l),nt=xe(d),rt=ke(d),at=Ce(p),it=ce(u)||_e(p),ot=le(u),st=J(l),ut=Te(),ct=Se(),lt=Ee(),dt=Ie(),ft=we(),pt=_e(p),ht=ce(u)&&!_e(p),vt=ee(f),mt=te(f),yt=ve(u),gt=me(u);function bt(e){var t=e||window.navigator.userAgent;return v(t)}t.tq=Le},4463:function(e,t,n){"use strict";var r=n(2791),a=n(1725),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var s=new Set,u={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(u[e]=t,e=0;e<t.length;e++)s.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,h={},v={};function m(e,t,n,r,a,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function x(e,t,n,r){var a=y.hasOwnProperty(t)?y[t]:null;(null!==a?0===a.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!p.call(v,e)||!p.call(h,e)&&(f.test(e)?v[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,_=60106,T=60107,S=60108,E=60114,I=60109,C=60110,N=60112,A=60113,O=60120,P=60115,R=60116,D=60121,M=60128,L=60129,F=60130,B=60131;if("function"===typeof Symbol&&Symbol.for){var j=Symbol.for;w=j("react.element"),_=j("react.portal"),T=j("react.fragment"),S=j("react.strict_mode"),E=j("react.profiler"),I=j("react.provider"),C=j("react.context"),N=j("react.forward_ref"),A=j("react.suspense"),O=j("react.suspense_list"),P=j("react.memo"),R=j("react.lazy"),D=j("react.block"),j("react.scope"),M=j("react.opaque.id"),L=j("react.debug_trace_mode"),F=j("react.offscreen"),B=j("react.legacy_hidden")}var U,V="function"===typeof Symbol&&Symbol.iterator;function W(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=V&&e[V]||e["@@iterator"])?e:null}function z(e){if(void 0===U)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);U=t&&t[1]||""}return"\n"+U+e}var q=!1;function K(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s])return"\n"+a[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function G(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 22:return e=K(e.type._render,!1);case 1:return e=K(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return H(e.type);case D:return H(e._render);case R:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Y(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return a({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ae(e,t.type,n):t.hasOwnProperty("defaultValue")&&ae(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ae(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ie(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ue(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ce(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var de="http://www.w3.org/1999/xhtml",fe="http://www.w3.org/2000/svg";function pe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function he(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?pe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==fe||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function ke(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=ke(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(be).forEach((function(e){xe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var _e=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Te(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Se(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ce=null,Ne=null;function Ae(e){if(e=ra(e)){if("function"!==typeof Ie)throw Error(o(280));var t=e.stateNode;t&&(t=ia(t),Ie(e.stateNode,e.type,t))}}function Oe(e){Ce?Ne?Ne.push(e):Ne=[e]:Ce=e}function Pe(){if(Ce){var e=Ce,t=Ne;if(Ne=Ce=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Re(e,t){return e(t)}function De(e,t,n,r,a){return e(t,n,r,a)}function Me(){}var Le=Re,Fe=!1,Be=!1;function je(){null===Ce&&null===Ne||(Me(),Pe())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ia(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(d)try{var We={};Object.defineProperty(We,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",We,We),window.removeEventListener("test",We,We)}catch(me){Ve=!1}function ze(e,t,n,r,a,i,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var qe=!1,Ke=null,Ge=!1,He=null,Ze={onError:function(e){qe=!0,Ke=e}};function Ye(e,t,n,r,a,i,o,s,u){qe=!1,Ke=null,ze.apply(Ze,arguments)}function Xe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Je(e){if(Xe(e)!==e)throw Error(o(188))}function $e(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Xe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Je(a),e;if(i===r)return Je(a),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=a,r=i;else{for(var s=!1,u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var tt,nt,rt,at,it=!1,ot=[],st=null,ut=null,ct=null,lt=new Map,dt=new Map,ft=[],pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ht(e,t,n,r,a){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:a,targetContainers:[r]}}function vt(e,t){switch(e){case"focusin":case"focusout":st=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":ct=null;break;case"pointerover":case"pointerout":lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e=ht(t,n,r,a,i),null!==t&&(null!==(t=ra(t))&&nt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function yt(e){var t=na(e.target);if(null!==t){var n=Xe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void at(e.lanePriority,(function(){i.unstable_runWithPriority(e.priority,(function(){rt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ra(n))&&nt(t),e.blockedOn=n,!1;t.shift()}return!0}function bt(e,t,n){gt(e)&&n.delete(t)}function xt(){for(it=!1;0<ot.length;){var e=ot[0];if(null!==e.blockedOn){null!==(e=ra(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&ot.shift()}null!==st&&gt(st)&&(st=null),null!==ut&&gt(ut)&&(ut=null),null!==ct&&gt(ct)&&(ct=null),lt.forEach(bt),dt.forEach(bt)}function kt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,xt)))}function wt(e){function t(t){return kt(t,e)}if(0<ot.length){kt(ot[0],e);for(var n=1;n<ot.length;n++){var r=ot[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==st&&kt(st,e),null!==ut&&kt(ut,e),null!==ct&&kt(ct,e),lt.forEach(t),dt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)yt(n),null===n.blockedOn&&ft.shift()}function _t(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Tt={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},St={},Et={};function It(e){if(St[e])return St[e];if(!Tt[e])return e;var t,n=Tt[e];for(t in n)if(n.hasOwnProperty(t)&&t in Et)return St[e]=n[t];return e}d&&(Et=document.createElement("div").style,"AnimationEvent"in window||(delete Tt.animationend.animation,delete Tt.animationiteration.animation,delete Tt.animationstart.animation),"TransitionEvent"in window||delete Tt.transitionend.transition);var Ct=It("animationend"),Nt=It("animationiteration"),At=It("animationstart"),Ot=It("transitionend"),Pt=new Map,Rt=new Map,Dt=["abort","abort",Ct,"animationEnd",Nt,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ot,"transitionEnd","waiting","waiting"];function Mt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],a=e[n+1];a="on"+(a[0].toUpperCase()+a.slice(1)),Rt.set(r,t),Pt.set(r,a),c(a,[r])}}(0,i.unstable_now)();var Lt=8;function Ft(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Bt(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,a=0,i=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==i)r=i,a=Lt=15;else if(0!==(i=134217727&n)){var u=i&~o;0!==u?(r=Ft(u),a=Lt):0!==(s&=i)&&(r=Ft(s),a=Lt)}else 0!==(i=n&~o)?(r=Ft(i),a=Lt):0!==s&&(r=Ft(s),a=Lt);if(0===r)return 0;if(r=n&((0>(r=31-qt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Ft(t),a<=Lt)return t;Lt=a}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-qt(t)),r|=e[n],t&=~a;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Wt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-qt(t)]=n}var qt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Kt(e)/Gt|0)|0},Kt=Math.log,Gt=Math.LN2;var Ht=i.unstable_UserBlockingPriority,Zt=i.unstable_runWithPriority,Yt=!0;function Xt(e,t,n,r){Fe||Me();var a=Jt,i=Fe;Fe=!0;try{De(a,e,t,n,r)}finally{(Fe=i)||je()}}function Qt(e,t,n,r){Zt(Ht,Jt.bind(null,e,t,n,r))}function Jt(e,t,n,r){var a;if(Yt)if((a=0===(4&t))&&0<ot.length&&-1<pt.indexOf(e))e=ht(null,e,t,n,r),ot.push(e);else{var i=$t(e,t,n,r);if(null===i)a&&vt(e,r);else{if(a){if(-1<pt.indexOf(e))return e=ht(i,e,t,n,r),void ot.push(e);if(function(e,t,n,r,a){switch(t){case"focusin":return st=mt(st,e,t,n,r,a),!0;case"dragenter":return ut=mt(ut,e,t,n,r,a),!0;case"mouseover":return ct=mt(ct,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return lt.set(i,mt(lt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,dt.set(i,mt(dt.get(i)||null,e,t,n,r,a)),!0}return!1}(i,e,t,n,r))return;vt(e,r)}Mr(e,t,r,null,n)}}}function $t(e,t,n,r){var a=Ee(r);if(null!==(a=na(a))){var i=Xe(a);if(null===i)a=null;else{var o=i.tag;if(13===o){if(null!==(a=Qe(i)))return a;a=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;a=null}else i!==a&&(a=null)}}return Mr(e,t,r,a,n),null}var en=null,tn=null,nn=null;function rn(){if(nn)return nn;var e,t,n=tn,r=n.length,a="value"in en?en.value:en.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===a[i-t];t++);return nn=a.slice(e,1<t?1-t:void 0)}function an(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function on(){return!0}function sn(){return!1}function un(e){function t(t,n,r,a,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?on:sn,this.isPropagationStopped=sn,this}return a(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=on)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=on)},persist:function(){},isPersistent:on}),t}var cn,ln,dn,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(fn),hn=a({},fn,{view:0,detail:0}),vn=un(hn),mn=a({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dn&&(dn&&"mousemove"===e.type?(cn=e.screenX-dn.screenX,ln=e.screenY-dn.screenY):ln=cn=0,dn=e),cn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),yn=un(mn),gn=un(a({},mn,{dataTransfer:0})),bn=un(a({},hn,{relatedTarget:0})),xn=un(a({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),kn=a({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(kn),_n=un(a({},fn,{data:0})),Tn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Cn(){return In}var Nn=a({},hn,{key:function(e){if(e.key){var t=Tn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=an(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?an(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?an(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Nn),On=un(a({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=un(a({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=un(a({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=a({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=un(Dn),Ln=[9,13,27,32],Fn=d&&"CompositionEvent"in window,Bn=null;d&&"documentMode"in document&&(Bn=document.documentMode);var jn=d&&"TextEvent"in window&&!Bn,Un=d&&(!Fn||Bn&&8<Bn&&11>=Bn),Vn=String.fromCharCode(32),Wn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Kn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Zn(e,t,n,r){Oe(r),0<(t=Fr(t,"onChange")).length&&(n=new pn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Xn=null;function Qn(e){Nr(e,0)}function Jn(e){if(Q(aa(e)))return e}function $n(e,t){if("change"===e)return t}var er=!1;if(d){var tr;if(d){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}tr=nr}else tr=!1;er=tr&&(!document.documentMode||9<document.documentMode)}function ar(){Yn&&(Yn.detachEvent("onpropertychange",ir),Xn=Yn=null)}function ir(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];if(Zn(t,Xn,e,Ee(e)),e=Qn,Fe)e(t);else{Fe=!0;try{Re(e,t)}finally{Fe=!1,je()}}}}function or(e,t,n){"focusin"===e?(ar(),Xn=n,(Yn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&ar()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function ur(e,t){if("click"===e)return Jn(t)}function cr(e,t){if("input"===e||"change"===e)return Jn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},dr=Object.prototype.hasOwnProperty;function fr(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!dr.call(t,n[r])||!lr(e[n[r]],t[n[r]]))return!1;return!0}function pr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=pr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pr(r)}}function vr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?vr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function yr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var gr=d&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,kr=null,wr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==br||br!==J(r)||("selectionStart"in(r=br)&&yr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},kr&&fr(kr,r)||(kr=r,0<(r=Fr(xr,"onSelect")).length&&(t=new pn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}Mt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Mt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Mt(Dt,2);for(var Tr="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Tr.length;Sr++)Rt.set(Tr[Sr],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Er="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Er));function Cr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,s,u,c){if(Ye.apply(this,arguments),qe){if(!qe)throw Error(o(198));var l=Ke;qe=!1,Ke=null,Ge||(Ge=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==i&&a.isPropagationStopped())break e;Cr(a,s,c),i=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==i&&a.isPropagationStopped())break e;Cr(a,s,c),i=u}}}if(Ge)throw e=He,Ge=!1,He=null,e}function Ar(e,t){var n=oa(t),r=e+"__bubble";n.has(r)||(Dr(t,e,2,!1),n.add(r))}var Or="_reactListening"+Math.random().toString(36).slice(2);function Pr(e){e[Or]||(e[Or]=!0,s.forEach((function(t){Ir.has(t)||Rr(t,!1,e,null),Rr(t,!0,e,null)})))}function Rr(e,t,n,r){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=n;if("selectionchange"===e&&9!==n.nodeType&&(i=n.ownerDocument),null!==r&&!t&&Ir.has(e)){if("scroll"!==e)return;a|=2,i=r}var o=oa(i),s=e+"__"+(t?"capture":"bubble");o.has(s)||(t&&(a|=4),Dr(i,e,a,t),o.add(s))}function Dr(e,t,n,r){var a=Rt.get(t);switch(void 0===a?2:a){case 0:a=Xt;break;case 1:a=Qt;break;default:a=Jt}n=a.bind(null,t,n,e),a=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===a||8===u.nodeType&&u.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=na(s)))return;if(5===(u=o.tag)||6===u){r=i=o;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(Be)return e(t,n);Be=!0;try{Le(e,t,n)}finally{Be=!1,je()}}((function(){var r=i,a=Ee(n),o=[];e:{var s=Pt.get(e);if(void 0!==s){var u=pn,c=e;switch(e){case"keypress":if(0===an(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Pn;break;case Ct:case Nt:case At:u=xn;break;case Ot:u=Rn;break;case"scroll":u=vn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=On}var l=0!==(4&t),d=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var p,h=r;null!==h;){var v=(p=h).stateNode;if(5===p.tag&&null!==v&&(p=v,null!==f&&(null!=(v=Ue(h,f))&&l.push(Lr(h,v,p)))),d)break;h=h.return}0<l.length&&(s=new u(s,c,null,n,a),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!na(c)&&!c[ea])&&(u||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?na(c):null)&&(c!==(d=Xe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=yn,v="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==u?s:aa(u),p=null==c?s:aa(c),(s=new l(v,h+"leave",u,n,a)).target=d,s.relatedTarget=p,v=null,na(a)===r&&((l=new l(f,h+"enter",c,n,a)).target=p,l.relatedTarget=d,v=l),d=v,u&&c)e:{for(f=c,h=0,p=l=u;p;p=Br(p))h++;for(p=0,v=f;v;v=Br(v))p++;for(;0<h-p;)l=Br(l),h--;for(;0<p-h;)f=Br(f),p--;for(;h--;){if(l===f||null!==f&&l===f.alternate)break e;l=Br(l),f=Br(f)}l=null}else l=null;null!==u&&jr(o,s,u,l,!1),null!==c&&null!==d&&jr(o,d,c,l,!0)}if("select"===(u=(s=r?aa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=$n;else if(Hn(s))if(er)m=cr;else{m=sr;var y=or}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ur);switch(m&&(m=m(e,r))?Zn(o,m,n,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ae(s,"number",s.value)),y=r?aa(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(br=y,xr=r,kr=null);break;case"focusout":kr=xr=br=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,_r(o,n,a);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":_r(o,n,a)}var g;if(Fn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Kn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Kn&&(g=rn()):(tn="value"in(en=a)?en.value:en.textContent,Kn=!0)),0<(y=Fr(r,b)).length&&(b=new _n(b,e,null,n,a),o.push({event:b,listeners:y}),g?b.data=g:null!==(g=qn(n))&&(b.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Wn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Wn?null:e;default:return null}}(e,n):function(e,t){if(Kn)return"compositionend"===e||!Fn&&zn(e,t)?(e=rn(),nn=tn=en=null,Kn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(a=new _n("onBeforeInput","beforeinput",null,n,a),o.push({event:a,listeners:r}),a.data=g))}Nr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Fr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Ue(e,n))&&r.unshift(Lr(e,i,a)),null!=(i=Ue(e,t))&&r.push(Lr(e,i,a))),e=e.return}return r}function Br(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,a){for(var i=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(u=Ue(n,i))&&o.unshift(Lr(n,u,s)):a||null!=(u=Ue(n,i))&&o.push(Lr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,Wr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function qr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Kr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Zr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Yr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Xr=0;var Qr=Math.random().toString(36).slice(2),Jr="__reactFiber$"+Qr,$r="__reactProps$"+Qr,ea="__reactContainer$"+Qr,ta="__reactEvents$"+Qr;function na(e){var t=e[Jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ea]||n[Jr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Yr(e);null!==e;){if(n=e[Jr])return n;e=Yr(e)}return t}n=(e=n).parentNode}return null}function ra(e){return!(e=e[Jr]||e[ea])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function aa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ia(e){return e[$r]||null}function oa(e){var t=e[ta];return void 0===t&&(t=e[ta]=new Set),t}var sa=[],ua=-1;function ca(e){return{current:e}}function la(e){0>ua||(e.current=sa[ua],sa[ua]=null,ua--)}function da(e,t){ua++,sa[ua]=e.current,e.current=t}var fa={},pa=ca(fa),ha=ca(!1),va=fa;function ma(e,t){var n=e.type.contextTypes;if(!n)return fa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ya(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ga(){la(ha),la(pa)}function ba(e,t,n){if(pa.current!==fa)throw Error(o(168));da(pa,t),da(ha,n)}function xa(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return a({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fa,va=pa.current,da(pa,e),da(ha,ha.current),!0}function wa(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=xa(e,t,va),r.__reactInternalMemoizedMergedChildContext=e,la(ha),la(pa),da(pa,e)):la(ha),da(ha,n)}var _a=null,Ta=null,Sa=i.unstable_runWithPriority,Ea=i.unstable_scheduleCallback,Ia=i.unstable_cancelCallback,Ca=i.unstable_shouldYield,Na=i.unstable_requestPaint,Aa=i.unstable_now,Oa=i.unstable_getCurrentPriorityLevel,Pa=i.unstable_ImmediatePriority,Ra=i.unstable_UserBlockingPriority,Da=i.unstable_NormalPriority,Ma=i.unstable_LowPriority,La=i.unstable_IdlePriority,Fa={},Ba=void 0!==Na?Na:function(){},ja=null,Ua=null,Va=!1,Wa=Aa(),za=1e4>Wa?Aa:function(){return Aa()-Wa};function qa(){switch(Oa()){case Pa:return 99;case Ra:return 98;case Da:return 97;case Ma:return 96;case La:return 95;default:throw Error(o(332))}}function Ka(e){switch(e){case 99:return Pa;case 98:return Ra;case 97:return Da;case 96:return Ma;case 95:return La;default:throw Error(o(332))}}function Ga(e,t){return e=Ka(e),Sa(e,t)}function Ha(e,t,n){return e=Ka(e),Ea(e,t,n)}function Za(){if(null!==Ua){var e=Ua;Ua=null,Ia(e)}Ya()}function Ya(){if(!Va&&null!==ja){Va=!0;var e=0;try{var t=ja;Ga(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ja=null}catch(n){throw null!==ja&&(ja=ja.slice(e+1)),Ea(Pa,Za),n}finally{Va=!1}}}var Xa=k.ReactCurrentBatchConfig;function Qa(e,t){if(e&&e.defaultProps){for(var n in t=a({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ja=ca(null),$a=null,ei=null,ti=null;function ni(){ti=ei=$a=null}function ri(e){var t=Ja.current;la(Ja),e.type._context._currentValue=t}function ai(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ii(e,t){$a=e,ti=ei=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Fo=!0),e.firstContext=null)}function oi(e,t){if(ti!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ti=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ei){if(null===$a)throw Error(o(308));ei=t,$a.dependencies={lanes:0,firstContext:t,responders:null}}else ei=ei.next=t;return e._currentValue}var si=!1;function ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ci(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function li(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function di(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function pi(e,t,n,r){var i=e.updateQueue;si=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var c=u,l=c.next;c.next=null,null===s?o=l:s.next=l,s=c;var d=e.alternate;if(null!==d){var f=(d=d.updateQueue).lastBaseUpdate;f!==s&&(null===f?d.firstBaseUpdate=l:f.next=l,d.lastBaseUpdate=c)}}if(null!==o){for(f=i.baseState,s=0,d=l=c=null;;){u=o.lane;var p=o.eventTime;if((r&u)===u){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,v=o;switch(u=t,p=n,v.tag){case 1:if("function"===typeof(h=v.payload)){f=h.call(p,f,u);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null===(u="function"===typeof(h=v.payload)?h.call(p,f,u):h)||void 0===u)break e;f=a({},f,u);break e;case 2:si=!0}}null!==o.callback&&(e.flags|=32,null===(u=i.effects)?i.effects=[o]:u.push(o))}else p={eventTime:p,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(l=d=p,c=f):d=d.next=p,s|=u;if(null===(o=o.next)){if(null===(u=i.shared.pending))break;o=u.next,u.next=null,i.lastBaseUpdate=u,i.shared.pending=null}}null===d&&(c=f),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=d,Vs|=s,e.lanes=s,e.memoizedState=f}}function hi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var vi=(new r.Component).refs;function mi(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:a({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var yi={isMounted:function(e){return!!(e=e._reactInternals)&&Xe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=fu(),a=pu(e),i=li(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),di(e,i),hu(e,a,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=fu(),a=pu(e),i=li(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),di(e,i),hu(e,a,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=fu(),r=pu(e),a=li(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),di(e,a),hu(e,r,n)}};function gi(e,t,n,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(a,i))}function bi(e,t,n){var r=!1,a=fa,i=t.contextType;return"object"===typeof i&&null!==i?i=oi(i):(a=ya(t)?va:pa.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?ma(e,a):fa),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=yi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function xi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&yi.enqueueReplaceState(t,t.state,null)}function ki(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=vi,ui(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=oi(i):(i=ya(t)?va:pa.current,a.context=ma(e,i)),pi(e,n,a,r),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(mi(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&yi.enqueueReplaceState(a,a.state,null),pi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4)}var wi=Array.isArray;function _i(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;t===vi&&(t=r.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ti(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Si(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Gu(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Xu(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=a(t,n.props)).ref=_i(e,t,n),r.return=e,r):((r=Hu(n.type,n.key,n.props,null,e.mode,r)).ref=_i(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Qu(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Zu(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Xu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Hu(t.type,t.key,t.props,null,e.mode,n)).ref=_i(e,null,t),n.return=e,n;case _:return(t=Qu(t,e.mode,n)).return=e,t}if(wi(t)||W(t))return(t=Zu(t,e.mode,n,null)).return=e,t;Ti(e,t)}return null}function p(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==a?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?n.type===T?d(e,t,n.props.children,r,a):c(e,t,n,r):null;case _:return n.key===a?l(e,t,n,r):null}if(wi(n)||W(n))return null!==a?null:d(e,t,n,r,null);Ti(e,n)}return null}function h(e,t,n,r,a){if("string"===typeof r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===T?d(t,e,r.props.children,a,r.key):c(t,e,r,a);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,a)}if(wi(r)||W(r))return d(t,e=e.get(n)||null,r,a,null);Ti(t,r)}return null}function v(a,o,s,u){for(var c=null,l=null,d=o,v=o=0,m=null;null!==d&&v<s.length;v++){d.index>v?(m=d,d=null):m=d.sibling;var y=p(a,d,s[v],u);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(a,d),o=i(y,o,v),null===l?c=y:l.sibling=y,l=y,d=m}if(v===s.length)return n(a,d),c;if(null===d){for(;v<s.length;v++)null!==(d=f(a,s[v],u))&&(o=i(d,o,v),null===l?c=d:l.sibling=d,l=d);return c}for(d=r(a,d);v<s.length;v++)null!==(m=h(d,a,v,s[v],u))&&(e&&null!==m.alternate&&d.delete(null===m.key?v:m.key),o=i(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&d.forEach((function(e){return t(a,e)})),c}function m(a,s,u,c){var l=W(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var d=l=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=p(a,v,g.value,c);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(a,v),s=i(b,s,m),null===d?l=b:d.sibling=b,d=b,v=y}if(g.done)return n(a,v),l;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=f(a,g.value,c))&&(s=i(g,s,m),null===d?l=g:d.sibling=g,d=g);return l}for(v=r(a,v);!g.done;m++,g=u.next())null!==(g=h(v,a,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=i(g,s,m),null===d?l=g:d.sibling=g,d=g);return e&&v.forEach((function(e){return t(a,e)})),l}return function(e,r,i,u){var c="object"===typeof i&&null!==i&&i.type===T&&null===i.key;c&&(i=i.props.children);var l="object"===typeof i&&null!==i;if(l)switch(i.$$typeof){case w:e:{for(l=i.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(i.type===T){n(e,c.sibling),(r=a(c,i.props.children)).return=e,e=r;break e}}else if(c.elementType===i.type){n(e,c.sibling),(r=a(c,i.props)).ref=_i(e,c,i),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}i.type===T?((r=Zu(i.props.children,e.mode,u,i.key)).return=e,e=r):((u=Hu(i.type,i.key,i.props,null,e.mode,u)).ref=_i(e,r,i),u.return=e,e=u)}return s(e);case _:e:{for(c=i.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){n(e,r.sibling),(r=a(r,i.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Qu(i,e.mode,u)).return=e,e=r}return s(e)}if("string"===typeof i||"number"===typeof i)return i=""+i,null!==r&&6===r.tag?(n(e,r.sibling),(r=a(r,i)).return=e,e=r):(n(e,r),(r=Xu(i,e.mode,u)).return=e,e=r),s(e);if(wi(i))return v(e,r,i,u);if(W(i))return m(e,r,i,u);if(l&&Ti(e,i),"undefined"===typeof i&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,H(e.type)||"Component"))}return n(e,r)}}var Ei=Si(!0),Ii=Si(!1),Ci={},Ni=ca(Ci),Ai=ca(Ci),Oi=ca(Ci);function Pi(e){if(e===Ci)throw Error(o(174));return e}function Ri(e,t){switch(da(Oi,t),da(Ai,e),da(Ni,Ci),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:he(null,"");break;default:t=he(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}la(Ni),da(Ni,t)}function Di(){la(Ni),la(Ai),la(Oi)}function Mi(e){Pi(Oi.current);var t=Pi(Ni.current),n=he(t,e.type);t!==n&&(da(Ai,e),da(Ni,n))}function Li(e){Ai.current===e&&(la(Ni),la(Ai))}var Fi=ca(0);function Bi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ji=null,Ui=null,Vi=!1;function Wi(e,t){var n=qu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zi(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function qi(e){if(Vi){var t=Ui;if(t){var n=t;if(!zi(e,t)){if(!(t=Zr(n.nextSibling))||!zi(e,t))return e.flags=-1025&e.flags|2,Vi=!1,void(ji=e);Wi(ji,n)}ji=e,Ui=Zr(t.firstChild)}else e.flags=-1025&e.flags|2,Vi=!1,ji=e}}function Ki(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ji=e}function Gi(e){if(e!==ji)return!1;if(!Vi)return Ki(e),Vi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!qr(t,e.memoizedProps))for(t=Ui;t;)Wi(e,t),t=Zr(t.nextSibling);if(Ki(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ui=Zr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ui=null}}else Ui=ji?Zr(e.stateNode.nextSibling):null;return!0}function Hi(){Ui=ji=null,Vi=!1}var Zi=[];function Yi(){for(var e=0;e<Zi.length;e++)Zi[e]._workInProgressVersionPrimary=null;Zi.length=0}var Xi=k.ReactCurrentDispatcher,Qi=k.ReactCurrentBatchConfig,Ji=0,$i=null,eo=null,to=null,no=!1,ro=!1;function ao(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function oo(e,t,n,r,a,i){if(Ji=i,$i=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xi.current=null===e||null===e.memoizedState?Ro:Do,e=n(r,a),ro){i=0;do{if(ro=!1,!(25>i))throw Error(o(301));i+=1,to=eo=null,t.updateQueue=null,Xi.current=Mo,e=n(r,a)}while(ro)}if(Xi.current=Po,t=null!==eo&&null!==eo.next,Ji=0,to=eo=$i=null,no=!1,t)throw Error(o(300));return e}function so(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===to?$i.memoizedState=to=e:to=to.next=e,to}function uo(){if(null===eo){var e=$i.alternate;e=null!==e?e.memoizedState:null}else e=eo.next;var t=null===to?$i.memoizedState:to.next;if(null!==t)to=t,eo=e;else{if(null===e)throw Error(o(310));e={memoizedState:(eo=e).memoizedState,baseState:eo.baseState,baseQueue:eo.baseQueue,queue:eo.queue,next:null},null===to?$i.memoizedState=to=e:to=to.next=e}return to}function co(e,t){return"function"===typeof t?t(e):t}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=eo,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,n.pending=null}if(null!==a){a=a.next,r=r.baseState;var u=s=i=null,c=a;do{var l=c.lane;if((Ji&l)===l)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var d={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=d,i=r):u=u.next=d,$i.lanes|=l,Vs|=l}c=c.next}while(null!==c&&c!==a);null===u?i=r:u.next=s,lr(r,t.memoizedState)||(Fo=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function fo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);lr(i,t.memoizedState)||(Fo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function po(e,t,n){var r=t._getVersion;r=r(t._source);var a=t._workInProgressVersionPrimary;if(null!==a?e=a===r:(e=e.mutableReadLanes,(e=(Ji&e)===e)&&(t._workInProgressVersionPrimary=r,Zi.push(t))),e)return n(t._source);throw Zi.push(t),Error(o(350))}function ho(e,t,n,r){var a=Rs;if(null===a)throw Error(o(349));var i=t._getVersion,s=i(t._source),u=Xi.current,c=u.useState((function(){return po(a,t,n)})),l=c[1],d=c[0];c=to;var f=e.memoizedState,p=f.refs,h=p.getSnapshot,v=f.source;f=f.subscribe;var m=$i;return e.memoizedState={refs:p,source:t,subscribe:r},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=l;var e=i(t._source);if(!lr(s,e)){e=n(t._source),lr(d,e)||(l(e),e=pu(m),a.mutableReadLanes|=e&a.pendingLanes),e=a.mutableReadLanes,a.entangledLanes|=e;for(var r=a.entanglements,o=e;0<o;){var u=31-qt(o),c=1<<u;r[u]|=e,o&=~c}}}),[n,t,r]),u.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,n=p.setSnapshot;try{n(e(t._source));var r=pu(m);a.mutableReadLanes|=r&a.pendingLanes}catch(i){n((function(){throw i}))}}))}),[t,r]),lr(h,n)&&lr(v,t)&&lr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:d}).dispatch=l=Oo.bind(null,$i,e),c.queue=e,c.baseQueue=null,d=po(a,t,n),c.memoizedState=c.baseState=d),d}function vo(e,t,n){return ho(uo(),e,t,n)}function mo(e){var t=so();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:co,lastRenderedState:e}).dispatch=Oo.bind(null,$i,e),[t.memoizedState,e]}function yo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$i.updateQueue)?(t={lastEffect:null},$i.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(e){return e={current:e},so().memoizedState=e}function bo(){return uo().memoizedState}function xo(e,t,n,r){var a=so();$i.flags|=e,a.memoizedState=yo(1|t,n,void 0,void 0===r?null:r)}function ko(e,t,n,r){var a=uo();r=void 0===r?null:r;var i=void 0;if(null!==eo){var o=eo.memoizedState;if(i=o.destroy,null!==r&&io(r,o.deps))return void yo(t,n,i,r)}$i.flags|=e,a.memoizedState=yo(1|t,n,i,r)}function wo(e,t){return xo(516,4,e,t)}function _o(e,t){return ko(516,4,e,t)}function To(e,t){return ko(4,2,e,t)}function So(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Eo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,So.bind(null,t,e),n)}function Io(){}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function No(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=qa();Ga(98>n?98:n,(function(){e(!0)})),Ga(97<n?97:n,(function(){var n=Qi.transition;Qi.transition=1;try{e(!1),t()}finally{Qi.transition=n}}))}function Oo(e,t,n){var r=fu(),a=pu(e),i={lane:a,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===$i||null!==o&&o===$i)ro=no=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=o(s,n);if(i.eagerReducer=o,i.eagerState=u,lr(u,s))return}catch(c){}hu(e,a,r)}}var Po={readContext:oi,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useOpaqueIdentifier:ao,unstable_isNewReconciler:!1},Ro={readContext:oi,useCallback:function(e,t){return so().memoizedState=[e,void 0===t?null:t],e},useContext:oi,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,xo(4,2,So.bind(null,t,e),n)},useLayoutEffect:function(e,t){return xo(4,2,e,t)},useMemo:function(e,t){var n=so();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=so();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oo.bind(null,$i,e),[r.memoizedState,e]},useRef:go,useState:mo,useDebugValue:Io,useDeferredValue:function(e){var t=mo(e),n=t[0],r=t[1];return wo((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=mo(!1),t=e[0];return go(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=so();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Vi){var e=!1,t=function(e){return{$$typeof:M,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Xr++).toString(36))),Error(o(355))})),n=mo(t)[1];return 0===(2&$i.mode)&&($i.flags|=516,yo(5,(function(){n("r:"+(Xr++).toString(36))}),void 0,null)),t}return mo(t="r:"+(Xr++).toString(36)),t},unstable_isNewReconciler:!1},Do={readContext:oi,useCallback:Co,useContext:oi,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:To,useMemo:No,useReducer:lo,useRef:bo,useState:function(){return lo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=lo(co),n=t[0],r=t[1];return _o((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=lo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return lo(co)[0]},unstable_isNewReconciler:!1},Mo={readContext:oi,useCallback:Co,useContext:oi,useEffect:_o,useImperativeHandle:Eo,useLayoutEffect:To,useMemo:No,useReducer:fo,useRef:bo,useState:function(){return fo(co)},useDebugValue:Io,useDeferredValue:function(e){var t=fo(co),n=t[0],r=t[1];return _o((function(){var t=Qi.transition;Qi.transition=1;try{r(e)}finally{Qi.transition=t}}),[e]),n},useTransition:function(){var e=fo(co)[0];return[bo().current,e]},useMutableSource:vo,useOpaqueIdentifier:function(){return fo(co)[0]},unstable_isNewReconciler:!1},Lo=k.ReactCurrentOwner,Fo=!1;function Bo(e,t,n,r){t.child=null===e?Ii(t,null,n,r):Ei(t,e.child,n,r)}function jo(e,t,n,r,a){n=n.render;var i=t.ref;return ii(t,a),r=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Bo(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Uo(e,t,n,r,a,i){if(null===e){var o=n.type;return"function"!==typeof o||Ku(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Hu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,a,i))}return o=e.child,0===(a&i)&&(a=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(a,r)&&e.ref===t.ref)?is(e,t,i):(t.flags|=1,(e=Gu(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,a,i){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Fo=!1,0===(i&a))return t.lanes=e.lanes,is(e,t,i);0!==(16384&e.flags)&&(Fo=!0)}return qo(e,t,n,r,i)}function Wo(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},wu(t,n);else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},wu(t,e),null;t.memoizedState={baseLanes:0},wu(t,null!==i?i.baseLanes:n)}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,wu(t,r);return Bo(e,t,a,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function qo(e,t,n,r,a){var i=ya(n)?va:pa.current;return i=ma(t,i),ii(t,a),n=oo(e,t,n,r,i,a),null===e||Fo?(t.flags|=1,Bo(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~a,is(e,t,a))}function Ko(e,t,n,r,a){if(ya(n)){var i=!0;ka(t)}else i=!1;if(ii(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),bi(t,n,r),ki(t,n,r,a),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=oi(c):c=ma(t,c=ya(n)?va:pa.current);var l=n.getDerivedStateFromProps,d="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&xi(t,o,r,c),si=!1;var f=t.memoizedState;o.state=f,pi(t,r,o,a),u=t.memoizedState,s!==r||f!==u||ha.current||si?("function"===typeof l&&(mi(t,n,l,r),u=t.memoizedState),(s=si||gi(t,n,s,r,f,u,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,ci(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:Qa(t.type,s),o.props=c,d=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=oi(u):u=ma(t,u=ya(n)?va:pa.current);var p=n.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||f!==u)&&xi(t,o,r,u),si=!1,f=t.memoizedState,o.state=f,pi(t,r,o,a);var h=t.memoizedState;s!==d||f!==h||ha.current||si?("function"===typeof p&&(mi(t,n,p,r),h=t.memoizedState),(c=si||gi(t,n,c,r,f,h,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,i,a)}function Go(e,t,n,r,a,i){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return a&&wa(t,n,!1),is(e,t,i);r=t.stateNode,Lo.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ei(t,e.child,null,i),t.child=Ei(t,null,s,i)):Bo(e,t,s,i),t.memoizedState=r.state,a&&wa(t,n,!0),t.child}function Ho(e){var t=e.stateNode;t.pendingContext?ba(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ba(0,t.context,!1),Ri(e,t.containerInfo)}var Zo,Yo,Xo,Qo={dehydrated:null,retryLane:0};function Jo(e,t,n){var r,a=t.pendingProps,i=Fi.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(i|=1),da(Fi,1&i),null===e?(void 0!==a.fallback&&qi(t),e=a.children,i=a.fallback,o?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,e):"number"===typeof a.unstable_expectedLoadTime?(e=$o(t,e,i,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Qo,t.lanes=33554432,e):((n=Yu({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(a=ts(e,t,a.children,a.fallback,n),o=t.child,i=e.child.memoizedState,o.memoizedState=null===i?{baseLanes:n}:{baseLanes:i.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=Qo,a):(n=es(e,t,a.children,n),t.memoizedState=null,n))}function $o(e,t,n,r){var a=e.mode,i=e.child;return t={mode:"hidden",children:t},0===(2&a)&&null!==i?(i.childLanes=0,i.pendingProps=t):i=Yu(t,a,0,null),n=Zu(n,a,r,null),i.return=e,n.return=e,i.sibling=n,e.child=i,n}function es(e,t,n,r){var a=e.child;return e=a.sibling,n=Gu(a,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function ts(e,t,n,r,a){var i=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:n};return 0===(2&i)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=s,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Gu(o,s),null!==e?r=Gu(e,r):(r=Zu(r,i,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ns(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ai(e.return,t)}function rs(e,t,n,r,a,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a,lastEffect:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=a,o.lastEffect=i)}function as(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Bo(e,t,r.children,n),0!==(2&(r=Fi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ns(e,n);else if(19===e.tag)ns(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(da(Fi,r),0===(2&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===Bi(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),rs(t,!1,a,n,i,t.lastEffect);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===Bi(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}rs(t,!0,n,null,i,t.lastEffect);break;case"together":rs(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function is(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Vs|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Gu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Gu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function os(e,t){if(!Vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ss(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return ya(t.type)&&ga(),null;case 3:return Di(),la(ha),la(pa),Yi(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Gi(t)?t.flags|=4:r.hydrate||(t.flags|=256)),null;case 5:Li(t);var i=Pi(Oi.current);if(n=t.type,null!==e&&null!=t.stateNode)Yo(e,t,n,r),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Pi(Ni.current),Gi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Jr]=t,r[$r]=s,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Er.length;e++)Ar(Er[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,s),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ar("invalid",r);break;case"textarea":ue(r,s),Ar("invalid",r)}for(var c in Te(n,s),e=null,s)s.hasOwnProperty(c)&&(i=s[c],"children"===c?"string"===typeof i?r.textContent!==i&&(e=["children",i]):"number"===typeof i&&r.textContent!==""+i&&(e=["children",""+i]):u.hasOwnProperty(c)&&null!=i&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":X(r),re(r,s,!0);break;case"textarea":X(r),le(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===i.nodeType?i:i.ownerDocument,e===de&&(e=pe(n)),e===de?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Jr]=t,e[$r]=r,Zo(e,t),t.stateNode=e,c=Se(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),i=r;break;case"iframe":case"object":case"embed":Ar("load",e),i=r;break;case"video":case"audio":for(i=0;i<Er.length;i++)Ar(Er[i],e);i=r;break;case"source":Ar("error",e),i=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),i=r;break;case"details":Ar("toggle",e),i=r;break;case"input":ee(e,r),i=$(e,r),Ar("invalid",e);break;case"option":i=ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=a({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":ue(e,r),i=se(e,r),Ar("invalid",e);break;default:i=r}Te(n,i);var l=i;for(s in l)if(l.hasOwnProperty(s)){var d=l[s];"style"===s?we(e,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&ye(e,d):"children"===s?"string"===typeof d?("textarea"!==n||""!==d)&&ge(e,d):"number"===typeof d&&ge(e,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=d&&"onScroll"===s&&Ar("scroll",e):null!=d&&x(e,s,d,c))}switch(n){case"input":X(e),re(e,r,!1);break;case"textarea":X(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?oe(e,!!r.multiple,s,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Ur)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Xo(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Pi(Oi.current),Pi(Ni.current),Gi(t)?(r=t.stateNode,n=t.memoizedProps,r[Jr]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Jr]=t,t.stateNode=r)}return null;case 13:return la(Fi),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Gi(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Fi.current)?0===Bs&&(Bs=3):(0!==Bs&&3!==Bs||(Bs=4),null===Rs||0===(134217727&Vs)&&0===(134217727&Ws)||gu(Rs,Ms))),(r||n)&&(t.flags|=4),null);case 4:return Di(),null===e&&Pr(t.stateNode.containerInfo),null;case 10:return ri(t),null;case 19:if(la(Fi),null===(r=t.memoizedState))return null;if(s=0!==(64&t.flags),null===(c=r.rendering))if(s)os(r,!1);else{if(0!==Bs||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Bi(e))){for(t.flags|=64,os(r,!1),null!==(s=c.updateQueue)&&(t.updateQueue=s,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(c=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,e=c.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return da(Fi,1&Fi.current|2),t.child}e=e.sibling}null!==r.tail&&za()>Gs&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432)}else{if(!s)if(null!==(e=Bi(c))){if(t.flags|=64,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),os(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Vi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*za()-r.renderingStartTime>Gs&&1073741824!==n&&(t.flags|=64,s=!0,os(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=za(),n.sibling=null,t=Fi.current,da(Fi,s?1&t|2:1&t),n):null;case 23:case 24:return _u(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function us(e){switch(e.tag){case 1:ya(e.type)&&ga();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Di(),la(ha),la(pa),Yi(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Li(e),null;case 13:return la(Fi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return la(Fi),null;case 4:return Di(),null;case 10:return ri(e),null;case 23:case 24:return _u(),null;default:return null}}function cs(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a}}function ls(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Zo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Yo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Pi(Ni.current);var o,s=null;switch(n){case"input":i=$(e,i),r=$(e,r),s=[];break;case"option":i=ie(e,i),r=ie(e,r),s=[];break;case"select":i=a({},i,{value:void 0}),r=a({},r,{value:void 0}),s=[];break;case"textarea":i=se(e,i),r=se(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(d in Te(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var c=i[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(u.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var l=r[d];if(c=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&l!==c&&(null!=l||null!=c))if("style"===d)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(d,n)),n=l;else"dangerouslySetInnerHTML"===d?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(s=s||[]).push(d,l)):"children"===d?"string"!==typeof l&&"number"!==typeof l||(s=s||[]).push(d,""+l):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(u.hasOwnProperty(d)?(null!=l&&"onScroll"===d&&Ar("scroll",e),s||c===l||(s=[])):"object"===typeof l&&null!==l&&l.$$typeof===M?l.toString():(s=s||[]).push(d,l))}n&&(s=s||[]).push("style",n);var d=s;(t.updateQueue=d)&&(t.flags|=4)}},Xo=function(e,t,n,r){n!==r&&(t.flags|=4)};var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=li(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Xs||(Xs=!0,Qs=r),ls(0,t)},n}function ps(e,t,n){(n=li(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return ls(0,t),r(a)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Js?Js=new Set([this]):Js.add(this),ls(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function vs(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Uu(e,n)}else t.current=null}function ms(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Qa(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Hr(t.stateNode.containerInfo))}throw Error(o(163))}function ys(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var a=e;r=a.next,0!==(4&(a=a.tag))&&0!==(1&a)&&(Fu(n,e),Lu(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Qa(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&hi(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}hi(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function gs(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var a=n.memoizedProps.style;a=void 0!==a&&null!==a&&a.hasOwnProperty("display")?a.display:null,r.style.display=ke("display",a)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function bs(e,t){if(Ta&&"function"===typeof Ta.onCommitFiberUnmount)try{Ta.onCommitFiberUnmount(_a,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,a=r.destroy;if(r=r.tag,void 0!==a)if(0!==(4&r))Fu(t,n);else{r=t;try{a()}catch(i){Uu(r,i)}}n=n.next}while(n!==e)}break;case 1:if(vs(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){Uu(t,i)}break;case 5:vs(t);break;case 4:Ss(e,t)}}function xs(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function ks(e){return 5===e.tag||3===e.tag||4===e.tag}function ws(e){e:{for(var t=e.return;null!==t;){if(ks(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ge(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ks(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_s(e,n,t):Ts(e,n,t)}function _s(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(_s(e,t,n),e=e.sibling;null!==e;)_s(e,t,n),e=e.sibling}function Ts(e,t,n){var r=e.tag,a=5===r||6===r;if(a)e=a?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Ts(e,t,n),e=e.sibling;null!==e;)Ts(e,t,n),e=e.sibling}function Ss(e,t){for(var n,r,a=t,i=!1;;){if(!i){i=a.return;e:for(;;){if(null===i)throw Error(o(160));switch(n=i.stateNode,i.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}i=i.return}i=!0}if(5===a.tag||6===a.tag){e:for(var s=e,u=a,c=u;;)if(bs(s,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break e;for(;null===c.sibling;){if(null===c.return||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(s=n,u=a.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){n=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(bs(e,a),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(i=!1)}a.sibling.return=a.return,a=a.sibling}}function Es(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var a=null!==e?e.memoizedProps:r;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,null!==i){for(n[$r]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Se(e,a),t=Se(e,r),a=0;a<i.length;a+=2){var s=i[a],u=i[a+1];"style"===s?we(n,u):"dangerouslySetInnerHTML"===s?ye(n,u):"children"===s?ge(n,u):x(n,s,u,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(i=r.value)?oe(n,!!r.multiple,i,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Ks=za(),gs(t.child,!0)),void Is(t);case 19:return void Is(t);case 23:case 24:return void gs(t,null!==t.memoizedState)}throw Error(o(163))}function Is(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new hs),t.forEach((function(t){var r=Wu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cs(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Ns=Math.ceil,As=k.ReactCurrentDispatcher,Os=k.ReactCurrentOwner,Ps=0,Rs=null,Ds=null,Ms=0,Ls=0,Fs=ca(0),Bs=0,js=null,Us=0,Vs=0,Ws=0,zs=0,qs=null,Ks=0,Gs=1/0;function Hs(){Gs=za()+500}var Zs,Ys=null,Xs=!1,Qs=null,Js=null,$s=!1,eu=null,tu=90,nu=[],ru=[],au=null,iu=0,ou=null,su=-1,uu=0,cu=0,lu=null,du=!1;function fu(){return 0!==(48&Ps)?za():-1!==su?su:su=za()}function pu(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===qa()?1:2;if(0===uu&&(uu=Us),0!==Xa.transition){0!==cu&&(cu=null!==qs?qs.pendingLanes:0),e=uu;var t=4186112&~cu;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=qa(),0!==(4&Ps)&&98===e?e=Ut(12,uu):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),uu),e}function hu(e,t,n){if(50<iu)throw iu=0,ou=null,Error(o(185));if(null===(e=vu(e,t)))return null;zt(e,t,n),e===Rs&&(Ws|=t,4===Bs&&gu(e,Ms));var r=qa();1===t?0!==(8&Ps)&&0===(48&Ps)?bu(e):(mu(e,n),0===Ps&&(Hs(),Za())):(0===(4&Ps)||98!==r&&99!==r||(null===au?au=new Set([e]):au.add(e)),mu(e,n)),qs=e}function vu(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function mu(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,a=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var u=31-qt(s),c=1<<u,l=i[u];if(-1===l){if(0===(c&r)||0!==(c&a)){l=t,Ft(c);var d=Lt;i[u]=10<=d?l+250:6<=d?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);s&=~c}if(r=Bt(e,e===Rs?Ms:0),t=Lt,0===r)null!==n&&(n!==Fa&&Ia(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Fa&&Ia(n)}15===t?(n=bu.bind(null,e),null===ja?(ja=[n],Ua=Ea(Pa,Ya)):ja.push(n),n=Fa):14===t?n=Ha(99,bu.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ha(n,yu.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function yu(e){if(su=-1,cu=uu=0,0!==(48&Ps))throw Error(o(327));var t=e.callbackNode;if(Mu()&&e.callbackNode!==t)return null;var n=Bt(e,e===Rs?Ms:0);if(0===n)return null;var r=n,a=Ps;Ps|=16;var i=Eu();for(Rs===e&&Ms===r||(Hs(),Tu(e,r));;)try{Nu();break}catch(u){Su(e,u)}if(ni(),As.current=i,Ps=a,null!==Ds?r=0:(Rs=null,Ms=0,r=Bs),0!==(Us&Ws))Tu(e,0);else if(0!==r){if(2===r&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(n=jt(e))&&(r=Iu(e,n))),1===r)throw t=js,Tu(e,0),gu(e,n),mu(e,za()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Pu(e);break;case 3:if(gu(e,n),(62914560&n)===n&&10<(r=Ks+500-za())){if(0!==Bt(e,0))break;if(((a=e.suspendedLanes)&n)!==n){fu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Kr(Pu.bind(null,e),r);break}Pu(e);break;case 4:if(gu(e,n),(4186112&n)===n)break;for(r=e.eventTimes,a=-1;0<n;){var s=31-qt(n);i=1<<s,(s=r[s])>a&&(a=s),n&=~i}if(n=a,10<(n=(120>(n=za()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ns(n/1960))-n)){e.timeoutHandle=Kr(Pu.bind(null,e),n);break}Pu(e);break;default:throw Error(o(329))}}return mu(e,za()),e.callbackNode===t?yu.bind(null,e):null}function gu(e,t){for(t&=~zs,t&=~Ws,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-qt(t),r=1<<n;e[n]=-1,t&=~r}}function bu(e){if(0!==(48&Ps))throw Error(o(327));if(Mu(),e===Rs&&0!==(e.expiredLanes&Ms)){var t=Ms,n=Iu(e,t);0!==(Us&Ws)&&(n=Iu(e,t=Bt(e,t)))}else n=Iu(e,t=Bt(e,0));if(0!==e.tag&&2===n&&(Ps|=64,e.hydrate&&(e.hydrate=!1,Hr(e.containerInfo)),0!==(t=jt(e))&&(n=Iu(e,t))),1===n)throw n=js,Tu(e,0),gu(e,t),mu(e,za()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pu(e),mu(e,za()),null}function xu(e,t){var n=Ps;Ps|=1;try{return e(t)}finally{0===(Ps=n)&&(Hs(),Za())}}function ku(e,t){var n=Ps;Ps&=-2,Ps|=8;try{return e(t)}finally{0===(Ps=n)&&(Hs(),Za())}}function wu(e,t){da(Fs,Ls),Ls|=t,Us|=t}function _u(){Ls=Fs.current,la(Fs)}function Tu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Ds)for(n=Ds.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ga();break;case 3:Di(),la(ha),la(pa),Yi();break;case 5:Li(r);break;case 4:Di();break;case 13:case 19:la(Fi);break;case 10:ri(r);break;case 23:case 24:_u()}n=n.return}Rs=e,Ds=Gu(e.current,null),Ms=Ls=Us=t,Bs=0,js=null,zs=Ws=Vs=0}function Su(e,t){for(;;){var n=Ds;try{if(ni(),Xi.current=Po,no){for(var r=$i.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}no=!1}if(Ji=0,to=eo=$i=null,ro=!1,Os.current=null,null===n||null===n.return){Bs=1,js=t,Ds=null;break}e:{var i=e,o=n.return,s=n,u=t;if(t=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&s.mode)){var l=s.alternate;l?(s.updateQueue=l.updateQueue,s.memoizedState=l.memoizedState,s.lanes=l.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!==(1&Fi.current),f=o;do{var p;if(p=13===f.tag){var h=f.memoizedState;if(null!==h)p=null!==h.dehydrated;else{var v=f.memoizedProps;p=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!d)}}if(p){var m=f.updateQueue;if(null===m){var y=new Set;y.add(c),f.updateQueue=y}else m.add(c);if(0===(2&f.mode)){if(f.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var g=li(-1,1);g.tag=2,di(s,g)}s.lanes|=1;break e}u=void 0,s=t;var b=i.pingCache;if(null===b?(b=i.pingCache=new ds,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(s)){u.add(s);var x=Vu.bind(null,i,c,s);c.then(x,x)}f.flags|=4096,f.lanes=t;break e}f=f.return}while(null!==f);u=Error((H(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Bs&&(Bs=2),u=cs(u,s),f=o;do{switch(f.tag){case 3:i=u,f.flags|=4096,t&=-t,f.lanes|=t,fi(f,fs(0,i,t));break e;case 1:i=u;var k=f.type,w=f.stateNode;if(0===(64&f.flags)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Js||!Js.has(w)))){f.flags|=4096,t&=-t,f.lanes|=t,fi(f,ps(f,i,t));break e}}f=f.return}while(null!==f)}Ou(n)}catch(_){t=_,Ds===n&&null!==n&&(Ds=n=n.return);continue}break}}function Eu(){var e=As.current;return As.current=Po,null===e?Po:e}function Iu(e,t){var n=Ps;Ps|=16;var r=Eu();for(Rs===e&&Ms===t||Tu(e,t);;)try{Cu();break}catch(a){Su(e,a)}if(ni(),Ps=n,As.current=r,null!==Ds)throw Error(o(261));return Rs=null,Ms=0,Bs}function Cu(){for(;null!==Ds;)Au(Ds)}function Nu(){for(;null!==Ds&&!Ca();)Au(Ds)}function Au(e){var t=Zs(e.alternate,e,Ls);e.memoizedProps=e.pendingProps,null===t?Ou(e):Ds=t,Os.current=null}function Ou(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=ss(n,t,Ls)))return void(Ds=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Ls)||0===(4&n.mode)){for(var r=0,a=n.child;null!==a;)r|=a.lanes|a.childLanes,a=a.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=us(t)))return n.flags&=2047,void(Ds=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ds=t);Ds=t=e}while(null!==t);0===Bs&&(Bs=5)}function Pu(e){var t=qa();return Ga(99,Ru.bind(null,e,t)),null}function Ru(e,t){do{Mu()}while(null!==eu);if(0!==(48&Ps))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,a=r,i=e.pendingLanes&~a;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=a,e.mutableReadLanes&=a,e.entangledLanes&=a,a=e.entanglements;for(var s=e.eventTimes,u=e.expirationTimes;0<i;){var c=31-qt(i),l=1<<c;a[c]=0,s[c]=-1,u[c]=-1,i&=~l}if(null!==au&&0===(24&r)&&au.has(e)&&au.delete(e),e===Rs&&(Ds=Rs=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(a=Ps,Ps|=32,Os.current=null,Vr=Yt,yr(s=mr())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else e:if(u=(u=s.ownerDocument)&&u.defaultView||window,(l=u.getSelection&&u.getSelection())&&0!==l.rangeCount){u=l.anchorNode,i=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{u.nodeType,c.nodeType}catch(E){u=null;break e}var d=0,f=-1,p=-1,h=0,v=0,m=s,y=null;t:for(;;){for(var g;m!==u||0!==i&&3!==m.nodeType||(f=d+i),m!==c||0!==l&&3!==m.nodeType||(p=d+l),3===m.nodeType&&(d+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===s)break t;if(y===u&&++h===i&&(f=d),y===c&&++v===l&&(p=d),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}u=-1===f||-1===p?null:{start:f,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;Wr={focusedElem:s,selectionRange:u},Yt=!1,lu=null,du=!1,Ys=r;do{try{Du()}catch(E){if(null===Ys)throw Error(o(330));Uu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);lu=null,Ys=r;do{try{for(s=e;null!==Ys;){var b=Ys.flags;if(16&b&&ge(Ys.stateNode,""),128&b){var x=Ys.alternate;if(null!==x){var k=x.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(1038&b){case 2:ws(Ys),Ys.flags&=-3;break;case 6:ws(Ys),Ys.flags&=-3,Es(Ys.alternate,Ys);break;case 1024:Ys.flags&=-1025;break;case 1028:Ys.flags&=-1025,Es(Ys.alternate,Ys);break;case 4:Es(Ys.alternate,Ys);break;case 8:Ss(s,u=Ys);var w=u.alternate;xs(u),null!==w&&xs(w)}Ys=Ys.nextEffect}}catch(E){if(null===Ys)throw Error(o(330));Uu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);if(k=Wr,x=mr(),b=k.focusedElem,s=k.selectionRange,x!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==s&&yr(b)&&(x=s.start,void 0===(k=s.end)&&(k=x),"selectionStart"in b?(b.selectionStart=x,b.selectionEnd=Math.min(k,b.value.length)):(k=(x=b.ownerDocument||document)&&x.defaultView||window).getSelection&&(k=k.getSelection(),u=b.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!k.extend&&w>s&&(u=s,s=w,w=u),u=hr(b,w),i=hr(b,s),u&&i&&(1!==k.rangeCount||k.anchorNode!==u.node||k.anchorOffset!==u.offset||k.focusNode!==i.node||k.focusOffset!==i.offset)&&((x=x.createRange()).setStart(u.node,u.offset),k.removeAllRanges(),w>s?(k.addRange(x),k.extend(i.node,i.offset)):(x.setEnd(i.node,i.offset),k.addRange(x))))),x=[];for(k=b;k=k.parentNode;)1===k.nodeType&&x.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<x.length;b++)(k=x[b]).element.scrollLeft=k.left,k.element.scrollTop=k.top}Yt=!!Vr,Wr=Vr=null,e.current=n,Ys=r;do{try{for(b=e;null!==Ys;){var _=Ys.flags;if(36&_&&ys(b,Ys.alternate,Ys),128&_){x=void 0;var T=Ys.ref;if(null!==T){var S=Ys.stateNode;Ys.tag,x=S,"function"===typeof T?T(x):T.current=x}}Ys=Ys.nextEffect}}catch(E){if(null===Ys)throw Error(o(330));Uu(Ys,E),Ys=Ys.nextEffect}}while(null!==Ys);Ys=null,Ba(),Ps=a}else e.current=n;if($s)$s=!1,eu=e,tu=t;else for(Ys=r;null!==Ys;)t=Ys.nextEffect,Ys.nextEffect=null,8&Ys.flags&&((_=Ys).sibling=null,_.stateNode=null),Ys=t;if(0===(r=e.pendingLanes)&&(Js=null),1===r?e===ou?iu++:(iu=0,ou=e):iu=0,n=n.stateNode,Ta&&"function"===typeof Ta.onCommitFiberRoot)try{Ta.onCommitFiberRoot(_a,n,void 0,64===(64&n.current.flags))}catch(E){}if(mu(e,za()),Xs)throw Xs=!1,e=Qs,Qs=null,e;return 0!==(8&Ps)||Za(),null}function Du(){for(;null!==Ys;){var e=Ys.alternate;du||null===lu||(0!==(8&Ys.flags)?et(Ys,lu)&&(du=!0):13===Ys.tag&&Cs(e,Ys)&&et(Ys,lu)&&(du=!0));var t=Ys.flags;0!==(256&t)&&ms(e,Ys),0===(512&t)||$s||($s=!0,Ha(97,(function(){return Mu(),null}))),Ys=Ys.nextEffect}}function Mu(){if(90!==tu){var e=97<tu?97:tu;return tu=90,Ga(e,Bu)}return!1}function Lu(e,t){nu.push(t,e),$s||($s=!0,Ha(97,(function(){return Mu(),null})))}function Fu(e,t){ru.push(t,e),$s||($s=!0,Ha(97,(function(){return Mu(),null})))}function Bu(){if(null===eu)return!1;var e=eu;if(eu=null,0!==(48&Ps))throw Error(o(331));var t=Ps;Ps|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var a=n[r],i=n[r+1],s=a.destroy;if(a.destroy=void 0,"function"===typeof s)try{s()}catch(c){if(null===i)throw Error(o(330));Uu(i,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){a=n[r],i=n[r+1];try{var u=a.create;a.destroy=u()}catch(c){if(null===i)throw Error(o(330));Uu(i,c)}}for(u=e.current.firstEffect;null!==u;)e=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=e;return Ps=t,Za(),!0}function ju(e,t,n){di(e,t=fs(0,t=cs(n,t),1)),t=fu(),null!==(e=vu(e,1))&&(zt(e,1,t),mu(e,t))}function Uu(e,t){if(3===e.tag)ju(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){ju(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r))){var a=ps(n,e=cs(t,e),1);if(di(n,a),a=fu(),null!==(n=vu(n,1)))zt(n,1,a),mu(n,a);else if("function"===typeof r.componentDidCatch&&(null===Js||!Js.has(r)))try{r.componentDidCatch(t,e)}catch(i){}break}}n=n.return}}function Vu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=fu(),e.pingedLanes|=e.suspendedLanes&n,Rs===e&&(Ms&n)===n&&(4===Bs||3===Bs&&(62914560&Ms)===Ms&&500>za()-Ks?Tu(e,0):zs|=n),mu(e,t)}function Wu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===qa()?1:2:(0===uu&&(uu=Us),0===(t=Vt(62914560&~uu))&&(t=4194304))),n=fu(),null!==(e=vu(e,t))&&(zt(e,t,n),mu(e,n))}function zu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qu(e,t,n,r){return new zu(e,t,n,r)}function Ku(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Gu(e,t){var n=e.alternate;return null===n?((n=qu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Hu(e,t,n,r,a,i){var s=2;if(r=e,"function"===typeof e)Ku(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Zu(n.children,a,i,t);case L:s=8,a|=16;break;case S:s=8,a|=1;break;case E:return(e=qu(12,n,t,8|a)).elementType=E,e.type=E,e.lanes=i,e;case A:return(e=qu(13,n,t,a)).type=A,e.elementType=A,e.lanes=i,e;case O:return(e=qu(19,n,t,a)).elementType=O,e.lanes=i,e;case F:return Yu(n,a,i,t);case B:return(e=qu(24,n,t,a)).elementType=B,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case C:s=9;break e;case N:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e;case D:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qu(s,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Zu(e,t,n,r){return(e=qu(7,e,r,t)).lanes=n,e}function Yu(e,t,n,r){return(e=qu(23,e,r,t)).elementType=F,e.lanes=n,e}function Xu(e,t,n){return(e=qu(6,e,null,t)).lanes=n,e}function Qu(e,t,n){return(t=qu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ju(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Wt(0),this.expirationTimes=Wt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.mutableSourceEagerHydrationData=null}function $u(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function ec(e,t,n,r){var a=t.current,i=fu(),s=pu(a);e:if(n){t:{if(Xe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(ya(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var c=n.type;if(ya(c)){n=xa(n,c,u);break e}}n=u}else n=fa;return null===t.context?t.context=n:t.pendingContext=n,(t=li(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),di(a,t),hu(a,s,i),s}function tc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function nc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ac(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Ju(e,t,null!=n&&!0===n.hydrate),t=qu(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ui(t),e[ea]=n.current,Pr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var a=(t=r[e])._getVersion;a=a(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function oc(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i._internalRoot;if("function"===typeof a){var s=a;a=function(){var e=tc(o);s.call(e)}}ec(t,o,e,a)}else{if(i=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ac(e,0,t?{hydrate:!0}:void 0)}(n,r),o=i._internalRoot,"function"===typeof a){var u=a;a=function(){var e=tc(o);u.call(e)}}ku((function(){ec(t,o,e,a)}))}return tc(o)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return $u(e,t,null,n)}Zs=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||ha.current)Fo=!0;else{if(0===(n&r)){switch(Fo=!1,t.tag){case 3:Ho(t),Hi();break;case 5:Mi(t);break;case 1:ya(t.type)&&ka(t);break;case 4:Ri(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var a=t.type._context;da(Ja,a._currentValue),a._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Jo(e,t,n):(da(Fi,1&Fi.current),null!==(t=is(e,t,n))?t.sibling:null);da(Fi,1&Fi.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return as(e,t,n);t.flags|=64}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),da(Fi,Fi.current),r)break;return null;case 23:case 24:return t.lanes=0,Wo(e,t,n)}return is(e,t,n)}Fo=0!==(16384&e.flags)}else Fo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=ma(t,pa.current),ii(t,n),a=oo(null,t,r,e,a,n),t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,ya(r)){var i=!0;ka(t)}else i=!1;t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ui(t);var s=r.getDerivedStateFromProps;"function"===typeof s&&mi(t,r,s,e),a.updater=yi,t.stateNode=a,a._reactInternals=t,ki(t,r,e,n),t=Go(null,t,r,!0,i,n)}else t.tag=0,Bo(null,t,a,n),t=t.child;return t;case 16:a=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=(i=a._init)(a._payload),t.type=a,i=t.tag=function(e){if("function"===typeof e)return Ku(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===N)return 11;if(e===P)return 14}return 2}(a),e=Qa(a,e),i){case 0:t=qo(null,t,a,e,n);break e;case 1:t=Ko(null,t,a,e,n);break e;case 11:t=jo(null,t,a,e,n);break e;case 14:t=Uo(null,t,a,Qa(a.type,e),r,n);break e}throw Error(o(306,a,""))}return t;case 0:return r=t.type,a=t.pendingProps,qo(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 1:return r=t.type,a=t.pendingProps,Ko(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 3:if(Ho(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,a=null!==(a=t.memoizedState)?a.element:null,ci(e,t),pi(t,r,null,n),(r=t.memoizedState.element)===a)Hi(),t=is(e,t,n);else{if((i=(a=t.stateNode).hydrate)&&(Ui=Zr(t.stateNode.containerInfo.firstChild),ji=t,i=Vi=!0),i){if(null!=(e=a.mutableSourceEagerHydrationData))for(a=0;a<e.length;a+=2)(i=e[a])._workInProgressVersionPrimary=e[a+1],Zi.push(i);for(n=Ii(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Bo(e,t,r,n),Hi();t=t.child}return t;case 5:return Mi(t),null===e&&qi(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,qr(r,a)?s=null:null!==i&&qr(r,i)&&(t.flags|=16),zo(e,t),Bo(e,t,s,n),t.child;case 6:return null===e&&qi(t),null;case 13:return Jo(e,t,n);case 4:return Ri(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ei(t,null,r,n):Bo(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,jo(e,t,r,a=t.elementType===r?a:Qa(r,a),n);case 7:return Bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,a=t.pendingProps,s=t.memoizedProps,i=a.value;var u=t.type._context;if(da(Ja,u._currentValue),u._currentValue=i,null!==s)if(u=s.value,0===(i=lr(u,i)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,i):1073741823))){if(s.children===a.children&&!ha.current){t=is(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&i)){1===u.tag&&((l=li(-1,n&-n)).tag=2,di(u,l)),u.lanes|=n,null!==(l=u.alternate)&&(l.lanes|=n),ai(u.return,n),c.lanes|=n;break}l=l.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Bo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=(i=t.pendingProps).children,ii(t,n),r=r(a=oi(a,i.unstable_observedBits)),t.flags|=1,Bo(e,t,r,n),t.child;case 14:return i=Qa(a=t.type,t.pendingProps),Uo(e,t,a,i=Qa(a.type,i),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Qa(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,ya(r)?(e=!0,ka(t)):e=!1,ii(t,n),bi(t,r,a),ki(t,r,a,n),Go(null,t,r,!0,e,n);case 19:return as(e,t,n);case 23:case 24:return Wo(e,t,n)}throw Error(o(156,t.tag))},ac.prototype.render=function(e){ec(e,this._internalRoot,null,null)},ac.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;ec(null,e,null,(function(){t[ea]=null}))},tt=function(e){13===e.tag&&(hu(e,4,fu()),rc(e,4))},nt=function(e){13===e.tag&&(hu(e,67108864,fu()),rc(e,67108864))},rt=function(e){if(13===e.tag){var t=fu(),n=pu(e);hu(e,n,t),rc(e,n)}},at=function(e,t){return t()},Ie=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ia(r);if(!a)throw Error(o(90));Q(r),ne(r,a)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Re=xu,De=function(e,t,n,r,a){var i=Ps;Ps|=4;try{return Ga(98,e.bind(null,t,n,r,a))}finally{0===(Ps=i)&&(Hs(),Za())}},Me=function(){0===(49&Ps)&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,mu(e,za())}))}Za()}(),Mu())},Le=function(e,t){var n=Ps;Ps|=2;try{return e(t)}finally{0===(Ps=n)&&(Hs(),Za())}};var uc={Events:[ra,aa,ia,Oe,Pe,Mu,{current:!1}]},cc={findFiberByHostInstance:na,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},lc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dc.isDisabled&&dc.supportsFiber)try{_a=dc.inject(lc),Ta=dc}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=sc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=$e(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Ps;if(0!==(48&n))return e(t);Ps|=1;try{if(e)return Ga(99,e.bind(null,t))}finally{Ps=n,Za()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return oc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(ku((function(){oc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ea]=null}))})),!0)},t.unstable_batchedUpdates=xu,t.unstable_createPortal=function(e,t){return sc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return oc(e,t,n,!1,r)},t.version="17.0.2"},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},3889:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(4575)),i=r(n(3913)),o=r(n(8585)),s=r(n(9754)),u=r(n(2205)),c=r(n(8)),l=r(n(6479)),d=r(n(7154)),f=r(n(2791));r(n(2007)),r(n(2391));var p=function(){var e=null;return function(){if(null!==e)return e;var t,n,r,a=!1;try{window.addEventListener("test",null,(t={},n="passive",r={get:function(){a=!0}},Object.defineProperty(t,n,r)))}catch(i){}return e=a,a}()}(),h={capture:!1,passive:!1};function v(e){return d({},h,e)}function m(e,t,n){var r=[e,t];return r.push(p?n:n.capture),r}function y(e,t,n,r){e.addEventListener.apply(e,m(t,n,r))}function g(e,t,n,r){e.removeEventListener.apply(e,m(t,n,r))}function b(e,t){e.children,e.target;var n=l(e,["children","target"]);Object.keys(n).forEach((function(e){if("on"===e.substring(0,2)){var r=n[e],a=c(r),i="object"===a;if(i||"function"===a){var o="capture"===e.substr(-7).toLowerCase(),s=e.substring(2).toLowerCase();s=o?s.substring(0,s.length-7):s,i?t(s,r.handler,r.options):t(s,r,v({capture:o}))}}}))}var x=function(e){function t(){return a(this,t),o(this,s(t).apply(this,arguments))}return u(t,e),i(t,[{key:"componentDidMount",value:function(){this.applyListeners(y)}},{key:"componentDidUpdate",value:function(e){this.applyListeners(g,e),this.applyListeners(y)}},{key:"componentWillUnmount",value:function(){this.applyListeners(g)}},{key:"applyListeners",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=t.target;if(n){var r=n;"string"===typeof n&&(r=window[n]),b(t,e.bind(null,r))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(f.PureComponent);x.propTypes={},t.withOptions=function(e,t){return{handler:e,options:v(t)}},t.default=x},8744:function(e,t,n){"use strict";function r(e){return e&&"object"===typeof e&&"default"in e?e.default:e}var a=r(n(7154)),i=r(n(9713)),o=r(n(3038)),s=r(n(6479)),u=n(2791),c=r(u),l=r(n(4575)),d=r(n(3913)),f=r(n(2205)),p=r(n(8585)),h=r(n(9754)),v=[],m=[];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){if(e&&"undefined"!=typeof document){var n,r=!0===t.prepend?"prepend":"append",a=!0===t.singleTag,i="string"==typeof t.container?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(a){var o=v.indexOf(i);-1===o&&(o=v.push(i)-1,m[o]={}),n=m[o]&&m[o][r]?m[o][r]:m[o][r]=s()}else n=s();65279===e.charCodeAt(0)&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var e=document.createElement("style");if(e.setAttribute("type","text/css"),t.attributes)for(var n=Object.keys(t.attributes),a=0;a<n.length;a++)e.setAttribute(n[a],t.attributes[n[a]]);var o="prepend"===r?"afterbegin":"beforeend";return i.insertAdjacentElement(o,e),e}}("\n.flippy-container *\n{\n    box-sizing: border-box;\n}\n\n.flippy-cardContainer-wrapper\n{\n\tposition: relative;\n\theight: 100%;\n    width: 100%;\n}\n\n.flippy-cardContainer\n{\n    height: 100%;\n    width: 100%;\n    position: relative;\n\n    -webkit-transition: .6s;\n       -moz-transition: .6s;\n        -ms-transition: .6s;\n         -o-transition: .6s;\n            transition: .6s;\n    -moz-transform: perspective(1000px);\n         transform: perspective(1000px);\n\n    -webkit-transform-style: preserve-3d;\n       -moz-transform-style: preserve-3d;\n        -ms-transform-style: preserve-3d;\n         -o-transform-style: preserve-3d;\n            transform-style: preserve-3d;\n}\n\n.flippy-front,\n.flippy-back\n{\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n    padding: 1em;\n\n    -webkit-transform: rotateY(0deg);\n       -moz-transform: rotateY(0deg);\n        -ms-transform: rotateY(0deg);\n         -o-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n\n    background: transparent;\n    box-shadow: 0 4px 8px 0 rgba(0,0,0,.2);\n\n    -webkit-backface-visibility: hidden;\n       -moz-backface-visibility: hidden;\n        -ms-backface-visibility: hidden;\n            backface-visibility: hidden;\n    -webkit-transform-style: preserve-3d;\n       -moz-transform-style: preserve-3d;\n         -o-transform-style: preserve-3d;\n        -ms-transform-style: preserve-3d;\n            transform-style: preserve-3d;\n}\n\n.flippy-front\n{\n    -webkit-transform: rotateY(0deg);\n        -ms-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n}\n\n.flippy-back\n{\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    -webkit-transform: rotateY(-180deg);\n       -moz-transform: rotateY(-180deg);\n        -ms-transform: rotateY(-180deg);\n         -o-transform: rotateY(-180deg);\n            transform: rotateY(-180deg);\n}\n\n.flippy-cardContainer.isActive:not(.istouchdevice) .flippy-back,\n.flippy-cardContainer.isActive.istouchdevice .flippy-back\n{\n    -webkit-transform: rotateY(0deg);\n       -moz-transform: rotateY(0deg);\n        -ms-transform: rotateY(0deg);\n         -o-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n}\n\n.flippy-cardContainer.isActive:not(.istouchdevice) .flippy-front,\n.flippy-cardContainer.isActive.istouchdevice .flippy-front\n{\n    -webkit-transform: rotateY(180deg);\n       -moz-transform: rotateY(180deg);\n        -ms-transform: rotateY(180deg);\n         -o-transform: rotateY(180deg);\n            transform: rotateY(180deg);\n}\n\n.flippy-cardContainer-wrapper.vertical .flippy-back\n{\n    -webkit-transform: rotateX(-180deg);\n       -moz-transform: rotateX(-180deg);\n        -ms-transform: rotateX(-180deg);\n         -o-transform: rotateX(-180deg);\n            transform: rotateX(-180deg);\n}\n\n.flippy-cardContainer-wrapper.vertical .flippy-cardContainer.isActive:not(.istouchdevice) .flippy-back,\n.flippy-cardContainer-wrapper.vertical .flippy-cardContainer.isActive.istouchdevice .flippy-back\n{\n    -webkit-transform: rotateX(0deg);\n       -moz-transform: rotateX(0deg);\n        -ms-transform: rotateX(0deg);\n         -o-transform: rotateX(0deg);\n            transform: rotateX(0deg);\n}\n\n.flippy-cardContainer-wrapper.vertical .flippy-cardContainer.isActive:not(.istouchdevice) .flippy-front,\n.flippy-cardContainer-wrapper.vertical .flippy-cardContainer.isActive.istouchdevice .flippy-front\n{\n    -webkit-transform: rotateX(180deg);\n       -moz-transform: rotateX(180deg);\n         -o-transform: rotateX(180deg);\n            transform: rotateX(180deg);\n            transform: rotateX(180deg);\n}\n",{});var b=c.forwardRef((function(e,t){var n=e.isFlipped,r=e.className,i=e.flipDirection,l=e.style,d=e.children,f=e.flipOnHover,p=e.flipOnClick,h=e.onClick,v=e.onTouchStart,m=e.onMouseEnter,y=e.onMouseLeave,b=s(e,["isFlipped","className","flipDirection","style","children","flipOnHover","flipOnClick","onClick","onTouchStart","onMouseEnter","onMouseLeave"]),x=u.useRef({isTouchDevice:!1}),k=u.useState(!1),w=o(k,2),_=w[0],T=w[1],S=u.useState(!1),E=o(S,2),I=E[0],C=E[1],N=function(){return C(!I)};u.useImperativeHandle(t,(function(){return{toggle:N}}));return u.useEffect((function(){"boolean"===typeof n&&n!==I&&C(n)}),[n]),c.createElement("div",a({},b,{className:"flippy-container ".concat(r||""),style:g({},l),onTouchStart:function(e){_||(x.current.isTouchDevice=!0,T(!0)),v(e)},onMouseEnter:function(e){f&&!x.current.isTouchDevice&&C(!0),m(e)},onMouseLeave:function(e){f&&!x.current.isTouchDevice&&C(!1),y(e)},onClick:function(e){switch(!0){case f&&!x.current.isTouchDevice:case!p&&!f:break;default:C(!I)}h(e)}}),c.createElement("div",{className:"flippy-cardContainer-wrapper ".concat(i)},c.createElement("div",{className:"flippy-cardContainer ".concat(I?"isActive":""," ").concat(_?"istouchdevice":"")},d)))}));function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(v){return!1}}();return function(){var n,r=h(e);if(t){var a=h(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return p(this,n)}}b.defaultProps={flipDirection:"horizontal",flipOnHover:!1,flipOnClick:!0,isFlipped:!1,onMouseEnter:function(){},onMouseLeave:function(){},onTouchStart:function(){},onClick:function(){}};var _=function(e){f(n,e);var t=w(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.cardType,r=e.style,a=e.elementType,i=e.animationDuration,o=s(e,["className","cardType","style","elementType","animationDuration"]);return c.createElement(a||"div",k(k({className:"flippy-card flippy-".concat(n," ").concat(t||"")},o),{},{style:k(k({},r||{}),{transitionDuration:"".concat(i/1e3,"s")})}),this.props.children)}}]),n}(c.Component);_.defaultProps={animationDuration:600}},1372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,i=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case d:case i:case s:case o:case p:return e;default:switch(e=e&&e.$$typeof){case c:case f:case m:case v:case u:return e;default:return t}}case a:return t}}}function w(e){return k(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=i,t.Lazy=m,t.Memo=v,t.Portal=a,t.Profiler=s,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||k(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return k(e)===c},t.isContextProvider=function(e){return k(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return k(e)===f},t.isFragment=function(e){return k(e)===i},t.isLazy=function(e){return k(e)===m},t.isMemo=function(e){return k(e)===v},t.isPortal=function(e){return k(e)===a},t.isProfiler=function(e){return k(e)===s},t.isStrictMode=function(e){return k(e)===o},t.isSuspense=function(e){return k(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===b||e.$$typeof===x||e.$$typeof===y)},t.typeOf=k},7441:function(e,t,n){"use strict";e.exports=n(1372)},1642:function(e,t,n){"use strict";t.ZP=void 0;var r=o(n(3922)),a=o(n(9731)),i=o(n(4111));function o(e){return e&&e.__esModule?e:{default:e}}var s=a.default;t.ZP=s},9731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2791)),i=(r=n(4164))&&r.__esModule?r:{default:r},o=n(4591),s=n(3922);function u(e){return u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}var h=function(e){function t(){return c(this,t),d(this,f(t).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.temporaryElement=document.createElement("div"),this.handleChildrens()}},{key:"componentDidUpdate",value:function(e){e.children!==this.props.children&&this.handleChildrens()}},{key:"componentWillUnmount",value:function(){this.temporaryElement&&i.default.unmountComponentAtNode(this.temporaryElement)}},{key:"extractChildren",value:function(){var e=this.context.extract,t=this.props.children;t&&e&&e(t)}},{key:"handleChildrens",value:function(){var e=this,t=this.props.children;if(!this.context.extract&&t){var n=a.default.createElement("div",{className:"react-head-temp"},t);i.default.render(n,this.temporaryElement,(function(){var t=e.temporaryElement.innerHTML;if(e.lastChildStr!==t){e.lastChildStr=t;var n=e.temporaryElement.querySelector(".react-head-temp");if(null!==n){var r=Array.prototype.slice.call(n.children),a=document.head,i=a.innerHTML;(r=(r=r.filter((function(e){return-1===i.indexOf(e.outerHTML)}))).map((function(e){return e.cloneNode(!0)}))).forEach((function(e){var t=e.tagName.toLowerCase();if("title"===t){var n=(0,o.getDuplicateTitle)();n&&(0,o.removeChild)(a,n)}else if(e.id){var r=(0,o.getDuplicateElementById)(e);r&&(0,o.removeChild)(a,r)}else if("meta"===t){var i=(0,o.getDuplicateMeta)(e);i&&(0,o.removeChild)(a,i)}else if("link"===t&&"canonical"===e.rel){var s=(0,o.getDuplicateCanonical)(e);s&&(0,o.removeChild)(a,s)}})),(0,o.appendChild)(document.head,r)}}}))}}},{key:"render",value:function(){return this.extractChildren(),null}}])&&l(n.prototype,r),s&&l(n,s),t}(a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(h,"contextType",s.MetaContext);var v=h;t.default=v,e.exports=t.default},3922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MetaContext=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2791));function a(e){return a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}var l=(0,r.createContext)({});t.MetaContext=l;var d=function(e){function t(){return i(this,t),s(this,u(t).apply(this,arguments))}var n,a,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){return r.default.createElement(l.Provider,{value:{extract:this.props.extract}},r.Children.only(this.props.children))}}])&&o(n.prototype,a),d&&o(n,d),t}(r.Component),f=d;t.default=f},4111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2791)),i=(r=n(9731))&&r.__esModule?r:{default:r};function o(e){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==o(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}var f=function(e){function t(){return s(this,t),c(this,l(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){return a.default.createElement(i.default,null,a.default.createElement("title",null,this.props.title))}}])&&u(n.prototype,r),o&&u(n,o),t}(a.Component),p=f;t.default=p,e.exports=t.default},4591:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterAndArrangeTags=function(e){var t=null,n=null,i=[],o=[];return e.forEach((function(e){var r=e.type,a=e.props;"title"===r?t=e:"link"===r&&"canonical"===a.rel?n=e:"meta"===r?i.push(e):o.push(e)})),[t].concat(function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(function(e){var t={};a.forEach((function(e){t[e]=[]}));for(var n=[],i=function(i){var o=e[i],s=o.props.id;(s?!t.id[s]:0===r.filter((function(e){var n=o.props[e],r=t[e][n];return r&&!r.props.id})).length)&&(n.unshift(o),a.forEach((function(e){var n=o.props[e];n&&(t[e][n]=o)})))},o=e.length-1;o>=0;o--)i(o);return n}(i)),[n],o)},t.getDuplicateTitle=function(){return document.head.querySelectorAll("title")},t.getDuplicateCanonical=function(){return document.head.querySelectorAll('link[rel="canonical"]')},t.getDuplicateElementById=function(e){var t=e.id;return t&&document.head.querySelector("#".concat(t))},t.getDuplicateMeta=function(e){var t=document.head;return n.reduce((function(n,r){var a,i=e.getAttribute(r);return i?n.concat((a=t.querySelectorAll("[".concat(r,' = "').concat(i,'"]')),(a=Array.prototype.slice.call(a||[])).filter((function(e){return!e.id})))):n}),[])},t.appendChild=function(e,t){void 0===t.length&&(t=[t]);for(var n=document.createDocumentFragment(),r=0,a=t.length;r<a;r++)n.appendChild(t[r]);e.appendChild(n)},t.removeChild=function(e,t){void 0===t.length&&(t=[t]);for(var n=0,r=t.length;n<r;n++)e.removeChild(t[n])};var n=["property","name","itemprop"],r=n.concat(["itemProp"]),a=r.concat(["id"])},5472:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(2791)),i=(r(n(2391)),function(e){e.index;var t=e.children;a.default.Children.count(t)});t.default=i},2630:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.children,r=e.startIndex,o=e.startX,s=e.pageX,u=e.viewLength,c=e.resistance,l=a.default.Children.count(n)-1,d=r+(o-s)/u;c?d<0?d=Math.exp(d*i.default.RESISTANCE_COEF)-1:d>l&&(d=l+1-Math.exp((l-d)*i.default.RESISTANCE_COEF)):d<0?t=((d=0)-r)*u+s:d>l&&(t=((d=l)-r)*u+s);return{index:d,startX:t}};var a=r(n(2791)),i=r(n(5610))},5610:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default={RESISTANCE_COEF:.6,UNCERTAINTY_THRESHOLD:3}},1014:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(2791)),i=function(e,t){var n=!1,r=function(e){return e?e.key:"empty"};if(e.children.length&&t.children.length){var i=a.default.Children.map(e.children,r)[e.index];if(null!==i&&void 0!==i)i===a.default.Children.map(t.children,r)[t.index]&&(n=!0)}return n};t.default=i},3062:function(e,t,n){"use strict";var r=n(4879);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"checkIndexBounds",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"computeIndex",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"constant",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getDisplaySameSlide",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"mod",{enumerable:!0,get:function(){return u.default}});var a=r(n(5472)),i=r(n(2630)),o=r(n(5610)),s=r(n(1014)),u=r(n(3451))},3451:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e,t){var n=e%t;return n<0?n+t:n};t.default=n},8966:function(e,t,n){"use strict";var r=n(375);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(e){var t;return(0,o.default)(this,n),(t=(0,u.default)(this,(0,c.default)(n).call(this,e))).timer=null,t.state={},t.handleInterval=function(){var e=t.props,n=e.children,r=e.direction,a=e.onChangeIndex,i=e.slideCount,o=t.state.index,s=o;"incremental"===r?s+=1:s-=1,(i||n)&&(s=(0,h.mod)(s,i||d.default.Children.count(n))),void 0===t.props.index&&t.setState({index:s}),a&&a(s,o)},t.handleChangeIndex=function(e,n,r){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,n,r)},t.handleSwitching=function(e,n){t.timer?(clearInterval(t.timer),t.timer=null):"end"===n&&t.startInterval(),t.props.onSwitching&&t.props.onSwitching(e,n)},t.handleVisibilityChange=function(e){e.target.hidden?clearInterval(t.timer):t.startInterval()},t.state.index=e.index||0,t}return(0,l.default)(n,t),(0,s.default)(n,[{key:"componentDidMount",value:function(){this.startInterval()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"===typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"componentDidUpdate",value:function(e){!(0,f.shallowEqualObjects)({index:e.index,interval:e.interval,autoplay:e.autoplay},{index:this.props.index,interval:this.props.interval,autoplay:this.props.autoplay})&&this.startInterval()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"startInterval",value:function(){var e=this.props,t=e.autoplay,n=e.interval;clearInterval(this.timer),t&&(this.timer=setInterval(this.handleInterval,n))}},{key:"render",value:function(){var t=this.props,n=t.autoplay,r=(t.direction,t.index,t.interval,t.onChangeIndex),o=(0,i.default)(t,["autoplay","direction","index","interval","onChangeIndex"]),s=this.state.index;return n?d.default.createElement(p.default,{target:"document",onVisibilityChange:this.handleVisibilityChange},d.default.createElement(e,(0,a.default)({index:s,onChangeIndex:this.handleChangeIndex,onSwitching:this.handleSwitching},o))):d.default.createElement(e,(0,a.default)({index:s,onChangeIndex:r},o))}}]),n}(d.default.Component);return t.propTypes={},t.defaultProps={autoplay:!0,direction:"incremental",interval:3e3},t};var a=r(n(9904)),i=r(n(5260)),o=r(n(7355)),s=r(n(6964)),u=r(n(5997)),c=r(n(6186)),l=r(n(5265)),d=r(n(2791)),f=(r(n(2007)),n(5496)),p=r(n(3889)),h=n(3062)},3966:function(e,t,n){"use strict";var r=n(375);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(){var e,t;(0,o.default)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(t=(0,u.default)(this,(e=(0,c.default)(n)).call.apply(e,[this].concat(a)))).state={},t.handleKeyDown=function(e){var n,r=t.props,a=r.axis,i=void 0===a?"x":a,o=r.children,s=r.onChangeIndex,u=r.slideCount;switch((0,f.default)(e)){case"page down":case"down":"y"===i?n="decrease":"y-reverse"===i&&(n="increase");break;case"left":"x"===i?n="decrease":"x-reverse"===i&&(n="increase");break;case"page up":case"up":"y"===i?n="increase":"y-reverse"===i&&(n="decrease");break;case"right":"x"===i?n="increase":"x-reverse"===i&&(n="decrease")}if(n){var c=t.state.index,l=c;"increase"===n?l+=1:l-=1,(u||o)&&(l=(0,h.mod)(l,u||d.default.Children.count(o))),void 0===t.props.index&&t.setState({index:l}),s&&s(l,c)}},t.handleChangeIndex=function(e,n,r){void 0===t.props.index&&t.setState({index:e}),t.props.onChangeIndex&&t.props.onChangeIndex(e,n,r)},t}return(0,l.default)(n,t),(0,s.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setState({index:this.props.index||0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"===typeof t&&t!==this.props.index&&this.setState({index:t})}},{key:"render",value:function(){var t=this.props,n=(t.index,t.onChangeIndex,(0,i.default)(t,["index","onChangeIndex"])),r=this.state.index;return d.default.createElement(p.default,{target:"window",onKeyDown:this.handleKeyDown},d.default.createElement(e,(0,a.default)({index:r,onChangeIndex:this.handleChangeIndex},n)))}}]),n}(d.default.Component);return t.propTypes={},t};var a=r(n(9904)),i=r(n(5260)),o=r(n(7355)),s=r(n(6964)),u=r(n(5997)),c=r(n(6186)),l=r(n(5265)),d=r(n(2791)),f=(r(n(2007)),r(n(7943))),p=r(n(3889)),h=n(3062)},8894:function(e,t,n){"use strict";var r=n(375);Object.defineProperty(t,"yP",{enumerable:!0,get:function(){return i.default}});var a=r(n(8966)),i=r(n(3966)),o=r(n(3630))},3630:function(e,t,n){"use strict";var r=n(896),a=n(375);Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){function n(e){var t;return(0,s.default)(this,n),(t=(0,c.default)(this,(0,l.default)(n).call(this,e))).timer=null,t.state={},t.handleChangeIndex=function(e,n,r){var a=t.props,i=a.slideCount,o=a.onChangeIndex,s=e-n,u=t.state.index+s;i&&(u=(0,p.mod)(u,i)),void 0===t.props.index&&t.setIndex(u,e,s),o&&o(u,t.state.index,r)},t.handleTransitionEnd=function(){t.timer=setTimeout((function(){t.setWindow()}),0),t.props.onTransitionEnd&&t.props.onTransitionEnd()},t.state.index=e.index||0,t}return(0,d.default)(n,t),(0,u.default)(n,[{key:"UNSAFE_componentWillMount",value:function(){this.setWindow(this.state.index)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;if("number"===typeof t&&t!==this.props.index){var n=t-this.props.index;this.setIndex(t,this.state.indexContainer+n,n)}}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"setIndex",value:function(e,t,n){var r={index:e,indexContainer:t,indexStart:this.state.indexStart,indexStop:this.state.indexStop};n>0&&(!this.props.slideCount||r.indexStop<this.props.slideCount-1)&&(r.indexStop+=1),e>r.indexStop&&(r.indexStop=e);var a=r.indexStart-e;a>0&&(r.indexContainer+=a,r.indexStart-=a),this.setState(r)}},{key:"setWindow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.index,t=this.props.slideCount,n=this.props.overscanSlideBefore,r=this.props.overscanSlideAfter;t&&(n>e&&(n=e),r+e>t-1&&(r=t-e-1)),this.setState({indexContainer:n,indexStart:e-n,indexStop:e+r})}},{key:"render",value:function(){for(var t=this.props,n=(t.children,t.index,t.onChangeIndex,t.onTransitionEnd,t.overscanSlideAfter,t.overscanSlideBefore,t.slideCount,t.slideRenderer),r=(0,o.default)(t,["children","index","onChangeIndex","onTransitionEnd","overscanSlideAfter","overscanSlideBefore","slideCount","slideRenderer"]),a=this.state,s=a.indexContainer,u=a.indexStart,c=a.indexStop,l=[],d=u;d<=c;d+=1)l.push(n({index:d,key:d}));return f.default.createElement(e,(0,i.default)({index:s,onChangeIndex:this.handleChangeIndex,onTransitionEnd:this.handleTransitionEnd},r),l)}}]),n}(f.PureComponent);return t.propTypes={},t.defaultProps={overscanSlideAfter:2,overscanSlideBefore:3},t};var i=a(n(9904)),o=a(n(5260)),s=a(n(7355)),u=a(n(6964)),c=a(n(5997)),l=a(n(6186)),d=a(n(5265)),f=r(n(2791)),p=(a(n(2007)),n(3062))},5228:function(e,t,n){"use strict";var r=n(1964),a=n(745);Object.defineProperty(t,"__esModule",{value:!0}),t.getDomTreeShapes=k,t.findNativeHandler=_,t.default=t.SwipeableViewsContext=void 0;var i=a(n(4788)),o=a(n(779)),s=a(n(1931)),u=a(n(4658)),c=a(n(1036)),l=a(n(2083)),d=a(n(531)),f=r(n(2791)),p=(a(n(2007)),a(n(2391)),n(3062));function h(e,t,n,r){return e.addEventListener(t,n,r),{remove:function(){e.removeEventListener(t,n,r)}}}var v={direction:"ltr",display:"flex",willChange:"transform"},m={width:"100%",WebkitFlexShrink:0,flexShrink:0,overflow:"auto"},y={root:{x:{overflowX:"hidden"},"x-reverse":{overflowX:"hidden"},y:{overflowY:"hidden"},"y-reverse":{overflowY:"hidden"}},flexDirection:{x:"row","x-reverse":"row-reverse",y:"column","y-reverse":"column-reverse"},transform:{x:function(e){return"translate(".concat(-e,"%, 0)")},"x-reverse":function(e){return"translate(".concat(e,"%, 0)")},y:function(e){return"translate(0, ".concat(-e,"%)")},"y-reverse":function(e){return"translate(0, ".concat(e,"%)")}},length:{x:"width","x-reverse":"width",y:"height","y-reverse":"height"},rotationMatrix:{x:{x:[1,0],y:[0,1]},"x-reverse":{x:[-1,0],y:[0,1]},y:{x:[0,1],y:[1,0]},"y-reverse":{x:[0,-1],y:[1,0]}},scrollPosition:{x:"scrollLeft","x-reverse":"scrollLeft",y:"scrollTop","y-reverse":"scrollTop"},scrollLength:{x:"scrollWidth","x-reverse":"scrollWidth",y:"scrollHeight","y-reverse":"scrollHeight"},clientLength:{x:"clientWidth","x-reverse":"clientWidth",y:"clientHeight","y-reverse":"clientHeight"}};function g(e,t){var n=t.duration,r=t.easeFunction,a=t.delay;return"".concat(e," ").concat(n," ").concat(r," ").concat(a)}function b(e,t){var n=y.rotationMatrix[t];return{pageX:n.x[0]*e.pageX+n.x[1]*e.pageY,pageY:n.y[0]*e.pageX+n.y[1]*e.pageY}}function x(e){return e.touches=[{pageX:e.pageX,pageY:e.pageY}],e}function k(e,t){for(var n=[];e&&e!==t&&e!==document.body&&!e.hasAttribute("data-swipeable");){var r=window.getComputedStyle(e);"absolute"===r.getPropertyValue("position")||"hidden"===r.getPropertyValue("overflow-x")?n=[]:(e.clientWidth>0&&e.scrollWidth>e.clientWidth||e.clientHeight>0&&e.scrollHeight>e.clientHeight)&&n.push({element:e,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),e=e.parentNode}return n}var w=null;function _(e){var t=e.domTreeShapes,n=e.pageX,r=e.startX,a=e.axis;return t.some((function(e){var t=n>=r;"x"!==a&&"y"!==a||(t=!t);var i=Math.round(e[y.scrollPosition[a]]),o=i>0,s=i+e[y.clientLength[a]]<e[y.scrollLength[a]];return!!(t&&s||!t&&o)&&(w=e.element,!0)}))}var T=f.createContext();t.SwipeableViewsContext=T;var S=function(e){function t(e){var n;return(0,s.default)(this,t),(n=(0,c.default)(this,(0,l.default)(t).call(this,e))).rootNode=null,n.containerNode=null,n.ignoreNextScrollEvents=!1,n.viewLength=0,n.startX=0,n.lastX=0,n.vx=0,n.startY=0,n.isSwiping=void 0,n.started=!1,n.startIndex=0,n.transitionListener=null,n.touchMoveListener=null,n.activeSlide=null,n.indexCurrent=null,n.firstRenderTimeout=null,n.setRootNode=function(e){n.rootNode=e},n.setContainerNode=function(e){n.containerNode=e},n.setActiveSlide=function(e){n.activeSlide=e,n.updateHeight()},n.handleSwipeStart=function(e){var t=n.props.axis,r=b(e.touches[0],t);n.viewLength=n.rootNode.getBoundingClientRect()[y.length[t]],n.startX=r.pageX,n.lastX=r.pageX,n.vx=0,n.startY=r.pageY,n.isSwiping=void 0,n.started=!0;var a=window.getComputedStyle(n.containerNode),i=a.getPropertyValue("-webkit-transform")||a.getPropertyValue("transform");if(i&&"none"!==i){var o=i.split("(")[1].split(")")[0].split(","),s=window.getComputedStyle(n.rootNode),u=b({pageX:parseInt(o[4],10),pageY:parseInt(o[5],10)},t);n.startIndex=-u.pageX/(n.viewLength-parseInt(s.paddingLeft,10)-parseInt(s.paddingRight,10))||0}},n.handleSwipeMove=function(e){if(n.started){if(null===w||w===n.rootNode){var t=n.props,r=t.axis,a=t.children,i=t.ignoreNativeScroll,o=t.onSwitching,s=t.resistance,u=b(e.touches[0],r);if(void 0===n.isSwiping){var c=Math.abs(u.pageX-n.startX),l=Math.abs(u.pageY-n.startY),d=c>l&&c>p.constant.UNCERTAINTY_THRESHOLD;if(!s&&("y"===r||"y-reverse"===r)&&(0===n.indexCurrent&&n.startX<u.pageX||n.indexCurrent===f.Children.count(n.props.children)-1&&n.startX>u.pageX))return void(n.isSwiping=!1);if(c>l&&e.preventDefault(),!0===d||l>p.constant.UNCERTAINTY_THRESHOLD)return n.isSwiping=d,void(n.startX=u.pageX)}if(!0===n.isSwiping){e.preventDefault(),n.vx=.5*n.vx+.5*(u.pageX-n.lastX),n.lastX=u.pageX;var h=(0,p.computeIndex)({children:a,resistance:s,pageX:u.pageX,startIndex:n.startIndex,startX:n.startX,viewLength:n.viewLength}),v=h.index,m=h.startX;if(null===w&&!i)if(_({domTreeShapes:k(e.target,n.rootNode),startX:n.startX,pageX:u.pageX,axis:r}))return;m?n.startX=m:null===w&&(w=n.rootNode),n.setIndexCurrent(v);var y=function(){o&&o(v,"move")};!n.state.displaySameSlide&&n.state.isDragging||n.setState({displaySameSlide:!1,isDragging:!0},y),y()}}}else n.handleTouchStart(e)},n.handleSwipeEnd=function(){if(w=null,n.started&&(n.started=!1,!0===n.isSwiping)){var e,t=n.state.indexLatest,r=n.indexCurrent,a=t-r;e=Math.abs(n.vx)>n.props.threshold?n.vx>0?Math.floor(r):Math.ceil(r):Math.abs(a)>n.props.hysteresis?a>0?Math.floor(r):Math.ceil(r):t;var i=f.Children.count(n.props.children)-1;e<0?e=0:e>i&&(e=i),n.setIndexCurrent(e),n.setState({indexLatest:e,isDragging:!1},(function(){n.props.onSwitching&&n.props.onSwitching(e,"end"),n.props.onChangeIndex&&e!==t&&n.props.onChangeIndex(e,t,{reason:"swipe"}),r===t&&n.handleTransitionEnd()}))}},n.handleTouchStart=function(e){n.props.onTouchStart&&n.props.onTouchStart(e),n.handleSwipeStart(e)},n.handleTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),n.handleSwipeEnd(e)},n.handleMouseDown=function(e){n.props.onMouseDown&&n.props.onMouseDown(e),e.persist(),n.handleSwipeStart(x(e))},n.handleMouseUp=function(e){n.props.onMouseUp&&n.props.onMouseUp(e),n.handleSwipeEnd(x(e))},n.handleMouseLeave=function(e){n.props.onMouseLeave&&n.props.onMouseLeave(e),n.started&&n.handleSwipeEnd(x(e))},n.handleMouseMove=function(e){n.props.onMouseMove&&n.props.onMouseMove(e),n.started&&n.handleSwipeMove(x(e))},n.handleScroll=function(e){if(n.props.onScroll&&n.props.onScroll(e),e.target===n.rootNode)if(n.ignoreNextScrollEvents)n.ignoreNextScrollEvents=!1;else{var t=n.state.indexLatest,r=Math.ceil(e.target.scrollLeft/e.target.clientWidth)+t;n.ignoreNextScrollEvents=!0,e.target.scrollLeft=0,n.props.onChangeIndex&&r!==t&&n.props.onChangeIndex(r,t,{reason:"focus"})}},n.updateHeight=function(){if(null!==n.activeSlide){var e=n.activeSlide.children[0];void 0!==e&&void 0!==e.offsetHeight&&n.state.heightLatest!==e.offsetHeight&&n.setState({heightLatest:e.offsetHeight})}},n.state={indexLatest:e.index,isDragging:!1,renderOnlyActive:!e.disableLazyLoading,heightLatest:0,displaySameSlide:!0},n.setIndexCurrent(e.index),n}return(0,d.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.transitionListener=h(this.containerNode,"transitionend",(function(t){t.target===e.containerNode&&e.handleTransitionEnd()})),this.touchMoveListener=h(this.rootNode,"touchmove",(function(t){e.props.disabled||e.handleSwipeMove(t)}),{passive:!1}),this.props.disableLazyLoading||(this.firstRenderTimeout=setTimeout((function(){e.setState({renderOnlyActive:!1})}),0)),this.props.action&&this.props.action({updateHeight:this.updateHeight})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.index;"number"===typeof t&&t!==this.props.index&&(this.setIndexCurrent(t),this.setState({displaySameSlide:(0,p.getDisplaySameSlide)(this.props,e),indexLatest:t}))}},{key:"componentWillUnmount",value:function(){this.transitionListener.remove(),this.touchMoveListener.remove(),clearTimeout(this.firstRenderTimeout)}},{key:"getSwipeableViewsContext",value:function(){var e=this;return{slideUpdateHeight:function(){e.updateHeight()}}}},{key:"setIndexCurrent",value:function(e){if(this.props.animateTransitions||this.indexCurrent===e||this.handleTransitionEnd(),this.indexCurrent=e,this.containerNode){var t=this.props.axis,n=y.transform[t](100*e);this.containerNode.style.WebkitTransform=n,this.containerNode.style.transform=n}}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd&&(this.state.displaySameSlide||this.state.isDragging||this.props.onTransitionEnd())}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=(r.action,r.animateHeight),s=r.animateTransitions,u=r.axis,c=r.children,l=r.containerStyle,d=r.disabled,p=(r.disableLazyLoading,r.enableMouseEvents),h=(r.hysteresis,r.ignoreNativeScroll,r.index,r.onChangeIndex,r.onSwitching,r.onTransitionEnd,r.resistance,r.slideStyle),b=r.slideClassName,x=r.springConfig,k=r.style,w=(r.threshold,(0,o.default)(r,["action","animateHeight","animateTransitions","axis","children","containerStyle","disabled","disableLazyLoading","enableMouseEvents","hysteresis","ignoreNativeScroll","index","onChangeIndex","onSwitching","onTransitionEnd","resistance","slideStyle","slideClassName","springConfig","style","threshold"])),_=this.state,S=_.displaySameSlide,E=_.heightLatest,I=_.indexLatest,C=_.isDragging,N=_.renderOnlyActive,A=d?{}:{onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd},O=!d&&p?{onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onMouseLeave:this.handleMouseLeave,onMouseMove:this.handleMouseMove}:{},P=(0,i.default)({},m,h);if(C||!s||S)e="all 0s ease 0s",t="all 0s ease 0s";else if(e=g("transform",x),t=g("-webkit-transform",x),0!==E){var R=", ".concat(g("height",x));e+=R,t+=R}var D={height:null,WebkitFlexDirection:y.flexDirection[u],flexDirection:y.flexDirection[u],WebkitTransition:t,transition:e};if(!N){var M=y.transform[u](100*this.indexCurrent);D.WebkitTransform=M,D.transform=M}return a&&(D.height=E),f.createElement(T.Provider,{value:this.getSwipeableViewsContext()},f.createElement("div",(0,i.default)({ref:this.setRootNode,style:(0,i.default)({},y.root[u],k)},w,A,O,{onScroll:this.handleScroll}),f.createElement("div",{ref:this.setContainerNode,style:(0,i.default)({},D,v,l),className:"react-swipeable-view-container"},f.Children.map(c,(function(e,t){if(N&&t!==I)return null;var r,i=!0;return t===I&&(i=!1,a&&(r=n.setActiveSlide,P.overflowY="hidden")),f.createElement("div",{ref:r,style:P,className:b,"aria-hidden":i,"data-swipeable":"true"},e)})))))}}]),t}(f.Component);S.displayName="ReactSwipableView",S.propTypes={},S.defaultProps={animateHeight:!1,animateTransitions:!0,axis:"x",disabled:!1,disableLazyLoading:!1,enableMouseEvents:!1,hysteresis:.6,ignoreNativeScroll:!1,index:0,threshold:5,springConfig:{duration:"0.35s",easeFunction:"cubic-bezier(0.15, 0.3, 0.25, 1)",delay:"0s"},resistance:!1};var E=S;t.default=E},1065:function(e,t,n){"use strict";var r=n(1964);Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return a.default}});var a=r(n(5228))},97:function(e,t,n){var r;r=function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(e,t,n){"use strict";n.r(t);var r=n("react"),a=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n};function s(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)}"undefined"!==typeof window&&(void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return t?new Promise((function(n,r){t.call(navigator,e,n,r)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}));var u=function(e){function t(t){var n=e.call(this,t)||this;return n.canvas=null,n.ctx=null,n.requestUserMediaId=0,n.unmounted=!1,n.state={hasUserMedia:!1},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.state,t=this.props;s()?(e.hasUserMedia||this.requestUserMedia(),t.children&&"function"!=typeof t.children&&console.warn("children must be a function")):t.onUserMediaError("getUserMedia not supported")},t.prototype.componentDidUpdate=function(e){var t=this.props;if(s()){var n=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),a=e.minScreenshotWidth!==t.minScreenshotWidth,i=e.minScreenshotHeight!==t.minScreenshotHeight;(r||a||i)&&(this.canvas=null,this.ctx=null),(n||r)&&(this.stopAndCleanup(),this.requestUserMedia())}else t.onUserMediaError("getUserMedia not supported")},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},t.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map((function(t){e.removeTrack(t),t.stop()})),e.getAudioTracks().map((function(t){e.removeTrack(t),t.stop()}))):e.stop())},t.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(t.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},t.prototype.getScreenshot=function(e){var t=this.state,n=this.props;if(!t.hasUserMedia)return null;var r=this.getCanvas(e);return r&&r.toDataURL(n.screenshotFormat,n.screenshotQuality)},t.prototype.getCanvas=function(e){var t=this.state,n=this.props;if(!this.video)return null;if(!t.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var r=this.video.videoWidth,a=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var i=r/a;a=(r=n.minScreenshotWidth||this.video.clientWidth)/i,n.minScreenshotHeight&&a<n.minScreenshotHeight&&(r=(a=n.minScreenshotHeight)*i)}this.canvas=document.createElement("canvas"),this.canvas.width=(null===e||void 0===e?void 0:e.width)||r,this.canvas.height=(null===e||void 0===e?void 0:e.height)||a,this.ctx=this.canvas.getContext("2d")}var o=this.ctx,s=this.canvas;return o&&s&&(n.mirrored&&(o.translate(s.width,0),o.scale(-1,1)),o.imageSmoothingEnabled=n.imageSmoothing,o.drawImage(this.video,0,0,(null===e||void 0===e?void 0:e.width)||s.width,(null===e||void 0===e?void 0:e.height)||s.height),n.mirrored&&(o.scale(-1,1),o.translate(-s.width,0))),s},t.prototype.requestUserMedia=function(){var e=this,n=this.props,r=function(r,a){var i={video:"undefined"===typeof a||a};n.audio&&(i.audio="undefined"===typeof r||r),e.requestUserMediaId++;var o=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(i).then((function(n){e.unmounted||o!==e.requestUserMediaId?t.stopMediaStream(n):e.handleUserMedia(null,n)})).catch((function(t){e.handleUserMedia(t)}))};if("mediaDevices"in navigator)r(n.audioConstraints,n.videoConstraints);else{var a=function(e){return{optional:[{sourceId:e}]}},i=function(e){var t=e.deviceId;return"string"===typeof t?t:Array.isArray(t)&&t.length>0?t[0]:"object"===typeof t&&t.ideal?t.ideal:null};MediaStreamTrack.getSources((function(e){var t=null,o=null;e.forEach((function(e){"audio"===e.kind?t=e.id:"video"===e.kind&&(o=e.id)}));var s=i(n.audioConstraints);s&&(t=s);var u=i(n.videoConstraints);u&&(o=u),r(a(t),a(o))}))}},t.prototype.handleUserMedia=function(e,t){var n=this.props;if(e||!t)return this.setState({hasUserMedia:!1}),void n.onUserMediaError(e);this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch(r){this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}n.onUserMedia(t)},t.prototype.render=function(){var e=this,t=this.state,n=this.props,a=n.audio,s=(n.forceScreenshotSourceSize,n.onUserMedia,n.onUserMediaError,n.screenshotFormat,n.screenshotQuality,n.minScreenshotWidth,n.minScreenshotHeight,n.audioConstraints,n.videoConstraints,n.imageSmoothing,n.mirrored),u=n.style,c=void 0===u?{}:u,l=n.children,d=o(n,["audio","forceScreenshotSourceSize","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),f=s?i(i({},c),{transform:(c.transform||"")+" scaleX(-1)"}):c,p={getScreenshot:this.getScreenshot.bind(this)};return r.createElement(r.Fragment,null,r.createElement("video",i({autoPlay:!0,src:t.src,muted:!a,playsInline:!0,ref:function(t){e.video=t},style:f},d)),l&&l(p))},t.defaultProps={audio:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},t}(r.Component);t.default=u},react:function(t,n){t.exports=e}}).default},e.exports=r(n(2791))},6374:function(e,t,n){"use strict";n(1725);var r=n(2791),a=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var i=Symbol.for;a=i("react.element"),t.Fragment=i("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,r)&&!u.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:l,props:i,_owner:o.current}}t.jsx=c,t.jsxs=c},9117:function(e,t,n){"use strict";var r=n(1725),a=60103,i=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,s=60110,u=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var d=Symbol.for;a=d("react.element"),i=d("react.portal"),t.Fragment=d("react.fragment"),t.StrictMode=d("react.strict_mode"),t.Profiler=d("react.profiler"),o=d("react.provider"),s=d("react.context"),u=d("react.forward_ref"),t.Suspense=d("react.suspense"),c=d("react.memo"),l=d("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function p(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(p(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=g.prototype=new y;b.constructor=g,r(b,m.prototype),b.isPureReactComponent=!0;var x={current:null},k=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,i={},o=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!w.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:e,key:o,ref:s,props:i,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,n,r,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case i:u=!0}}if(u)return o=o(u=e),e=""===r?"."+E(u,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),I(o,t,n,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(u=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+E(s=e[c],c);u+=I(s,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=I(s=s.value,t,n,l=r+E(s,c++),o);else if("object"===s)throw t=""+e,Error(p(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return u}function C(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",(function(e){return t.call(n,e,a++)})),r}function N(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var A={current:null};function O(){var e=A.current;if(null===e)throw Error(p(321));return e}var P={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error(p(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(p(267,e));var i=r({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!w.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}return{$$typeof:a,type:e.type,key:o,ref:s,props:i,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:s,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return O().useCallback(e,t)},t.useContext=function(e,t){return O().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return O().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return O().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return O().useLayoutEffect(e,t)},t.useMemo=function(e,t){return O().useMemo(e,t)},t.useReducer=function(e,t,n){return O().useReducer(e,t,n)},t.useRef=function(e){return O().useRef(e)},t.useState=function(e){return O().useState(e)},t.version="17.0.2"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},9727:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(O){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(e,t,n){var r=d;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return A()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=S(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(O){return{type:"throw",arg:O}}}e.wrap=c;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function m(){}function y(){}function g(){}var b={};u(b,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(N([])));k&&k!==n&&r.call(k,i)&&(b=k);var w=g.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function T(e,t){function n(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"===typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:A}}function A(){return{value:t,done:!0}}return y.prototype=g,u(w,"constructor",g),u(g,"constructor",y),y.displayName=u(g,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(T.prototype),u(T.prototype,o,(function(){return this})),e.AsyncIterator=T,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new T(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),u(w,s,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;I(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(n){"object"===typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},6813:function(e,t){"use strict";var n,r,a,i;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,d=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(d,0))},r=function(e,t){l=setTimeout(e,t)},a=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var h=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof h&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,b=0;t.unstable_shouldYield=function(){return t.unstable_now()>=b},i=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,k=x.port2;x.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();b=e+g;try{m(!0,e)?k.postMessage(null):(v=!1,m=null)}catch(n){throw k.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,k.postMessage(null))},r=function(e,n){y=f((function(){e(t.unstable_now())}),n)},a=function(){p(y),y=-1}}function w(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,a=e[r];if(!(void 0!==a&&0<S(a,t)))break e;e[r]=t,e[n]=a,n=r}}function _(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length;r<a;){var i=2*(r+1)-1,o=e[i],s=i+1,u=e[s];if(void 0!==o&&0>S(o,n))void 0!==u&&0>S(u,o)?(e[r]=u,e[s]=n,r=s):(e[r]=o,e[i]=n,r=i);else{if(!(void 0!==u&&0>S(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],I=[],C=1,N=null,A=3,O=!1,P=!1,R=!1;function D(e){for(var t=_(I);null!==t;){if(null===t.callback)T(I);else{if(!(t.startTime<=e))break;T(I),t.sortIndex=t.expirationTime,w(E,t)}t=_(I)}}function M(e){if(R=!1,D(e),!P)if(null!==_(E))P=!0,n(L);else{var t=_(I);null!==t&&r(M,t.startTime-e)}}function L(e,n){P=!1,R&&(R=!1,a()),O=!0;var i=A;try{for(D(n),N=_(E);null!==N&&(!(N.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=N.callback;if("function"===typeof o){N.callback=null,A=N.priorityLevel;var s=o(N.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?N.callback=s:N===_(E)&&T(E),D(n)}else T(E);N=_(E)}if(null!==N)var u=!0;else{var c=_(I);null!==c&&r(M,c.startTime-n),u=!1}return u}finally{N=null,A=i,O=!1}}var F=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||O||(P=!0,n(L))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return _(E)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:C++,callback:i,priorityLevel:e,startTime:o,expirationTime:u=o+u,sortIndex:-1},o>s?(e.sortIndex=o,w(I,e),null===_(E)&&e===_(I)&&(R?a():R=!0,r(M,o-s))):(e.sortIndex=u,w(E,e),P||O||(P=!0,n(L))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},6699:function(e,t,n){var r=n(2501),a=n(9112),i=n(2132),o=n(890),s=n(4113),u=n(1350),c=n(3411);c.alea=r,c.xor128=a,c.xorwow=i,c.xorshift7=o,c.xor4096=s,c.tychei=u,e.exports=c},2501:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n=function(){var e=4022871197;return function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function s(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function u(e,t){var n=new o(e),r=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.alea=u}(0,e=n.nmd(e),n.amdD)},1350:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.tychei=u}(0,e=n.nmd(e),n.amdD)},9112:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor128=u}(0,e=n.nmd(e),n.amdD)},4113:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function s(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.X&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xor4096=u}(0,e=n.nmd(e),n.amdD)},890:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function s(e,t){return t.x=e.x.slice(),t.i=e.i,t}function u(e,t){null==e&&(e=+new Date);var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&(r.x&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorshift7=u}(0,e=n.nmd(e),n.amdD)},2132:function(e,t,n){var r;!function(e,a,i){function o(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function s(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function u(e,t){var n=new o(e),r=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,r&&("object"==typeof r&&s(r,n),a.state=function(){return s(n,{})}),a}a&&a.exports?a.exports=u:n.amdD&&n.amdO?void 0===(r=function(){return u}.call(t,n,t,a))||(a.exports=r):this.xorwow=u}(0,e=n.nmd(e),n.amdD)},3411:function(e,t,n){var r;!function(a,i){var o,s=this,u=256,c=i.pow(u,6),l=i.pow(2,52),d=2*l,f=255;function p(e,t,n){var r=[],f=y(m((t=1==t?{entropy:!0}:t||{}).entropy?[e,g(a)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(u):(e=new Uint8Array(u),(s.crypto||s.msCrypto).getRandomValues(e)),g(e)}catch(r){var t=s.navigator,n=t&&t.plugins;return[+new Date,s,n,s.screen,g(a)]}}():e,3),r),p=new h(r),b=function(){for(var e=p.g(6),t=c,n=0;e<l;)e=(e+n)*u,t*=u,n=p.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|p.g(4)},b.quick=function(){return p.g(4)/4294967296},b.double=b,y(g(p.S),a),(t.pass||n||function(e,t,n,r){return r&&(r.S&&v(r,p),e.state=function(){return v(p,{})}),n?(i.random=e,t):e})(b,f,"global"in t?t.global:this==i,t.state)}function h(e){var t,n=e.length,r=this,a=0,i=r.i=r.j=0,o=r.S=[];for(n||(e=[n++]);a<u;)o[a]=a++;for(a=0;a<u;a++)o[a]=o[i=f&i+e[a%n]+(t=o[a])],o[i]=t;(r.g=function(e){for(var t,n=0,a=r.i,i=r.j,o=r.S;e--;)t=o[a=f&a+1],n=n*u+o[f&(o[a]=o[i=f&i+t])+(o[i]=t)];return r.i=a,r.j=i,n})(u)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(m(e[n],t-1))}catch(i){}return r.length?r:"string"==a?e:e+"\0"}function y(e,t){for(var n,r=e+"",a=0;a<r.length;)t[f&a]=f&(n^=19*t[f&a])+r.charCodeAt(a++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(i.seedrandom=p,y(i.random(),a),e.exports){e.exports=p;try{o=n(5042)}catch(b){}}else void 0===(r=function(){return p}.call(t,n,t,e))||(e.exports=r)}([],Math)},5496:function(e,t,n){"use strict";function r(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),r=Object.keys(t),a=n.length;if(r.length!==a)return!1;for(var i=0;i<a;i++){var o=n[i];if(e[o]!==t[o]||!Object.prototype.hasOwnProperty.call(t,o))return!1}return!0}function a(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}n.r(t),n.d(t,{shallowEqualArrays:function(){return a},shallowEqualObjects:function(){return r}})},9049:function(e){e.exports=function(){var e=function e(){function t(e){return a.appendChild(e.dom),e}function n(e){for(var t=0;t<a.children.length;t++)a.children[t].style.display=t===e?"block":"none";r=e}var r=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",(function(e){e.preventDefault(),n(++r%a.children.length)}),!1);var i=(performance||Date).now(),o=i,s=0,u=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var l=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:a,addPanel:t,showPanel:n,begin:function(){i=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-i,200),e>o+1e3&&(u.update(1e3*s/(e-o),100),o=e,s=0,l)){var t=performance.memory;l.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){i=this.end()},domElement:a,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,a=0,i=Math.round,o=i(window.devicePixelRatio||1),s=80*o,u=48*o,c=3*o,l=2*o,d=3*o,f=15*o,p=74*o,h=30*o,v=document.createElement("canvas");v.width=s,v.height=u,v.style.cssText="width:80px;height:48px";var m=v.getContext("2d");return m.font="bold "+9*o+"px Helvetica,Arial,sans-serif",m.textBaseline="top",m.fillStyle=n,m.fillRect(0,0,s,u),m.fillStyle=t,m.fillText(e,c,l),m.fillRect(d,f,p,h),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d,f,p,h),{dom:v,update:function(u,y){r=Math.min(r,u),a=Math.max(a,u),m.fillStyle=n,m.globalAlpha=1,m.fillRect(0,0,s,f),m.fillStyle=t,m.fillText(i(u)+" "+e+" ("+i(r)+"-"+i(a)+")",c,l),m.drawImage(v,d+o,f,p-o,h,d,f,p-o,h),m.fillRect(d+p-o,f,o,h),m.fillStyle=n,m.globalAlpha=.9,m.fillRect(d+p-o,f,o,i((1-u/y)*h))}}},e}()},1158:function(e){"use strict";var t=null;function n(e){if(null!==t&&(t.property,1)){var r=t;return t=n.prototype=null,r}return t=n.prototype=null==e?Object.create(null):e,new n}n(),e.exports=function(e){return n(e)}},1338:function(e,t,n){var r;!function(a,i){"use strict";var o="function",s="undefined",u="object",c="string",l="model",d="name",f="type",p="vendor",h="version",v="architecture",m="console",y="mobile",g="tablet",b="smarttv",x="wearable",k="embedded",w="Amazon",_="Apple",T="ASUS",S="BlackBerry",E="Firefox",I="Google",C="Huawei",N="LG",A="Microsoft",O="Motorola",P="Opera",R="Samsung",D="Sony",M="Xiaomi",L="Zebra",F="Facebook",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},j=function(e,t){return typeof e===c&&-1!==U(t).indexOf(U(e))},U=function(e){return e.toLowerCase()},V=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},W=function(e,t){for(var n,r,a,s,c,l,d=0;d<t.length&&!c;){var f=t[d],p=t[d+1];for(n=r=0;n<f.length&&!c;)if(c=f[n++].exec(e))for(a=0;a<p.length;a++)l=c[++r],typeof(s=p[a])===u&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):i:this[s[0]]=l?s[1].call(this,l,s[2]):i:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):i):this[s]=l||i;d+=2}},z=function(e,t){for(var n in t)if(typeof t[n]===u&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(j(t[n][r],e))return"?"===n?i:n}else if(j(t[n],e))return"?"===n?i:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[h,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[h,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,h],[/opios[\/ ]+([\w\.]+)/i],[h,[d,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[h,[d,P]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[d,h],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[h,[d,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[h,[d,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[h,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[h,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[h,[d,"IE"]],[/yabrowser\/([\w\.]+)/i],[h,[d,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure Browser"],h],[/\bfocus\/([\w\.]+)/i],[h,[d,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[h,[d,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[h,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[h,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[h,[d,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[h,[d,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[h,[d,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 Browser"],h],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],h],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[d,h],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,F],h],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[d,h],[/\bgsa\/([\w\.]+) .*safari\//i],[h,[d,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[h,[d,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,"Chrome WebView"],h],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[h,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,h],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[h,[d,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[h,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[h,z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,h],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],h],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[h,[d,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[d,h]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[v,"amd64"]],[/(ia32(?=;))/i],[[v,U]],[/((?:i[346]|x)86)[;\)]/i],[[v,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[v,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[v,"armhf"]],[/windows (ce|mobile); ppc;/i],[[v,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[v,/ower/,"",U]],[/(sun4\w)[;\)]/i],[[v,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[v,U]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[p,R],[f,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[p,R],[f,y]],[/\((ip(?:hone|od)[\w ]*);/i],[l,[p,_],[f,y]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[p,_],[f,g]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[p,C],[f,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[l,[p,C],[f,y]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[p,M],[f,y]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[p,M],[f,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[p,"OPPO"],[f,y]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[p,"Vivo"],[f,y]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[l,[p,"Realme"],[f,y]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[p,O],[f,y]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[p,O],[f,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[p,N],[f,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[p,N],[f,y]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[p,"Lenovo"],[f,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[p,"Nokia"],[f,y]],[/(pixel c)\b/i],[l,[p,I],[f,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[p,I],[f,y]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[p,D],[f,y]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[p,D],[f,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[p,"OnePlus"],[f,y]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[p,w],[f,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[p,w],[f,y]],[/(playbook);[-\w\),; ]+(rim)/i],[l,p,[f,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[p,S],[f,y]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[p,T],[f,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[p,T],[f,y]],[/(nexus 9)/i],[l,[p,"HTC"],[f,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[p,[l,/_/g," "],[f,y]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[p,"Acer"],[f,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[p,"Meizu"],[f,y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[p,"Sharp"],[f,y]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,l,[f,y]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,l,[f,g]],[/(surface duo)/i],[l,[p,A],[f,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[p,"Fairphone"],[f,y]],[/(u304aa)/i],[l,[p,"AT&T"],[f,y]],[/\bsie-(\w*)/i],[l,[p,"Siemens"],[f,y]],[/\b(rct\w+) b/i],[l,[p,"RCA"],[f,g]],[/\b(venue[\d ]{2,7}) b/i],[l,[p,"Dell"],[f,g]],[/\b(q(?:mv|ta)\w+) b/i],[l,[p,"Verizon"],[f,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[p,"Barnes & Noble"],[f,g]],[/\b(tm\d{3}\w+) b/i],[l,[p,"NuVision"],[f,g]],[/\b(k88) b/i],[l,[p,"ZTE"],[f,g]],[/\b(nx\d{3}j) b/i],[l,[p,"ZTE"],[f,y]],[/\b(gen\d{3}) b.+49h/i],[l,[p,"Swiss"],[f,y]],[/\b(zur\d{3}) b/i],[l,[p,"Swiss"],[f,g]],[/\b((zeki)?tb.*\b) b/i],[l,[p,"Zeki"],[f,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],l,[f,g]],[/\b(ns-?\w{0,9}) b/i],[l,[p,"Insignia"],[f,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[p,"NextBook"],[f,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],l,[f,y]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],l,[f,y]],[/\b(ph-1) /i],[l,[p,"Essential"],[f,y]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[p,"Envizen"],[f,g]],[/\b(trio[-\w\. ]+) b/i],[l,[p,"MachSpeed"],[f,g]],[/\btu_(1491) b/i],[l,[p,"Rotor"],[f,g]],[/(shield[\w ]+) b/i],[l,[p,"Nvidia"],[f,g]],[/(sprint) (\w+)/i],[p,l,[f,y]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[p,A],[f,y]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[p,L],[f,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[p,L],[f,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,l,[f,m]],[/droid.+; (shield) bui/i],[l,[p,"Nvidia"],[f,m]],[/(playstation [345portablevi]+)/i],[l,[p,D],[f,m]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[p,A],[f,m]],[/smart-tv.+(samsung)/i],[p,[f,b]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[p,R],[f,b]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,N],[f,b]],[/(apple) ?tv/i],[p,[l,"Apple TV"],[f,b]],[/crkey/i],[[l,"Chromecast"],[p,I],[f,b]],[/droid.+aft(\w)( bui|\))/i],[l,[p,w],[f,b]],[/\(dtv[\);].+(aquos)/i],[l,[p,"Sharp"],[f,b]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[p,V],[l,V],[f,b]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,b]],[/((pebble))app/i],[p,l,[f,x]],[/droid.+; (glass) \d/i],[l,[p,I],[f,x]],[/droid.+; (wt63?0{2,3})\)/i],[l,[p,L],[f,x]],[/(quest( 2)?)/i],[l,[p,F],[f,x]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[f,k]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[l,[f,y]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[f,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,g]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[f,y]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[h,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[h,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[d,h],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[h,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,h],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[d,[h,z,q]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,"Windows"],[h,z,q]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[h,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,"Mac OS"],[h,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[h,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,h],[/\(bb(10);/i],[h,[d,S]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[h,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[h,[d,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[h,[d,"webOS"]],[/crkey\/([\d\.]+)/i],[h,[d,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[d,"Chromium OS"],h],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,h],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],h],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[d,h]]},G=function e(t,n){if(typeof t===u&&(n=t,t=i),!(this instanceof e))return new e(t,n).getResult();var r=t||(typeof a!==s&&a.navigator&&a.navigator.userAgent?a.navigator.userAgent:""),o=n?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2===0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(K,n):K;return this.getBrowser=function(){var e,t={};return t.name=i,t.version=i,W.call(t,r,o.browser),t.major=typeof(e=t.version)===c?e.replace(/[^\d\.]/g,"").split(".")[0]:i,t},this.getCPU=function(){var e={};return e.architecture=i,W.call(e,r,o.cpu),e},this.getDevice=function(){var e={};return e.vendor=i,e.model=i,e.type=i,W.call(e,r,o.device),e},this.getEngine=function(){var e={};return e.name=i,e.version=i,W.call(e,r,o.engine),e},this.getOS=function(){var e={};return e.name=i,e.version=i,W.call(e,r,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===c&&e.length>255?V(e,255):e,this},this.setUA(r),this};G.VERSION="0.7.31",G.BROWSER=B([d,h,"major"]),G.CPU=B([v]),G.DEVICE=B([l,p,f,m,y,b,g,x,k]),G.ENGINE=G.OS=B([d,h]),typeof t!==s?(e.exports&&(t=e.exports=G),t.UAParser=G):n.amdO?(r=function(){return G}.call(t,n,t,e))===i||(e.exports=r):typeof a!==s&&(a.UAParser=G);var H=typeof a!==s&&(a.jQuery||a.Zepto);if(H&&!H.ua){var Z=new G;H.ua=Z.getResult(),H.ua.get=function(){return Z.getUA()},H.ua.set=function(e){Z.setUA(e);var t=Z.getResult();for(var n in t)H.ua[n]=t[n]}}}("object"===typeof window?window:this)},2391:function(e){"use strict";var t=function(){};e.exports=t},4879:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},9596:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},7355:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},6964:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},9904:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},6186:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},5265:function(e,t,n){var r=n(3578);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},375:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},896:function(e){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},5260:function(e,t,n){var r=n(159);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},159:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},5997:function(e,t,n){var r=n(8034),a=n(9596);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?a(e):t}},3578:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},8034:function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(r){return"function"===typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},2736:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},1931:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},4658:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}},4788:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},2083:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t},531:function(e,t,n){var r=n(7929);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},745:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},1964:function(e){e.exports=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}},779:function(e,t,n){var r=n(191);e.exports=function(e,t){if(null==e)return{};var n,a,i=r(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}},191:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}},1036:function(e,t,n){var r=n(8209),a=n(2736);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!==typeof t?a(e):t}},7929:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t},8209:function(e){function t(e){return t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(r){return"function"===typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n},2424:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAACURJREFUeJzt3XusHGUZx/FvC4VSKIRWpGK0JZW0qIEgSkFEERQN/2lQmoi0RkmIGg3GeInyhwla1BjjrRGtBkHjrcRoEP9A8CBNlAhGkEYqlrSgthWocinSC8U/nq0tpWd6dndmn3lnv5/kSdP0pOfZmfe3M7M7874gSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSWq1adkNaGDHAkuAxcCiXs0DZvfqKGAH8CTwBPAfYD2wrld3A/cCz466cakJ04HzgC8CdwHPEIN7mHoY+ClwOREuqTgnA1cDDzF8IKpqF3ATsBSYOZJXJg3hdcCvaDYUk9UW4BPEqZrUKmcBt5ETjP1rK3AlHlHUAnOBVcBu8oOxf60HLmzupUvVLgYeIT8IB6vVwJyGtoH0PDOBa8gf+P3Ug8RpoNSoBcCfyB/wg9RO4Irat4jUcwrwT/IH+rD1ZfyyWTU7h/hWO3tw11U/AGbUuoU0ts4CtpE/qOuunxDf9EsDeznwKPmDuan6en2bqj0OyW5gTLyY+PLv+OxGGnQGcbvK7dmNqCyHAmvIf4cfRe0GLqhns2lcfJ78gTvK+hdwQi1bTp13Ae28daTpmsCPf3UQRwAPkD9Ys+q9w29CddlV5A/SzHqEuAFTep6XAdvJH6TZdc2wG1LddC35g7MNtZO450z6vwXEwMgenG2pbw61NdU5K8kflG2qp4kvSovkN+n1Ogq4Hjgsu5EWORR4jLiToDjeYFavi4Ajs5tooUuzGxiUAalXsQOhYQuBs7ObGIQBqc884NzsJlpsaXYDgzAg9Tkfb6+o8ubsBgZhQOpzXnYDLbeIAm9iNCD1eWN2AwUo7k3EgNRjDnBidhMFOD27gX4ZkHosym6gEMVtJwNSj8XZDRSiuO1kQOpxUnYDhZhPYXcZGJB6vCC7gUJMJ1bGKoYBqcdR2Q0UpKg1RwxIPYra6cmOzm6gH4cm//7l9PdAzQbiYaS2mZXdQEGK2lZtCMgb+vj522hnQJ7KbqAgRW0rT7Hq8UR2AwV5PLuBfhiQejyZ3UBBinozMSD1eCS7gULsBv6d3UQ/DEg9/prdQCE2ADuym+iHAanHuuwGClHcdjIg9ShuxycpbjsZkHpsJebhVbU7sxvolwGpz2+yGyjArdkN9MuA1Ke4nT9i9wGbspvolwGpzy3Ex5g6sJuzGxiEAanPFjzNqvLD7AYGYUDqdV12Ay11P/C77CYGYUDqdQOxDrqe6/rsBgZlQOq1jXbebZxpO7Aqu4lBGZD6fYFYH0ThuxT46dUeBqR+DwLfz26iJXYSy2AXy4A04yri1GLcrQI2ZjcxDAPSjAco/J2zBg8Dn8puYlgGpDkrgPXZTST6GIU9+3EgBqQ5TwOXE+v0jZtbge9lN1EHA9KsXwNXZzcxYluAd9GRNwYD0rwrgduzmxiR3cAlwObsRupiQJr3DLH82EPZjYzAp4mjZmdULRm2nP4mdRvEcmJC46naSPPfVG9o6HecTBxJ5jbwf7fB14APZTcxShPkL0KfURPDb7pJnUlMEZT9GuuuH9HR9Rk9xRqt3wNvpQMff+7jeuK6oxMX5fszIKO3Bng98I/sRmrwJWAZsCu7kaYYkBz3AmcDf8xuZEA7gQ8DH6WjR449DEiejcBrgZXZjfRpI3AO8NXsRkbBgOTaDnwAeAdx71Lb/Rg4Dbgju5FRMSDtsJpYAfYa2jnxw/3AW4jvc7r0AcNQJsj/+LBrH/NOxRnEl23Z2+FZYlLuTwKHN/qKCzVB/g4ax4DscSZwIznbYBNxAX5k46+yYBPkD9ZxDsgei4DPEhfHTb7uncAvgIvwiDElE+QPVgOy1zRiuboVxEXyLoZ/rZuJ+areBxw3updSjuw1CjV1zxJrNN7W+/sxxPXKYuIoswh4EbHi7tHE0tQ7iBWdHgceA/5GzLC+DrgHWDu69jWICbrx7q6O8mNeqYIBkSoYEKmCAZEqGBCpggGRKhgQqYIBkSoYEKmCAZEqGBCpggGRKhgQqYIBkSoYEKmCAZEqGBCpgo/clm86MId4xHYmMeHCnj8hnl3fDmwjZpZ/jHgMV1NgQNptFrFGy4m9WgC8FHghMcnCccR6I/2eCewEHiWWS9tMTKT9ELHG+wbi2fW/085J7EbKgLTDbOCV+9QrejWvod83o/d/zwNOneRnthNB+Uuv/kxM9HA/YxQcAzJ6s4DTgSXErCSvofmVvAZxOHuDuq+ngLuBu4A7iSmI1hGTanSOAWne8cB5xJxWZxIDruTtPgs4q1d7bCUWB1pDTEv0B+I0rngl76i2OgY4lwjF+Tz/HbiL5gAX9griKLMGuLlX99DRI0zTJujGvFgLgY8Av6WeGQ+7VpuA7wBvIz5tU8dNI64driJWi8oegCXVf4k5gJcBx/a74dVuC4HPAA+QP9C6UNuJsCwlrm1UoGOAy4hz6uwB1eV6AljFcy/+1WKnAdcSpwTZg2fcai3wQWISbrXIdODtxMV29iCx4qjyDeLUVolmAVfgtUVb6xliHcdXT7YD1YwZxCqzm8gfBNbU6kYMSuOmA5fiEaPkugE4af8dq+G9ibgIzN7B1vC1A/gK8UmjhjSH+FQqe6da9ddm4BI0sIuJjZi9I61m6ybgBDRlc4Gfk7/jrNHVVuINUQdxCl6Ej3OtxPXeJ/VO4hns7J1k5dYdxPM46pkGfI78HWO1pzYwHs/kTMlK8neI1b56lLi3bqytIH9HWO2trcCrGFMfJ38HWO2vTcB8xsx7yN/wVjm1lj4e+z1kqj/YUguIm9cOS+5D5TgOeAnws6n8cOkBWQ0sym5CxTkVuI84mlSa1nwvjbkM+FZ2EyrWJuLNtXKe4lKPIHOBX+I3pRrc7N6ft1T9UKnLH7wbn1fW8N7P3qAcUKlHkG8TM5xLw5hJzHB/x2Q/UOIR5AxiBnSpDkur/rHEgCzLbkCdsoSKZ0hKDMjp2Q2oU6YRs+4fUIkBWZDdgDpn0hsZSwvIEXh/v+o3f7J/KC0gk74QaQiTzjJfWkA8eqgJk968WFpASr41Ru016bgqLSDSSBkQqYIBkSoYEKmCAZEqGBCpggGRKhgQqYIBkSoYEKmCAZEqGBCpggGRKhgQqYIBkSoYEKmCAZEkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSZIkSeX6Hwp0unbtLSUGAAAAAElFTkSuQmCC"},5776:function(e,t,n){"use strict";e.exports=n.p+"static/media/black-checkmark.d8439ac6ad1af747a4d7.png"},2266:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABFAAAARQB+zng/wAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEJSURBVFiFvdXBCoJAEIDhn96ro2+RtyKlToGXXrSDB6ECoUNBncsO7ULIrrq7Mw54kfD7E3UAlsAJOAMr9CcHLsZcAtRAZ44PUCripTGsVwPc/k5oRvTxzthseyc1Ilx4Z2wADp6IvQC+Ad6O6x/7P9SImIxrRATjkhHRuEREMp4SIYbHRIjjIRFq+JQIddxO5YlwfeEqadyO606o//OQiGB8ERHw4nfb+9MBz4jrBY3vgZNeYM4pcD9wrohCGh961TRX+ShuRy0i5CMjHrEOwMcidnPgYhEpeHKEBB4dIYkHR2jgkyNy9Feqb5XnAK0yPhTRAjQz4L6IBiADrsAdhSXimAJ4GDP7Ao3GS7lBEjtAAAAAAElFTkSuQmCC"},8937:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAMgCAMAAADsrvZaAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVEOTkwN0NENkM4QTExRTU4NkE2RkNFRjEyMjIxMkVFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVEOTkwN0NFNkM4QTExRTU4NkE2RkNFRjEyMjIxMkVFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUQ5OTA3Q0I2QzhBMTFFNTg2QTZGQ0VGMTIyMjEyRUUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUQ5OTA3Q0M2QzhBMTFFNTg2QTZGQ0VGMTIyMjEyRUUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6Xrs8sAAAAMFBMVEWIiIjDw8NbW1u8vLyrq6u0tLR/f3+jo6PJycllZWWbm5vPz8+SkpJycnJVVVXMzMyEeDihAAAPXElEQVR42uzdCXabyAJAUeYpgPe/25908jsdxyohhKBKde8CunNsPVMjKr4BNxUfwE3FNz8DuOWbQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAAIGAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAQQCAgGBgEBAICAQEAgIBAQCAgEEAgIBgYBAQCAgEBAICAQEAgIRCAgEBAICAYGAQEAgIBAQCAgEEAgIBAQCAgGBgEBAICAQEAgIBBAICAQEAgIBgYBAQCAgEBAIIBAQCAgEBAICAYGAQEAgIBAQCCAQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCAgEEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAQCACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgGBAAIBgYBAQCAgEBAICAQEAgIBBAICAYGAQLJQlnXbNG1dl4MfhkD4WUXb9HPRLWO1/kc1Ll0xT99r0YpAslX3xR9ZfKmbWpEIJL84pu5+HP9/niyzSASSj6EpxvVBVTeVfnICyaGO7Y+OTxaNCOTdR1bF3jp+zUhaP0OBvG8e3fq0pfFzFIg8Qon0fpYCkYeniEBymnush1rMRQTyPoYnp+ZfTtdrP1eBvIdpXF+hsHkokDfQLuuLVGbrAkldWawvtBhnCSRpzbi+VDUbZwkk3cdHt76c9SyBeHwEHyKTn7RAUjSvJ+mcYRRIesOrZT3NaJglkMTU43oiC74CSUtbreea/cwFktD0fD1d4acukFT066oQgRDP80MhAjH/MA8RiD6eYctQINGrr+tjXa32CiRy5bheyV1cgURtuLaPtbKnLpCY+1jWi1VuiAgkXt16udHJRYHEal4jsPg9CCROzRoFG4YCidKlC7wWewViActSlkBM0I+YqHuTg0Bi068R6fw+BGICYhoikGQsUfVhv1AgcZnWyNgNEYgBlkGWQAyw9g6yHDkRiBUsK1kCiV88W4R/sF0okDjMUfZhni6QOJRVnIGYpwskCkWkfayj341AIniArNHyCBGIB4hHiEDMQLzkRCCWsCxkCeT9jDEHsjqzKJBrNVH34X66QC7WxR1I5W6hQEzRrfQKJFJT5H04siiQSy2xB7I69S6Q69TR9+E7QwRihGUrRCBGWG4WCiS5Naw1AdaxBHKVPoVArGMJ5CpdCoFUfk8CuciYQiDOYwnkInUSfVjoFYgpiEmIQExB3CsUiCmISYhA3sSQSB92QgRyiTaVQGa/K4FcYEolELN0gVyhSCUQs3SBXGFJJZDVvVuBWMSyjCWQuCTTh/fHCeQCZTqBOGwikPO16QRinVcg52vSCcTr4wRyvj6dQGyECOR8UzqBeHGDQM43C0Qg3FakE4itdIEIRCACEYhABCIQgQhEIAIRiEAEIhCBCEQgCEQgCASBHMVOukAIcBZLIAQ4zSsQAtwHEQgBbhQKhICE7qR796hAzjdU3moiEG7zXiyBENCl0odvKRTIFbybVyAEJLMRYhtEIFfw/SAC4R2WsSxiCeQSqXz/QelXJRCzdHN0gZilm6MLJB11GoH48gOBXCSNvXT76AIxCTEFEUh8krgS4jKIQK5SprATYhdEIJdJYCek8h3QArlMAgu9FnkFcuEYy21CgZDyGMsISyDGWEZYAolU9Cd6rWEJ5FKR37sdjbAEcqnIb025KyWQi8V9Hss5LIFcbDJFFwiJTtNbvx+BXC3i7wnxtQcCuV7EJxat8QrEI8QDRCAeIR4gArGQZQlLIO8pyr2Qyh6IQCIR5Xa6q7YCiUaEJ7KcwhKIeboZukDS0JuhC4R0BlmjF1YLJK5B1miAJRBua6xgCYSAiE6cLFawBBKfaN5wYotQIKYhJiACSU0bx26Ie+gCiVQUuyF2QARiom6CLpAkXb5faIdQIJayLGAJJNmlrEsLqbzGRCCxF3LhYm9lgVcgCtGHQJJWX7Ud4rtyBJKEizYMJz95gSjEBrpAFOL5IZA3n4ecPFOvzD8EktZa1mL/QyDcNhQnnr9yvkQg6enPmogUzicKJMmJyGJ7UCAEhlknHH/vDK8EEunHfyjL+s7Hs12uXb0a6tL4SyBnr1C1/VQs4z9TjKoLj3CGqbru8VEXP/7n1bh0xTw1rWeNQF6fRrF8/sSPU/CPdPmyS1RjeHG3+evpVS1zoxKBvCiOvhhvPA2qcCLNS8ZZ1fSx63+6zK1Rl0COnm/c+ZCH/5gP/fEb63O5/7FVFVa+BHKk+8+AOw+RYa7OnHw0d4McJ2MtgRz09Nj2938JXwcvD0yku/O/2rSJX80SEcgBeUxbh0fVnQPnRyXS3Tl41WwezxVe8SCQs/L45yHSvj6RO0+PxxbNqsJTRCBPeHhyPQ/3gntqRaua7/3Nf/QAWDVb0hLITnu2wce760PtvHNJ696e5Hf1jj2X0VUSgewaXe08r75h1FJPy6NjrXHesDK7c9d+MRURyOOPj91bF+OWTYahmTdHMhb9lqnC/sPDlfu6AnnQU+dwN56wHdp52fDk2Pgfe2oBwJUrgTzi2Quz26+ID3Xd9NNcdMvy70GW8efpwr5p680z6PbJvfrRpV2BbHbAKxd2jeuHst53PP2A+73uXQnkxD7ubxseqTnkqJdCBHJeHyeOWg47T68QgZzYx4Zd7yMceAzSKEsgG/4eH3ky/eVHOR47CuP1WgK5ev3q70TqVPJQiEDuf+SOv/xXvWqgVc7HX3cfbaoLJOQ198eXFwzu2+4lb4PwJaACCXjZe6zG+dA/zU8eCg7G7FMgkFv6V77BaumPOljeFq98lVDhcyCQr736u9MOeVdCPb/6mxUcfxfI1+OWE77TYyyeWicq5xNe92spSyBfOun7CnZPR+r5pO8cGV0yFMi5E5BPf6LH4tEXHP54a91p/z7TEIF88RE8+WsFx25qtv2lrqduPPkf58yJQD7r1guMSzGFHiZfvQr4lGec3RCB/KlZr1P9vB/VN21b178uUBU/LlBVl/2TDLIEcvoKVlIMsgTyX7MkPg3+fDIE8p95cCWJT7zoRCAXz9DjVtkMEci/i0V6+NvscyGQXxY5WOoVSJRLvBGz1CuQnyzxfs3tQoH80Evha51ABOIB4hEiEA8QjxCBWMI6XikQS1gysJAlEA8QeyEC2cMmuu10gQQUIgge6h0EkrXSMd6wRiBZmyQQtggkazYJbRYKxBTdNF0gpugvmqYLJF+DKbppukBus4tuN10gAa6ib9lNF4gRFsZYAjHCMsYSiBGWdSyBHMQu4TatQLJkl9BeoUACvI/XeSyBBLgqtVUpkAyVPvhb9QLJkLeZbNYJxCIvFnoFYpF3n1og2al97LebBJIdl21NQgRiCnKMSiCmIJiECMQuiJ0QgdgFMQkRyJO8rsFOiEACHMRyHEsgt7lt+6BGIFlxF+RBs0DM0TFLF4g5ulm6QMzRzdIF8gxz9Ee1AsmIo7wPmwSSEa+Me1ghkIx4ocnDFoFkxFn3h1UCyYiz7paxBGIRy2ETgVjEsowlEItYlrEEciIvbLCMJZAAJ7GcxhJIgJNYewwCscrLbbVAcuHDbp1XIFZ5rfMKZBf3bXeZBZIJ92136QSSCWd5bYQIxDaIjRCB7OOw+y6VQDJhn3CfUiB5sE9op1AgAW6D2CkUyG2+GmSnXiBZsJFuK10gATbSbaULJMB9wp0KgWTBSRNnTQQS4MKtQAQS4CiWw1gCEYhABLKPs4pOKwokwFlFgQhEIMerBJIFh3n3EohACBgEIhBuKwWSA9dBBCIQgbxALRCBIJDMA3GhcK9WIAJBIAJBIAIRyNEagQgEgWQeiA+6QAQiEIEIRCACEYhABCIQgQhEIAIRiEAEIhCB2AcRiEAEgqMmGQbiuPtejrtnwZXbvdwozILX/uzktT958GbFnbw4Lg/e7r6Td/PmwRfo7OQLdPLgOwp38h2FNkKwTygQ67xWeQViGcsilkD28S2eu3QCMUvHHF0gTmM5iSUQkxBTEIHsZKvQNqFAAgY7IXZBBBLgQO/DqkEgFnqxyCuQ70pjLCMsgRhjHTjC+hCIdSysYQnkJ3uFdgkFYppuii6QnVshHiGPaAXiEYIHiEB+c21q+xJWLZD8tD74W80fAsmQM70bjR8CMU/n5gCrFYhBFgZYAvnMOxY3WD4Eki1Hsu5PQEqBmIZgAiKQr5QKCWs+BJK11s2QkOlDIJlrFGIBSyAK2aP4EIhAXJ7Sh0CCHOzVh0CMssw/BLJXbbX38/5H41MhkN8GR3v/PF9S+kwI5A+th8jvx8fk8yCQv0xmIj91Hh8C+UpZSOT76Kr1SRDIrcl69lORxeRcIOFEKnkgkMBAa840kaqr/fYFsmXNt8/wlUDjbGoukO0jrWnJq4528EsXyGNDrWZechhsLUVvaCWQvU+SvnjjSpZuag2sBPL0nKSs26bpp3ku3sE89X3T1mVpVCUQEAgIBAQCAgGBgEBAICAQQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQEAggEBAICAQEAgIBAQCAgGBgEBAIAIBgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgEEAgIBgYBAQCAgEBAICAQEAgIBBAICAYGAQEAgIBAQCAgEBAIIBAQCAgGBgEBAICAQEAgIBAQCCAQEAgIBgYBAQCAgEBAICAQQCAgEBAICAYGAQEAgIBAQCAgEEAgIBAQCAgGBgEBAICAQEAgIRCAgEBAICAQEAgIBgYBAQCAgEEAgIBAQCAgEBAICAYGAQEAgIBBAICAQEAgIBAQCAgGBgEBAIIBAQCAgEBAICAQEAgIBgYBAQCCAQEAgIBAQCAgEBAICAYGAQACBgEBAICAQEAgIBAQCAgGBgEAAgYBAQCAgEBAICAQEAgIBgQACAYGAQEAgIBAQCAgEBAICAYEAAgGBgEBAICAQEAgIBAQCAgGBCAQEAgIBgYBAQCAgEBAICAQEAggEBAICAYGAQEAgIBAQCAgEBAIIBAQCAgGBgEBAICAQEAgIBBAICAQEAgIBgYBAQCAgEBAIZB2InwHcVnwDbvqfAAMA8kL8IYrwzMEAAAAASUVORK5CYII="},53:function(e,t,n){"use strict";e.exports=n.p+"static/media/morty-profile-pic.171367061bb0d3918598.jpg"},4855:function(e,t,n){"use strict";e.exports=n.p+"static/media/rick-profile-pic.81f18d455882af73bf54.jpg"},9595:function(e,t,n){"use strict";e.exports=n.p+"static/media/sent-img-icon.fee1337a269e019c8873.png"},9804:function(e,t,n){"use strict";e.exports=n.p+"static/media/snapchat-background.44a04fe5365be3c8e1d9.gif"},7256:function(){},2578:function(){},2980:function(){},4862:function(){},7958:function(){},5410:function(){},8628:function(){},5042:function(){},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var a=n(181),i=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(u){s=!0,a=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw a}}return i}}(e,t)||(0,a.Z)(e,t)||(0,i.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var a=n(9199),i=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,a.Z)(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);function a(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},4147:function(e){"use strict";e.exports=JSON.parse('{"name":"project-yellow-ghost","version":"2.1.0","private":true,"dependencies":{"@babel/preset-env":"^7.16.11","@babel/preset-react":"^7.16.7","@emotion/react":"^11.8.2","@emotion/styled":"^11.8.1","@mui/icons-material":"^5.4.2","@mui/material":"^5.5.1","@tensorflow-models/face-landmarks-detection":"^0.0.3","@tensorflow/tfjs":"^3.14.0","@tensorflow/tfjs-backend-wasm":"^3.14.0","@tensorflow/tfjs-backend-webgl":"^3.14.0","@tensorflow/tfjs-converter":"^3.14.0","@tensorflow/tfjs-core":"^3.14.0","firebase":"^9.6.9","react":"^17.0.2","react-device-detect":"^2.1.2","react-dom":"^17.0.2","react-flippy":"^1.1.0","react-meta-tags":"^1.0.1","react-scripts":"5.0.0","react-swipeable-views":"^0.14.0","react-timeago":"^6.2.1","react-webcam":"^7.0.0","stats.js":"^0.17.0","use-double-tap":"^1.3.3"},"scripts":{"start":"react-scripts start","mac":"HTTPS=true npm start","build":"react-scripts build","eject":"react-scripts eject","test":"jest","test-watch":"jest --watch","version":"npm run build && firebase deploy && git add -A","postversion":"git push && git push --tags"},"eslintConfig":{"extends":["react-app","react-app/jest"]},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"jest":{"setupFiles":["<rootDir>/config/setupTests.js"],"moduleNameMapper":{"\\\\.(css)$":"<rootDir>/mocks/styleMock.js","\\\\.(jpg|png)$":"<rootDir>/mocks/fileMock.js","\\\\.(mp3)$":"<rootDir>/mocks/fileMock.js"}}}')}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.amdD=function(){throw new Error("define cannot be used indirect")},n.amdO={},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,a){if(1&a&&(r=this(r)),8&a)return r;if("object"===typeof r&&r){if(4&a&&r.__esModule)return r;if(16&a&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&a&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(i,o),i}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return he},SDK_VERSION:function(){return Et},_DEFAULT_ENTRY_NAME:function(){return pt},_addComponent:function(){return yt},_addOrOverwriteComponent:function(){return gt},_apps:function(){return vt},_clearComponents:function(){return wt},_components:function(){return mt},_getProvider:function(){return xt},_registerComponent:function(){return bt},_removeServiceInstance:function(){return kt},deleteApp:function(){return At},getApp:function(){return Ct},getApps:function(){return Nt},initializeApp:function(){return It},onLog:function(){return Rt},registerVersion:function(){return Pt},setLogLevel:function(){return Dt}});var t={};n.r(t),n.d(t,{conv2d:function(){return TJ},depthwiseConv2d:function(){return IJ},matMul:function(){return CJ}});var r={};n.r(r),n.d(r,{json:function(){return C0}});var a={};n.r(a),n.d(a,{json:function(){return N0}});var i={};n.r(i),n.d(i,{json:function(){return A0}});var o={};n.r(o),n.d(o,{json:function(){return O0}});var s={};n.r(s),n.d(s,{json:function(){return P0}});var u={};n.r(u),n.d(u,{json:function(){return R0}});var c={};n.r(c),n.d(c,{json:function(){return D0}});var l={};n.r(l),n.d(l,{json:function(){return M0}});var d={};n.r(d),n.d(d,{json:function(){return L0}});var f={};n.r(f),n.d(f,{json:function(){return F0}});var p={};n.r(p),n.d(p,{json:function(){return B0}});var h={};n.r(h),n.d(h,{json:function(){return j0}});var v={};n.r(v),n.d(v,{json:function(){return U0}});var m={};n.r(m),n.d(m,{json:function(){return V0}});var y={};n.r(y),n.d(y,{json:function(){return W0}});var g={};n.r(g),n.d(g,{json:function(){return z0}});var b={};n.r(b),n.d(b,{json:function(){return q0}});var x={};n.r(x),n.d(x,{json:function(){return K0}});var k={};n.r(k),n.d(k,{json:function(){return G0}});var w={};n.r(w),n.d(w,{OP_SCOPE_SUFFIX:function(){return qG},abs:function(){return fZ},acos:function(){return pZ},acosh:function(){return hZ},add:function(){return vZ},addN:function(){return mZ},all:function(){return yZ},any:function(){return gZ},argMax:function(){return bZ},argMin:function(){return xZ},asin:function(){return kZ},asinh:function(){return wZ},atan:function(){return _Z},atan2:function(){return TZ},atanh:function(){return SZ},avgPool:function(){return WZ},avgPool3d:function(){return zZ},basicLSTMCell:function(){return XZ},batchNorm:function(){return JZ},batchNorm2d:function(){return $Z},batchNorm3d:function(){return eY},batchNorm4d:function(){return tY},batchToSpaceND:function(){return QZ},bincount:function(){return nY},booleanMaskAsync:function(){return iJ},broadcastArgs:function(){return rY},broadcastTo:function(){return aY},buffer:function(){return MH},cast:function(){return LH},ceil:function(){return iY},clipByValue:function(){return oY},clone:function(){return FH},complex:function(){return GG},concat:function(){return qZ},concat1d:function(){return sY},concat2d:function(){return uY},concat3d:function(){return cY},concat4d:function(){return lY},conv1d:function(){return fY},conv2d:function(){return dY},conv2dTranspose:function(){return hY},conv3d:function(){return vY},conv3dTranspose:function(){return yY},cos:function(){return gY},cosh:function(){return bY},cosineWindow:function(){return mJ},cumsum:function(){return xY},denseBincount:function(){return kY},depthToSpace:function(){return wY},depthwiseConv2d:function(){return _Y},diag:function(){return TY},dilation2d:function(){return SY},div:function(){return IY},divNoNan:function(){return OY},dot:function(){return PY},dropout:function(){return hJ},einsum:function(){return RY},elu:function(){return DY},enclosingPowerOfTwo:function(){return vJ},equal:function(){return CY},erf:function(){return MY},exp:function(){return LY},expandDims:function(){return FY},expm1:function(){return BY},eye:function(){return UY},fft:function(){return PQ},fill:function(){return VY},floor:function(){return WY},floorDiv:function(){return EY},fused:function(){return t},gather:function(){return zY},gatherND:function(){return pJ},greater:function(){return qY},greaterEqual:function(){return KY},ifft:function(){return RQ},imag:function(){return GY},image:function(){return B$},inTopKAsync:function(){return gJ},irfft:function(){return DQ},isFinite:function(){return HY},isInf:function(){return ZY},isNaN:function(){return YY},leakyRelu:function(){return XY},less:function(){return QY},lessEqual:function(){return JY},linalg:function(){return j$},linspace:function(){return $Y},localResponseNormalization:function(){return eX},log:function(){return tX},log1p:function(){return nX},logSigmoid:function(){return oX},logSoftmax:function(){return lX},logSumExp:function(){return gX},logicalAnd:function(){return bX},logicalNot:function(){return xX},logicalOr:function(){return kX},logicalXor:function(){return wX},losses:function(){return U$},matMul:function(){return KZ},max:function(){return sX},maxPool:function(){return _X},maxPool3d:function(){return TX},maxPoolWithArgmax:function(){return SX},maximum:function(){return EX},mean:function(){return IX},meshgrid:function(){return AX},min:function(){return OX},minimum:function(){return PX},mirrorPad:function(){return RX},mod:function(){return DX},moments:function(){return LX},movingAverage:function(){return cJ},mul:function(){return GZ},multiRNNCell:function(){return FX},multinomial:function(){return BX},neg:function(){return aX},norm:function(){return uJ},notEqual:function(){return jX},oneHot:function(){return UX},ones:function(){return NX},onesLike:function(){return VX},op:function(){return KG},outerProduct:function(){return WX},pad:function(){return zX},pad1d:function(){return qX},pad2d:function(){return KX},pad3d:function(){return GX},pad4d:function(){return HX},pool:function(){return YX},pow:function(){return XX},prelu:function(){return QX},print:function(){return BH},prod:function(){return JX},rand:function(){return $X},randomGamma:function(){return aQ},randomNormal:function(){return iQ},randomUniform:function(){return oQ},range:function(){return sQ},real:function(){return uQ},reciprocal:function(){return cQ},relu:function(){return lQ},relu6:function(){return dQ},reshape:function(){return VZ},reverse:function(){return fQ},reverse1d:function(){return pQ},reverse2d:function(){return hQ},reverse3d:function(){return vQ},reverse4d:function(){return mQ},rfft:function(){return LQ},round:function(){return yQ},rsqrt:function(){return gQ},scalar:function(){return bQ},scatterND:function(){return lJ},selu:function(){return xQ},separableConv2d:function(){return kQ},setdiff1dAsync:function(){return _Q},sigmoid:function(){return HZ},sign:function(){return TQ},signal:function(){return F$},sin:function(){return SQ},sinh:function(){return EQ},slice:function(){return ZZ},slice1d:function(){return IQ},slice2d:function(){return CQ},slice3d:function(){return NQ},slice4d:function(){return AQ},softmax:function(){return OQ},softplus:function(){return iX},spaceToBatchND:function(){return ZX},sparse:function(){return V$},sparseToDense:function(){return fJ},spectral:function(){return L$},split:function(){return MQ},sqrt:function(){return FQ},square:function(){return MX},squaredDifference:function(){return BQ},squeeze:function(){return jQ},stack:function(){return UQ},step:function(){return VQ},stridedSlice:function(){return WQ},string:function(){return W$},sub:function(){return uX},sum:function(){return cX},tan:function(){return zQ},tanh:function(){return YZ},tensor:function(){return ZG},tensor1d:function(){return qQ},tensor2d:function(){return KQ},tensor3d:function(){return $H},tensor4d:function(){return GQ},tensor5d:function(){return HQ},tensor6d:function(){return ZQ},tile:function(){return jY},topk:function(){return YQ},transpose:function(){return oJ},truncatedNormal:function(){return XQ},unique:function(){return QQ},unsortedSegmentSum:function(){return JQ},unstack:function(){return $Q},variable:function(){return eJ},where:function(){return NY},whereAsync:function(){return rJ},zeros:function(){return CX},zerosLike:function(){return AY}});var _=n(2791),T=n.t(_,2),S=n(4164),E=n(4942);function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function P(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function D(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){if(t&&("object"===M(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function F(e){var t=D();return function(){var n,r=R(e);if(t){var a=R(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return L(this,n)}}function B(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(Cd){return void n(Cd)}s.done?t(u):Promise.resolve(u).then(r,a)}function j(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){B(i,r,a,o,s,"next",e)}function s(e){B(i,r,a,o,s,"throw",e)}o(void 0)}))}}var U=n(181);function V(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,U.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}var W=n(9439);function z(e,t,n){return z=D()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&O(a,n.prototype),a},z.apply(null,arguments)}function q(e){var t="function"===typeof Map?new Map:void 0;return q=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return z(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),O(n,e)},q(e)}var K=n(7757),G=n.n(K),H=!1,Z=!1,Y="${JSCORE_VERSION}",X=function(e,t){if(!e)throw Q(t)},Q=function(e){return new Error("Firebase Database ("+Y+") INTERNAL ASSERT FAILED: "+e)},J=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},$={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],a=0;a<e.length;a+=3){var i=e[a],o=a+1<e.length,s=o?e[a+1]:0,u=a+2<e.length,c=u?e[a+2]:0,l=i>>2,d=(3&i)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,o||(f=64)),r.push(n[l],n[d],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(J(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){var i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){var o=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],a=0;a<e.length;){var i=n[e.charAt(a++)],o=a<e.length?n[e.charAt(a)]:0,s=++a<e.length?n[e.charAt(a)]:64,u=++a<e.length?n[e.charAt(a)]:64;if(++a,null==i||null==o||null==s||null==u)throw Error();var c=i<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var d=s<<6&192|u;r.push(d)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},ee=function(e){var t=J(e);return $.encodeByteArray(t,!0)},te=function(e){return ee(e).replace(/\./g,"")},ne=function(e){try{return $.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function re(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=re(e[n],t[n]));return e}var ae=function(){function e(){var t=this;I(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return N(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ie(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var i=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(i)),""].join(".")}function oe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function se(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oe())}function ue(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function ce(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function le(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function de(){var e=oe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function fe(){return!0===H||!0===Z}function pe(){return"object"===typeof indexedDB}var he=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this,r)).code=e,i.customData=a,i.name="FirebaseError",Object.setPrototypeOf(A(i),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(A(i),ve.prototype.create),i}return N(n)}(q(Error)),ve=function(){function e(t,n,r){I(this,e),this.service=t,this.serviceName=n,this.errors=r}return N(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?me(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,")."),o=new he(n,i,t);return o}}]),e}();function me(e,t){return e.replace(ye,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var ye=/\{\$([^}]+)}/g;function ge(e){return JSON.parse(e)}function be(e){return JSON.stringify(e)}var xe=function(e){var t={},n={},r={},a="";try{var i=e.split(".");t=ge(ne(i[0])||""),n=ge(ne(i[1])||""),a=i[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:a}};function ke(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function we(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function _e(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Te(e,t,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=t.call(n,e[a],a,e));return r}function Se(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),a=0,i=n;a<i.length;a++){var o=i[a];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Ee(s)&&Ee(u)){if(!Se(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var d=l[c];if(!n.includes(d))return!1}return!0}function Ee(e){return null!==e&&"object"===typeof e}function Ie(e){for(var t=[],n=function(){var e=(0,W.Z)(a[r],2),n=e[0],i=e[1];Array.isArray(i)?i.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function Ce(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,W.Z)(n,2),a=r[0],i=r[1];t[decodeURIComponent(a)]=decodeURIComponent(i)}})),t}function Ne(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ae=function(){function e(){I(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return N(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var a=0;a<16;a++)n[a]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var i=16;i<80;i++){var o=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],d=this.chain_[2],f=this.chain_[3],p=this.chain_[4],h=0;h<80;h++){h<40?h<20?(s=f^l&(d^f),u=1518500249):(s=l^d^f,u=1859775393):h<60?(s=l&d|f&(l|d),u=2400959708):(s=l^d^f,u=3395469782);var v=(c<<5|c>>>27)+s+p+u+n[h]&4294967295;p=f,f=d,d=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,a=this.buf_,i=this.inbuf_;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(a[i]=e.charCodeAt(r),++r,++i===this.blockSize){this.compress_(a),i=0;break}}else for(;r<t;)if(a[i]=e[r],++r,++i===this.blockSize){this.compress_(a),i=0;break}}this.inbuf_=i,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,a=0;a<5;a++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[a]>>i&255,++r;return e}}]),e}();function Oe(e,t){var n=new Pe(e,t);return n.subscribe.bind(n)}var Pe=function(){function e(t,n){var r=this;I(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return N(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,a=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=V(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in e&&"function"===typeof e[a])return!0}}catch(i){r.e(i)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Re),void 0===r.error&&(r.error=Re),void 0===r.complete&&(r.complete=Re);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{a.finalError?r.error(a.finalError):r.complete()}catch(e){}})),this.observers.push(r),i}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Re(){}var De=function(e,t,n,r){var a;if(r<t?a="at least "+t:r>n&&(a=0===n?"none":"no more than "+n),a)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+a+".")};function Me(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Le(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(Me(e,t)+"must be a valid function.")}function Fe(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(Me(e,t)+"must be a valid context object.")}var Be=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function je(e){return e&&e._delegate?e._delegate:e}function Ue(e,t){return new Promise((function(n,r){e.onsuccess=function(e){n(e.target.result)},e.onerror=function(e){var n;r("".concat(t,": ").concat(null===(n=e.target.error)||void 0===n?void 0:n.message))}}))}var Ve=function(){function e(t){I(this,e),this._db=t,this.objectStoreNames=this._db.objectStoreNames}return N(e,[{key:"transaction",value:function(e,t){return new We(this._db.transaction.call(this._db,e,t))}},{key:"createObjectStore",value:function(e,t){return new ze(this._db.createObjectStore(e,t))}},{key:"close",value:function(){this._db.close()}}]),e}(),We=function(){function e(t){var n=this;I(this,e),this._transaction=t,this.complete=new Promise((function(e,t){n._transaction.oncomplete=function(){e()},n._transaction.onerror=function(){t(n._transaction.error)},n._transaction.onabort=function(){t(n._transaction.error)}}))}return N(e,[{key:"objectStore",value:function(e){return new ze(this._transaction.objectStore(e))}}]),e}(),ze=function(){function e(t){I(this,e),this._store=t}return N(e,[{key:"index",value:function(e){return new qe(this._store.index(e))}},{key:"createIndex",value:function(e,t,n){return new qe(this._store.createIndex(e,t,n))}},{key:"get",value:function(e){return Ue(this._store.get(e),"Error reading from IndexedDB")}},{key:"put",value:function(e,t){return Ue(this._store.put(e,t),"Error writing to IndexedDB")}},{key:"delete",value:function(e){return Ue(this._store.delete(e),"Error deleting from IndexedDB")}},{key:"clear",value:function(){return Ue(this._store.clear(),"Error clearing IndexedDB object store")}}]),e}(),qe=function(){function e(t){I(this,e),this._index=t}return N(e,[{key:"get",value:function(e){return Ue(this._index.get(e),"Error reading from IndexedDB")}}]),e}();function Ke(e,t,n){return new Promise((function(r,a){try{var i=indexedDB.open(e,t);i.onsuccess=function(e){r(new Ve(e.target.result))},i.onerror=function(e){var t;a("Error opening indexedDB: ".concat(null===(t=e.target.error)||void 0===t?void 0:t.message))},i.onupgradeneeded=function(e){n(new Ve(i.result),e.oldVersion,e.newVersion,new We(i.transaction))}}catch(o){a("Error opening indexedDB: ".concat(o.message))}}))}function Ge(e){return He.apply(this,arguments)}function He(){return He=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var r=indexedDB.deleteDatabase(t);r.onsuccess=function(){e()},r.onerror=function(e){var r;n('Error deleting indexedDB database "'.concat(t,'": ').concat(null===(r=e.target.error)||void 0===r?void 0:r.message))}}catch(a){n('Error deleting indexedDB database "'.concat(t,'": ').concat(a.message))}})));case 1:case"end":return e.stop()}}),e)}))),He.apply(this,arguments)}var Ze=n(3433),Ye=function(){function e(t,n,r){I(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return N(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Xe="[DEFAULT]",Qe=function(){function e(t,n){I(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return N(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ae;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(a){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Xe})}catch(u){}var t,n=V(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,W.Z)(t.value,2),a=r[0],i=r[1],o=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:o});i.resolve(s)}catch(u){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=j(K.mark((function e(){var t;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,Ze.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,Ze.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,i=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=V(this.instancesDeferred.entries());try{for(o.s();!(a=o.n()).done;){var s=(0,W.Z)(a.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);r===l&&c.resolve(i)}}catch(d){o.e(d)}finally{o.f()}return i}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);var i=this.instances.get(r);return i&&e(i,r),function(){a.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{i(e,t)}catch(lA){}}}catch(o){a.e(o)}finally{a.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,a=void 0===r?{}:r,i=this.instances.get(n);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Xe?void 0:t),options:a}),this.instances.set(n,i),this.instancesOptions.set(n,a),this.invokeOnInitCallbacks(i,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,i)}catch(lA){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;return this.component?this.component.multipleInstances?e:Xe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Je,$e,et=function(){function e(t){I(this,e),this.name=t,this.providers=new Map}return N(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Qe(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),tt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}($e||($e={}));var nt,rt,at={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},it=$e.INFO,ot=(Je={},(0,E.Z)(Je,$e.DEBUG,"log"),(0,E.Z)(Je,$e.VERBOSE,"log"),(0,E.Z)(Je,$e.INFO,"info"),(0,E.Z)(Je,$e.WARN,"warn"),(0,E.Z)(Je,$e.ERROR,"error"),Je),st=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ot[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a,i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];(a=console)[r].apply(a,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ut=function(){function e(t){I(this,e),this.name=t,this._logLevel=it,this._logHandler=st,this._userLogHandler=null,tt.push(this)}return N(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in $e))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?at[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$e.DEBUG].concat(t)),this._logHandler.apply(this,[this,$e.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$e.VERBOSE].concat(t)),this._logHandler.apply(this,[this,$e.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$e.INFO].concat(t)),this._logHandler.apply(this,[this,$e.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$e.WARN].concat(t)),this._logHandler.apply(this,[this,$e.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,$e.ERROR].concat(t)),this._logHandler.apply(this,[this,$e.ERROR].concat(t))}}]),e}();var ct=function(){function e(t){I(this,e),this.container=t}return N(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var lt="@firebase/app",dt="0.7.19",ft=new ut("@firebase/app"),pt="[DEFAULT]",ht=(nt={},(0,E.Z)(nt,lt,"fire-core"),(0,E.Z)(nt,"@firebase/app-compat","fire-core-compat"),(0,E.Z)(nt,"@firebase/analytics","fire-analytics"),(0,E.Z)(nt,"@firebase/analytics-compat","fire-analytics-compat"),(0,E.Z)(nt,"@firebase/app-check","fire-app-check"),(0,E.Z)(nt,"@firebase/app-check-compat","fire-app-check-compat"),(0,E.Z)(nt,"@firebase/auth","fire-auth"),(0,E.Z)(nt,"@firebase/auth-compat","fire-auth-compat"),(0,E.Z)(nt,"@firebase/database","fire-rtdb"),(0,E.Z)(nt,"@firebase/database-compat","fire-rtdb-compat"),(0,E.Z)(nt,"@firebase/functions","fire-fn"),(0,E.Z)(nt,"@firebase/functions-compat","fire-fn-compat"),(0,E.Z)(nt,"@firebase/installations","fire-iid"),(0,E.Z)(nt,"@firebase/installations-compat","fire-iid-compat"),(0,E.Z)(nt,"@firebase/messaging","fire-fcm"),(0,E.Z)(nt,"@firebase/messaging-compat","fire-fcm-compat"),(0,E.Z)(nt,"@firebase/performance","fire-perf"),(0,E.Z)(nt,"@firebase/performance-compat","fire-perf-compat"),(0,E.Z)(nt,"@firebase/remote-config","fire-rc"),(0,E.Z)(nt,"@firebase/remote-config-compat","fire-rc-compat"),(0,E.Z)(nt,"@firebase/storage","fire-gcs"),(0,E.Z)(nt,"@firebase/storage-compat","fire-gcs-compat"),(0,E.Z)(nt,"@firebase/firestore","fire-fst"),(0,E.Z)(nt,"@firebase/firestore-compat","fire-fst-compat"),(0,E.Z)(nt,"fire-js","fire-js"),(0,E.Z)(nt,"firebase","fire-js-all"),nt),vt=new Map,mt=new Map;function yt(e,t){try{e.container.addComponent(t)}catch(n){ft.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function gt(e,t){e.container.addOrOverwriteComponent(t)}function bt(e){var t=e.name;if(mt.has(t))return ft.debug("There were multiple attempts to register component ".concat(t,".")),!1;mt.set(t,e);var n,r=V(vt.values());try{for(r.s();!(n=r.n()).done;){yt(n.value,e)}}catch(a){r.e(a)}finally{r.f()}return!0}function xt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pt;xt(e,t).clearInstance(n)}function wt(){mt.clear()}var _t=(rt={},(0,E.Z)(rt,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,E.Z)(rt,"bad-app-name","Illegal App name: '{$appName}"),(0,E.Z)(rt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,E.Z)(rt,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,E.Z)(rt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,E.Z)(rt,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,E.Z)(rt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,E.Z)(rt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,E.Z)(rt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,E.Z)(rt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),rt),Tt=new ve("app","Firebase",_t),St=function(){function e(t,n,r){var a=this;I(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ye("app",(function(){return a}),"PUBLIC"))}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Tt.create("app-deleted",{appName:this._name})}}]),e}(),Et="9.6.9";function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:pt,automaticDataCollectionEnabled:!1},t),a=r.name;if("string"!==typeof a||!a)throw Tt.create("bad-app-name",{appName:String(a)});var i=vt.get(a);if(i){if(Se(e,i.options)&&Se(r,i.config))return i;throw Tt.create("duplicate-app",{appName:a})}var o,s=new et(a),u=V(mt.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(d){u.e(d)}finally{u.f()}var l=new St(e,r,s);return vt.set(a,l),l}function Ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=vt.get(e);if(!t)throw Tt.create("no-app",{appName:e});return t}function Nt(){return Array.from(vt.values())}function At(e){return Ot.apply(this,arguments)}function Ot(){return Ot=j(K.mark((function e(t){var n;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!vt.has(n)){e.next=6;break}return vt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Ot.apply(this,arguments)}function Pt(e,t,n){var r,a=null!==(r=ht[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));var i=a.match(/\s|\//),o=t.match(/\s|\//);if(i||o){var s=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&s.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ft.warn(s.join(" "))}bt(new Ye("".concat(a,"-version"),(function(){return{library:a,version:t}}),"VERSION"))}function Rt(e,t){if(null!==e&&"function"!==typeof e)throw Tt.create("invalid-log-argument");!function(e,t){var n,r=V(tt);try{var a=function(){var r=n.value,a=null;t&&t.level&&(a=at[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==a&&void 0!==a?a:t.logLevel)&&e({level:$e[n].toLowerCase(),message:s,args:i,type:t.name})}};for(r.s();!(n=r.n()).done;)a()}catch(i){r.e(i)}finally{r.f()}}(e,t)}function Dt(e){var t;t=e,tt.forEach((function(e){e.setLogLevel(t)}))}var Mt="firebase-heartbeat-store",Lt=null;function Ft(){return Lt||(Lt=Ke("firebase-heartbeat-database",1,(function(e,t){if(0===t)e.createObjectStore(Mt)})).catch((function(e){throw Tt.create("storage-open",{originalErrorMessage:e.message})}))),Lt}function Bt(e){return jt.apply(this,arguments)}function jt(){return jt=j(K.mark((function e(t){var n;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ft();case 3:return n=e.sent,e.abrupt("return",n.transaction(Mt).objectStore(Mt).get(Wt(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Tt.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),jt.apply(this,arguments)}function Ut(e,t){return Vt.apply(this,arguments)}function Vt(){return Vt=j(K.mark((function e(t,n){var r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ft();case 3:return r=e.sent,a=r.transaction(Mt,"readwrite"),i=a.objectStore(Mt),e.next=8,i.put(n,Wt(t));case 8:return e.abrupt("return",a.complete);case 11:throw e.prev=11,e.t0=e.catch(0),Tt.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Vt.apply(this,arguments)}function Wt(e){return"".concat(e.name,"!").concat(e.options.appId)}var zt=function(){function e(t){var n=this;I(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Zt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return N(e,[{key:"triggerHeartbeat",value:function(){var e=j(K.mark((function e(){var t,n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=qt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=j(K.mark((function e(){var t,n,r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=qt(),n=Kt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,a=n.unsentEntries,i=te(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(a.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=a,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function qt(){return(new Date).toISOString().substring(0,10)}function Kt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],a=e.slice(),i=V(e);try{var o=function(){var e=t.value,i=r.find((function(t){return t.agent===e.agent}));if(i){if(i.dates.push(e.date),Yt(r)>n)return i.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Yt(r)>n)return r.pop(),"break";a=a.slice(1)};for(i.s();!(t=i.n()).done;){var s=o();if("break"===s)break}}catch(u){i.e(u)}finally{i.f()}return{heartbeatsToSend:r,unsentEntries:a}}var Gt,Ht,Zt=function(){function e(t){I(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return N(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=j(K.mark((function e(){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=function(){a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=function(){n=!1},a.onerror=function(){var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(Cd){t(Cd)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=j(K.mark((function e(){var t;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Bt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=j(K.mark((function e(t){var n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=j(K.mark((function e(t){var n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Ut(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,Ze.Z)(r.heartbeats),(0,Ze.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Yt(e){return te(JSON.stringify({version:2,heartbeats:e})).length}Gt="",bt(new Ye("platform-logger",(function(e){return new ct(e)}),"PRIVATE")),bt(new Ye("heartbeat",(function(e){return new zt(e)}),"PRIVATE")),Pt(lt,dt,Gt),Pt(lt,dt,"esm2017"),Pt("fire-js","");var Xt=function(){function e(t,n){var r=this;I(this,e),this._delegate=t,this.firebase=n,yt(t,new Ye("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),At(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){yt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){gt(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Qt=(Ht={},(0,E.Z)(Ht,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,E.Z)(Ht,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ht),Jt=new ve("app-compat","Firebase",Qt);var $t=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var a=It(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ke(n,a.name))return n[a.name];var i=new t(a,r);return n[a.name]=i,i},app:a,registerVersion:Pt,setLogLevel:Dt,onLog:Rt,apps:null,SDK_VERSION:Et,INTERNAL:{registerComponent:function(e){var n=e.name,i=n.replace("-compat","");if(bt(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a();if("function"!==typeof e[i])throw Jt.create("invalid-app-argument",{appName:n});return e[i]()};void 0!==e.serviceProps&&re(o,e.serviceProps),r[i]=o,t.prototype[i]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return t.apply(this,e.multipleInstances?a:[])}}return"PUBLIC"===e.type?r[i]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function a(e){if(!ke(n,e=e||pt))throw Jt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),a.App=t,r}(Xt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){re(n,e)},createSubscribe:Oe,ErrorFactory:ve,deepExtend:re}),n}(),en=new ut("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){en.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var tn=self.firebase.SDK_VERSION;tn&&tn.indexOf("LITE")>=0&&en.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var nn=$t;!function(e){Pt("@firebase/app-compat","0.1.20",e)}();nn.registerVersion("firebase","9.6.9","app-compat");var rn=n(3878),an=n(9199),on=n(5267);function sn(e){return(0,rn.Z)(e)||(0,an.Z)(e)||(0,U.Z)(e)||(0,on.Z)()}function un(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}function cn(){return cn="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=un(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},cn.apply(this,arguments)}function ln(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}Object.create;var dn;Object.create;var fn="facebook.com",pn="github.com",hn="google.com",vn="password",mn="twitter.com",yn="EMAIL_SIGNIN",gn="PASSWORD_RESET",bn="RECOVER_EMAIL",xn="REVERT_SECOND_FACTOR_ADDITION",kn="VERIFY_AND_CHANGE_EMAIL",wn="VERIFY_EMAIL";function _n(){return(0,E.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Tn=function(){var e;return e={},(0,E.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,E.Z)(e,"argument-error",""),(0,E.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,E.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,E.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,E.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,E.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,E.Z)(e,"cors-unsupported","This browser is not supported."),(0,E.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,E.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,E.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,E.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,E.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,E.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,E.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,E.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,E.Z)(e,"expired-action-code","The action code has expired."),(0,E.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,E.Z)(e,"internal-error","An internal AuthError has occurred."),(0,E.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,E.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,E.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,E.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,E.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,E.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,E.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,E.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,E.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,E.Z)(e,"invalid-email","The email address is badly formatted."),(0,E.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,E.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,E.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,E.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,E.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,E.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,E.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,E.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,E.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,E.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,E.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,E.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,E.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,E.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,E.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,E.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,E.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,E.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,E.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,E.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,E.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,E.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,E.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,E.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,E.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,E.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,E.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,E.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,E.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,E.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,E.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,E.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,E.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,E.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,E.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,E.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,E.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,E.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,E.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,E.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,E.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,E.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,E.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,E.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,E.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,E.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,E.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,E.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,E.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,E.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,E.Z)(e,"timeout","The operation has timed out."),(0,E.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,E.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,E.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,E.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,E.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,E.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,E.Z)(e,"unverified-email","The operation requires a verified email."),(0,E.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,E.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,E.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,E.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,E.Z)(e,"user-signed-out",""),(0,E.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,E.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,E.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Sn=_n,En=new ve("auth","Firebase",_n()),In=new ut("@firebase/auth");function Cn(e){if(In.logLevel<=$e.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];In.error.apply(In,["Auth (".concat(Et,"): ").concat(e)].concat(n))}}function Nn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Rn.apply(void 0,[e].concat(n))}function An(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rn.apply(void 0,[e].concat(n))}function On(e,t,n){var r=Object.assign(Object.assign({},Sn()),(0,E.Z)({},t,n));return new ve("auth","Firebase",r).create(t,{appName:e.name})}function Pn(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Nn(e,"argument-error"),On(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Rn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var a,i=n[0],o=(0,Ze.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(a=e._errorFactory).create.apply(a,[i].concat((0,Ze.Z)(o)))}return En.create.apply(En,[e].concat(n))}function Dn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw Rn.apply(void 0,[t].concat(r))}}function Mn(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Cn(t),new Error(t)}function Ln(e,t){e||Mn(t)}var Fn=new Map;function Bn(e){Ln(e instanceof Function,"Expected a class definition");var t=Fn.get(e);return t?(Ln(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fn.set(e,t),t)}function jn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Un(){return"http:"===Vn()||"https:"===Vn()}function Vn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Wn=function(){function e(t,n){I(this,e),this.shortDelay=t,this.longDelay=n,Ln(n>t,"Short delay should be less than long delay!"),this.isMobile=se()||le()}return N(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Un()||ce()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function zn(e,t){Ln(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var qn=function(){function e(){I(this,e)}return N(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Kn=(dn={},(0,E.Z)(dn,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,E.Z)(dn,"MISSING_CUSTOM_TOKEN","internal-error"),(0,E.Z)(dn,"INVALID_IDENTIFIER","invalid-email"),(0,E.Z)(dn,"MISSING_CONTINUE_URI","internal-error"),(0,E.Z)(dn,"INVALID_PASSWORD","wrong-password"),(0,E.Z)(dn,"MISSING_PASSWORD","internal-error"),(0,E.Z)(dn,"EMAIL_EXISTS","email-already-in-use"),(0,E.Z)(dn,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,E.Z)(dn,"INVALID_IDP_RESPONSE","invalid-credential"),(0,E.Z)(dn,"INVALID_PENDING_TOKEN","invalid-credential"),(0,E.Z)(dn,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,E.Z)(dn,"MISSING_REQ_TYPE","internal-error"),(0,E.Z)(dn,"EMAIL_NOT_FOUND","user-not-found"),(0,E.Z)(dn,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,E.Z)(dn,"EXPIRED_OOB_CODE","expired-action-code"),(0,E.Z)(dn,"INVALID_OOB_CODE","invalid-action-code"),(0,E.Z)(dn,"MISSING_OOB_CODE","internal-error"),(0,E.Z)(dn,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,E.Z)(dn,"INVALID_ID_TOKEN","invalid-user-token"),(0,E.Z)(dn,"TOKEN_EXPIRED","user-token-expired"),(0,E.Z)(dn,"USER_NOT_FOUND","user-token-expired"),(0,E.Z)(dn,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,E.Z)(dn,"INVALID_CODE","invalid-verification-code"),(0,E.Z)(dn,"INVALID_SESSION_INFO","invalid-verification-id"),(0,E.Z)(dn,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,E.Z)(dn,"MISSING_SESSION_INFO","missing-verification-id"),(0,E.Z)(dn,"SESSION_EXPIRED","code-expired"),(0,E.Z)(dn,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,E.Z)(dn,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,E.Z)(dn,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,E.Z)(dn,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,E.Z)(dn,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,E.Z)(dn,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,E.Z)(dn,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,E.Z)(dn,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,E.Z)(dn,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,E.Z)(dn,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,E.Z)(dn,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),dn),Gn=new Wn(3e4,6e4);function Hn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zn(e,t,n,r){return Yn.apply(this,arguments)}function Yn(){return Yn=j(G().mark((function e(t,n,r,a){var i,o=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Xn(t,i,j(G().mark((function e(){var i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},o={},a&&("GET"===n?o=a:i={body:JSON.stringify(a)}),s=Ie(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",qn.fetch()(er(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},i)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Yn.apply(this,arguments)}function Xn(e,t,n){return Qn.apply(this,arguments)}function Qn(){return Qn=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},Kn),n),e.prev=2,i=new tr(t),e.next=6,Promise.race([r(),i.promise]);case 6:return o=e.sent,i.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw nr(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,c=u.split(" : "),l=(0,W.Z)(c,2),d=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw nr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=25;break}throw nr(t,"email-already-in-use",s);case 25:if(p=a[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=30;break}throw On(t,p,f);case 30:Nn(t,p);case 31:e.next=38;break;case 33:if(e.prev=33,e.t0=e.catch(2),!(e.t0 instanceof he)){e.next=37;break}throw e.t0;case 37:Nn(t,"network-request-failed");case 38:case"end":return e.stop()}}),e,null,[[2,33]])}))),Qn.apply(this,arguments)}function Jn(e,t,n,r){return $n.apply(this,arguments)}function $n(){return $n=j(G().mark((function e(t,n,r,a){var i,o,s=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Zn(t,n,r,a,i);case 3:return"mfaPendingCredential"in(o=e.sent)&&Nn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),$n.apply(this,arguments)}function er(e,t,n,r){var a="".concat(t).concat(n,"?").concat(r);return e.config.emulator?zn(e.config,a):"".concat(e.config.apiScheme,"://").concat(a)}var tr=function(){function e(t){var n=this;I(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(An(n.auth,"network-request-failed"))}),Gn.get())}))}return N(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function nr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var a=An(e,t,r);return a.customData._tokenResponse=n,a}function rr(e,t){return ar.apply(this,arguments)}function ar(){return ar=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}function ir(e,t){return or.apply(this,arguments)}function or(){return or=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function sr(e,t){return ur.apply(this,arguments)}function ur(){return ur=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ur.apply(this,arguments)}function cr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function lr(){return lr=j(G().mark((function e(t){var n,r,a,i,o,s,u=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=je(t),e.next=4,r.getIdToken(n);case 4:return a=e.sent,Dn((i=fr(a))&&i.exp&&i.auth_time&&i.iat,r.auth,"internal-error"),o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:i,token:a,authTime:cr(dr(i.auth_time)),issuedAtTime:cr(dr(i.iat)),expirationTime:cr(dr(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),lr.apply(this,arguments)}function dr(e){return 1e3*Number(e)}function fr(e){var t=e.split("."),n=(0,W.Z)(t,3),r=n[0],a=n[1],i=n[2];if(void 0===r||void 0===a||void 0===i)return Cn("JWT malformed, contained fewer than 3 sections"),null;try{var o=ne(a);return o?JSON.parse(o):(Cn("Failed to decode base64 JWT payload"),null)}catch(s){return Cn("Caught error parsing JWT payload as JSON",s),null}}function pr(e,t){return hr.apply(this,arguments)}function hr(){return hr=j(G().mark((function e(t,n){var r=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof he&&vr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),hr.apply(this,arguments)}function vr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var mr=function(){function e(t){I(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return N(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),yr=function(){function e(t,n){I(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return N(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function gr(e){return br.apply(this,arguments)}function br(){return br=j(G().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,e.next=6,pr(t,sr(r,{idToken:a}));case 6:Dn(null===(i=e.sent)||void 0===i?void 0:i.users.length,r,"internal-error"),o=i.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?wr(o.providerUserInfo):[],u=kr(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),d=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new yr(o.createdAt,o.lastLoginAt),isAnonymous:d},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),br.apply(this,arguments)}function xr(){return(xr=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=je(t),e.next=3,gr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,Ze.Z)(n),(0,Ze.Z)(t))}function wr(e){return e.map((function(e){var t=e.providerId,n=ln(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function _r(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xn(t,{},j(G().mark((function e(){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ie({grant_type:"refresh_token",refresh_token:n}).slice(1),a=t.config,i=a.tokenApiHost,o=a.apiKey,s=er(t,i,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",qn.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}var Sr=function(){function e(){I(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return N(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Dn(e.idToken,"internal-error"),Dn("undefined"!==typeof e.idToken,"internal-error"),Dn("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=fr(e);return Dn(t,"internal-error"),Dn("undefined"!==typeof t.exp,"internal-error"),Dn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=j(G().mark((function e(t){var n,r=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Dn(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(t,n);case 2:r=e.sent,a=r.accessToken,i=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(a,i,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Mn("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,a=n.accessToken,i=n.expirationTime,o=new e;return r&&(Dn("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),a&&(Dn("string"===typeof a,"internal-error",{appName:t}),o.accessToken=a),i&&(Dn("number"===typeof i,"internal-error",{appName:t}),o.expirationTime=i),o}}]),e}();function Er(e,t){Dn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ir=function(){function e(t){I(this,e);var n=t.uid,r=t.auth,a=t.stsTokenManager,i=ln(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?(0,Ze.Z)(i.providerData):[],this.metadata=new yr(i.createdAt||void 0,i.lastLoginAt||void 0)}return N(e,[{key:"getIdToken",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Dn(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return lr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return xr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Dn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Dn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=j(G().mark((function e(t){var n,r,a=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]&&a[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,gr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,pr(this,rr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,a,i,o,s,u,c,l,d=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(a=n.email)&&void 0!==a?a:void 0,p=null!==(i=n.phoneNumber)&&void 0!==i?i:void 0,h=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,x=n.emailVerified,k=n.isAnonymous,w=n.providerData,_=n.stsTokenManager;Dn(b&&_,t,"internal-error");var T=Sr.fromJSON(this.name,_);Dn("string"===typeof b,t,"internal-error"),Er(d,t.name),Er(f,t.name),Dn("boolean"===typeof x,t,"internal-error"),Dn("boolean"===typeof k,t,"internal-error"),Er(p,t.name),Er(h,t.name),Er(v,t.name),Er(m,t.name),Er(y,t.name),Er(g,t.name);var S=new e({uid:b,auth:t,email:f,emailVerified:x,displayName:d,isAnonymous:k,photoURL:h,phoneNumber:p,tenantId:v,stsTokenManager:T,createdAt:y,lastLoginAt:g});return w&&Array.isArray(w)&&(S.providerData=w.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=j(G().mark((function t(n,r){var a,i,o,s=arguments;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=s.length>2&&void 0!==s[2]&&s[2],(i=new Sr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:i,isAnonymous:a}),t.next=6,gr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Cr=function(){function e(){I(this,e),this.type="NONE",this.storage={}}return N(e,[{key:"_isAvailable",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Cr.type="NONE";var Nr=Cr;function Ar(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Or=function(){function e(t,n,r){I(this,e),this.persistence=t,this.auth=n,this.userKey=r;var a=this.auth,i=a.config,o=a.name;this.fullUserKey=Ar(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ar("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return N(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ir._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=j(G().mark((function t(n,r){var a,i,o,s,u,c,l,d,f,p,h,v=arguments;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Bn(Nr),n,a));case 3:return t.next=5,Promise.all(r.map(function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:i=t.sent.filter((function(e){return e})),o=i[0]||Bn(Nr),s=Ar(a,n.config.apiKey,n.name),u=null,c=V(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return d=l.value,t.prev=14,t.next=17,d._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return p=Ir._fromJSON(n,f),d!==o&&(u=p),o=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(h=i.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&h.length){t.next=40;break}return t.abrupt("return",new e(o,n,a));case 40:if(o=h[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,a));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Pr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Lr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Br(t))return"Blackberry";if(jr(t))return"Webos";if(Dr(t))return"Safari";if((t.includes("chrome/")||Mr(t))&&!t.includes("edge/"))return"Chrome";if(Fr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/firefox\//i.test(e)}function Dr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Mr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/crios\//i.test(e)}function Lr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/iemobile/i.test(e)}function Fr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/android/i.test(e)}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/blackberry/i.test(e)}function jr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/webos/i.test(e)}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/iphone|ipad|ipod/i.test(e)}function Vr(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return Ur(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function Wr(){return de()&&10===document.documentMode}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return Ur(e)||Fr(e)||jr(e)||Br(e)||/windows phone/i.test(e)||Lr(e)}function qr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pr(oe());break;case"Worker":t="".concat(Pr(oe()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Et,"/").concat(r)}var Kr=function(){function e(t,n,r){I(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hr(this),this.idTokenSubscription=new Hr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=En,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return N(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Bn(t)),this._initializationPromise=this.queue(j(G().mark((function r(){var a,i;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Or.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(a=n._popupRedirectResolver)||void 0===a?void 0:a._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,!t||!this.config.authDomain){e.next=12;break}return e.next=6,this.getOrInitRedirectPersistenceManager();case 6:return a=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,e.next=10,this.tryRedirectSignIn(t);case 10:o=e.sent,a&&a!==i||!(null===o||void 0===o?void 0:o.user)||(r=o.user);case 12:if(r){e.next=14;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 14:if(r._redirectEventId){e.next=16;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 16:return Dn(this._popupRedirectResolver,this,"argument-error"),e.next=19,this.getOrInitRedirectPersistenceManager();case 19:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=21;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 21:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?je(t):null)&&Dn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return t&&Dn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e.abrupt("return",this.queue(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.directlySetCurrentUser(t);case 2:n.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=3;break}return e.next=3,this._setRedirectUser(null);case 3:return e.abrupt("return",this._updateCurrentUser(null));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Bn(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new ve("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Dn(n=t&&Bn(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Or.create(this,[Bn(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var a=this;if(this._deleted)return function(){};var i="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Dn(o,this,"internal-error"),o.then((function(){return i(a.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Dn(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=j(G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,E.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Gr(e){return je(e)}var Hr=function(){function e(t){var n=this;I(this,e),this.auth=t,this.observer=null,this.addObserver=Oe((function(e){return n.observer=e}))}return N(e,[{key:"next",get:function(){return Dn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Zr(e,t,n){var r=Gr(e);Dn(r._canInitEmulator,r,"emulator-config-failed"),Dn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Yr(t),o=function(e){var t=Yr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var i=a[1];return{host:i,port:Xr(r.substr(i.length+1))}}var o=r.split(":"),s=(0,W.Z)(o,2);return{host:s[0],port:Xr(s[1])}}(t),s=o.host,u=o.port,c=null===u?"":":".concat(u);r.config.emulator={url:"".concat(i,"//").concat(s).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Yr(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Xr(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Qr=function(){function e(t,n){I(this,e),this.providerId=t,this.signInMethod=n}return N(e,[{key:"toJSON",value:function(){return Mn("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Mn("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Mn("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Mn("not implemented")}}]),e}();function Jr(e,t){return $r.apply(this,arguments)}function $r(){return $r=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:resetPassword",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function ea(e,t){return ta.apply(this,arguments)}function ta(){return ta=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ta.apply(this,arguments)}function na(e,t){return ra.apply(this,arguments)}function ra(){return ra=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ra.apply(this,arguments)}function aa(e,t){return ia.apply(this,arguments)}function ia(){return ia=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithPassword",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function oa(e,t){return sa.apply(this,arguments)}function sa(){return sa=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:sendOobCode",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ua(e,t){return ca.apply(this,arguments)}function ca(){return ca=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,n));case 1:case"end":return e.stop()}}),e)}))),ca.apply(this,arguments)}function la(e,t){return da.apply(this,arguments)}function da(){return da=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,n));case 1:case"end":return e.stop()}}),e)}))),da.apply(this,arguments)}function fa(e,t){return pa.apply(this,arguments)}function pa(){return pa=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,n));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function ha(e,t){return va.apply(this,arguments)}function va(){return va=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",oa(t,n));case 1:case"end":return e.stop()}}),e)}))),va.apply(this,arguments)}function ma(e,t){return ya.apply(this,arguments)}function ya(){return ya=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ya.apply(this,arguments)}function ga(e,t){return ba.apply(this,arguments)}function ba(){return ba=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithEmailLink",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}var xa=function(e){P(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return I(this,n),(i=t.call(this,"password",a))._email=e,i._password=r,i._tenantId=o,i}return N(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",aa(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ma(t,{email:this._email,oobCode:this._password}));case 5:Nn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ea(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",ga(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Nn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Qr);function ka(e,t){return wa.apply(this,arguments)}function wa(){return wa=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithIdp",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}var _a=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return N(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ka(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ka(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ie(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=ln(t,["providerId","signInMethod"]);if(!r||!a)return null;var o=new n(r,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}}]),n}(Qr);function Ta(e,t){return Sa.apply(this,arguments)}function Sa(){return Sa=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:sendVerificationCode",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sa.apply(this,arguments)}function Ea(){return Ea=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithPhoneNumber",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ia(){return Ia=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jn(t,"POST","/v1/accounts:signInWithPhoneNumber",Hn(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw nr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}var Ca=(0,E.Z)({},"USER_NOT_FOUND","user-not-found");function Na(){return Na=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithPhoneNumber",Hn(t,r),Ca));case 2:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}var Aa=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone","phone")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ea.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ia.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Na.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,a=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:a}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,a=t.verificationCode,i=t.phoneNumber,o=t.temporaryProof;return a||r||i||o?new n({verificationId:r,verificationCode:a,phoneNumber:i,temporaryProof:o}):null}}]),n}(Qr);var Oa=function(){function e(t){var n,r,a,i,o,s;I(this,e);var u=Ce(Ne(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,d=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(a=u.mode)&&void 0!==a?a:null);Dn(c&&l&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=l,this.continueUrl=null!==(i=u.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return N(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Ce(Ne(e)).link,n=t?Ce(Ne(t)).deep_link_id:null,r=Ce(Ne(e)).deep_link_id;return(r?Ce(Ne(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(lA){return null}}}]),e}();var Pa=function(){function e(){I(this,e),this.providerId=e.PROVIDER_ID}return N(e,null,[{key:"credential",value:function(e,t){return xa._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Oa.parseLink(t);return Dn(n,"argument-error"),xa._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Pa.PROVIDER_ID="password",Pa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Pa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ra=function(){function e(t){I(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return N(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Da=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).scopes=[],e}return N(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,Ze.Z)(this.scopes)}}]),n}(Ra),Ma=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Dn(e.idToken||e.accessToken,"argument-error"),_a._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Dn("providerId"in t&&"signInMethod"in t,"argument-error"),_a._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken,i=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!a&&!i&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:a,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(Da),La=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.call(this,"facebook.com")}return N(n,null,[{key:"credential",value:function(e){return _a._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lA){return null}}}]),n}(Da);La.FACEBOOK_SIGN_IN_METHOD="facebook.com",La.PROVIDER_ID="facebook.com";var Fa=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return N(n,null,[{key:"credential",value:function(e,t){return _a._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,a=t.oauthAccessToken;if(!r&&!a)return null;try{return n.credential(r,a)}catch(lA){return null}}}]),n}(Da);Fa.GOOGLE_SIGN_IN_METHOD="google.com",Fa.PROVIDER_ID="google.com";var Ba=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.call(this,"github.com")}return N(n,null,[{key:"credential",value:function(e){return _a._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(lA){return null}}}]),n}(Da);Ba.GITHUB_SIGN_IN_METHOD="github.com",Ba.PROVIDER_ID="github.com";var ja=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,e)).pendingToken=r,a}return N(n,[{key:"_getIdTokenResponse",value:function(e){return ka(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ka(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ka(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,a=t.signInMethod,i=t.pendingToken;return r&&a&&i&&r===a?new n(r,i):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Qr),Ua=function(e){P(n,e);var t=F(n);function n(e){return I(this,n),Dn(e.startsWith("saml."),"argument-error"),t.call(this,e)}return N(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ja.fromJSON(e);return Dn(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ja._create(r,n)}catch(a){return null}}}]),n}(Ra),Va=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.call(this,"twitter.com")}return N(n,null,[{key:"credential",value:function(e,t){return _a._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,a=t.oauthTokenSecret;if(!r||!a)return null;try{return n.credential(r,a)}catch(lA){return null}}}]),n}(Da);function Wa(e,t){return za.apply(this,arguments)}function za(){return za=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signUp",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}Va.TWITTER_SIGN_IN_METHOD="twitter.com",Va.PROVIDER_ID="twitter.com";var qa=function(){function e(t){I(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return N(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=j(G().mark((function t(n,r,a){var i,o,s,u,c=arguments;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ir._fromIdTokenResponse(n,a,i);case 3:return o=t.sent,s=Ka(a),u=new e({user:o,providerId:s,_tokenResponse:a,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=j(G().mark((function t(n,r,a){var i;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(a,!0);case 2:return i=Ka(a),t.abrupt("return",new e({user:n,providerId:i,_tokenResponse:a,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ka(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Ga(){return Ga=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new qa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Wa(r,{returnSecureToken:!0});case 7:return a=e.sent,e.next=10,qa._fromIdTokenResponse(r,"signIn",a,!0);case 10:return i=e.sent,e.next=13,r._updateCurrentUser(i.user);case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e)}))),Ga.apply(this,arguments)}var Ha=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o,s;return I(this,n),(o=t.call(this,r.code,r.message)).operationType=a,o.user=i,Object.setPrototypeOf(A(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:a},o}return N(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,a){return new n(e,t,r,a)}}]),n}(he);function Za(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ha._fromErrorAndOperation(e,n,t,r);throw n}))}function Ya(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Xa(e,t){return Qa.apply(this,arguments)}function Qa(){return Qa=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je(t),e.next=3,ei(!0,r,n);case 3:return e.t0=ir,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return a=e.sent,i=a.providerUserInfo,o=Ya(i||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Qa.apply(this,arguments)}function Ja(e,t){return $a.apply(this,arguments)}function $a(){return $a=j(G().mark((function e(t,n){var r,a,i=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.t0=pr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return a=e.sent,e.abrupt("return",qa._forOperation(t,"link",a));case 14:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}function ei(e,t,n){return ti.apply(this,arguments)}function ti(){return ti=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(n);case 2:a=Ya(n.providerData),i=!1===t?"provider-already-linked":"no-such-provider",Dn(a.has(r)===t,n.auth,i);case 5:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e,t){return ri.apply(this,arguments)}function ri(){return ri=j(G().mark((function e(t,n){var r,a,i,o,s,u,c=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],a=t.auth,i="reauthenticate",e.prev=3,e.next=6,pr(t,Za(a,i,n,t),r);case 6:return Dn((o=e.sent).idToken,a,"internal-error"),Dn(s=fr(o.idToken),a,"internal-error"),u=s.sub,Dn(t.uid===u,a,"user-mismatch"),e.abrupt("return",qa._forOperation(t,i,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Nn(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),ri.apply(this,arguments)}function ai(e,t){return ii.apply(this,arguments)}function ii(){return ii=j(G().mark((function e(t,n){var r,a,i,o,s=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],a="signIn",e.next=4,Za(t,a,n);case 4:return i=e.sent,e.next=7,qa._fromIdTokenResponse(t,a,i);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),ii.apply(this,arguments)}function oi(e,t){return si.apply(this,arguments)}function si(){return si=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ai(Gr(t),n));case 1:case"end":return e.stop()}}),e)}))),si.apply(this,arguments)}function ui(e,t){return ci.apply(this,arguments)}function ci(){return(ci=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je(t),e.next=3,ei(!1,r,n.providerId);case 3:return e.abrupt("return",Ja(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function li(e,t){return di.apply(this,arguments)}function di(){return(di=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ni(je(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(e,t){return pi.apply(this,arguments)}function pi(){return pi=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jn(t,"POST","/v1/accounts:signInWithCustomToken",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),pi.apply(this,arguments)}function hi(){return hi=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Gr(t),e.next=3,fi(r,{token:n,returnSecureToken:!0});case 3:return a=e.sent,e.next=6,qa._fromIdTokenResponse(r,"signIn",a);case 6:return i=e.sent,e.next=9,r._updateCurrentUser(i.user);case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}var vi=function(){function e(t,n){I(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return N(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?mi._fromServerResponse(e,t):Nn(e,"internal-error")}}]),e}(),mi=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return N(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(vi);function yi(e,t,n){var r;Dn((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Dn("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Dn(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Dn(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function gi(){return gi=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),i={requestType:"PASSWORD_RESET",email:n},r&&yi(a,i,r),e.next=5,la(a,i);case 5:case"end":return e.stop()}}),e)}))),gi.apply(this,arguments)}function bi(){return bi=j(G().mark((function e(t,n,r){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(je(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),bi.apply(this,arguments)}function xi(){return xi=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,na(je(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function ki(e,t){return wi.apply(this,arguments)}function wi(){return wi=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je(t),e.next=3,Jr(r,{oobCode:n});case 3:a=e.sent,Dn(i=a.requestType,r,"internal-error"),e.t0=i,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Dn(a.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Dn(a.mfaInfo,r,"internal-error");case 13:Dn(a.email,r,"internal-error");case 14:return o=null,a.mfaInfo&&(o=vi._fromServerResponse(Gr(r),a.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.newEmail:a.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===a.requestType?a.email:a.newEmail)||null,multiFactorInfo:o},operation:i});case 17:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function _i(){return _i=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(je(t),n);case 2:return r=e.sent,a=r.data,e.abrupt("return",a.email);case 5:case"end":return e.stop()}}),e)}))),_i.apply(this,arguments)}function Ti(e,t,n){return Si.apply(this,arguments)}function Si(){return Si=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gr(t),e.next=3,Wa(a,{returnSecureToken:!0,email:n,password:r});case 3:return i=e.sent,e.next=6,qa._fromIdTokenResponse(a,"signIn",i);case 6:return o=e.sent,e.next=9,a._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ei(){return Ei=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),i={requestType:"EMAIL_SIGNIN",email:n},Dn(r.handleCodeInApp,a,"argument-error"),r&&yi(a,i,r),e.next=6,fa(a,i);case 6:case"end":return e.stop()}}),e)}))),Ei.apply(this,arguments)}function Ii(){return Ii=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),Dn((i=Pa.credentialWithLink(n,r||jn()))._tenantId===(a.tenantId||null),a,"tenant-id-mismatch"),e.abrupt("return",oi(a,i));case 4:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:createAuthUri",Hn(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(){return Ai=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Un()?jn():"http://localhost",a={identifier:n,continueUri:r},e.next=4,Ci(je(t),a);case 4:return i=e.sent,o=i.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Ai.apply(this,arguments)}function Oi(){return(Oi=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je(t),e.next=3,t.getIdToken();case 3:return a=e.sent,i={requestType:"VERIFY_EMAIL",idToken:a},n&&yi(r.auth,i,n),e.next=8,ua(r.auth,i);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pi(){return(Pi=j(G().mark((function e(t,n,r){var a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:i,newEmail:n},r&&yi(a.auth,o,r),e.next=8,ha(a.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ri(e,t){return Di.apply(this,arguments)}function Di(){return Di=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zn(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Mi(){return(Mi=j(G().mark((function e(t,n){var r,a,i,o,s,u,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,a=n.photoURL,void 0!==r||void 0!==a){e.next=3;break}return e.abrupt("return");case 3:return i=je(t),e.next=6,i.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:a,returnSecureToken:!0},e.next=10,pr(i,Ri(i.auth,s));case 10:return u=e.sent,i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null,(c=i.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=i.displayName,c.photoURL=i.photoURL),e.next=17,i._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Li(e,t,n){return Fi.apply(this,arguments)}function Fi(){return Fi=j(G().mark((function e(t,n,r){var a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,o={idToken:i,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,pr(t,ea(a,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}var Bi=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};I(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ji=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o;return I(this,n),(o=t.call(this,e,r,a)).username=i,o}return N(n)}(Bi),Ui=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"facebook.com",r)}return N(n)}(Bi),Vi=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return N(n)}(ji),Wi=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"google.com",r)}return N(n)}(Bi),zi=function(e){P(n,e);var t=F(n);function n(e,r,a){return I(this,n),t.call(this,e,"twitter.com",r,a)}return N(n)}(ji);function qi(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,a=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},i=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=fr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Bi(i,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Ui(i,a);case"github.com":return new Vi(i,a);case"google.com":return new Wi(i,a);case"twitter.com":return new zi(i,a,e.screenName||null);case"custom":case"anonymous":return new Bi(i,null);default:return new Bi(i,r,a)}}(n)}var Ki=function(){function e(t,n){I(this,e),this.type=t,this.credential=n}return N(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,E.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Gi=function(){function e(t,n,r){I(this,e),this.session=t,this.hints=n,this.signInResolver=r}return N(e,[{key:"resolveSignIn",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Gr(t),a=n.customData._serverResponse,i=(a.mfaInfo||[]).map((function(e){return vi._fromServerResponse(r,e)}));Dn(a.mfaPendingCredential,r,"internal-error");var o=Ki._fromMfaPendingCredential(a.mfaPendingCredential);return new e(o,i,function(){var e=j(G().mark((function e(t){var i,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:i=e.sent,delete a.mfaInfo,delete a.mfaPendingCredential,s=Object.assign(Object.assign({},a),{idToken:i.idToken,refreshToken:i.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,qa._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return Dn(n.user,r,"internal-error"),e.abrupt("return",qa._forOperation(n.user,n.operationType,s));case 17:Nn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Hi(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:start",Hn(e,t))}function Zi(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Hn(e,t))}var Yi=function(){function e(t){var n=this;I(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return vi._fromServerResponse(t.auth,e)})))}))}return N(e,[{key:"getSession",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ki,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return a=e.sent,e.next=6,pr(this.user,r._process(this.user.auth,a,n));case 6:return i=e.sent,e.next=9,this.user._updateTokensIfNecessary(i);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,pr(this.user,Zi(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Xi=new WeakMap;var Qi="__sak",Ji=function(){function e(t,n){I(this,e),this.storageRetriever=t,this.type=n}return N(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Qi,"1"),this.storage.removeItem(Qi),Promise.resolve(!0)):Promise.resolve(!1)}catch(lA){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var $i=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=oe();return Dr(e)||Ur(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=zr(),e._shouldAllowMigration=!0,e}return N(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],a=this.storage.getItem(r),i=this.localCache[r];a!==i&&e(r,i,a)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var a=this.storage.getItem(r);if(e.newValue!==a)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var i=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);Wr()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=j(G().mark((function e(t,r){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(R(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=j(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(R(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(R(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Ji);$i.type="LOCAL";var eo=$i,to=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return N(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Ji);to.type="SESSION";var no=to;function ro(e){return Promise.all(e.map(function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var ao=function(){function e(t){I(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return N(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o,s,u,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,a=r.eventId,i=r.eventType,o=r.data,null===(s=this.handlersMap[i])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:a,eventType:i}),u=Array.from(s).map(function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,ro(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:a,eventType:i,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function io(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ao.receivers=[];var oo=function(){function e(t){I(this,e),this.target=t,this.handlers=new Set}return N(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=j(G().mark((function e(t,n){var r,a,i,o,s=this,u=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,a="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=io("",20);a.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:a,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),i=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),e(n.data.response);break;default:clearTimeout(l),clearTimeout(i),u(new Error("invalid_response"))}}},s.handlers.add(o),a.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[a.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function so(){return window}function uo(){return"undefined"!==typeof so().WorkerGlobalScope&&"function"===typeof so().importScripts}function co(){return lo.apply(this,arguments)}function lo(){return(lo=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function fo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var po="firebaseLocalStorageDb",ho="firebaseLocalStorage",vo="fbase_key",mo=function(){function e(t){I(this,e),this.request=t}return N(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function yo(e,t){return e.transaction([ho],t?"readwrite":"readonly").objectStore(ho)}function go(){var e=indexedDB.deleteDatabase(po);return new mo(e).toPromise()}function bo(){var e=indexedDB.open(po,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(ho,{keyPath:vo})}catch(r){n(r)}})),e.addEventListener("success",j(G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(ho)){n.next=12;break}return r.close(),n.next=5,go();case 5:return n.t0=t,n.next=8,bo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function xo(e,t,n){return ko.apply(this,arguments)}function ko(){return ko=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yo(t,!0).put((a={},(0,E.Z)(a,vo,n),(0,E.Z)(a,"value",r),a)),e.abrupt("return",new mo(i).toPromise());case 2:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function wo(e,t){return _o.apply(this,arguments)}function _o(){return _o=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yo(t,!1).get(n),e.next=3,new mo(r).toPromise();case 3:return a=e.sent,e.abrupt("return",void 0===a?null:a.value);case 5:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}function To(e,t){var n=yo(e,!0).delete(t);return new mo(n).toPromise()}var So=function(){function e(){I(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return N(e,[{key:"_openDb",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,bo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=j(G().mark((function e(){var t=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=ao._getInstance(uo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=j(G().mark((function e(n,r){var a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return a=e.sent,e.abrupt("return",{keyProcessed:a.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=j(G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,co();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new oo(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&fo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,bo();case 5:return t=e.sent,e.next=8,xo(t,Qi,"1");case 8:return e.next=10,To(t,Qi);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=j(G().mark((function e(t,n){var r=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return xo(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return wo(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return To(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=yo(e,!1).getAll();return new mo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,a=V(t);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){a.e(f)}finally{a.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)d=l[c],this.localCache[d]&&!r.has(d)&&(this.notifyListeners(d,null),n.push(d));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,a=Array.from(n);r<a.length;r++){(0,a[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();So.type="LOCAL";var Eo=So;function Io(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:start",Hn(e,t))}function Co(e){return No.apply(this,arguments)}function No(){return No=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zn(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ao(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=An("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Oo(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Po=1e12,Ro=function(){function e(t){I(this,e),this.auth=t,this.counter=Po,this._widgets=new Map}return N(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Do(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Po;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Po;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Po,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Do=function(){function e(t,n,r){var a=this;I(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){a.execute()};var i="string"===typeof t?document.getElementById(t):t;Dn(i,"argument-error",{appName:n}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return N(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(a){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(a){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Mo=Oo("rcb"),Lo=new Wn(3e4,6e4),Fo="https://www.google.com/recaptcha/api.js?",Bo=function(){function e(){I(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!so().grecaptcha}return N(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Dn(jo(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(so().grecaptcha):new Promise((function(r,a){var i=so().setTimeout((function(){a(An(e,"network-request-failed"))}),Lo.get());so()[Mo]=function(){so().clearTimeout(i),delete so()[Mo];var o=so().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else a(An(e,"internal-error"))},Ao("".concat(Fo,"?").concat(Ie({onload:Mo,render:"explicit",hl:n}))).catch((function(){clearTimeout(i),a(An(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!so().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function jo(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Uo=function(){function e(){I(this,e)}return N(e,[{key:"load",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ro(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Vo="recaptcha",Wo={theme:"light",type:"image"},zo=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Wo),r=arguments.length>2?arguments[2]:void 0;I(this,e),this.parameters=n,this.type=Vo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gr(r),this.isInvisible="invisible"===this.parameters.size,Dn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var a="string"===typeof t?document.getElementById(t):t;Dn(a,this.auth,"argument-error"),this.container=a,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Uo:new Bo,this.validateStartingState()}return N(e,[{key:"verify",value:function(){var e=j(G().mark((function e(){var t,n,r,a=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){a.tokenChangeListeners.add((function t(n){n&&(a.tokenChangeListeners.delete(t),e(n))})),a.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Dn(!this.parameters.sitekey,this.auth,"argument-error"),Dn(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Dn("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=so()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Dn(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dn(Un()&&!uo(),this.auth,"internal-error"),e.next=3,qo();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Co(this.auth);case 8:Dn(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Dn(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function qo(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Ko=function(){function e(t,n){I(this,e),this.verificationId=t,this.onConfirmation=n}return N(e,[{key:"confirm",value:function(e){var t=Aa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Go(){return Go=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gr(t),e.next=3,Xo(a,n,je(r));case 3:return i=e.sent,e.abrupt("return",new Ko(i,(function(e){return oi(a,e)})));case 5:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Ho(e,t,n){return Zo.apply(this,arguments)}function Zo(){return(Zo=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),e.next=3,ei(!1,a,"phone");case 3:return e.next=5,Xo(a.auth,n,je(r));case 5:return i=e.sent,e.abrupt("return",new Ko(i,(function(e){return ui(a,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(){return(Yo=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=je(t),e.next=3,Xo(a.auth,n,je(r));case 3:return i=e.sent,e.abrupt("return",new Ko(i,(function(e){return li(a,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(e,t,n){return Qo.apply(this,arguments)}function Qo(){return Qo=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(i=e.sent,e.prev=3,Dn("string"===typeof i,t,"argument-error"),Dn(r.type===Vo,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return Dn("enroll"===s.type,t,"internal-error"),e.next=13,Hi(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return Dn("signin"===s.type,t,"internal-error"),Dn(c=(null===(a=o.multiFactorHint)||void 0===a?void 0:a.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Io(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:i}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ta(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});case 28:return d=e.sent,f=d.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Qo.apply(this,arguments)}function Jo(){return(Jo=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ja(je(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $o=function(){function e(t){I(this,e),this.providerId=e.PROVIDER_ID,this.auth=Gr(t)}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return Xo(this.auth,e,je(t))}}],[{key:"credential",value:function(e,t){return Aa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Aa._fromTokenResponse(n,r):null}}]),e}();function es(e,t){return t?Bn(t):(Dn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$o.PROVIDER_ID="phone",$o.PHONE_SIGN_IN_METHOD="phone";var ts=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,"custom","custom")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return ka(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ka(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ka(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Qr);function ns(e){return ai(e.auth,new ts(e),e.bypassAuthState)}function rs(e){var t=e.auth,n=e.user;return Dn(n,t,"internal-error"),ni(n,new ts(e),e.bypassAuthState)}function as(e){return is.apply(this,arguments)}function is(){return is=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Dn(r=t.user,n,"internal-error"),e.abrupt("return",Ja(r,new ts(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}var os=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.auth=t,this.resolver=r,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return N(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=j(G().mark((function t(n,r){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,a=t.postBody,i=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ns;case"linkViaPopup":case"linkViaRedirect":return as;case"reauthViaPopup":case"reauthViaRedirect":return rs;default:Nn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ss=new Wn(2e3,1e4);function us(e,t,n){return cs.apply(this,arguments)}function cs(){return cs=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gr(t),Pn(t,n,Ra),i=es(a,r),o=new ps(a,"signInViaPopup",n,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(){return ls=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pn((a=je(t)).auth,n,Ra),i=es(a.auth,r),o=new ps(a.auth,"reauthViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}function ds(e,t,n){return fs.apply(this,arguments)}function fs(){return fs=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pn((a=je(t)).auth,n,Ra),i=es(a.auth,r),o=new ps(a.auth,"linkViaPopup",n,i,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var ps=function(e){P(n,e);var t=F(n);function n(e,r,a,i,o){var s;return I(this,n),(s=t.call(this,e,r,i,o)).provider=a,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=A(s),s}return N(n,[{key:"executeNotNull",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Dn(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=j(G().mark((function e(){var t,n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(1===this.filter.length,"Popup operations only handle one event"),t=io(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(An(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(An(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(An(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,ss.get())}()}}]),n}(os);ps.currentPopupAction=null;var hs=new Map,vs=function(e){P(n,e);var t=F(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I(this,n),(a=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i)).eventId=null,a}return N(n,[{key:"execute",value:function(){var e=j(G().mark((function e(){var t,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hs.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ms(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,cn(R(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:hs.set(this.auth._key(),t);case 21:return this.bypassAuthState||hs.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=j(G().mark((function e(t){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",cn(R(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",cn(R(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(os);function ms(e,t){return ys.apply(this,arguments)}function ys(){return ys=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ks(n),a=xs(t),e.next=4,a._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,a._get(r);case 8:return e.t0=e.sent,i="true"===e.t0,e.next=12,a._remove(r);case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),ys.apply(this,arguments)}function gs(e,t){return bs.apply(this,arguments)}function bs(){return bs=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xs(t)._set(ks(n),"true"));case 1:case"end":return e.stop()}}),e)}))),bs.apply(this,arguments)}function xs(e){return Bn(e._redirectPersistence)}function ks(e){return Ar("pendingRedirect",e.config.apiKey,e.name)}function ws(e,t,n){return function(e,t,n){return _s.apply(this,arguments)}(e,t,n)}function _s(){return _s=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Gr(t),Pn(t,n,Ra),i=es(a,r),e.next=5,gs(i,a);case 5:return e.abrupt("return",i._openRedirect(a,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}function Ts(e,t,n){return function(e,t,n){return Ss.apply(this,arguments)}(e,t,n)}function Ss(){return Ss=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pn((a=je(t)).auth,n,Ra),i=es(a.auth,r),e.next=5,gs(i,a.auth);case 5:return e.next=7,Ps(a);case 7:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}function Es(e,t,n){return function(e,t,n){return Is.apply(this,arguments)}(e,t,n)}function Is(){return Is=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pn((a=je(t)).auth,n,Ra),i=es(a.auth,r),e.next=5,ei(!1,a,n.providerId);case 5:return e.next=7,gs(i,a.auth);case 7:return e.next=9,Ps(a);case 9:return o=e.sent,e.abrupt("return",i._openRedirect(a.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Cs(e,t){return Ns.apply(this,arguments)}function Ns(){return Ns=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(t)._initializationPromise;case 2:return e.abrupt("return",As(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ns.apply(this,arguments)}function As(e,t){return Os.apply(this,arguments)}function Os(){return Os=j(G().mark((function e(t,n){var r,a,i,o,s,u=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],a=Gr(t),i=es(a,n),o=new vs(a,i,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,a._persistUserIfCurrent(s.user);case 11:return e.next=13,a._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Os.apply(this,arguments)}function Ps(e){return Rs.apply(this,arguments)}function Rs(){return(Rs=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=io("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ds=function(){function e(t){I(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return N(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ls(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Ls(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(An(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ms(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ms(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ms(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Ls(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Fs(e){return Bs.apply(this,arguments)}function Bs(){return Bs=j(G().mark((function e(t){var n,r=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zn(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),Bs.apply(this,arguments)}var js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Us=/^https?/;function Vs(){return Vs=j(G().mark((function e(t){var n,r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fs(t);case 4:n=e.sent,r=n.authorizedDomains,a=V(r),e.prev=7,a.s();case 9:if((i=a.n()).done){e.next=20;break}if(o=i.value,e.prev=11,!Ws(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),a.e(e.t1);case 25:return e.prev=25,a.f(),e.finish(25);case 28:Nn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Vs.apply(this,arguments)}function Ws(e){var t=jn(),n=new URL(t),r=n.protocol,a=n.hostname;if(e.startsWith("chrome-extension://")){var i=new URL(e);return""===i.hostname&&""===a?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&i.hostname===a}if(!Us.test(r))return!1;if(js.test(e))return a===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}var zs=new Wn(3e4,6e4);function qs(){var e=so().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,Ze.Z)(e.H[r].L),e.CP)for(var a=0;a<e.CP.length;a++)e.CP[a]=null}}var Ks=null;function Gs(e){return Ks=Ks||function(e){return new Promise((function(t,n){var r,a,i;function o(){qs(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){qs(),n(An(e,"network-request-failed"))},timeout:zs.get()})}if(null===(a=null===(r=so().gapi)||void 0===r?void 0:r.iframes)||void 0===a?void 0:a.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=so().gapi)||void 0===i?void 0:i.load)){var s=Oo("iframefcb");return so()[s]=function(){gapi.load?o():n(An(e,"network-request-failed"))},Ao("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Ks=null,e}))}(e),Ks}var Hs=new Wn(5e3,15e3),Zs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ys=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xs(e){var t=e.config;Dn(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?zn(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Et},a=Ys.get(e.config.apiHost);a&&(r.eid=a);var i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(Ie(r).slice(1))}function Qs(e){return Js.apply(this,arguments)}function Js(){return Js=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gs(t);case 2:return n=e.sent,Dn(r=so().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Xs(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zs,dontclear:!0},(function(e){return new Promise(function(){var n=j(G().mark((function n(r,a){var i,o,s;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){so().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:i=An(t,"network-request-failed"),o=so().setTimeout((function(){a(i)}),Hs.get()),e.ping(s).then(s,(function(){a(i)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Js.apply(this,arguments)}var $s={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eu="_blank",tu="http://localhost",nu=function(){function e(t){I(this,e),this.window=t,this.associatedEvent=null}return N(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function ru(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",u=Object.assign(Object.assign({},$s),{width:r.toString(),height:a.toString(),top:i,left:o}),c=oe().toLowerCase();n&&(s=Mr(c)?eu:n),Rr(c)&&(t=t||tu,u.scrollbars="yes");var l=Object.entries(u).reduce((function(e,t){var n=(0,W.Z)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(Vr(c)&&"_self"!==s)return au(t||"",s),new nu(null);var d=window.open(t||"",s,l);Dn(d,e,"popup-blocked");try{d.focus()}catch(f){}return new nu(d)}function au(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var iu="__/auth/handler",ou="emulator/auth/handler";function su(e,t,n,r,a,i){Dn(e.config.authDomain,e,"auth-domain-config-required"),Dn(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Et,eventId:a};if(t instanceof Ra){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",_e(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var s=0,u=Object.entries(i||{});s<u.length;s++){var c=(0,W.Z)(u[s],2),l=c[0],d=c[1];o[l]=d}}if(t instanceof Da){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,h=0,v=Object.keys(p);h<v.length;h++){var m=v[h];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(iu);return zn(t,ou)}(e),"?").concat(Ie(p).slice(1))}var uu="webStorageSupport",cu=function(){function e(){I(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=no,this._completeRedirectFn=As}return N(e,[{key:"_openPopup",value:function(){var e=j(G().mark((function e(t,n,r,a){var i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ln(null===(i=this.eventManagers[t._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),o=su(t,n,r,jn(),a),e.abrupt("return",ru(t,o,io()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=j(G().mark((function e(t,n,r,a){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return i=su(t,n,r,jn(),a),so().location.href=i,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var i}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],a=r.manager,i=r.promise;return a?Promise.resolve(a):(Ln(i,"If manager is not set, promise should be"),i)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qs(t);case 2:return n=e.sent,r=new Ds(t),n.register("authEvent",(function(e){return Dn(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(uu,{type:uu},(function(n){var r,a=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==a&&t(!!a),Nn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return zr()||Dr()||Ur()}}]),e}(),lu=cu,du=function(){function e(t){I(this,e),this.factorId=t}return N(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Mn("unexpected MultiFactorSessionType")}}}]),e}(),fu=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,"phone")).credential=e,r}return N(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:finalize",Hn(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:finalize",Hn(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(du),pu=function(){function e(){I(this,e)}return N(e,null,[{key:"assertion",value:function(e){return fu._fromCredential(e)}}]),e}();pu.FACTOR_ID="phone";var hu,vu="@firebase/auth",mu="0.19.10",yu=function(){function e(t){I(this,e),this.auth=t,this.internalListeners=new Map}return N(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Dn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function gu(){return window}hu="Browser",bt(new Ye("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=r.options,o=i.apiKey,s=i.authDomain;return function(e,t){Dn(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Dn(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:hu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qr(hu)},a=new Kr(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(a,n),a}(r,a)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),bt(new Ye("auth-internal",(function(e){return function(e){return new yu(e)}(Gr(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Pt(vu,mu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(hu)),Pt(vu,mu,"esm2017");function bu(e,t,n){return xu.apply(this,arguments)}function xu(){return xu=j(G().mark((function e(t,n,r){var a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=gu(),o=i.BuildInfo,Ln(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Eu(n.sessionId);case 4:return s=e.sent,u={},Ur()?u.ibi=o.packageName:Fr()?u.apn=o.packageName:Nn(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",su(t,r,n.type,void 0,null!==(a=n.eventId)&&void 0!==a?a:void 0,u));case 10:case"end":return e.stop()}}),e)}))),xu.apply(this,arguments)}function ku(){return ku=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=gu(),r=n.BuildInfo,a={},Ur()?a.iosBundleId=r.packageName:Fr()?a.androidPackageName=r.packageName:Nn(t,"operation-not-supported-in-this-environment"),e.next=5,Fs(t,a);case 5:case"end":return e.stop()}}),e)}))),ku.apply(this,arguments)}function wu(e){var t=gu().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var a=null;r?t.plugins.browsertab.openUrl(e):a=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(a)}))}))}function _u(e,t,n){return Tu.apply(this,arguments)}function Tu(){return Tu=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=gu(),i=a.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,a){var s=null;function u(){var t;e();var n=null===(t=i.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){a(An(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),Fr()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Tu.apply(this,arguments)}function Su(e){var t,n,r,a,i,o,s,u,c,l,d=gu();Dn("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Dn("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Dn("function"===typeof(null===(i=null===(a=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===a?void 0:a.browsertab)||void 0===i?void 0:i.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dn("function"===typeof(null===(u=null===(s=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Dn("function"===typeof(null===(l=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Eu(e){return Iu.apply(this,arguments)}function Iu(){return(Iu=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cu(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,a=Array.from(new Uint8Array(r)),e.abrupt("return",a.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(e){if(Ln(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Nu=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return N(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),cn(R(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Ds);function Au(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:Mu(),postBody:null,tenantId:e.tenantId,error:An(e,"no-auth-event")}}function Ou(e,t){return Lu()._set(Fu(e),t)}function Pu(e){return Ru.apply(this,arguments)}function Ru(){return Ru=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lu()._get(Fu(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Lu()._remove(Fu(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Du(e,t){var n,r,a=function(e){var t=Bu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Bu(n).link,a=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Bu(a).link||a||r||n||e}(t);if(a.includes("/__/auth/callback")){var i=Bu(a),o=i.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(i.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?An(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:a,postBody:null}}return null}function Mu(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function Lu(){return Bn(eo)}function Fu(e){return Ar("authEvent",e.config.apiKey,e.name)}function Bu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=sn(e.split("?"));t[0];return Ce(t.slice(1).join("?"))}var ju=function(){function e(){I(this,e),this._redirectPersistence=no,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=As}return N(e,[{key:"_initialize",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Nu(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Nn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=j(G().mark((function e(t,n,r,a){var i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Su(t),e.next=3,this._initialize(t);case 3:return i=e.sent,e.next=6,i.initialized();case 6:return i.resetRedirect(),hs.clear(),e.next=10,this._originValidation(t);case 10:return o=Au(t,r,a),e.next=13,Ou(t,o);case 13:return e.next=15,bu(t,o,n);case 15:return s=e.sent,e.next=18,wu(s);case 18:return u=e.sent,e.abrupt("return",_u(t,i,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return ku.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=gu(),r=n.universalLinks,a=n.handleOpenURL,i=n.BuildInfo,o=setTimeout(j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Pu(e);case 2:t.onEvent(Vu());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=j(G().mark((function n(r){var a,i;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Pu(e);case 3:a=n.sent,i=null,a&&(null===r||void 0===r?void 0:r.url)&&(i=Du(a,r.url)),t.onEvent(i||Vu());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=a,c="".concat(i.packageName.toLowerCase(),"://");gu().handleOpenURL=function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),Uu=ju;function Vu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:An("no-auth-event")}}function Wu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function zu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return!("file:"!==Wu()&&"ionic:"!==Wu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function qu(){return de()&&11===(null===document||void 0===document?void 0:document.documentMode)}function Ku(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return/Edge\/\d+/.test(e)}function Gu(){try{var e=self.localStorage,t=io();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe();return qu()||Ku(e)}()||pe()}catch(n){return Hu()&&pe()}return!1}function Hu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Zu(){return("http:"===Wu()||"https:"===Wu()||ce()||zu())&&!(le()||ue())&&Gu()&&!Hu()}function Yu(){return zu()&&"undefined"!==typeof document}function Xu(){return Qu.apply(this,arguments)}function Qu(){return(Qu=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yu()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ju={LOCAL:"local",NONE:"none",SESSION:"session"},$u=Dn,ec="persistence";function tc(e,t){$u(Object.values(Ju).includes(t),e,"invalid-persistence-type"),le()?$u(t!==Ju.SESSION,e,"unsupported-persistence-type"):ue()?$u(t===Ju.NONE,e,"unsupported-persistence-type"):Hu()?$u(t===Ju.NONE||t===Ju.LOCAL&&pe(),e,"unsupported-persistence-type"):$u(t===Ju.NONE||Gu(),e,"unsupported-persistence-type")}function nc(e){return rc.apply(this,arguments)}function rc(){return rc=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ac(),r=Ar(ec,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),rc.apply(this,arguments)}function ac(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var ic=Dn,oc=function(){function e(){I(this,e),this.browserResolver=Bn(lu),this.cordovaResolver=Bn(Uu),this.underlyingResolver=null,this._redirectPersistence=no,this._completeRedirectFn=As}return N(e,[{key:"_initialize",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=j(G().mark((function e(t,n,r,a){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=j(G().mark((function e(t,n,r,a){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Yu()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return ic(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Xu();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function sc(e){return e.unwrap()}function uc(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new pc(e,function(e,t){var n,r=je(e),a=t;return Dn(t.customData.operationType,r,"argument-error"),Dn(null===(n=a.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Gi._fromError(r,a)}(e,t));else if(r){var a=cc(t),i=t;a&&(i.credential=a,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}function cc(e){var t=(e instanceof he?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof he)&&"temporaryProof"in t&&"phoneNumber"in t)return $o.credentialFromResult(e);var n,r=t.providerId;if(!r||r===vn)return null;switch(r){case hn:n=Fa;break;case fn:n=La;break;case pn:n=Ba;break;case mn:n=Va;break;default:var a=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return i||o||a||s?s?r.startsWith("saml.")?ja._create(r,s):_a._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:a,accessToken:i}):new Ma(r).credential({idToken:a,accessToken:i,rawNonce:u}):null}return e instanceof he?n.credentialFromError(e):n.credentialFromResult(e)}function lc(e,t){return t.catch((function(t){throw t instanceof he&&uc(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,cc(t)),additionalUserInfo:qi(e),user:hc.getOrCreate(r)}}))}function dc(e,t){return fc.apply(this,arguments)}function fc(){return fc=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return lc(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),fc.apply(this,arguments)}var pc=function(){function e(t,n){I(this,e),this.resolver=n,this.auth=t.wrapped()}return N(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return lc(sc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),hc=function(){function e(t){I(this,e),this._delegate=t,this.multiFactor=function(e){var t=je(e);return Xi.has(t)||Xi.set(t,Yi._fromUser(t)),Xi.get(t)}(t)}return N(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lc(this.auth,ui(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dc(this.auth,Ho(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lc(this.auth,ds(this._delegate,t,oc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc(Gr(this.auth));case 2:return e.abrupt("return",Es(this._delegate,t,oc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lc(this.auth,li(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return dc(this.auth,function(e,t,n){return Yo.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return lc(this.auth,function(e,t,n){return ls.apply(this,arguments)}(this._delegate,e,oc))}},{key:"reauthenticateWithRedirect",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nc(Gr(this.auth));case 2:return e.abrupt("return",Ts(this._delegate,t,oc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Oi.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Li(je(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Li(je(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Jo.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return Mi.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Pi.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();hc.USER_MAP=new WeakMap;var vc=Dn,mc=function(){function e(t,n){if(I(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;vc(r,"invalid-api-key",{appName:t.name}),vc(r,"invalid-api-key",{appName:t.name});var a="undefined"!==typeof window?oc:void 0;this._delegate=n.initialize({options:{persistence:gc(r,t.name),popupRedirectResolver:a}}),this._delegate._updateErrorMap(Tn),this.linkUnderlyingAuth()}return N(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?hc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Zr(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return xi.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return ki(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return bi.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lc(this._delegate,Ti(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Ai.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Oa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vc(Zu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Cs(this._delegate,oc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",lc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Gr(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=yc(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onAuthStateChanged(a,i,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=yc(e,t,n),a=r.next,i=r.error,o=r.complete;return this._delegate.onIdTokenChanged(a,i,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ei.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return gi.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:tc(this._delegate,t),e.t0=t,e.next=e.t0===Ju.SESSION?4:e.t0===Ju.LOCAL?6:e.t0===Ju.NONE?11:13;break;case 4:return n=no,e.abrupt("break",14);case 6:return e.next=8,Bn(Eo)._isAvailable();case 8:return r=e.sent,n=r?Eo:eo,e.abrupt("break",14);case 11:return n=Nr,e.abrupt("break",14);case 13:return e.abrupt("return",Nn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return lc(this._delegate,function(e){return Ga.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return lc(this._delegate,oi(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return lc(this._delegate,function(e,t){return hi.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return lc(this._delegate,function(e,t,n){return oi(je(e),Pa.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return lc(this._delegate,function(e,t,n){return Ii.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return dc(this._delegate,function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vc(Zu(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",lc(this._delegate,us(this._delegate,t,oc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return vc(Zu(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,nc(this._delegate);case 3:return e.abrupt("return",ws(this._delegate,t,oc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return _i.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function yc(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var a=r;return{next:function(e){return a(e&&hc.getOrCreate(e))},error:t,complete:n}}function gc(e,t){var n=function(e,t){var n=ac();if(!n)return[];var r=Ar(ec,e,t);switch(n.getItem(r)){case Ju.NONE:return[Nr];case Ju.LOCAL:return[Eo,no];case Ju.SESSION:return[no];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Eo)||n.push(Eo),"undefined"!==typeof window)for(var r=0,a=[eo,no];r<a.length;r++){var i=a[r];n.includes(i)||n.push(i)}return n.includes(Nr)||n.push(Nr),n}mc.Persistence=Ju;var bc=function(){function e(){I(this,e),this.providerId="phone",this._delegate=new $o(sc(nn.auth()))}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return $o.credential(e,t)}}]),e}();bc.PHONE_SIGN_IN_METHOD=$o.PHONE_SIGN_IN_METHOD,bc.PROVIDER_ID=$o.PROVIDER_ID;var xc,kc=Dn,wc=function(){function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:nn.app();I(this,e),kc(null===(r=a.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:a.name}),this._delegate=new zo(t,n,a.auth()),this.type=this._delegate.type}return N(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(xc=nn).INTERNAL.registerComponent(new Ye("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new mc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:yn,PASSWORD_RESET:gn,RECOVER_EMAIL:bn,REVERT_SECOND_FACTOR_ADDITION:xn,VERIFY_AND_CHANGE_EMAIL:kn,VERIFY_EMAIL:wn}},EmailAuthProvider:Pa,FacebookAuthProvider:La,GithubAuthProvider:Ba,GoogleAuthProvider:Fa,OAuthProvider:Ma,SAMLAuthProvider:Ua,PhoneAuthProvider:bc,PhoneMultiFactorGenerator:pu,RecaptchaVerifier:wc,TwitterAuthProvider:Va,Auth:mc,AuthCredential:Qr,Error:he}).setInstantiationMode("LAZY").setMultipleInstances(!1)),xc.registerVersion("@firebase/auth-compat","0.2.10");var _c="firebasestorage.googleapis.com",Tc=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,Sc(e),"Firebase Storage: ".concat(r," (").concat(Sc(e),")"))).customData={serverResponse:null},a._baseMessage=a.message,Object.setPrototypeOf(A(a),n.prototype),a}return N(n,[{key:"_codeEquals",value:function(e){return Sc(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(he);function Sc(e){return"storage/"+e}function Ec(){return new Tc("unknown","An unknown error occurred, please check the error payload for server response.")}function Ic(){return new Tc("canceled","User canceled the upload/download.")}function Cc(){return new Tc("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Nc(e){return new Tc("invalid-argument",e)}function Ac(){return new Tc("app-deleted","The Firebase app was deleted.")}function Oc(e){return new Tc("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Pc(e,t){return new Tc("invalid-format","String does not match format '"+e+"': "+t)}function Rc(e){throw new Tc("internal-error","Internal error: "+e)}var Dc,Mc=function(){function e(t,n){I(this,e),this.bucket=t,this.path_=n}return N(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw new Tc("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,a="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+a+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(a,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===_c?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(a,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],d=l.regex.exec(t);if(d){var f=d[l.indices.bucket],p=d[l.indices.path];p||(p=""),r=new e(f,p),l.postModify(r);break}}if(null==r)throw function(e){return new Tc("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Lc=function(){function e(t){I(this,e),this.promise_=Promise.reject(t)}return N(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Fc(e){return"string"===typeof e||e instanceof String}function Bc(e){return jc()&&e instanceof Blob}function jc(){return"undefined"!==typeof Blob}function Uc(e,t,n,r){if(r<t)throw Nc("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Nc("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Vc(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Wc(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Dc||(Dc={}));var zc=function(){function e(t,n,r,a,i,o,s,u,c,l,d){var f=this;I(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return N(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,a=e.reject_,i=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(i,i.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){a(u)}else if(null!==i){var s=Ec();s.serverResponse=i.getErrorText(),e.errorCallback_?a(e.errorCallback_(i,s)):a(s)}else{if(n.canceled)a(e.appDelete_?Ac():Ic());else a(new Tc("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new qc(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,a=null,i=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){a=setTimeout((function(){a=null,e(p,u())}),t)}function f(){i&&clearTimeout(i)}function p(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var i;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),d(i)}}var h=!1;function v(e){h||(h=!0,f(),c||(null!==a?(e||(s=2),clearTimeout(a),d(0)):e||(s=1)))}return d(0),i=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new qc(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var a=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(a),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(a),e.pendingConnection_=null;var n=r.getErrorCode()===Dc.NO_ERROR,i=r.getStatus();if(n&&!e.isRetryStatusCode_(i)){var o=-1!==e.successCodes_.indexOf(i);t(!0,new qc(o,r))}else{var s=r.getErrorCode()===Dc.ABORT;t(!1,new qc(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),qc=N((function e(t,n,r){I(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Kc(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Gc(){for(var e=Kc(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var a=new e,i=0;i<n.length;i++)a.append(n[i]);return a.getBlob()}if(jc())return new Blob(n);throw new Tc("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Hc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zc=N((function e(t,n){I(this,e),this.data=t,this.contentType=n||null}));function Yc(e,t){switch(e){case Hc.RAW:return new Zc(Xc(t));case Hc.BASE64:case Hc.BASE64URL:return new Zc(Qc(e,t));case Hc.DATA_URL:return new Zc(function(e){var t=new Jc(e);return t.base64?Qc(Hc.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Pc(Hc.DATA_URL,"Malformed data URL.")}return Xc(t)}(t.rest)}(t),new Jc(t).contentType)}throw Ec()}function Xc(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Qc(e,t){switch(e){case Hc.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Pc(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Hc.BASE64URL:var a=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(a||i)throw Pc(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw Pc(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Jc=N((function e(t){I(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Pc(Hc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var $c=function(){function e(t,n){I(this,e);var r=0,a="";Bc(t)?(this.data_=t,r=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=a}return N(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Bc(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var a=new Uint8Array(this.data_.buffer,t,n-t);return new e(a,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(jc()){var a=n.map((function(t){return t instanceof e?t.data_:t}));return new e(Gc.apply(null,a))}var i=n.map((function(e){return Fc(e)?Yc(Hc.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function el(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function tl(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function nl(e,t){return t}var rl=N((function e(t,n,r,a){I(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=a||nl})),al=null;function il(){if(al)return al;var e=[];e.push(new rl("bucket")),e.push(new rl("generation")),e.push(new rl("metageneration")),e.push(new rl("name","fullPath",!0));var t=new rl("name");t.xform=function(e,t){return function(e){return!Fc(e)||e.length<2?e:tl(e)}(t)},e.push(t);var n=new rl("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new rl("timeCreated")),e.push(new rl("updated")),e.push(new rl("md5Hash",null,!0)),e.push(new rl("cacheControl",null,!0)),e.push(new rl("contentDisposition",null,!0)),e.push(new rl("contentEncoding",null,!0)),e.push(new rl("contentLanguage",null,!0)),e.push(new rl("contentType",null,!0)),e.push(new rl("metadata","customMetadata",!0)),al=e}function ol(e,t,n){for(var r={type:"file"},a=n.length,i=0;i<a;i++){var o=n[i];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,a=new Mc(n,r);return t._makeStorageReference(a)}})}(r,e),r}function sl(e,t,n){var r=el(t);return null===r?null:ol(e,r,n)}function ul(e,t){for(var n={},r=t.length,a=0;a<r;a++){var i=t[a];i.writable&&(n[i.server]=e[i.local])}return JSON.stringify(n)}function cl(e,t,n){var r=el(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var a,i=V(n.prefixes);try{for(i.s();!(a=i.n()).done;){var o=a.value.replace(/\/$/,""),s=e._makeStorageReference(new Mc(t,o));r.prefixes.push(s)}}catch(f){i.e(f)}finally{i.f()}}if(n.items){var u,c=V(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,d=e._makeStorageReference(new Mc(t,l.name));r.items.push(d)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var ll=N((function e(t,n,r,a){I(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function dl(e){if(!e)throw Ec()}function fl(e,t){return function(n,r){var a=sl(e,r,t);return dl(null!==a),a}}function pl(e,t){return function(n,r){var a=sl(e,r,t);return dl(null!==a),function(e,t,n,r){var a=el(t);if(null===a)return null;if(!Fc(a.downloadTokens))return null;var i=a.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(t){var a=e.bucket,i=e.fullPath;return Vc("/b/"+o(a)+"/o/"+o(i),n,r)+Wc({alt:"media",token:t})}))[0]}(a,r,e.host,e._protocol)}}function hl(e){return function(t,n){var r,a,i;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Tc("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Tc("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=e.bucket,r=new Tc("quota-exceeded","Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(a=e.path,r=new Tc("unauthorized","User does not have permission to access '"+a+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function vl(e){var t=hl(e);return function(n,r){var a,i=t(n,r);return 404===n.getStatus()&&(a=e.path,i=new Tc("object-not-found","Object '"+a+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function ml(e,t,n){var r=Vc(t.fullServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,i=new ll(r,"GET",fl(e,n),a);return i.errorHandler=vl(t),i}function yl(e,t,n,r,a){var i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),a&&(i.maxResults=a);var o=Vc(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new ll(o,"GET",function(e,t){return function(n,r){var a=cl(e,t,r);return dl(null!==a),a}}(e,t.bucket),s);return u.urlParams=i,u.errorHandler=hl(t),u}function gl(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function bl(e,t,n,r,a){var i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=gl(t,r,a),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ul(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",d=$c.getBlob(c,r,l);if(null===d)throw Cc();var f={name:u.fullPath},p=Vc(i,e.host,e._protocol),h=e.maxUploadRetryTime,v=new ll(p,"POST",fl(e,n),h);return v.urlParams=f,v.headers=o,v.body=d.uploadData(),v.errorHandler=hl(t),v}var xl=N((function e(t,n,r,a){I(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=a||null}));function kl(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){dl(!1)}return dl(!!n&&-1!==(t||["active"]).indexOf(n)),n}var wl=262144;function _l(e,t,n,r,a,i,o,s){var u=new xl(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Tc("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;a>0&&(l=Math.min(l,a));var d=u.current,f=d+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},h=r.slice(d,f);if(null===h)throw Cc();var v=t.maxUploadRetryTime,m=new ll(n,"POST",(function(e,n){var a,o=kl(e,["active","final"]),s=u.current+l,c=r.size();return a="final"===o?fl(t,i)(e,n):null,new xl(s,c,"final"===o,a)}),v);return m.headers=p,m.body=h.uploadData(),m.progressCallback=s||null,m.errorHandler=hl(e),m}var Tl={STATE_CHANGED:"state_changed"},Sl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function El(e){switch(e){case"running":case"pausing":case"canceling":return Sl.RUNNING;case"paused":return Sl.PAUSED;case"success":return Sl.SUCCESS;case"canceled":return Sl.CANCELED;default:return Sl.ERROR}}var Il=N((function e(t,n,r){I(this,e);var a=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(a)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}));function Cl(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Nl=function(){function e(){var t=this;I(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Dc.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Dc.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Dc.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return N(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Rc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var a in r)r.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,r[a].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Rc("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Rc("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Rc("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Rc("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Al=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Nl);function Ol(){return new Al}var Pl=function(){function e(t,n){var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;I(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=a,this._mappings=il(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return N(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=(0,W.Z)(n,2),a=r[0],i=r[1];switch(t._state){case"running":e(a,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,a){var i=t.bucketOnlyServerUrl(),o=gl(t,r,a),s={name:o.fullPath},u=Vc(i,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=ul(o,n),d=e.maxUploadRetryTime,f=new ll(u,"POST",(function(e){var t;kl(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){dl(!1)}return dl(Fc(t)),t}),d);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=hl(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),a=e._ref.storage._makeRequest(r,Ol,t,n);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var a=function(e,t,n,r){var a=e.maxUploadRetryTime,i=new ll(n,"POST",(function(e){var t=kl(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){dl(!1)}n||dl(!1);var a=Number(n);return dl(!isNaN(a)),new xl(a,r.size(),"final"===t)}),a);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=hl(t),i}(e._ref.storage,e._ref._location,t,e._blob),i=e._ref.storage._makeRequest(a,Ol,n,r);e._request=i,i.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=wl*this._chunkMultiplier,n=new xl(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(a,i){var o;try{o=_l(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,Ol,a,i);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){wl*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=ml(e._ref.storage,e._ref._location,e._mappings),a=e._ref.storage._makeRequest(r,Ol,t,n);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=bl(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),a=e._ref.storage._makeRequest(r,Ol,t,n);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Ic(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=El(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var a=this,i=new Il(t||void 0,n||void 0,r||void 0);return this._addObserver(i),function(){a._removeObserver(i)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(El(this._state)){case Sl.SUCCESS:Cl(this._resolve.bind(null,this.snapshot))();break;case Sl.CANCELED:case Sl.ERROR:Cl(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(El(this._state)){case Sl.RUNNING:case Sl.PAUSED:e.next&&Cl(e.next.bind(e,this.snapshot))();break;case Sl.SUCCESS:e.complete&&Cl(e.complete.bind(e))();break;default:e.error&&Cl(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Rl=function(){function e(t,n){I(this,e),this._service=t,this._location=n instanceof Mc?n:Mc.makeFromUrl(n,t.host)}return N(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Mc(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return tl(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Mc(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Oc(e)}}]),e}();function Dl(e,t,n){e._throwIfRoot("uploadBytes");var r=bl(e.storage,e._location,il(),new $c(t,!0),n);return e.storage.makeRequestWithTokens(r,Ol).then((function(t){return{metadata:t,ref:e}}))}function Ml(e,t,n){return Ll.apply(this,arguments)}function Ll(){return(Ll=j(G().mark((function e(t,n,r){var a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Fl(t,o);case 3:if(s=e.sent,(a=n.prefixes).push.apply(a,(0,Ze.Z)(s.prefixes)),(i=n.items).push.apply(i,(0,Ze.Z)(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,Ml(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fl(e,t){null!=t&&"number"===typeof t.maxResults&&Uc("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=yl(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Ol)}function Bl(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var a=Vc(t.fullServerUrl(),e.host,e._protocol),i=ul(n,r),o=e.maxOperationRetryTime,s=new ll(a,"PATCH",fl(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=i,s.errorHandler=vl(t),s}(e.storage,e._location,t,il());return e.storage.makeRequestWithTokens(n,Ol)}function jl(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Vc(t.fullServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,i=new ll(r,"GET",pl(e,n),a);return i.errorHandler=vl(t),i}(e.storage,e._location,il());return e.storage.makeRequestWithTokens(t,Ol).then((function(e){if(null===e)throw new Tc("no-download-url","The given file does not have any download URLs.");return e}))}function Ul(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Vc(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,a=new ll(n,"DELETE",(function(e,t){}),r);return a.successCodes=[200,204],a.errorHandler=vl(t),a}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Ol)}function Vl(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Mc(e._location.bucket,n);return new Rl(e.storage,r)}function Wl(e,t){if(e instanceof Gl){var n=e;if(null==n._bucket)throw new Tc("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new Rl(n,n._bucket);return null!=t?Wl(r,t):r}return void 0!==t?Vl(e,t):e}function zl(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Gl)return new Rl(e,t);throw Nc("To use ref(service, url), the first argument must be a Storage instance.")}return Wl(e,t)}function ql(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:Mc.makeFromBucketSpec(n,e)}function Kl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var a=r.mockUserToken;a&&(e._overrideAuthToken="string"===typeof a?a:ie(a,e.app.options.projectId))}var Gl=function(){function e(t,n,r,a,i){I(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=a,this._firebaseVersion=i,this._bucket=null,this._host=_c,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=a?Mc.makeFromBucketSpec(a,this._host):ql(this._host,this.app.options)}return N(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Mc.makeFromBucketSpec(this._url,e):this._bucket=ql(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Uc("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Uc("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Rl(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var a=this;if(this._deleted)return new Lc(Ac());var i=function(e,t,n,r,a,i){var o=Wc(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new zc(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return a._requests.delete(i)}),(function(){return a._requests.delete(i)})),i}},{key:"makeRequestWithTokens",value:function(){var e=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,a=(0,W.Z)(r,2),i=a[0],o=a[1],e.abrupt("return",this._makeRequest(t,n,i,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Hl="@firebase/storage",Zl="0.9.3",Yl="storage";function Xl(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Pl(e,new $c(t),n)}(e=je(e),t,n)}function Ql(e){return function(e){e._throwIfRoot("getMetadata");var t=ml(e.storage,e._location,il());return e.storage.makeRequestWithTokens(t,Ol)}(e=je(e))}function Jl(e){return function(e){var t={prefixes:[],items:[]};return Ml(e,t).then((function(){return t}))}(e=je(e))}function $l(e){return jl(e=je(e))}function ed(e,t){return zl(e=je(e),t)}function td(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Kl(e,t,n,r)}function nd(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Gl(r,a,i,n,Et)}bt(new Ye(Yl,nd,"PUBLIC").setMultipleInstances(!0)),Pt(Hl,Zl,""),Pt(Hl,Zl,"esm2017");var rd=function(){function e(t,n,r){I(this,e),this._delegate=t,this.task=n,this.ref=r}return N(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),ad=function(){function e(t,n){I(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return N(e,[{key:"snapshot",get:function(){return new rd(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new rd(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var a=this,i=void 0;return t&&(i="function"===typeof t?function(e){return t(new rd(e,a,a._ref))}:{next:t.next?function(e){return t.next(new rd(e,a,a._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}]),e}(),id=function(){function e(t,n){I(this,e),this._delegate=t,this._service=n}return N(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new od(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new od(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),od=function(){function e(t,n){I(this,e),this._delegate=t,this.storage=n}return N(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Vl(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new ad(Xl(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hc.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=Yc(t,e),a=Object.assign({},n);return null==a.contentType&&null!=r.contentType&&(a.contentType=r.contentType),new ad(new Pl(this._delegate,new $c(r.data,!0),a),this)}},{key:"listAll",value:function(){var e=this;return Jl(this._delegate).then((function(t){return new id(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Fl(e=je(e),t)}(this._delegate,e||void 0).then((function(e){return new id(e,t.storage)}))}},{key:"getMetadata",value:function(){return Ql(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return Bl(e=je(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return $l(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Ul(je(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Oc(e)}}]),e}(),sd=function(){function e(t,n){I(this,e),this.app=t,this._delegate=n}return N(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(ud(e))throw Nc("ref() expected a child path but got a URL, use refFromURL instead.");return new od(ed(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!ud(e))throw Nc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mc.makeFromUrl(e,this._delegate.host)}catch(t){throw Nc("refFromUrl() expected a valid full URL but got an invalid one.")}return new od(ed(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};td(this._delegate,e,t,n)}}]),e}();function ud(e){return/^[A-Za-z]+:\/\//.test(e)}function cd(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),a=e.getProvider("storage").getImmediate({identifier:n});return new sd(r,a)}!function(e){var t={TaskState:Sl,TaskEvent:Tl,StringFormat:Hc,Storage:sd,Reference:od};e.INTERNAL.registerComponent(new Ye("storage-compat",cd,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.11")}(nn);var ld="@firebase/database",dd="0.12.6",fd="";function pd(e){fd=e}var hd=function(){function e(t){I(this,e),this.domStorage_=t,this.prefix_="firebase:"}return N(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),be(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ge(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),vd=function(){function e(){I(this,e),this.cache_={},this.isInMemoryStorage=!0}return N(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ke(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),md=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new hd(t)}}catch(n){}return new vd},yd=md("localStorage"),gd=md("sessionStorage"),bd=new ut("@firebase/database"),xd=function(){var e=1;return function(){return e++}}(),kd=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319){var i=a-55296;r++,X(r<e.length,"Surrogate pair missing trail surrogate."),a=65536+(i<<10)+(e.charCodeAt(r)-56320)}a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):a<65536?(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t}(e),n=new Ae;n.update(t);var r=n.digest();return $.encodeByteArray(r)},wd=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?be(r):r,t+=" "}return t},_d=null,Td=!0,Sd=function(e,t){X(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(bd.logLevel=$e.VERBOSE,_d=bd.log.bind(bd),t&&gd.set("logging_enabled",!0)):"function"===typeof e?_d=e:(_d=null,gd.remove("logging_enabled"))},Ed=function(){if(!0===Td&&(Td=!1,null===_d&&!0===gd.get("logging_enabled")&&Sd(!0)),_d){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=wd.apply(null,t);_d(r)}},Id=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ed.apply(void 0,[e].concat(n))}},Cd=function(){var e="FIREBASE INTERNAL ERROR: "+wd.apply(void 0,arguments);bd.error(e)},Nd=function(){var e="FIREBASE FATAL ERROR: ".concat(wd.apply(void 0,arguments));throw bd.error(e),new Error(e)},Ad=function(){var e="FIREBASE WARNING: "+wd.apply(void 0,arguments);bd.warn(e)},Od=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Pd="[MIN_NAME]",Rd="[MAX_NAME]",Dd=function(e,t){if(e===t)return 0;if(e===Pd||t===Rd)return-1;if(t===Pd||e===Rd)return 1;var n=qd(e),r=qd(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Md=function(e,t){return e===t?0:e<t?-1:1},Ld=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+be(t))},Fd=function e(t){if("object"!==typeof t||null===t)return be(t);var n=[];for(var r in t)n.push(r);n.sort();for(var a="{",i=0;i<n.length;i++)0!==i&&(a+=","),a+=be(n[i]),a+=":",a+=e(t[n[i]]);return a+="}"},Bd=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],a=0;a<n;a+=t)a+t>n?r.push(e.substring(a,n)):r.push(e.substring(a,a+t));return r};function jd(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var Ud=function(e){X(!Od(e),"Invalid JSON number");var t,n,r,a,i,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(a=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(i=52;i;i-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(i=11;i;i-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(i=0;i<64;i+=8){var l=parseInt(u.substr(i,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Vd=new RegExp("^-?(0*)\\d{1,10}$"),Wd=-2147483648,zd=2147483647,qd=function(e){if(Vd.test(e)){var t=Number(e);if(t>=Wd&&t<=zd)return t}return null},Kd=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Ad("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Gd=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},Hd=function(){function e(t,n){var r=this;I(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Ad('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Zd=function(){function e(t,n,r){var a=this;I(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return a.auth_=e}))}return N(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ed("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ad(e)}}]),e}(),Yd=function(){function e(t){I(this,e),this.accessToken=t}return N(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Yd.OWNER="owner";var Xd="5",Qd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jd="websocket",$d="long_polling",ef=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];I(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=a,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yd.get("host:"+t)||this._host}return N(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yd.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function tf(e,t,n){var r;if(X("string"===typeof t,"typeof type must == string"),X("object"===typeof n,"typeof params must == object"),t===Jd)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==$d)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var a=[];return jd(n,(function(e,t){a.push(e+"="+t)})),r+a.join("&")}var nf=function(){function e(){I(this,e),this.counters_={}}return N(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ke(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return re(void 0,this.counters_)}}]),e}(),rf={},af={};function of(e){var t=e.toString();return rf[t]||(rf[t]=new nf),rf[t]}var sf=function(){function e(t){I(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return N(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Kd((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),uf="start",cf="close",lf=function(){function e(t,n,r,a,i,o,s){var u=this;I(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=a,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Id(t),this.stats_=of(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),tf(n,$d,e)}}return N(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sf(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(fe()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new df((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],i=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,a===uf)n.id=i,n.password=o;else{if(a!==cf)throw new Error("Unrecognized command received: "+a);i?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(i,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var a=t[0],i=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(a,i)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xd,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Qd.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=be(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=ee(t),r=Bd(n,1840),a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!fe()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=be(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!fe()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),df=function(){function e(t,n,r,a){if(I(this,e),this.onDisconnect=r,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,fe())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=xd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Ed("frame writing exception"),s.stack&&Ed(s.stack),Ed(s)}}}return N(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var a=this.pendingSegs.shift();n=n+"&seg"+r+"="+a.seg+"&ts"+r+"="+a.ts+"&d"+r+"="+a.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},a=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(a),r()}))}},{key:"addTag",value:function(e,t){var n=this;fe()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ed("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(a){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ed("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),ff=null;"undefined"!==typeof MozWebSocket?ff=MozWebSocket:"undefined"!==typeof WebSocket&&(ff=WebSocket);var pf=function(){function e(t,n,r,a,i,o,s){I(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=a,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Id(this.connId),this.stats_=of(n),this.connURL=e.connectionURL_(n,o,s,a),this.nodeAdmin=n.nodeAdmin}return N(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yd.set("previous_websocket_failure",!0);try{if(fe()){var r=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/".concat(Xd,"/").concat(fd,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(a.proxy={origin:o}),this.mySock=new ff(this.connURL,[],a)}else{var s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new ff(this.connURL,[],s)}}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){yd.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ge(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(X(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=be(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=Bd(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var a={};return a.v=Xd,!fe()&&"undefined"!==typeof location&&location.hostname&&Qd.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),tf(e,Jd,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==ff&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return yd.isInMemoryStorage||!0===yd.get("previous_websocket_failure")}}]),e}();pf.responsesRequiredToBeHealthy=2,pf.healthyTimeout=3e4;var hf=function(){function e(t){I(this,e),this.initTransports_(t)}return N(e,[{key:"initTransports_",value:function(t){var n=pf&&pf.isAvailable(),r=n&&!pf.previouslyFailed();if(t.webSocketOnly&&(n||Ad("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pf];else{var a,i=this.transports_=[],o=V(e.ALL_TRANSPORTS);try{for(o.s();!(a=o.n()).done;){var s=a.value;s&&s.isAvailable()&&i.push(s)}}catch(u){o.e(u)}finally{o.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[lf,pf]}}]),e}(),vf=function(){function e(t,n,r,a,i,o,s,u,c,l){I(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=a,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Id("c:"+this.id+":"),this.transportManager_=new hf(n),this.log_("Connection created"),this.start_()}return N(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var a=t.healthyTimeout||0;a>0&&(this.healthyTimeout_=Gd((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(a)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=Ld("t",e),n=Ld("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=Ld("t",e),n=Ld("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=Ld("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Cd("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Cd("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xd!==n&&Ad("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gd((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gd((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),mf=function(){function e(){I(this,e)}return N(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),yf=function(){function e(t){I(this,e),this.allowedEvents_=t,this.listeners_={},X(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return N(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,Ze.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0;i<t.length;i++)t[i].callback.apply(t[i].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],a=0;a<r.length;a++)if(r[a].callback===t&&(!n||n===r[a].context))return void r.splice(a,1)}},{key:"validateEventType_",value:function(e){X(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),gf=function(e){P(n,e);var t=F(n);function n(){var e;return I(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||se()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return N(n,[{key:"getInitialEvent",value:function(e){return X("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(yf),bf=function(){function e(t,n){if(I(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[r]=this.pieces_[a],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return N(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function xf(){return new bf("")}function kf(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function wf(e){return e.pieces_.length-e.pieceNum_}function _f(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new bf(e.pieces_,t)}function Tf(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Sf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Ef(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new bf(t,0)}function If(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof bf)for(var a=t.pieceNum_;a<t.pieces_.length;a++)n.push(t.pieces_[a]);else for(var i=t.split("/"),o=0;o<i.length;o++)i[o].length>0&&n.push(i[o]);return new bf(n,0)}function Cf(e){return e.pieceNum_>=e.pieces_.length}function Nf(e,t){var n=kf(e),r=kf(t);if(null===n)return t;if(n===r)return Nf(_f(e),_f(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Af(e,t){for(var n=Sf(e,0),r=Sf(t,0),a=0;a<n.length&&a<r.length;a++){var i=Dd(n[a],r[a]);if(0!==i)return i}return n.length===r.length?0:n.length<r.length?-1:1}function Of(e,t){if(wf(e)!==wf(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Pf(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(wf(e)>wf(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Rf=N((function e(t,n){I(this,e),this.errorPrefix_=n,this.parts_=Sf(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Be(this.parts_[r]);Df(this)}));function Df(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Mf(e))}function Mf(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Lf=function(e){P(n,e);var t=F(n);function n(){var e,r,a;return I(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(a="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(a="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(a="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(a="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,a&&document.addEventListener(a,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return N(n,[{key:"getInitialEvent",value:function(e){return X("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(yf),Ff=1e3,Bf=function(e){P(n,e);var t=F(n);function n(e,r,a,i,o,s,u,c){var l;if(I(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=a,l.onConnectStatus_=i,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Id("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Ff,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!fe())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Lf.getInstance().on("visible",l.onVisible_,A(l)),-1===e.host.indexOf("fblocal")&&gf.getInstance().on("online",l.onOnline_,A(l)),l}return N(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,a={r:r,a:e,b:t};this.log_(be(a)),X(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new ae,r={p:e._path.toString(),q:e._queryObject},a={action:"g",request:r,onComplete:function(e){var a=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,a,!1,null),n.resolve(a)):n.reject(a)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var i=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[i];void 0!==e&&a===e&&(delete t.outstandingGets_[i],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+i+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(i),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var a=e._queryIdentifier,i=e._path.toString();this.log_("Listen called for "+i+" "+a),this.listens.has(i)||this.listens.set(i,new Map),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),X(!this.listens.get(i).has(a),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(i).set(a,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,a=r._path.toString(),i=r._queryIdentifier;this.log_("Listen on "+a+" for "+i);var o={p:a};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(a)&&t.listens.get(a).get(i))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(a,i),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=xe(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=xe(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,a=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,a))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),X(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var a={p:e};r&&(a.q=n,a.t=r),this.sendRequest("n",a)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var a={p:t,d:n};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,a){this.initConnection_();var i={p:t,d:n};void 0!==a&&(i.h=a),this.outstandingPuts_.push({action:e,request:i,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),a&&a(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+be(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Cd("Unrecognized action received from server: "+be(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;X(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ff,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ff,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ff),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=j(G().mark((function e(){var t,r,a,i,o,s,u,c,l,d,f,p,h,v,m=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,a())},l=function(e){X(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:c,sendRequest:l},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:f=e.sent,p=(0,W.Z)(f,2),h=p[0],v=p[1],s?Ed("getToken() completed but was canceled"):(Ed("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=v&&v.token,u=new vf(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,a,(function(e){Ad(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&Ad(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ed("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ed("Resuming connection for reason: "+e),delete this.interruptReasons_[e],_e(this.interruptReasons_)&&(this.reconnectDelay_=Ff,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Fd(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new bf(e).toString();if(this.listens.has(r)){var a=this.listens.get(r);n=a.get(t),a.delete(t),0===a.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ed("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ed("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=V(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=V(e.value.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;this.sendListen_(a)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";fe()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+fd.replace(/\./g,"-")]=1,se()?e["framework.cordova"]=1:le()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=gf.getInstance().currentlyOnline();return _e(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ke(e,"w")){var n=we(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();Ad("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(a," to your security rules for better performance."))}}}}]),n}(mf);Bf.nextPersistentConnectionId_=0,Bf.nextConnectionId_=0;var jf,Uf=function(){function e(t,n){I(this,e),this.name=t,this.node=n}return N(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),Vf=function(){function e(){I(this,e)}return N(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Uf(Pd,e),r=new Uf(Pd,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Uf.MIN}}]),e}(),Wf=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){return Dd(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Q("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Uf.MIN}},{key:"maxPost",value:function(){return new Uf(Rd,jf)}},{key:"makePost",value:function(e,t){return X("string"===typeof e,"KeyIndex indexValue must always be a string."),new Uf(e,jf)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return jf},set:function(e){jf=e}}]),n}(Vf),zf=new Wf,qf=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;I(this,e),this.isReverse_=a,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=n?r(t.key,n):1,a&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return N(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Kf=function(){function e(t,n,r,a,i){I(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:Zf.EMPTY_NODE,this.right=null!=i?i:Zf.EMPTY_NODE}return N(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Zf.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Zf.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Kf.RED=!0,Kf.BLACK=!1;var Gf,Hf=function(){function e(){I(this,e)}return N(e,[{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new Kf(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Zf=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;I(this,e),this.comparator_=t,this.root_=n}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Kf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Kf.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new qf(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new qf(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new qf(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new qf(this.root_,null,this.comparator_,!0,e)}}]),e}();function Yf(e,t){return Dd(e.name,t.name)}function Xf(e,t){return Dd(e,t)}Zf.EMPTY_NODE=new Hf;var Qf,Jf,$f,ep=function(e){return"number"===typeof e?"number:"+Ud(e):"string:"+e},tp=function(e){if(e.isLeafNode()){var t=e.val();X("string"===typeof t||"number"===typeof t||"object"===typeof t&&ke(t,".sv"),"Priority must be a string or number.")}else X(e===Gf||e.isEmpty(),"priority of unexpected type.");X(e===Gf||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},np=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;I(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,X(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),tp(this.priorityNode_)}return N(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Cf(t)?this:".priority"===kf(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=kf(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(X(".priority"!==r||1===wf(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(_f(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+ep(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?Ud(this.value_):this.value_,this.lazyHash_=kd(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(X(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,a=e.VALUE_TYPE_ORDER.indexOf(n),i=e.VALUE_TYPE_ORDER.indexOf(r);return X(a>=0,"Unknown leaf type: "+n),X(i>=0,"Unknown leaf type: "+r),a===i?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-a}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Qf},set:function(e){Qf=e}}]),e}();np.VALUE_TYPE_ORDER=["object","boolean","number","string"];var rp,ap,ip=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),a=n.compareTo(r);return 0===a?Dd(e.name,t.name):a}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Uf.MIN}},{key:"maxPost",value:function(){return new Uf(Rd,new np("[PRIORITY-POST]",$f))}},{key:"makePost",value:function(e,t){var n=Jf(e);return new Uf(t,new np("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(Vf),op=new ip,sp=Math.log(2),up=function(){function e(t){I(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/sp,10)),this.current_=this.count-1;var r,a=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&a}return N(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),cp=function(e,t,n,r){e.sort(t);var a=function t(r,a){var i,o,s=a-r;if(0===s)return null;if(1===s)return i=e[r],o=n?n(i):i,new Kf(o,i.node,Kf.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,a);return i=e[u],o=n?n(i):i,new Kf(o,i.node,Kf.BLACK,c,l)},i=function(t){for(var r=null,i=null,o=e.length,s=function(t,r){var i=o-t,s=o;o-=t;var c=a(i+1,s),l=e[i],d=n?n(l):l;u(new Kf(d,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(i=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),d=Math.pow(2,t.count-(c+1));l?s(d,Kf.BLACK):(s(d,Kf.BLACK),s(d,Kf.RED))}return i}(new up(e.length));return new Zf(r||t,i)},lp={},dp=function(){function e(t,n){I(this,e),this.indexes_=t,this.indexSet_=n}return N(e,[{key:"get",value:function(e){var t=we(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Zf?t:null}},{key:"hasIndex",value:function(e){return ke(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){X(t!==zf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],i=!1,o=n.getIterator(Uf.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),a.push(s),s=o.getNext();r=i?cp(a,t.getCompare()):lp;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Te(this.indexes_,(function(e,a){var i=we(r.indexSet_,a);if(X(i,"Missing index implementation for "+a),e===lp){if(i.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(Uf.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),cp(o,i.getCompare())}return lp}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Uf(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Te(this.indexes_,(function(e){if(e===lp)return e;var r=n.get(t.name);return r?e.remove(new Uf(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return X(lp&&op,"ChildrenNode.ts has not been loaded"),rp=rp||new e({".priority":lp},{".priority":op})}}]),e}(),fp=function(){function e(t,n,r){I(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tp(this.priorityNode_),this.children_.isEmpty()&&X(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return N(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ap}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ap:t}},{key:"getChild",value:function(e){var t=kf(e);return null===t?this:this.getImmediateChild(t).getChild(_f(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(X(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,a,i=new Uf(t,n);n.isEmpty()?(r=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(i,this.children_));var o=r.isEmpty()?ap:this.priorityNode_;return new e(r,o,a)}},{key:"updateChild",value:function(e,t){var n=kf(e);if(null===n)return t;X(".priority"!==kf(e)||1===wf(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(_f(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,a=0,i=!0;if(this.forEachChild(op,(function(o,s){n[o]=s.val(t),r++,i&&e.INTEGER_REGEXP_.test(o)?a=Math.max(a,Number(o)):i=!1})),!t&&i&&a<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+ep(this.getPriority().val())+":"),this.forEachChild(op,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":kd(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var a=r.getPredecessorKey(new Uf(e,t));return a?a.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Uf(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Uf(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Uf.Wrap),a=r.peek();null!=a&&t.compare(a,e)<0;)r.getNext(),a=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Uf.Wrap),a=r.peek();null!=a&&t.compare(a,e)>0;)r.getNext(),a=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pp?-1:0}},{key:"withIndex",value:function(t){if(t===zf||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===zf||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(op),r=t.getIterator(op),a=n.getNext(),i=r.getNext();a&&i;){if(a.name!==i.name||!a.node.equals(i.node))return!1;a=n.getNext(),i=r.getNext()}return null===a&&null===i}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===zf?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ap||(ap=new e(new Zf(Xf),null,dp.Default))}}]),e}();fp.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var pp=new(function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.call(this,new Zf(Xf),fp.EMPTY_NODE,dp.Default)}return N(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return fp.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(fp));Object.defineProperties(Uf,{MIN:{value:new Uf(Pd,fp.EMPTY_NODE)},MAX:{value:new Uf(Rd,pp)}}),Wf.__EMPTY_NODE=fp.EMPTY_NODE,np.__childrenNodeConstructor=fp,Gf=pp,function(e){$f=e}(pp);function hp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return fp.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),X(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new np(n,hp(t))}if(e instanceof Array){var r=fp.EMPTY_NODE;return jd(e,(function(t,n){if(ke(e,t)&&"."!==t.substring(0,1)){var a=hp(n);!a.isLeafNode()&&a.isEmpty()||(r=r.updateImmediateChild(t,a))}})),r.updatePriority(hp(t))}var a=[],i=!1,o=e;if(jd(o,(function(e,t){if("."!==e.substring(0,1)){var n=hp(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),a.push(new Uf(e,n)))}})),0===a.length)return fp.EMPTY_NODE;var s=cp(a,Yf,(function(e){return e.name}),Xf);if(i){var u=cp(a,op.getCompare());return new fp(s,hp(t),new dp({".priority":u},{".priority":op}))}return new fp(s,hp(t),dp.Default)}!function(e){Jf=e}(hp);var vp=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).indexPath_=e,X(!Cf(e)&&".priority"!==kf(e),"Can't create PathIndex with empty path or .priority key"),r}return N(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),a=n.compareTo(r);return 0===a?Dd(e.name,t.name):a}},{key:"makePost",value:function(e,t){var n=hp(e),r=fp.EMPTY_NODE.updateChild(this.indexPath_,n);return new Uf(t,r)}},{key:"maxPost",value:function(){var e=fp.EMPTY_NODE.updateChild(this.indexPath_,pp);return new Uf(Rd,e)}},{key:"toString",value:function(){return Sf(this.indexPath_,0).join("/")}}]),n}(Vf),mp=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Dd(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Uf.MIN}},{key:"maxPost",value:function(){return Uf.MAX}},{key:"makePost",value:function(e,t){var n=hp(e);return new Uf(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(Vf),yp=new mp,gp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",bp=function(){var e=0,t=[];return function(n){var r,a=n===e;e=n;var i=new Array(8);for(r=7;r>=0;r--)i[r]=gp.charAt(n%64),n=Math.floor(n/64);X(0===n,"Cannot push at time == 0");var o=i.join("");if(a){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=gp.charAt(t[r]);return X(20===o.length,"nextPushId: Length should be 20."),o}}(),xp=function(e){if("2147483647"===e)return"-";var t=qd(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var a=n.length-1;a>=0&&"z"===n[a];)a--;if(-1===a)return Rd;var i=n[a],o=gp.charAt(gp.indexOf(i)+1);return n[a]=o,n.slice(0,a+1).join("")},kp=function(e){if("-2147483648"===e)return Pd;var t=qd(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=gp.charAt(gp.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function wp(e){return{type:"value",snapshotNode:e}}function _p(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Tp(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Sp(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Ep=function(){function e(t){I(this,e),this.index_=t}return N(e,[{key:"updateChild",value:function(e,t,n,r,a,i){X(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=i&&(n.isEmpty()?e.hasChild(t)?i.trackChildChange(Tp(t,o)):X(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?i.trackChildChange(_p(t,n)):i.trackChildChange(Sp(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(op,(function(e,r){t.hasChild(e)||n.trackChildChange(Tp(e,r))})),t.isLeafNode()||t.forEachChild(op,(function(t,r){if(e.hasChild(t)){var a=e.getImmediateChild(t);a.equals(r)||n.trackChildChange(Sp(t,r,a))}else n.trackChildChange(_p(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?fp.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Ip=function(){function e(t){I(this,e),this.indexedFilter_=new Ep(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return N(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,a,i){return this.matches(new Uf(t,n))||(n=fp.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,a,i)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=fp.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(fp.EMPTY_NODE);var a=this;return t.forEachChild(op,(function(e,t){a.matches(new Uf(e,t))||(r=r.updateImmediateChild(e,fp.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),Cp=function(){function e(t){I(this,e),this.rangedFilter_=new Ip(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return N(e,[{key:"updateChild",value:function(e,t,n,r,a,i){return this.rangedFilter_.matches(new Uf(t,n))||(n=fp.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,a,i):this.fullLimitUpdateChild_(e,t,n,a,i)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=fp.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var a;r=fp.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var i=0;a.hasNext()&&i<this.limit_;){var o=a.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),i++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(fp.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var d=this.index_.getCompare();c=function(e,t){return d(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,p=!1;l.hasNext();){var h=l.getNext();!p&&c(s,h)<=0&&(p=!0),p&&f<this.limit_&&c(h,u)<=0?f++:r=r.updateImmediateChild(h.name,fp.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,a){var i;if(this.reverse_){var o=this.index_.getCompare();i=function(e,t){return o(t,e)}}else i=this.index_.getCompare();var s=e;X(s.numChildren()===this.limit_,"");var u=new Uf(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var d=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:i(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=a&&a.trackChildChange(Sp(t,n,d)),s.updateImmediateChild(t,n);null!=a&&a.trackChildChange(Tp(t,d));var h=s.updateImmediateChild(t,fp.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=a&&a.trackChildChange(_p(f.name,f.node)),h.updateImmediateChild(f.name,f.node)):h}return n.isEmpty()?e:l&&i(c,u)>=0?(null!=a&&(a.trackChildChange(Tp(c.name,c.node)),a.trackChildChange(_p(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,fp.EMPTY_NODE)):e}}]),e}(),Np=function(){function e(){I(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=op}return N(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return X(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return X(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Pd}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return X(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return X(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rd}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return X(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===op}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function Ap(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Op(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Pp(e,t){var n=e.copy();return n.index_=t,n}function Rp(e){var t,n={};return e.isDefault()||(e.index_===op?t="$priority":e.index_===yp?t="$value":e.index_===zf?t="$key":(X(e.index_ instanceof vp,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=be(t),e.startSet_&&(n.startAt=be(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+be(e.indexStartName_))),e.endSet_&&(n.endAt=be(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+be(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function Dp(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==op&&(t.i=e.index_.toString()),t}var Mp=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o;return I(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=a,o.appCheckTokenProvider_=i,o.log_=Id("p:rest:"),o.listens_={},o}return N(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,a){var i=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=Rp(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&i.onDataUpdate_(o,n,!1,r),we(i.listens_,s)===u)&&a(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=Rp(e._queryParams),r=e._path.toString(),a=new ae;return this.restRequest_(r+".json",n,(function(e,n){var i=n;404===e&&(i=null,e=null),null===e?(t.onDataUpdate_(r,i,!1,null),a.resolve(i)):a.reject(new Error(i))})),a.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(a){var i=(0,W.Z)(a,2),o=i[0],s=i[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ie(n);t.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ge(c.responseText)}catch(n){Ad("Failed to parse JSON response for "+u+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Ad("Got unsuccessful REST response for "+u+" Status: "+c.status),r(c.status);r=null}},c.open("GET",u,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(X(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(mf),Lp=function(){function e(){I(this,e),this.rootNode_=fp.EMPTY_NODE}return N(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Fp(){return{value:null,children:new Map}}function Bp(e,t,n){if(Cf(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=kf(t);e.children.has(r)||e.children.set(r,Fp()),Bp(e.children.get(r),t=_f(t),n)}}function jp(e,t){if(Cf(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(op,(function(t,n){Bp(e,new bf(t),n)})),jp(e,t)}if(e.children.size>0){var r=kf(t);if(t=_f(t),e.children.has(r))jp(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function Up(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Up(r,new bf(t.toString()+"/"+e),n)}))}var Vp,Wp=function(){function e(t){I(this,e),this.collection_=t,this.last_=null}return N(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&jd(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),zp=function(){function e(t,n){I(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Wp(t);var r=1e4+2e4*Math.random();Gd(this.reportStats_.bind(this),Math.floor(r))}return N(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;jd(t,(function(t,a){a>0&&ke(e.statsToReport_,t)&&(n[t]=a,r=!0)})),r&&this.server_.reportStats(n),Gd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function qp(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Vp||(Vp={}));var Kp,Gp=function(){function e(t,n,r){I(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Vp.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return N(e,[{key:"operationForChild",value:function(t){if(Cf(this.path)){if(null!=this.affectedTree.value)return X(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new bf(t));return new e(xf(),n,this.revert)}return X(kf(this.path)===t,"operationForChild called for unrelated child."),new e(_f(this.path),this.affectedTree,this.revert)}}]),e}(),Hp=function(){function e(t,n){I(this,e),this.source=t,this.path=n,this.type=Vp.LISTEN_COMPLETE}return N(e,[{key:"operationForChild",value:function(t){return Cf(this.path)?new e(this.source,xf()):new e(this.source,_f(this.path))}}]),e}(),Zp=function(){function e(t,n,r){I(this,e),this.source=t,this.path=n,this.snap=r,this.type=Vp.OVERWRITE}return N(e,[{key:"operationForChild",value:function(t){return Cf(this.path)?new e(this.source,xf(),this.snap.getImmediateChild(t)):new e(this.source,_f(this.path),this.snap)}}]),e}(),Yp=function(){function e(t,n,r){I(this,e),this.source=t,this.path=n,this.children=r,this.type=Vp.MERGE}return N(e,[{key:"operationForChild",value:function(t){if(Cf(this.path)){var n=this.children.subtree(new bf(t));return n.isEmpty()?null:n.value?new Zp(this.source,xf(),n.value):new e(this.source,xf(),n)}return X(kf(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,_f(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Xp=function(){function e(t,n,r){I(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return N(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Cf(e))return this.isFullyInitialized()&&!this.filtered_;var t=kf(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),Qp=N((function e(t){I(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Jp(e,t,n,r,a,i){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Q("Should only compare child_ events.");var r=new Uf(t.childName,t.snapshotNode),a=new Uf(n.childName,n.snapshotNode);return e.index_.compare(r,a)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,i);a.forEach((function(a){a.respondsTo(n.type)&&t.push(a.createEvent(r,e.query_))}))}))}function $p(e,t){return{eventCache:e,serverCache:t}}function eh(e,t,n,r){return $p(new Xp(t,n,r),e.serverCache)}function th(e,t,n,r){return $p(e.eventCache,new Xp(t,n,r))}function nh(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function rh(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ah=function(){return Kp||(Kp=new Zf(Md)),Kp},ih=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ah();I(this,e),this.value=t,this.children=n}return N(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:xf(),value:this.value};if(Cf(e))return null;var n=kf(e),r=this.children.get(n);if(null!==r){var a=r.findRootMostMatchingPathAndValue(_f(e),t);return null!=a?{path:If(new bf(n),a.path),value:a.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Cf(t))return this;var n=kf(t),r=this.children.get(n);return null!==r?r.subtree(_f(t)):new e(null)}},{key:"set",value:function(t,n){if(Cf(t))return new e(n,this.children);var r=kf(t),a=(this.children.get(r)||new e(null)).set(_f(t),n),i=this.children.insert(r,a);return new e(this.value,i)}},{key:"remove",value:function(t){if(Cf(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=kf(t),r=this.children.get(n);if(r){var a,i=r.remove(_f(t));return a=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&a.isEmpty()?new e(null):new e(this.value,a)}return this}},{key:"get",value:function(e){if(Cf(e))return this.value;var t=kf(e),n=this.children.get(t);return n?n.get(_f(e)):null}},{key:"setTree",value:function(t,n){if(Cf(t))return n;var r,a=kf(t),i=(this.children.get(a)||new e(null)).setTree(_f(t),n);return r=i.isEmpty()?this.children.remove(a):this.children.insert(a,i),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(xf(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,a){n[r]=a.fold_(If(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,xf(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Cf(e))return null;var a=kf(e),i=this.children.get(a);return i?i.findOnPath_(_f(e),If(t,a),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,xf(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Cf(t))return this;this.value&&r(n,this.value);var a=kf(t),i=this.children.get(a);return i?i.foreachOnPath_(_f(t),If(n,a),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(xf(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(If(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return jd(t,(function(e,t){n=n.set(new bf(e),t)})),n}}]),e}(),oh=function(){function e(t){I(this,e),this.writeTree_=t}return N(e,null,[{key:"empty",value:function(){return new e(new ih(null))}}]),e}();function sh(e,t,n){if(Cf(t))return new oh(new ih(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var a=r.path,i=r.value,o=Nf(a,t);return i=i.updateChild(o,n),new oh(e.writeTree_.set(a,i))}var s=new ih(n),u=e.writeTree_.setTree(t,s);return new oh(u)}function uh(e,t,n){var r=e;return jd(n,(function(e,n){r=sh(r,If(t,e),n)})),r}function ch(e,t){if(Cf(t))return oh.empty();var n=e.writeTree_.setTree(t,new ih(null));return new oh(n)}function lh(e,t){return null!=dh(e,t)}function dh(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Nf(n.path,t)):null}function fh(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(op,(function(e,n){t.push(new Uf(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Uf(e,n.value))})),t}function ph(e,t){if(Cf(t))return e;var n=dh(e,t);return new oh(null!=n?new ih(n):e.writeTree_.subtree(t))}function hh(e){return e.writeTree_.isEmpty()}function vh(e,t){return mh(xf(),e.writeTree_,t)}function mh(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,a){".priority"===t?(X(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):n=mh(If(e,t),a,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(If(e,".priority"),r)),n}function yh(e,t){return Oh(t,e)}function gh(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function bh(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));X(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var a=r.visible,i=!1,o=e.allWrites.length-1;a&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&xh(s,r.path)?a=!1:Pf(r.path,s.path)&&(i=!0)),o--}if(a){if(i)return function(e){e.visibleWrites=wh(e.allWrites,kh,xf()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=ch(e.visibleWrites,r.path):jd(r.children,(function(t){e.visibleWrites=ch(e.visibleWrites,If(r.path,t))}));return!0}return!1}function xh(e,t){if(e.snap)return Pf(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Pf(If(e.path,n),t))return!0;return!1}function kh(e){return e.visible}function wh(e,t,n){for(var r=oh.empty(),a=0;a<e.length;++a){var i=e[a];if(t(i)){var o=i.path,s=void 0;if(i.snap)Pf(n,o)?r=sh(r,s=Nf(n,o),i.snap):Pf(o,n)&&(s=Nf(o,n),r=sh(r,xf(),i.snap.getChild(s)));else{if(!i.children)throw Q("WriteRecord should have .snap or .children");if(Pf(n,o))r=uh(r,s=Nf(n,o),i.children);else if(Pf(o,n))if(Cf(s=Nf(o,n)))r=uh(r,xf(),i.children);else{var u=we(i.children,kf(s));if(u){var c=u.getChild(_f(s));r=sh(r,xf(),c)}}}}}return r}function _h(e,t,n,r,a){if(r||a){var i=ph(e.visibleWrites,t);if(!a&&hh(i))return n;if(a||null!=n||lh(i,xf())){return vh(wh(e.allWrites,(function(e){return(e.visible||a)&&(!r||!~r.indexOf(e.writeId))&&(Pf(e.path,t)||Pf(t,e.path))}),t),n||fp.EMPTY_NODE)}return null}var o=dh(e.visibleWrites,t);if(null!=o)return o;var s=ph(e.visibleWrites,t);return hh(s)?n:null!=n||lh(s,xf())?vh(s,n||fp.EMPTY_NODE):null}function Th(e,t,n,r){return _h(e.writeTree,e.treePath,t,n,r)}function Sh(e,t){return function(e,t,n){var r=fp.EMPTY_NODE,a=dh(e.visibleWrites,t);if(a)return a.isLeafNode()||a.forEachChild(op,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var i=ph(e.visibleWrites,t);return n.forEachChild(op,(function(e,t){var n=vh(ph(i,new bf(e)),t);r=r.updateImmediateChild(e,n)})),fh(i).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return fh(ph(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Eh(e,t,n,r){return function(e,t,n,r,a){X(r||a,"Either existingEventSnap or existingServerSnap must exist");var i=If(t,n);if(lh(e.visibleWrites,i))return null;var o=ph(e.visibleWrites,i);return hh(o)?a.getChild(n):vh(o,a.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Ih(e,t){return function(e,t){return dh(e.visibleWrites,t)}(e.writeTree,If(e.treePath,t))}function Ch(e,t,n,r,a,i){return function(e,t,n,r,a,i,o){var s,u=ph(e.visibleWrites,t),c=dh(u,xf());if(null!=c)s=c;else{if(null==n)return[];s=vh(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],d=o.getCompare(),f=i?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),p=f.getNext();p&&l.length<a;)0!==d(p,r)&&l.push(p),p=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,a,i)}function Nh(e,t,n){return function(e,t,n,r){var a=If(t,n),i=dh(e.visibleWrites,a);return null!=i?i:r.isCompleteForChild(n)?vh(ph(e.visibleWrites,a),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function Ah(e,t){return Oh(If(e.treePath,t),e.writeTree)}function Oh(e,t){return{treePath:e,writeTree:t}}var Ph=function(){function e(){I(this,e),this.changeMap=new Map}return N(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;X("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),X(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var a=r.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(n,Sp(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(n,Tp(n,r.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(n,_p(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw Q("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Sp(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),Rh=new(function(){function e(){I(this,e)}return N(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),Dh=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;I(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return N(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Xp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Nh(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:rh(this.viewCache_),a=Ch(this.writes_,r,t,1,n,e);return 0===a.length?null:a[0]}}]),e}();function Mh(e,t,n,r,a){var i,o,s=new Ph;if(n.type===Vp.OVERWRITE){var u=n;u.source.fromUser?i=Bh(e,t,u.path,u.snap,r,a,s):(X(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!Cf(u.path),i=Fh(e,t,u.path,u.snap,r,a,o,s))}else if(n.type===Vp.MERGE){var c=n;c.source.fromUser?i=function(e,t,n,r,a,i,o){var s=t;return r.foreach((function(r,u){var c=If(n,r);jh(t,kf(c))&&(s=Bh(e,s,c,u,a,i,o))})),r.foreach((function(r,u){var c=If(n,r);jh(t,kf(c))||(s=Bh(e,s,c,u,a,i,o))})),s}(e,t,c.path,c.children,r,a,s):(X(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),i=Vh(e,t,c.path,c.children,r,a,o,s))}else if(n.type===Vp.ACK_USER_WRITE){var l=n;i=l.revert?function(e,t,n,r,a,i){var o;if(null!=Ih(r,n))return t;var s,u=new Dh(r,t,a),c=t.eventCache.getNode();if(Cf(n)||".priority"===kf(n)){var l;if(t.serverCache.isFullyInitialized())l=Th(r,rh(t));else{var d=t.serverCache.getNode();X(d instanceof fp,"serverChildren would be complete if leaf node"),l=Sh(r,d)}l=l,s=e.filter.updateFullNode(c,l,i)}else{var f=kf(n),p=Nh(r,f,t.serverCache);null==p&&t.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(s=null!=p?e.filter.updateChild(c,f,p,_f(n),u,i):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,fp.EMPTY_NODE,_f(n),u,i):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=Th(r,rh(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,i))}return o=t.serverCache.isFullyInitialized()||null!=Ih(r,xf()),eh(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,a,s):function(e,t,n,r,a,i,o){if(null!=Ih(a,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(Cf(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Fh(e,t,n,u.getNode().getChild(n),a,i,s,o);if(Cf(n)){var c=new ih(null);return u.getNode().forEachChild(zf,(function(e,t){c=c.set(new bf(e),t)})),Vh(e,t,n,c,a,i,s,o)}return t}var l=new ih(null);return r.foreach((function(e,t){var r=If(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Vh(e,t,n,l,a,i,s,o)}(e,t,l.path,l.affectedTree,r,a,s)}else{if(n.type!==Vp.LISTEN_COMPLETE)throw Q("Unknown operation type: "+n.type);i=function(e,t,n,r,a){var i=t.serverCache,o=th(t,i.getNode(),i.isFullyInitialized()||Cf(n),i.isFiltered());return Lh(e,o,n,r,Rh,a)}(e,t,n.path,r,s)}var d=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var a=r.getNode().isLeafNode()||r.getNode().isEmpty(),i=nh(e);(n.length>0||!e.eventCache.isFullyInitialized()||a&&!r.getNode().equals(i)||!r.getNode().getPriority().equals(i.getPriority()))&&n.push(wp(nh(t)))}}(t,i,d),{viewCache:i,changes:d}}function Lh(e,t,n,r,a,i){var o,s,u=t.eventCache;if(null!=Ih(r,n))return t;if(Cf(n))if(X(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=rh(t),l=Sh(r,c instanceof fp?c:fp.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,i)}else{var d=Th(r,rh(t));o=e.filter.updateFullNode(t.eventCache.getNode(),d,i)}else{var f=kf(n);if(".priority"===f){X(1===wf(n),"Can't have a priority with additional path components");var p=u.getNode(),h=Eh(r,n,p,s=t.serverCache.getNode());o=null!=h?e.filter.updatePriority(p,h):u.getNode()}else{var v,m=_f(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var y=Eh(r,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(f).updateChild(m,y):u.getNode().getImmediateChild(f)}else v=Nh(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,m,a,i):u.getNode()}}return eh(t,o,u.isFullyInitialized()||Cf(n),e.filter.filtersNodes())}function Fh(e,t,n,r,a,i,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Cf(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var d=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),d,null)}else{var f=kf(n);if(!c.isCompleteForPath(n)&&wf(n)>1)return t;var p=_f(n),h=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),h):l.updateChild(c.getNode(),f,h,p,Rh,null)}var v=th(t,u,c.isFullyInitialized()||Cf(n),l.filtersNodes());return Lh(e,v,n,a,new Dh(a,v,i),s)}function Bh(e,t,n,r,a,i,o){var s,u,c=t.eventCache,l=new Dh(a,t,i);if(Cf(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=eh(t,u,!0,e.filter.filtersNodes());else{var d=kf(n);if(".priority"===d)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=eh(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,p=_f(n),h=c.getNode().getImmediateChild(d);if(Cf(p))f=r;else{var v=l.getCompleteChild(d);f=null!=v?".priority"===Tf(p)&&v.getChild(Ef(p)).isEmpty()?v:v.updateChild(p,r):fp.EMPTY_NODE}if(h.equals(f))s=t;else s=eh(t,e.filter.updateChild(c.getNode(),d,f,p,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function jh(e,t){return e.eventCache.isCompleteForChild(t)}function Uh(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Vh(e,t,n,r,a,i,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=Cf(n)?r:new ih(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=Uh(0,t.serverCache.getNode().getImmediateChild(n),r);c=Fh(e,c,new bf(n),u,a,i,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var d=Uh(0,t.serverCache.getNode().getImmediateChild(n),r);c=Fh(e,c,new bf(n),d,a,i,o,s)}})),c}var Wh,zh=function(){function e(t,n){I(this,e),this.query_=t,this.eventRegistrations_=[];var r,a=this.query_._queryParams,i=new Ep(a.getIndex()),o=(r=a).loadsAllData()?new Ep(r.getIndex()):r.hasLimit()?new Cp(r):new Ip(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=i.updateFullNode(fp.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(fp.EMPTY_NODE,u.getNode(),null),d=new Xp(c,s.isFullyInitialized(),i.filtersNodes()),f=new Xp(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=$p(f,d),this.eventGenerator_=new Qp(this.query_)}return N(e,[{key:"query",get:function(){return this.query_}}]),e}();function qh(e,t){var n=rh(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Cf(t)&&!n.getImmediateChild(kf(t)).isEmpty())?n.getChild(t):null}function Kh(e){return 0===e.eventRegistrations_.length}function Gh(e,t,n){var r=[];if(n){X(null==t,"A cancel should cancel all event registrations.");var a=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,a);t&&r.push(t)}))}if(t){for(var i=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}else i.push(s)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function Hh(e,t,n,r){t.type===Vp.MERGE&&null!==t.source.queryId&&(X(rh(e.viewCache_),"We should always have a full cache before handling merges"),X(nh(e.viewCache_),"Missing event cache, even though we have a server cache"));var a,i,o=e.viewCache_,s=Mh(e.processor_,o,t,n,r);return a=e.processor_,i=s.viewCache,X(i.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),X(i.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),X(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Zh(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Zh(e,t,n,r){var a=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var a=[],i=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&i.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Jp(e,a,"child_removed",t,r,n),Jp(e,a,"child_added",t,r,n),Jp(e,a,"child_moved",i,r,n),Jp(e,a,"child_changed",t,r,n),Jp(e,a,"value",t,r,n),a}(e.eventGenerator_,t,n,a)}var Yh,Xh=N((function e(){I(this,e),this.views=new Map}));function Qh(e,t,n,r){var a=t.source.queryId;if(null!==a){var i=e.views.get(a);return X(null!=i,"SyncTree gave us an op for an invalid query."),Hh(i,t,n,r)}var o,s=[],u=V(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(Hh(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Jh(e,t,n,r,a){var i=t._queryIdentifier,o=e.views.get(i);if(!o){var s=Th(n,a?r:null),u=!1;s?u=!0:r instanceof fp?(s=Sh(n,r),u=!1):(s=fp.EMPTY_NODE,u=!1);var c=$p(new Xp(s,u,!1),new Xp(r,a,!1));return new zh(t,c)}return o}function $h(e,t,n,r,a,i){var o=Jh(e,t,r,a,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(op,(function(e,t){r.push(_p(e,t))})),n.isFullyInitialized()&&r.push(wp(n.getNode())),Zh(e,r,n.getNode(),t)}(o,n)}function ev(e,t,n,r){var a=t._queryIdentifier,i=[],o=[],s=iv(e);if("default"===a){var u,c=V(e.views.entries());try{for(c.s();!(u=c.n()).done;){var l=(0,W.Z)(u.value,2),d=l[0],f=l[1];o=o.concat(Gh(f,n,r)),Kh(f)&&(e.views.delete(d),f.query._queryParams.loadsAllData()||i.push(f.query))}}catch(h){c.e(h)}finally{c.f()}}else{var p=e.views.get(a);p&&(o=o.concat(Gh(p,n,r)),Kh(p)&&(e.views.delete(a),p.query._queryParams.loadsAllData()||i.push(p.query)))}return s&&!iv(e)&&i.push(new(X(Wh,"Reference.ts has not been loaded"),Wh)(t._repo,t._path)),{removed:i,events:o}}function tv(e){var t,n=[],r=V(e.views.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;a.query._queryParams.loadsAllData()||n.push(a)}}catch(i){r.e(i)}finally{r.f()}return n}function nv(e,t){var n,r=null,a=V(e.views.values());try{for(a.s();!(n=a.n()).done;){var i=n.value;r=r||qh(i,t)}}catch(o){a.e(o)}finally{a.f()}return r}function rv(e,t){if(t._queryParams.loadsAllData())return ov(e);var n=t._queryIdentifier;return e.views.get(n)}function av(e,t){return null!=rv(e,t)}function iv(e){return null!=ov(e)}function ov(e){var t,n=V(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(a){n.e(a)}finally{n.f()}return null}var sv=1,uv=N((function e(t){I(this,e),this.listenProvider_=t,this.syncPointTree_=new ih(null),this.pendingWriteTree_={visibleWrites:oh.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function cv(e,t,n,r,a){return function(e,t,n,r,a){X(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===a&&(a=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:a}),a&&(e.visibleWrites=sh(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,a),a?yv(e,new Zp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function lv(e,t,n,r){!function(e,t,n,r){X(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=uh(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var a=ih.fromObject(n);return yv(e,new Yp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,a))}function dv(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=gh(e.pendingWriteTree_,t),a=bh(e.pendingWriteTree_,t);if(a){var i=new ih(null);return null!=r.snap?i=i.set(xf(),!0):jd(r.children,(function(e){i=i.set(new bf(e),!0)})),yv(e,new Gp(r.path,i,n))}return[]}function fv(e,t,n){return yv(e,new Zp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function pv(e,t,n,r){var a=t._path,i=e.syncPointTree_.get(a),o=[];if(i&&("default"===t._queryIdentifier||av(i,t))){var s=ev(i,t,n,r);0===i.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(a,(function(e,t){return iv(t)}));if(c&&!l){var d=e.syncPointTree_.subtree(a);if(!d.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&iv(t))return[ov(t)];var r=[];return t&&(r=tv(t)),jd(n,(function(e,t){r=r.concat(t)})),r}))}(d),p=0;p<f.length;++p){var h=f[p],v=h.query,m=xv(e,h);e.listenProvider_.startListening(Ev(v),kv(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(Ev(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(wv(t));e.listenProvider_.stopListening(Ev(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var a=wv(r),i=e.queryToTagMap.get(a);e.queryToTagMap.delete(a),e.tagToQueryMap.delete(i)}}}(e,u)}return o}function hv(e,t,n){var r=t._path,a=null,i=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=Nf(e,r);a=a||nv(t,n),i=i||iv(t)}));var o,s=e.syncPointTree_.get(r);(s?(i=i||iv(s),a=a||nv(s,xf())):(s=new Xh,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=a)?o=!0:(o=!1,a=fp.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=nv(t,xf());n&&(a=a.updateImmediateChild(e,n))})));var u=av(s,t);if(!u&&!t._queryParams.loadsAllData()){var c=wv(t);X(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=sv++;e.queryToTagMap.set(c,l),e.tagToQueryMap.set(l,c)}var d=$h(s,t,n,yh(e.pendingWriteTree_,r),a,o);if(!u&&!i){var f=rv(s,t);d=d.concat(function(e,t,n){var r=t._path,a=kv(e,t),i=xv(e,n),o=e.listenProvider_.startListening(Ev(t),a,i.hashFn,i.onComplete),s=e.syncPointTree_.subtree(r);if(a)X(!iv(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!Cf(e)&&t&&iv(t))return[ov(t).query];var r=[];return t&&(r=r.concat(tv(t).map((function(e){return e.query})))),jd(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(Ev(l),kv(e,l))}return o}(e,t,f))}return d}function vv(e,t,n){var r=e.pendingWriteTree_,a=e.syncPointTree_.findOnPath(t,(function(e,n){var r=nv(n,Nf(e,t));if(r)return r}));return _h(r,t,a,n,!0)}function mv(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var a=Nf(e,n);r=r||nv(t,a)}));var a=e.syncPointTree_.get(n);a?r=r||nv(a,xf()):(a=new Xh,e.syncPointTree_=e.syncPointTree_.set(n,a));var i=null!=r,o=i?new Xp(r,!0,!1):null;return function(e){return nh(e.viewCache_)}(Jh(a,t,yh(e.pendingWriteTree_,t._path),i?o.getNode():fp.EMPTY_NODE,i))}function yv(e,t){return gv(t,e.syncPointTree_,null,yh(e.pendingWriteTree_,xf()))}function gv(e,t,n,r){if(Cf(e.path))return bv(e,t,n,r);var a=t.get(xf());null==n&&null!=a&&(n=nv(a,xf()));var i=[],o=kf(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=Ah(r,o);i=i.concat(gv(s,u,c,l))}return a&&(i=i.concat(Qh(a,e,r,n))),i}function bv(e,t,n,r){var a=t.get(xf());null==n&&null!=a&&(n=nv(a,xf()));var i=[];return t.children.inorderTraversal((function(t,a){var o=n?n.getImmediateChild(t):null,s=Ah(r,t),u=e.operationForChild(t);u&&(i=i.concat(bv(u,a,o,s)))})),a&&(i=i.concat(Qh(a,e,r,n))),i}function xv(e,t){var n=t.query,r=kv(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||fp.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=_v(e,n);if(r){var a=Tv(r),i=a.path,o=a.queryId,s=Nf(i,t);return Sv(e,i,new Hp(qp(o),s))}return[]}(e,n._path,r):function(e,t){return yv(e,new Hp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var a=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return pv(e,n,null,a)}}}function kv(e,t){var n=wv(t);return e.queryToTagMap.get(n)}function wv(e){return e._path.toString()+"$"+e._queryIdentifier}function _v(e,t){return e.tagToQueryMap.get(t)}function Tv(e){var t=e.indexOf("$");return X(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new bf(e.substr(0,t))}}function Sv(e,t,n){var r=e.syncPointTree_.get(t);return X(r,"Missing sync point for query tag that we're tracking"),Qh(r,n,yh(e.pendingWriteTree_,t),null)}function Ev(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(X(Yh,"Reference.ts has not been loaded"),Yh)(e._repo,e._path):e}var Iv=function(){function e(t){I(this,e),this.node_=t}return N(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),Cv=function(){function e(t,n){I(this,e),this.syncTree_=t,this.path_=n}return N(e,[{key:"getImmediateChild",value:function(t){var n=If(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return vv(this.syncTree_,this.path_)}}]),e}(),Nv=function(e,t,n){return e&&"object"===typeof e?(X(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Av(e[".sv"],t,n):"object"===typeof e[".sv"]?Ov(e[".sv"],t):void X(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Av=function(e,t,n){if("timestamp"===e)return n.timestamp;X(!1,"Unexpected server value: "+e)},Ov=function(e,t,n){e.hasOwnProperty("increment")||X(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&X(!1,"Unexpected increment value: "+r);var a=t.node();if(X(null!==a&&"undefined"!==typeof a,"Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return r;var i=a.getValue();return"number"!==typeof i?r:i+r},Pv=function(e,t,n,r){return Dv(t,new Cv(n,e),r)},Rv=function(e,t,n){return Dv(e,new Iv(t),n)};function Dv(e,t,n){var r,a=e.getPriority().val(),i=Nv(a,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=Nv(o.getValue(),t,n);return s!==o.getValue()||i!==o.getPriority().val()?new np(s,hp(i)):e}var u=e;return r=u,i!==u.getPriority().val()&&(r=r.updatePriority(new np(i))),u.forEachChild(op,(function(e,a){var i=Dv(a,t.getImmediateChild(e),n);i!==a&&(r=r.updateImmediateChild(e,i))})),r}var Mv=N((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};I(this,e),this.name=t,this.parent=n,this.node=r}));function Lv(e,t){for(var n=t instanceof bf?t:new bf(t),r=e,a=kf(n);null!==a;){var i=we(r.node.children,a)||{children:{},childCount:0};r=new Mv(a,r,i),a=kf(n=_f(n))}return r}function Fv(e){return e.node.value}function Bv(e,t){e.node.value=t,zv(e)}function jv(e){return e.node.childCount>0}function Uv(e,t){jd(e.node.children,(function(n,r){t(new Mv(n,e,r))}))}function Vv(e,t,n,r){n&&!r&&t(e),Uv(e,(function(e){Vv(e,t,!0,r)})),n&&r&&t(e)}function Wv(e){return new bf(null===e.parent?e.name:Wv(e.parent)+"/"+e.name)}function zv(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===Fv(e)&&!jv(e)}(n),a=ke(e.node.children,t);r&&a?(delete e.node.children[t],e.node.childCount--,zv(e)):r||a||(e.node.children[t]=n.node,e.node.childCount++,zv(e))}(e.parent,e.name,e)}var qv=/[\[\].#$\/\u0000-\u001F\u007F]/,Kv=/[\[\].#$\u0000-\u001F\u007F]/,Gv=10485760,Hv=function(e){return"string"===typeof e&&0!==e.length&&!qv.test(e)},Zv=function(e){return"string"===typeof e&&0!==e.length&&!Kv.test(e)},Yv=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Od(e)||e&&"object"===typeof e&&ke(e,".sv")},Xv=function(e,t,n,r){r&&void 0===t||Qv(Me(e,"value"),t,n)},Qv=function e(t,n,r){var a=r instanceof bf?new Rf(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Mf(a));if("function"===typeof n)throw new Error(t+"contains a function "+Mf(a)+" with contents = "+n.toString());if(Od(n))throw new Error(t+"contains "+n.toString()+" "+Mf(a));if("string"===typeof n&&n.length>Gv/3&&Be(n)>Gv)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+Mf(a)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var i=!1,o=!1;if(jd(n,(function(n,r){if(".value"===n)i=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!Hv(n)))throw new Error(t+" contains an invalid key ("+n+") "+Mf(a)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Be(t),Df(e)}(a,n),e(t,r,a),function(e){var t=e.parts_.pop();e.byteLength_-=Be(t),e.parts_.length>0&&(e.byteLength_-=1)}(a)})),i&&o)throw new Error(t+' contains ".value" child '+Mf(a)+" in addition to actual children.")}},Jv=function(e,t,n,r){if(!r||void 0!==t){var a=Me(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(a+" must be an object containing the children to replace.");var i=[];jd(t,(function(e,t){var r=new bf(e);if(Qv(a,t,If(n,r)),".priority"===Tf(r)&&!Yv(t))throw new Error(a+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var a=Sf(r=t[n]),i=0;i<a.length;i++)if(".priority"===a[i]&&i===a.length-1);else if(!Hv(a[i]))throw new Error(e+"contains an invalid key ("+a[i]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Af);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&Pf(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(a,i)}},$v=function(e,t,n){if(!n||void 0!==t){if(Od(t))throw new Error(Me(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Yv(t))throw new Error(Me(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},em=function(e,t,n,r){if((!r||void 0!==n)&&!Hv(n))throw new Error(Me(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},tm=function(e,t,n,r){if((!r||void 0!==n)&&!Zv(n))throw new Error(Me(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},nm=function(e,t){if(".info"===kf(t))throw new Error(e+" failed = Can't modify data under /.info/")},rm=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Hv(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Zv(e)}(n))throw new Error(Me(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},am=N((function e(){I(this,e),this.eventLists_=[],this.recursionDepth_=0}));function im(e,t){for(var n=null,r=0;r<t.length;r++){var a=t[r],i=a.getPath();null===n||Of(i,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:i}),n.events.push(a)}n&&e.eventLists_.push(n)}function om(e,t,n){im(e,n),um(e,(function(e){return Of(e,t)}))}function sm(e,t,n){im(e,n),um(e,(function(e){return Pf(e,t)||Pf(t,e)}))}function um(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var a=e.eventLists_[r];if(a)t(a.path)?(cm(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function cm(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();_d&&Ed("event: "+n.toString()),Kd(r)}}}var lm="repo_interrupt",dm=function(){function e(t,n,r,a){I(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new am,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Fp(),this.transactionQueueTree_=new Mv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return N(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function fm(e,t,n){if(e.stats_=of(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Mp(e.repoInfo_,(function(t,n,r,a){vm(e,t,n,r,a)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return mm(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{be(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Bf(e.repoInfo_,t,(function(t,n,r,a){vm(e,t,n,r,a)}),(function(t){mm(e,t)}),(function(t){!function(e,t){jd(t,(function(t,n){ym(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return af[n]||(af[n]=t()),af[n]}(e.repoInfo_,(function(){return new zp(e.stats_,e.server_)})),e.infoData_=new Lp,e.infoSyncTree_=new uv({startListening:function(t,n,r,a){var i=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(i=fv(e.infoSyncTree_,t._path,o),setTimeout((function(){a("ok")}),0)),i},stopListening:function(){}}),ym(e,"connected",!1),e.serverSyncTree_=new uv({startListening:function(t,n,r,a){return e.server_.listen(t,r,n,(function(n,r){var i=a(n,r);sm(e.eventQueue_,t._path,i)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function pm(e){var t=e.infoData_.getNode(new bf(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hm(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:pm(e)})}function vm(e,t,n,r,a){e.dataUpdateCount++;var i=new bf(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(a)if(r){var s=Te(n,(function(e){return hp(e)}));o=function(e,t,n,r){var a=_v(e,r);if(a){var i=Tv(a),o=i.path,s=i.queryId,u=Nf(o,t),c=ih.fromObject(n);return Sv(e,o,new Yp(qp(s),u,c))}return[]}(e.serverSyncTree_,i,s,a)}else{var u=hp(n);o=function(e,t,n,r){var a=_v(e,r);if(null!=a){var i=Tv(a),o=i.path,s=i.queryId,u=Nf(o,t);return Sv(e,o,new Zp(qp(s),u,n))}return[]}(e.serverSyncTree_,i,u,a)}else if(r){var c=Te(n,(function(e){return hp(e)}));o=function(e,t,n){var r=ih.fromObject(n);return yv(e,new Yp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,i,c)}else{var l=hp(n);o=fv(e.serverSyncTree_,i,l)}var d=i;o.length>0&&(d=Nm(e,i)),sm(e.eventQueue_,d,o)}function mm(e,t){ym(e,"connected",t),!1===t&&function(e){Tm(e,"onDisconnectEvents");var t=hm(e),n=Fp();Up(e.onDisconnect_,xf(),(function(r,a){var i=Pv(r,a,e.serverSyncTree_,t);Bp(n,r,i)}));var r=[];Up(n,xf(),(function(t,n){r=r.concat(fv(e.serverSyncTree_,t,n));var a=Dm(e,t);Nm(e,a)})),e.onDisconnect_=Fp(),sm(e.eventQueue_,xf(),r)}(e)}function ym(e,t,n){var r=new bf("/.info/"+t),a=hp(n);e.infoData_.updateSnapshot(r,a);var i=fv(e.infoSyncTree_,r,a);sm(e.eventQueue_,r,i)}function gm(e){return e.nextWriteId_++}function bm(e,t,n,r,a){Tm(e,"set",{path:t.toString(),value:n,priority:r});var i=hm(e),o=hp(n,r),s=vv(e.serverSyncTree_,t),u=Rv(o,s,i),c=gm(e),l=cv(e.serverSyncTree_,t,u,c,!0);im(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var i="ok"===n;i||Ad("set at "+t+" failed: "+n);var o=dv(e.serverSyncTree_,c,!i);sm(e.eventQueue_,t,o),Sm(e,a,n,r)}));var d=Dm(e,t);Nm(e,d),sm(e.eventQueue_,d,[])}function xm(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,a){"ok"===r&&jp(e.onDisconnect_,t),Sm(e,n,r,a)}))}function km(e,t,n,r){var a=hp(n);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,i){"ok"===n&&Bp(e.onDisconnect_,t,a),Sm(e,r,n,i)}))}function wm(e,t,n){var r;r=".info"===kf(t._path)?pv(e.infoSyncTree_,t,n):pv(e.serverSyncTree_,t,n),om(e.eventQueue_,t._path,r)}function _m(e){e.persistentConnection_&&e.persistentConnection_.interrupt(lm)}function Tm(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];Ed.apply(void 0,[t].concat(r))}function Sm(e,t,n,r){t&&Kd((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),a=e;r&&(a+=": "+r);var i=new Error(a);i.code=e,t(i)}}))}function Em(e,t,n){return vv(e.serverSyncTree_,t,n)||fp.EMPTY_NODE}function Im(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Rm(e,t),Fv(t)){var n=Om(e,t);X(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Cm(e,Wv(t),n)}else jv(t)&&Uv(t,(function(t){Im(e,t)}))}function Cm(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),a=Em(e,t,r),i=a,o=a.hash(),s=0;s<n.length;s++){var u=n[s];X(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=Nf(t,u.path);i=i.updateChild(c,u.currentOutputSnapshotRaw)}var l=i.val(!0),d=t;e.server_.put(d.toString(),l,(function(r){Tm(e,"transaction put response",{path:d.toString(),status:r});var a=[];if("ok"===r){for(var i=[],o=function(t){n[t].status=2,a=a.concat(dv(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);Rm(e,Lv(e.transactionQueueTree_,t)),Im(e,e.transactionQueueTree_),sm(e.eventQueue_,t,a);for(var u=0;u<i.length;u++)Kd(i[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Ad("transaction at "+d.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Nm(e,t)}}),o)}function Nm(e,t){var n=Am(e,t),r=Wv(n);return function(e,t,n){if(0===t.length)return;for(var r=[],a=[],i=t.filter((function(e){return 0===e.status})),o=i.map((function(e){return e.currentWriteId})),s=function(i){var s,u=t[i],c=Nf(n,u.path),l=!1,d=void 0;if(X(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,d=u.abortReason,a=a.concat(dv(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,d="maxretry",a=a.concat(dv(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Em(e,u.path,o);u.currentInputSnapshot=f;var p=t[i].update(f.val());if(void 0!==p){Qv("transaction failed: Data returned ",p,u.path);var h=hp(p);"object"===typeof p&&null!=p&&ke(p,".priority")||(h=h.updatePriority(f.getPriority()));var v=u.currentWriteId,m=hm(e),y=Rv(h,f,m);u.currentOutputSnapshotRaw=h,u.currentOutputSnapshotResolved=y,u.currentWriteId=gm(e),o.splice(o.indexOf(v),1),a=(a=a.concat(cv(e.serverSyncTree_,u.path,y,u.currentWriteId,u.applyLocally))).concat(dv(e.serverSyncTree_,v,!0))}else l=!0,d="nodata",a=a.concat(dv(e.serverSyncTree_,u.currentWriteId,!0))}sm(e.eventQueue_,n,a),a=[],l&&(t[i].status=2,s=t[i].unwatcher,setTimeout(s,Math.floor(0)),t[i].onComplete&&("nodata"===d?r.push((function(){return t[i].onComplete(null,!1,t[i].currentInputSnapshot)})):r.push((function(){return t[i].onComplete(new Error(d),!1,null)}))))},u=0;u<t.length;u++)s(u);Rm(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Kd(r[c]);Im(e,e.transactionQueueTree_)}(e,Om(e,n),r),r}function Am(e,t){var n,r=e.transactionQueueTree_;for(n=kf(t);null!==n&&void 0===Fv(r);)r=Lv(r,n),n=kf(t=_f(t));return r}function Om(e,t){var n=[];return Pm(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Pm(e,t,n){var r=Fv(t);if(r)for(var a=0;a<r.length;a++)n.push(r[a]);Uv(t,(function(t){Pm(e,t,n)}))}function Rm(e,t){var n=Fv(t);if(n){for(var r=0,a=0;a<n.length;a++)2!==n[a].status&&(n[r]=n[a],r++);n.length=r,Bv(t,n.length>0?n:void 0)}Uv(t,(function(t){Rm(e,t)}))}function Dm(e,t){var n=Wv(Am(e,t)),r=Lv(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Mm(e,t)})),Mm(e,r),Vv(r,(function(t){Mm(e,t)})),n}function Mm(e,t){var n=Fv(t);if(n){for(var r=[],a=[],i=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(X(i===o-1,"All SENT items should be at beginning of queue."),i=o,n[o].status=3,n[o].abortReason="set"):(X(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),a=a.concat(dv(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===i?Bv(t,void 0):n.length=i+1,sm(e.eventQueue_,Wv(t),a);for(var s=0;s<r.length;s++)Kd(r[s])}}var Lm=function(e,t){var n=Fm(e),r=n.namespace;"firebase.com"===n.domain&&Nd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Nd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ad("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var a="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ef(n.host,n.secure,r,t,a,"",r!==n.subdomain),path:new bf(n.pathString)}},Fm=function(e){var t="",n="",r="",a="",i="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(l,d)),l<d&&(a=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var a=n[r];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch(i){}t+="/"+a}return t}(e.substring(l,d)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=V(e.split("&"));try{for(r.s();!(n=r.n()).done;){var a=n.value;if(0!==a.length){var i=a.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ad("Invalid query segment '".concat(a,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,d)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var p=t.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var h=t.indexOf(".");r=t.substring(0,h).toLowerCase(),n=t.substring(h+1),i=r}"ns"in f&&(i=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:a,namespace:i}},Bm=function(){function e(t,n,r,a){I(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=a}return N(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+be(this.snapshot.exportVal())}}]),e}(),jm=function(){function e(t,n,r){I(this,e),this.eventRegistration=t,this.error=n,this.path=r}return N(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),Um=function(){function e(t,n){I(this,e),this.snapshotCallback=t,this.cancelCallback=n}return N(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return X(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),Vm=function(){function e(t,n){I(this,e),this._repo=t,this._path=n}return N(e,[{key:"cancel",value:function(){var e=new ae;return xm(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){nm("OnDisconnect.remove",this._path);var e=new ae;return km(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){nm("OnDisconnect.set",this._path),Xv("OnDisconnect.set",e,this._path,!1);var t=new ae;return km(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){nm("OnDisconnect.setWithPriority",this._path),Xv("OnDisconnect.setWithPriority",e,this._path,!1),$v("OnDisconnect.setWithPriority",t,!1);var n=new ae;return function(e,t,n,r,a){var i=hp(n,r);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,r){"ok"===n&&Bp(e.onDisconnect_,t,i),Sm(0,a,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){nm("OnDisconnect.update",this._path),Jv("OnDisconnect.update",e,this._path,!1);var t=new ae;return function(e,t,n,r){if(_e(n))return Ed("onDisconnect().update() called with empty data.  Don't do anything."),void Sm(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(a,i){"ok"===a&&jd(n,(function(n,r){var a=hp(r);Bp(e.onDisconnect_,If(t,n),a)})),Sm(0,r,a,i)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),Wm=function(){function e(t,n,r,a){I(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=a}return N(e,[{key:"key",get:function(){return Cf(this._path)?null:Tf(this._path)}},{key:"ref",get:function(){return new Gm(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Dp(this._queryParams),t=Fd(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Dp(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=je(t))instanceof e))return!1;var n=this._repo===t._repo,r=Of(this._path,t._path),a=this._queryIdentifier===t._queryIdentifier;return n&&r&&a}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function zm(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function qm(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===zf){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",a="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==Pd)throw new Error(r);if("string"!==typeof t)throw new Error(a)}if(e.hasEnd()){if(e.getIndexEndName()!==Rd)throw new Error(r);if("string"!==typeof n)throw new Error(a)}}else if(e.getIndex()===op){if(null!=t&&!Yv(t)||null!=n&&!Yv(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(X(e.getIndex()instanceof vp||e.getIndex()===yp,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Km(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Gm=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,r,new Np,!1)}return N(n,[{key:"parent",get:function(){var e=Ef(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(Wm),Hm=function(){function e(t,n,r){I(this,e),this._node=t,this.ref=n,this._index=r}return N(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new bf(t),r=Xm(this.ref,t);return new e(this._node.getChild(n),r,op)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,a){return t(new e(a,Xm(n.ref,r),op))}))}},{key:"hasChild",value:function(e){var t=new bf(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function Zm(e,t){return(e=je(e))._checkNotDeleted("ref"),void 0!==t?Xm(e._root,t):e._root}function Ym(e,t){(e=je(e))._checkNotDeleted("refFromURL");var n=Lm(t,e._repo.repoInfo_.nodeAdmin);rm("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||Nd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Zm(e,n.path.toString())}function Xm(e,t){var n,r,a,i;return null===kf((e=je(e))._path)?(n="child",r="path",i=!1,(a=t)&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),tm(n,r,a,i)):tm("child","path",t,!1),new Gm(e._repo,If(e._path,t))}function Qm(e,t){e=je(e),nm("push",e._path),Xv("push",t,e._path,!0);var n,r=pm(e._repo),a=bp(r),i=Xm(e,a),o=Xm(e,a);return n=null!=t?$m(o,t).then((function(){return o})):Promise.resolve(o),i.then=n.then.bind(n),i.catch=n.then.bind(n,void 0),i}function Jm(e){return nm("remove",e._path),$m(e,null)}function $m(e,t){e=je(e),nm("set",e._path),Xv("set",t,e._path,!1);var n=new ae;return bm(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function ey(e,t){e=je(e),nm("setPriority",e._path),$v("setPriority",t,!1);var n=new ae;return bm(e._repo,If(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function ty(e,t,n){if(nm("setWithPriority",e._path),Xv("setWithPriority",t,e._path,!1),$v("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new ae;return bm(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function ny(e,t){Jv("update",t,e._path,!1);var n=new ae;return function(e,t,n,r){Tm(e,"update",{path:t.toString(),value:n});var a=!0,i=hm(e),o={};if(jd(n,(function(n,r){a=!1,o[n]=Pv(If(t,n),hp(r),e.serverSyncTree_,i)})),a)Ed("update() called with empty data.  Don't do anything."),Sm(0,r,"ok",void 0);else{var s=gm(e),u=lv(e.serverSyncTree_,t,o,s);im(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,a){var i="ok"===n;i||Ad("update at "+t+" failed: "+n);var o=dv(e.serverSyncTree_,s,!i),u=o.length>0?Nm(e,t):t;sm(e.eventQueue_,u,o),Sm(0,r,n,a)})),jd(n,(function(n){var r=Dm(e,If(t,n));Nm(e,r)})),sm(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function ry(e){return function(e,t){var n=mv(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=hp(n).withIndex(t._queryParams.getIndex()),a=fv(e.serverSyncTree_,t._path,r);return om(e.eventQueue_,t._path,a),Promise.resolve(r)}),(function(n){return Tm(e,"get for query "+be(t)+" failed: "+n),Promise.reject(new Error(n))}))}((e=je(e))._repo,e).then((function(t){return new Hm(t,new Gm(e._repo,e._path),e._queryParams.getIndex())}))}var ay=function(){function e(t){I(this,e),this.callbackContext=t}return N(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new Bm("value",this,new Hm(e.snapshotNode,new Gm(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new jm(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),iy=function(){function e(t,n){I(this,e),this.eventType=t,this.callbackContext=n}return N(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new jm(this,e,t):null}},{key:"createEvent",value:function(e,t){X(null!=e.childName,"Child events should have a childName.");var n=Xm(new Gm(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new Bm(e.type,this,new Hm(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function oy(e,t,n,r,a){var i;if("object"===typeof r&&(i=void 0,a=r),"function"===typeof r&&(i=r),a&&a.onlyOnce){var o=n,s=function(t,n){wm(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new Um(n,i||void 0),c="value"===t?new ay(u):new iy(t,u);return function(e,t,n){var r;r=".info"===kf(t._path)?hv(e.infoSyncTree_,t,n):hv(e.serverSyncTree_,t,n),om(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return wm(e._repo,e,c)}}function sy(e,t,n,r){return oy(e,"value",t,n,r)}function uy(e,t,n,r){return oy(e,"child_added",t,n,r)}function cy(e,t,n,r){return oy(e,"child_changed",t,n,r)}function ly(e,t,n,r){return oy(e,"child_moved",t,n,r)}function dy(e,t,n,r){return oy(e,"child_removed",t,n,r)}function fy(e,t,n){var r=null,a=n?new Um(n):null;"value"===t?r=new ay(a):t&&(r=new iy(t,a)),wm(e._repo,e,r)}var py=N((function e(){I(this,e)})),hy=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this))._value=e,a._key=r,a}return N(n,[{key:"_apply",value:function(e){Xv("endAt",this._value,e._path,!0);var t=Op(e._queryParams,this._value,this._key);if(Km(t),qm(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wm(e._repo,e._path,t,e._orderByCalled)}}]),n}(py);function vy(e,t){return em("endAt","key",t,!0),new hy(e,t)}var my=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this))._value=e,a._key=r,a}return N(n,[{key:"_apply",value:function(e){Xv("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===zf?("string"===typeof t&&(t=kp(t)),r=Op(e,t,n)):r=Op(e,t,null==n?Pd:kp(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(Km(t),qm(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Wm(e._repo,e._path,t,e._orderByCalled)}}]),n}(py);function yy(e,t){return em("endBefore","key",t,!0),new my(e,t)}var gy=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this))._value=e,a._key=r,a}return N(n,[{key:"_apply",value:function(e){Xv("startAt",this._value,e._path,!0);var t=Ap(e._queryParams,this._value,this._key);if(Km(t),qm(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Wm(e._repo,e._path,t,e._orderByCalled)}}]),n}(py);function by(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return em("startAt","key",t,!0),new gy(e,t)}var xy=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this))._value=e,a._key=r,a}return N(n,[{key:"_apply",value:function(e){Xv("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===zf?("string"===typeof t&&(t=xp(t)),r=Ap(e,t,n)):r=Ap(e,t,null==n?Rd:xp(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Km(t),qm(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Wm(e._repo,e._path,t,e._orderByCalled)}}]),n}(py);function ky(e,t){return em("startAfter","key",t,!0),new xy(e,t)}var wy=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this))._limit=e,r}return N(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wm(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(py);function _y(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new wy(e)}var Ty=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this))._limit=e,r}return N(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Wm(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(py);function Sy(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ty(e)}var Ey=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this))._path=e,r}return N(n,[{key:"_apply",value:function(e){zm(e,"orderByChild");var t=new bf(this._path);if(Cf(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new vp(t),r=Pp(e._queryParams,n);return qm(r),new Wm(e._repo,e._path,r,!0)}}]),n}(py);function Iy(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return tm("orderByChild","path",e,!1),new Ey(e)}var Cy=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"_apply",value:function(e){zm(e,"orderByKey");var t=Pp(e._queryParams,zf);return qm(t),new Wm(e._repo,e._path,t,!0)}}]),n}(py);function Ny(){return new Cy}var Ay=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"_apply",value:function(e){zm(e,"orderByPriority");var t=Pp(e._queryParams,op);return qm(t),new Wm(e._repo,e._path,t,!0)}}]),n}(py);function Oy(){return new Ay}var Py=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"_apply",value:function(e){zm(e,"orderByValue");var t=Pp(e._queryParams,yp);return qm(t),new Wm(e._repo,e._path,t,!0)}}]),n}(py);function Ry(){return new Py}var Dy=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this))._value=e,a._key=r,a}return N(n,[{key:"_apply",value:function(e){if(Xv("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new hy(this._value,this._key)._apply(new gy(this._value,this._key)._apply(e))}}]),n}(py);function My(e,t){return em("equalTo","key",t,!0),new Dy(e,t)}function Ly(e){for(var t=je(e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];t=s._apply(t)}return t}!function(e){X(!Wh,"__referenceConstructor has already been defined"),Wh=e}(Gm),function(e){X(!Yh,"__referenceConstructor has already been defined"),Yh=e}(Gm);var Fy={},By=!1;function jy(e,t,n,r){e.repoInfo_=new ef("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function Uy(e,t,n,r,a){var i=r||e.options.databaseURL;void 0===i&&(e.options.projectId||Nd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ed("Using default host for project ",e.options.projectId),i="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=Lm(i,a),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,i="http://".concat(c,"?ns=").concat(u.namespace),u=(s=Lm(i,a)).repoInfo):o=!s.repoInfo.secure;var l=a&&o?new Yd(Yd.OWNER):new Zd(e.name,e.options,t);rm("Invalid Firebase Database URL",s),Cf(s.path)||Nd("Database URL must point to the root of a Firebase Database (not including a child path).");var d=function(e,t,n,r){var a=Fy[t.name];a||(a={},Fy[t.name]=a);var i=a[e.toURLString()];i&&Nd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new dm(e,By,n,r),a[e.toURLString()]=i,i}(u,e,l,new Hd(e.name,n));return new Vy(d,e)}var Vy=function(){function e(t,n){I(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return N(e,[{key:"_repo",get:function(){return this._instanceStarted||(fm(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Gm(this._repo,xf())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=Fy[t];n&&n[e.key]===e||Nd("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),_m(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Nd("Cannot call "+e+" on a deleted database.")}}]),e}();function Wy(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=je(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&Nd("Cannot call useEmulator() after instance has already been initialized.");var a=e._repoInternal,i=void 0;if(a.repoInfo_.nodeAdmin)r.mockUserToken&&Nd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),i=new Yd(Yd.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:ie(r.mockUserToken,e.app.options.projectId);i=new Yd(o)}jy(a,t,n,i)}function zy(e){(e=je(e))._checkNotDeleted("goOffline"),_m(e._repo)}function qy(e){var t;(e=je(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(lm)}function Ky(e,t){Sd(e,t)}var Gy={".sv":"timestamp"};var Hy=function(){function e(t,n){I(this,e),this.committed=t,this.snapshot=n}return N(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Zy(e,t,n){var r;if(e=je(e),nm("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var a=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,i=new ae,o=sy(e,(function(){}));return function(e,t,n,r,a,i){Tm(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:xd(),applyLocally:i,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=Em(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Qv("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=Lv(e.transactionQueueTree_,t),d=Fv(l)||[];d.push(o),Bv(l,d),"object"===typeof u&&null!==u&&ke(u,".priority")?(c=we(u,".priority"),X(Yv(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(vv(e.serverSyncTree_,t)||fp.EMPTY_NODE).getPriority().val();var f=hm(e),p=hp(u,c),h=Rv(p,s,f);o.currentOutputSnapshotRaw=p,o.currentOutputSnapshotResolved=h,o.currentWriteId=gm(e);var v=cv(e.serverSyncTree_,t,h,o.currentWriteId,o.applyLocally);sm(e.eventQueue_,t,v),Im(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var a=null;t?i.reject(t):(a=new Hm(r,new Gm(e._repo,e._path),op),i.resolve(new Hy(n,a)))}),o,a),i.promise}Bf.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Bf.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){pd(Et),bt(new Ye("database",(function(e,t){var n=t.instanceIdentifier;return Uy(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Pt(ld,dd,e),Pt(ld,dd,"esm2017")}();var Yy=new ut("@firebase/database-compat"),Xy=function(e){var t="FIREBASE WARNING: "+e;Yy.warn(t)},Qy=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Me(e,t)+"must be a boolean.")},Jy=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Me(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},$y=function(){function e(t){I(this,e),this._delegate=t}return N(e,[{key:"cancel",value:function(e){De("OnDisconnect.cancel",0,1,arguments.length),Le("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){De("OnDisconnect.remove",0,1,arguments.length),Le("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){De("OnDisconnect.set",1,2,arguments.length),Le("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){De("OnDisconnect.setWithPriority",2,3,arguments.length),Le("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(De("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Xy("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Le("OnDisconnect.update","onComplete",t,!0);var a=this._delegate.update(e);return t&&a.then((function(){return t(null)}),(function(e){return t(e)})),a}}]),e}(),eg=function(){function e(t,n){I(this,e),this.committed=t,this.snapshot=n}return N(e,[{key:"toJSON",value:function(){return De("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),tg=function(){function e(t,n){I(this,e),this._database=t,this._delegate=n}return N(e,[{key:"val",value:function(){return De("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return De("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return De("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return De("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return De("DataSnapshot.child",0,1,arguments.length),t=String(t),tm("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return De("DataSnapshot.hasChild",1,1,arguments.length),tm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return De("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return De("DataSnapshot.forEach",1,1,arguments.length),Le("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return De("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return De("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return De("DataSnapshot.ref",0,0,arguments.length),new rg(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),ng=function(){function e(t,n){I(this,e),this.database=t,this._delegate=n}return N(e,[{key:"on",value:function(t,n,r,a){var i,o=this;De("Query.on",2,4,arguments.length),Le("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,a),u=function(e,t){n.call(s.context,new tg(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(t){case"value":return sy(this._delegate,u,c),n;case"child_added":return uy(this._delegate,u,c),n;case"child_removed":return dy(this._delegate,u,c),n;case"child_changed":return cy(this._delegate,u,c),n;case"child_moved":return ly(this._delegate,u,c),n;default:throw new Error(Me("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(De("Query.off",0,3,arguments.length),Jy("Query.off",e,!0),Le("Query.off","callback",t,!0),Fe("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,fy(this._delegate,e,r)}else fy(this._delegate,e)}},{key:"get",value:function(){var e=this;return ry(this._delegate).then((function(t){return new tg(e.database,t)}))}},{key:"once",value:function(t,n,r,a){var i=this;De("Query.once",1,4,arguments.length),Le("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,a),s=new ae,u=function(e,t){var r=new tg(i.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":sy(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":uy(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":dy(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":cy(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":ly(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(Me("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return De("Query.limitToFirst",1,1,arguments.length),new e(this.database,Ly(this._delegate,_y(t)))}},{key:"limitToLast",value:function(t){return De("Query.limitToLast",1,1,arguments.length),new e(this.database,Ly(this._delegate,Sy(t)))}},{key:"orderByChild",value:function(t){return De("Query.orderByChild",1,1,arguments.length),new e(this.database,Ly(this._delegate,Iy(t)))}},{key:"orderByKey",value:function(){return De("Query.orderByKey",0,0,arguments.length),new e(this.database,Ly(this._delegate,Ny()))}},{key:"orderByPriority",value:function(){return De("Query.orderByPriority",0,0,arguments.length),new e(this.database,Ly(this._delegate,Oy()))}},{key:"orderByValue",value:function(){return De("Query.orderByValue",0,0,arguments.length),new e(this.database,Ly(this._delegate,Ry()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return De("Query.startAt",0,2,arguments.length),new e(this.database,Ly(this._delegate,by(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return De("Query.startAfter",0,2,arguments.length),new e(this.database,Ly(this._delegate,ky(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return De("Query.endAt",0,2,arguments.length),new e(this.database,Ly(this._delegate,vy(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return De("Query.endBefore",0,2,arguments.length),new e(this.database,Ly(this._delegate,yy(t,n)))}},{key:"equalTo",value:function(t,n){return De("Query.equalTo",1,2,arguments.length),new e(this.database,Ly(this._delegate,My(t,n)))}},{key:"toString",value:function(){return De("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return De("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(De("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new rg(this.database,new Gm(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Le(e,"cancel",r.cancel,!0),r.context=n,Fe(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Me(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),rg=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,new Wm(r._repo,r._path,new Np,!1))).database=e,a._delegate=r,a}return N(n,[{key:"getKey",value:function(){return De("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return De("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Xm(this._delegate,e))}},{key:"getParent",value:function(){De("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return De("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){De("Reference.set",1,2,arguments.length),Le("Reference.set","onComplete",t,!0);var n=$m(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(De("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Xy("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}nm("Reference.update",this._delegate._path),Le("Reference.update","onComplete",t,!0);var a=ny(this._delegate,e);return t&&a.then((function(){return t(null)}),(function(e){return t(e)})),a}},{key:"setWithPriority",value:function(e,t,n){De("Reference.setWithPriority",2,3,arguments.length),Le("Reference.setWithPriority","onComplete",n,!0);var r=ty(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){De("Reference.remove",0,1,arguments.length),Le("Reference.remove","onComplete",e,!0);var t=Jm(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;De("Reference.transaction",1,3,arguments.length),Le("Reference.transaction","transactionUpdate",e,!1),Le("Reference.transaction","onComplete",t,!0),Qy("Reference.transaction","applyLocally",n,!0);var a=Zy(this._delegate,e,{applyLocally:n}).then((function(e){return new eg(e.committed,new tg(r.database,e.snapshot))}));return t&&a.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),a}},{key:"setPriority",value:function(e,t){De("Reference.setPriority",1,2,arguments.length),Le("Reference.setPriority","onComplete",t,!0);var n=ey(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;De("Reference.push",0,2,arguments.length),Le("Reference.push","onComplete",t,!0);var a=Qm(this._delegate,e),i=a.then((function(e){return new n(r.database,e)}));t&&i.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,a);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}},{key:"onDisconnect",value:function(){return nm("Reference.onDisconnect",this._delegate._path),new $y(new Vm(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(ng),ag=function(){function e(t,n){var r=this;I(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return N(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wy(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(De("database.ref",0,1,arguments.length),e instanceof rg){var t=Ym(this._delegate,e.toString());return new rg(this,t)}var n=Zm(this._delegate,e);return new rg(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";De(t,1,1,arguments.length);var n=Ym(this._delegate,e);return new rg(this,n)}},{key:"goOffline",value:function(){return De("database.goOffline",0,0,arguments.length),zy(this._delegate)}},{key:"goOnline",value:function(){return De("database.goOnline",0,0,arguments.length),qy(this._delegate)}}]),e}();ag.ServerValue={TIMESTAMP:Gy,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var ig=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,a=e.customAuthImpl,i=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;pd(r);var u=new Qe("auth-internal",new et("database-standalone"));return u.setComponent(new Ye("auth-internal",(function(){return a}),"PRIVATE")),{instance:new ag(Uy(t,u,void 0,n,s),t),namespace:i}}}),og=ag.ServerValue;!function(e){e.INTERNAL.registerComponent(new Ye("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),a=e.getProvider("database").getImmediate({identifier:n});return new ag(a,r)}),"PUBLIC").setServiceProps({Reference:rg,Query:ng,Database:ag,DataSnapshot:tg,enableLogging:Ky,INTERNAL:ig,ServerValue:og}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.1.6")}(nn);var sg,ug="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},cg={},lg=lg||{},dg=ug||self;function fg(){}function pg(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hg(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vg="closure_uid_"+(1e9*Math.random()>>>0),mg=0;function yg(e,t,n){return e.call.apply(e.bind,arguments)}function gg(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function bg(e,t,n){return(bg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yg:gg).apply(null,arguments)}function xg(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function kg(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function wg(){this.s=this.s,this.o=this.o}var _g={};wg.prototype.s=!1,wg.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,vg)&&e[vg]||(e[vg]=++mg)}(this);delete _g[e]}},wg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Tg=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Sg=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,a="string"===typeof e?e.split(""):e,i=0;i<r;i++)i in a&&t.call(n,a[i],i,e)};function Eg(e){return Array.prototype.concat.apply([],arguments)}function Ig(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Cg(e){return/^[\s\xa0]*$/.test(e)}var Ng,Ag=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Og(e,t){return-1!=e.indexOf(t)}function Pg(e,t){return e<t?-1:e>t?1:0}e:{var Rg=dg.navigator;if(Rg){var Dg=Rg.userAgent;if(Dg){Ng=Dg;break e}}Ng=""}function Mg(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Lg(e){var t={};for(var n in e)t[n]=e[n];return t}var Fg="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bg(e,t){for(var n,r,a=1;a<arguments.length;a++){for(n in r=arguments[a])e[n]=r[n];for(var i=0;i<Fg.length;i++)n=Fg[i],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function jg(e){return jg[" "](e),e}jg[" "]=fg;var Ug,Vg=Og(Ng,"Opera"),Wg=Og(Ng,"Trident")||Og(Ng,"MSIE"),zg=Og(Ng,"Edge"),qg=zg||Wg,Kg=Og(Ng,"Gecko")&&!(Og(Ng.toLowerCase(),"webkit")&&!Og(Ng,"Edge"))&&!(Og(Ng,"Trident")||Og(Ng,"MSIE"))&&!Og(Ng,"Edge"),Gg=Og(Ng.toLowerCase(),"webkit")&&!Og(Ng,"Edge");function Hg(){var e=dg.document;return e?e.documentMode:void 0}e:{var Zg="",Yg=function(){var e=Ng;return Kg?/rv:([^\);]+)(\)|;)/.exec(e):zg?/Edge\/([\d\.]+)/.exec(e):Wg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Gg?/WebKit\/(\S+)/.exec(e):Vg?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Yg&&(Zg=Yg?Yg[1]:""),Wg){var Xg=Hg();if(null!=Xg&&Xg>parseFloat(Zg)){Ug=String(Xg);break e}}Ug=Zg}var Qg,Jg={};function $g(){return function(e){var t=Jg;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Ag(String(Ug)).split("."),n=Ag("9").split("."),r=Math.max(t.length,n.length),a=0;0==e&&a<r;a++){var i=t[a]||"",o=n[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;e=Pg(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||Pg(0==i[2].length,0==o[2].length)||Pg(i[2],o[2]),i=i[3],o=o[3]}while(0==e)}return 0<=e}))}if(dg.document&&Wg){var eb=Hg();Qg=eb||(parseInt(Ug,10)||void 0)}else Qg=void 0;var tb=Qg,nb=function(){if(!dg.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{dg.addEventListener("test",fg,t),dg.removeEventListener("test",fg,t)}catch(boe){}return e}();function rb(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ab(e,t){if(rb.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kg){e:{try{jg(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ib[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ab.Z.h.call(this)}}rb.prototype.h=function(){this.defaultPrevented=!0},kg(ab,rb);var ib={2:"touch",3:"pen",4:"mouse"};ab.prototype.h=function(){ab.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ob="closure_listenable_"+(1e6*Math.random()|0),sb=0;function ub(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=a,this.key=++sb,this.ca=this.fa=!1}function cb(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function lb(e){this.src=e,this.g={},this.h=0}function db(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=Tg(a,t);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(cb(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function fb(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.ca&&i.listener==t&&i.capture==!!n&&i.ia==r)return a}return-1}lb.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=fb(e,t,r,a);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ub(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var pb="closure_lm_"+(1e6*Math.random()|0),hb={};function vb(e,t,n,r,a){if(r&&r.once)return yb(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)vb(e,t[i],n,r,a);return null}return n=Tb(n),e&&e[ob]?e.N(t,n,hg(r)?!!r.capture:!!r,a):mb(e,t,n,!1,r,a)}function mb(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=hg(a)?!!a.capture:!!a,s=wb(e);if(s||(e[pb]=s=new lb(e)),(n=s.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=kb;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)nb||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(xb(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function yb(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)yb(e,t[i],n,r,a);return null}return n=Tb(n),e&&e[ob]?e.O(t,n,hg(r)?!!r.capture:!!r,a):mb(e,t,n,!0,r,a)}function gb(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)gb(e,t[i],n,r,a);else r=hg(r)?!!r.capture:!!r,n=Tb(n),e&&e[ob]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=fb(i=e.g[t],n,r,a))&&(cb(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=wb(e))&&(t=e.g[t.toString()],e=-1,t&&(e=fb(t,n,r,a)),(n=-1<e?t[e]:null)&&bb(n))}function bb(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ob])db(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xb(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=wb(t))?(db(n,e),0==n.h&&(n.src=null,t[pb]=null)):cb(e)}}}function xb(e){return e in hb?hb[e]:hb[e]="on"+e}function kb(e,t){if(e.ca)e=!0;else{t=new ab(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&bb(e),e=n.call(r,t)}return e}function wb(e){return(e=e[pb])instanceof lb?e:null}var _b="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tb(e){return"function"===typeof e?e:(e[_b]||(e[_b]=function(t){return e.handleEvent(t)}),e[_b])}function Sb(){wg.call(this),this.i=new lb(this),this.P=this,this.I=null}function Eb(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new rb(t,e);else if(t instanceof rb)t.target=t.target||e;else{var a=t;Bg(t=new rb(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];a=Ib(o,r,!0,t)&&a}if(a=Ib(o=t.g=e,r,!0,t)&&a,a=Ib(o,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=Ib(o=t.g=n[i],r,!1,t)&&a}function Ib(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&db(e.i,o),a=!1!==s.call(u,r)&&a}}return a&&!r.defaultPrevented}kg(Sb,wg),Sb.prototype[ob]=!0,Sb.prototype.removeEventListener=function(e,t,n,r){gb(this,e,t,n,r)},Sb.prototype.M=function(){if(Sb.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)cb(n[r]);delete t.g[e],t.h--}}this.I=null},Sb.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Sb.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Cb=dg.JSON.stringify;function Nb(){var e=Fb,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ab,Ob=function(){function e(){I(this,e),this.h=this.g=null}return N(e,[{key:"add",value:function(e,t){var n=Pb.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Pb=new(function(){function e(t,n){I(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return N(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Rb}),(function(e){return e.reset()})),Rb=function(){function e(){I(this,e),this.next=this.g=this.h=null}return N(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Db(e){dg.setTimeout((function(){throw e}),0)}function Mb(e,t){Ab||function(){var e=dg.Promise.resolve(void 0);Ab=function(){e.then(Bb)}}(),Lb||(Ab(),Lb=!0),Fb.add(e,t)}var Lb=!1,Fb=new Ob;function Bb(){for(var e;e=Nb();){try{e.h.call(e.g)}catch(boe){Db(boe)}var t=Pb;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Lb=!1}function jb(e,t){Sb.call(this),this.h=e||1,this.g=t||dg,this.j=bg(this.kb,this),this.l=Date.now()}function Ub(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Vb(e,t,n){if("function"===typeof e)n&&(e=bg(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=bg(e.handleEvent,e)}return 2147483647<Number(t)?-1:dg.setTimeout(e,t||0)}function Wb(e){e.g=Vb((function(){e.g=null,e.i&&(e.i=!1,Wb(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}kg(jb,Sb),(sg=jb.prototype).da=!1,sg.S=null,sg.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Eb(this,"tick"),this.da&&(Ub(this),this.start()))}},sg.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sg.M=function(){jb.Z.M.call(this),Ub(this),delete this.g};var zb=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).m=e,a.j=r,a.h=null,a.i=!1,a.g=null,a}return N(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Wb(this)}},{key:"M",value:function(){cn(R(n.prototype),"M",this).call(this),this.g&&(dg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(wg);function qb(e){wg.call(this),this.h=e,this.g={}}kg(qb,wg);var Kb=[];function Gb(e,t,n,r){Array.isArray(n)||(n&&(Kb[0]=n.toString()),n=Kb);for(var a=0;a<n.length;a++){var i=vb(t,n[a],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function Hb(e){Mg(e.g,(function(e,t){this.g.hasOwnProperty(t)&&bb(e)}),e),e.g={}}function Zb(){this.g=!0}function Yb(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<a.length;o++)a[o]=""}}}return Cb(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}qb.prototype.M=function(){qb.Z.M.call(this),Hb(this)},qb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Zb.prototype.Aa=function(){this.g=!1},Zb.prototype.info=function(){};var Xb={},Qb=null;function Jb(){return Qb=Qb||new Sb}function $b(e){rb.call(this,Xb.Ma,e)}function ex(e){var t=Jb();Eb(t,new $b(t,e))}function tx(e,t){rb.call(this,Xb.STAT_EVENT,e),this.stat=t}function nx(e){var t=Jb();Eb(t,new tx(t,e))}function rx(e,t){rb.call(this,Xb.Na,e),this.size=t}function ax(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return dg.setTimeout((function(){e()}),t)}Xb.Ma="serverreachability",kg($b,rb),Xb.STAT_EVENT="statevent",kg(tx,rb),Xb.Na="timingevent",kg(rx,rb);var ix={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ox={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function sx(){}function ux(e){return e.h||(e.h=e.i())}function cx(){}sx.prototype.h=null;var lx,dx={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function fx(){rb.call(this,"d")}function px(){rb.call(this,"c")}function hx(){}function vx(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new qb(this),this.P=yx,e=qg?125:void 0,this.W=new jb(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new mx}function mx(){this.i=null,this.g="",this.h=!1}kg(fx,rb),kg(px,rb),kg(hx,sx),hx.prototype.g=function(){return new XMLHttpRequest},hx.prototype.i=function(){return{}},lx=new hx;var yx=45e3,gx={},bx={};function xx(e,t,n){e.K=1,e.v=zx(Fx(t)),e.s=n,e.U=!0,kx(e,null)}function kx(e,t){e.F=Date.now(),Sx(e),e.A=Fx(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),nk(n.h,"t",r),e.C=0,n=e.l.H,e.h=new mx,e.g=aw(e.l,n?t:null,!e.s),0<e.O&&(e.L=new zb(bg(e.Ia,e,e.g),e.O)),Gb(e.V,e.g,"readystatechange",e.gb),t=e.H?Lg(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ex(1),function(e,t,n,r,a,i){e.info((function(){if(e.g)if(i)for(var o="",s=i.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var d=l.split("_");o=2<=d.length&&"type"==d[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function wx(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function _x(e,t,n){for(var r,a=!0;!e.I&&e.C<n.length;){if((r=Tx(e,n))==bx){4==t&&(e.o=4,nx(14),a=!1),Yb(e.j,e.m,null,"[Incomplete Response]");break}if(r==gx){e.o=4,nx(15),Yb(e.j,e.m,n,"[Invalid Chunk]"),a=!1;break}Yb(e.j,e.m,r,null),Ax(e,r)}wx(e)&&r!=bx&&r!=gx&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,nx(16),a=!1),e.i=e.i&&a,a?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xk(t),t.L=!0,nx(11))):(Yb(e.j,e.m,n,"[Invalid Chunked Response]"),Nx(e),Cx(e))}function Tx(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?bx:(n=Number(t.substring(n,r)),isNaN(n)?gx:(r+=1)+n>t.length?bx:(t=t.substr(r,n),e.C=r+n,t))}function Sx(e){e.Y=Date.now()+e.P,Ex(e,e.P)}function Ex(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ax(bg(e.eb,e),t)}function Ix(e){e.B&&(dg.clearTimeout(e.B),e.B=null)}function Cx(e){0==e.l.G||e.I||$k(e.l,e)}function Nx(e){Ix(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Ub(e.W),Hb(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ax(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||lk(n.i,e)))if(n.I=e.N,!e.J&&lk(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(i){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Jk(n),Vk(n)}Yk(n),nx(18)}}else n.ta=a[1],0<n.ta-n.U&&37500>a[2]&&n.N&&0==n.A&&!n.v&&(n.v=ax(bg(n.ab,n),6e3));if(1>=ck(n.i)&&n.ka){try{n.ka()}catch(i){}n.ka=void 0}}else tw(n,11)}else if((e.J||n.g==e)&&Jk(n),!Cg(t))for(a=n.Ca.g.parse(t),t=0;t<a.length;t++){var i=a[t];if(n.U=i[0],i=i[1],2==n.G)if("c"==i[0]){n.J=i[1],n.la=i[2];var o=i[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=i[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=i[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var d=r.i;!d.g&&(Og(l,"spdy")||Og(l,"quic")||Og(l,"h2"))&&(d.j=d.l,d.g=new Set,d.h&&(dk(d,d.h),d.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Wx(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=e;if((r=n).oa=rw(r,r.H?r.la:null,r.W),p.J){fk(r.i,p);var h=p,v=r.K;v&&h.setTimeout(v),h.B&&(Ix(h),Sx(h)),r.g=p}else Zk(r);0<n.l.length&&qk(n)}else"stop"!=i[0]&&"close"!=i[0]||tw(n,7);else 3==n.G&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?tw(n,7):Uk(n):"noop"!=i[0]&&n.j&&n.j.wa(i),n.A=0)}ex(4)}catch(i){}}function Ox(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(pg(e)||"string"===typeof e)Sg(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(pg(e)||"string"===typeof e){n=[];for(var r=e.length,a=0;a<r;a++)n.push(a)}else for(a in n=[],r=0,e)n[r++]=a;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(pg(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length;for(var i=0;i<a;i++)t.call(void 0,r[i],n&&n[i],e)}}function Px(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Px)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Rx(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Dx(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var a={};for(n=t=0;t<e.g.length;)Dx(a,r=e.g[t])||(e.g[n++]=r,a[r]=1),t++;e.g.length=n}}function Dx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(sg=vx.prototype).setTimeout=function(e){this.P=e},sg.gb=function(e){e=e.target;var t=this.L;t&&3==Mk(e)?t.l():this.Ia(e)},sg.Ia=function(e){try{if(e==this.g)e:{var t=Mk(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||qg||this.g&&(this.h.h||this.g.ga()||Lk(this.g)))){this.I||4!=t||7==n||ex(8==n||0>=r?3:2),Ix(this);var a=this.g.ba();this.N=a;t:if(wx(this)){var i=Lk(this.g);e="";var o=i.length,s=4==Mk(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Nx(this),Cx(this);var u="";break t}this.h.i=new dg.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:s&&n==o-1});i.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==a,function(e,t,n,r,a,i,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,a),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cg(c)){var d=c;break t}}d=null}if(!(a=d)){this.i=!1,this.o=3,nx(12),Nx(this),Cx(this);break e}Yb(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ax(this,a)}this.U?(_x(this,t,u),qg&&this.i&&3==t&&(Gb(this.V,this.W,"tick",this.fb),this.W.start())):(Yb(this.j,this.m,u,null),Ax(this,u)),4==t&&Nx(this),this.i&&!this.I&&(4==t?$k(this.l,this):(this.i=!1,Sx(this)))}else 400==a&&0<u.indexOf("Unknown SID")?(this.o=3,nx(12)):(this.o=0,nx(13)),Nx(this),Cx(this)}}}catch(t){}},sg.fb=function(){if(this.g){var e=Mk(this.g),t=this.g.ga();this.C<t.length&&(Ix(this),_x(this,e,t),this.i&&4!=e&&Sx(this))}},sg.cancel=function(){this.I=!0,Nx(this)},sg.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ex(3),nx(17)),Nx(this),this.o=2,Cx(this)):Ex(this,this.Y-e)},(sg=Px.prototype).R=function(){Rx(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},sg.T=function(){return Rx(this),this.g.concat()},sg.get=function(e,t){return Dx(this.h,e)?this.h[e]:t},sg.set=function(e,t){Dx(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},sg.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var a=n[r],i=this.get(a);e.call(t,i,a,this)}};var Mx=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Lx(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Lx){this.g=void 0!==t?t:e.g,Bx(this,e.j),this.s=e.s,jx(this,e.i),Ux(this,e.m),this.l=e.l,t=e.h;var n=new Jx;n.i=t.i,t.g&&(n.g=new Px(t.g),n.h=t.h),Vx(this,n),this.o=e.o}else e&&(n=String(e).match(Mx))?(this.g=!!t,Bx(this,n[1]||"",!0),this.s=qx(n[2]||""),jx(this,n[3]||"",!0),Ux(this,n[4]),this.l=qx(n[5]||"",!0),Vx(this,n[6]||"",!0),this.o=qx(n[7]||"")):(this.g=!!t,this.h=new Jx(null,this.g))}function Fx(e){return new Lx(e)}function Bx(e,t,n){e.j=n?qx(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jx(e,t,n){e.i=n?qx(t,!0):t}function Ux(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Vx(e,t,n){t instanceof Jx?(e.h=t,function(e,t){t&&!e.j&&($x(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(ek(this,t),nk(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Kx(t,Xx)),e.h=new Jx(t,e.g))}function Wx(e,t,n){e.h.set(t,n)}function zx(e){return Wx(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function qx(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Kx(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Gx),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Gx(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Lx.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Kx(t,Hx,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Kx(t,Hx,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Kx(n,"/"==n.charAt(0)?Yx:Zx,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Kx(n,Qx)),e.join("")};var Hx=/[#\/\?@]/g,Zx=/[#\?:]/g,Yx=/[#\?]/g,Xx=/[#\?@]/g,Qx=/#/g;function Jx(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function $x(e){e.g||(e.g=new Px,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function ek(e,t){$x(e),t=rk(e,t),Dx(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Dx((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Rx(e)))}function tk(e,t){return $x(e),t=rk(e,t),Dx(e.g.h,t)}function nk(e,t,n){ek(e,t),0<n.length&&(e.i=null,e.g.set(rk(e,t),Ig(n)),e.h+=n.length)}function rk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sg=Jx.prototype).add=function(e,t){$x(this),this.i=null,e=rk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sg.forEach=function(e,t){$x(this),this.g.forEach((function(n,r){Sg(n,(function(n){e.call(t,n,r,this)}),this)}),this)},sg.T=function(){$x(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var a=e[r],i=0;i<a.length;i++)n.push(t[r]);return n},sg.R=function(e){$x(this);var t=[];if("string"===typeof e)tk(this,e)&&(t=Eg(t,this.g.get(rk(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Eg(t,e[n])}return t},sg.set=function(e,t){return $x(this),this.i=null,tk(this,e=rk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sg.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},sg.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],a=encodeURIComponent(String(r));r=this.R(r);for(var i=0;i<r.length;i++){var o=a;""!==r[i]&&(o+="="+encodeURIComponent(String(r[i]))),e.push(o)}}return this.i=e.join("&")};var ak=N((function e(t,n){I(this,e),this.h=t,this.g=n}));function ik(e){this.l=e||sk,dg.PerformanceNavigationTiming?e=0<(e=dg.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(dg.g&&dg.g.Ea&&dg.g.Ea()&&dg.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ok,sk=10;function uk(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ck(e){return e.h?1:e.g?e.g.size:0}function lk(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dk(e,t){e.g?e.g.add(t):e.h=t}function fk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pk(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=V(e.g.values());try{for(r.s();!(t=r.n()).done;){var a=t.value;n=n.concat(a.D)}}catch(i){r.e(i)}finally{r.f()}return n}return Ig(e.i)}function hk(){}function vk(){this.g=new hk}function mk(e,t,n){var r=n||"";try{Ox(e,(function(e,n){var a=e;hg(e)&&(a=Cb(e)),t.push(r+n+"="+encodeURIComponent(a))}))}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function yk(e,t,n,r,a){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,a(r)}catch(i){}}function gk(e){this.l=e.$b||null,this.j=e.ib||!1}function bk(e,t){Sb.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=xk,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ik.prototype.cancel=function(){if(this.i=pk(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=V(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},hk.prototype.stringify=function(e){return dg.JSON.stringify(e,void 0)},hk.prototype.parse=function(e){return dg.JSON.parse(e,void 0)},kg(gk,sx),gk.prototype.g=function(){return new bk(this.l,this.j)},gk.prototype.i=(ok={},function(){return ok}),kg(bk,Sb);var xk=0;function kk(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function wk(e){e.readyState=4,e.l=null,e.j=null,e.A=null,_k(e)}function _k(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sg=bk.prototype).open=function(e,t){if(this.readyState!=xk)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,_k(this)},sg.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||dg).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},sg.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wk(this)),this.readyState=xk},sg.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_k(this)),this.g&&(this.readyState=3,_k(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof dg.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;kk(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},sg.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?wk(this):_k(this),3==this.readyState&&kk(this)}},sg.Ua=function(e){this.g&&(this.response=this.responseText=e,wk(this))},sg.Ta=function(e){this.g&&(this.response=e,wk(this))},sg.ha=function(){this.g&&wk(this)},sg.setRequestHeader=function(e,t){this.v.append(e,t)},sg.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sg.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(bk.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Tk=dg.JSON.parse;function Sk(e){Sb.call(this),this.headers=new Px,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Ek,this.K=this.L=!1}kg(Sk,Sb);var Ek="",Ik=/^https?$/i,Ck=["POST","PUT"];function Nk(e){return"content-type"==e.toLowerCase()}function Ak(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ok(e),Rk(e)}function Ok(e){e.D||(e.D=!0,Eb(e,"complete"),Eb(e,"error"))}function Pk(e){if(e.h&&"undefined"!=typeof lg&&(!e.C[1]||4!=Mk(e)||2!=e.ba()))if(e.v&&4==Mk(e))Vb(e.Fa,0,e);else if(Eb(e,"readystatechange"),4==Mk(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var a;if(a=0===n){var i=String(e.H).match(Mx)[1]||null;if(!i&&dg.self&&dg.self.location){var o=dg.self.location.protocol;i=o.substr(0,o.length-1)}a=!Ik.test(i?i.toLowerCase():"")}t=a}if(t)Eb(e,"complete"),Eb(e,"success");else{e.m=6;try{var s=2<Mk(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",Ok(e)}}finally{Rk(e)}}}function Rk(e,t){if(e.g){Dk(e);var n=e.g,r=e.C[0]?fg:null;e.g=null,e.C=null,t||Eb(e,"ready");try{n.onreadystatechange=r}catch(a){}}}function Dk(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(dg.clearTimeout(e.A),e.A=null)}function Mk(e){return e.g?e.g.readyState:0}function Lk(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Ek:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Fk(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Mg(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Wx(e,t,n))}function Bk(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jk(e){this.za=0,this.l=[],this.h=new Zb,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Bk("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Bk("baseRetryDelayMs",5e3,e),this.$a=Bk("retryDelaySeedMs",1e4,e),this.Ya=Bk("forwardChannelMaxRetries",2,e),this.ra=Bk("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new ik(e&&e.concurrentRequestLimit),this.Ca=new vk,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Uk(e){if(Wk(e),3==e.G){var t=e.V++,n=Fx(e.F);Wx(n,"SID",e.J),Wx(n,"RID",t),Wx(n,"TYPE","terminate"),Gk(e,n),(t=new vx(e,e.h,t,void 0)).K=2,t.v=zx(Fx(n)),n=!1,dg.navigator&&dg.navigator.sendBeacon&&(n=dg.navigator.sendBeacon(t.v.toString(),"")),!n&&dg.Image&&((new Image).src=t.v,n=!0),n||(t.g=aw(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Sx(t)}nw(e)}function Vk(e){e.g&&(Xk(e),e.g.cancel(),e.g=null)}function Wk(e){Vk(e),e.u&&(dg.clearTimeout(e.u),e.u=null),Jk(e),e.i.cancel(),e.m&&("number"===typeof e.m&&dg.clearTimeout(e.m),e.m=null)}function zk(e,t){e.l.push(new ak(e.Za++,t)),3==e.G&&qk(e)}function qk(e){uk(e.i)||e.m||(e.m=!0,Mb(e.Ha,e),e.C=0)}function Kk(e,t){var n;n=t?t.m:e.V++;var r=Fx(e.F);Wx(r,"SID",e.J),Wx(r,"RID",n),Wx(r,"AID",e.U),Gk(e,r),e.o&&e.s&&Fk(r,e.o,e.s),n=new vx(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Hk(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),dk(e.i,n),xx(n,r,t)}function Gk(e,t){e.j&&Ox({},(function(e,n){Wx(t,n,e)}))}function Hk(e,t,n){n=Math.min(e.l.length,n);var r=e.j?bg(e.j.Oa,e.j,e):null;e:for(var a=e.l,i=-1;;){var o=["count="+n];-1==i?0<n?(i=a[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);for(var s=!0,u=0;u<n;u++){var c=a[u].h,l=a[u].g;if(0>(c-=i))i=Math.max(0,a[u].h-100),s=!1;else try{mk(l,o,"req"+c+"_")}catch(Pw){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Zk(e){e.g||e.u||(e.Y=1,Mb(e.Ga,e),e.A=0)}function Yk(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=ax(bg(e.Ga,e),ew(e,e.A)),e.A++,!0)}function Xk(e){null!=e.B&&(dg.clearTimeout(e.B),e.B=null)}function Qk(e){e.g=new vx(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Fx(e.oa);Wx(t,"RID","rpc"),Wx(t,"SID",e.J),Wx(t,"CI",e.N?"0":"1"),Wx(t,"AID",e.U),Gk(e,t),Wx(t,"TYPE","xmlhttp"),e.o&&e.s&&Fk(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=zx(Fx(t)),n.s=null,n.U=!0,kx(n,e)}function Jk(e){null!=e.v&&(dg.clearTimeout(e.v),e.v=null)}function $k(e,t){var n=null;if(e.g==t){Jk(e),Xk(e),e.g=null;var r=2}else{if(!lk(e.i,t))return;n=t.D,fk(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var a=e.C;Eb(r=Jb(),new rx(r,n,t,a)),qk(e)}else Zk(e);else if(3==(a=t.o)||0==a&&0<e.I||!(1==r&&function(e,t){return!(ck(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=ax(bg(e.Ha,e,t),ew(e,e.C)),e.C++,!0))}(e,t)||2==r&&Yk(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),a){case 1:tw(e,5);break;case 4:tw(e,10);break;case 3:tw(e,6);break;default:tw(e,2)}}function ew(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function tw(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=bg(e.jb,e);n||(n=new Lx("//www.google.com/images/cleardot.gif"),dg.location&&"http"==dg.location.protocol||Bx(n,"https"),zx(n)),function(e,t){var n=new Zb;if(dg.Image){var r=new Image;r.onload=xg(yk,n,r,"TestLoadImage: loaded",!0,t),r.onerror=xg(yk,n,r,"TestLoadImage: error",!1,t),r.onabort=xg(yk,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=xg(yk,n,r,"TestLoadImage: timeout",!1,t),dg.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nx(2);e.G=0,e.j&&e.j.va(t),nw(e),Wk(e)}function nw(e){e.G=0,e.I=-1,e.j&&(0==pk(e.i).length&&0==e.l.length||(e.i.i.length=0,Ig(e.l),e.l.length=0),e.j.ua())}function rw(e,t,n){var r=function(e){return e instanceof Lx?Fx(e):new Lx(e,void 0)}(n);if(""!=r.i)t&&jx(r,t+"."+r.i),Ux(r,r.m);else{var a=dg.location;r=function(e,t,n,r){var a=new Lx(null,void 0);return e&&Bx(a,e),t&&jx(a,t),n&&Ux(a,n),r&&(a.l=r),a}(a.protocol,t?t+"."+a.hostname:a.hostname,+a.port,n)}return e.aa&&Mg(e.aa,(function(e,t){Wx(r,t,e)})),t=e.D,n=e.sa,t&&n&&Wx(r,t,n),Wx(r,"VER",e.ma),Gk(e,r),r}function aw(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Sk(new gk({ib:!0})):new Sk(e.qa)).L=e.H,t}function iw(){}function ow(){if(Wg&&!(10<=Number(tb)))throw Error("Environmental error: no available transport.")}function sw(e,t){Sb.call(this),this.g=new jk(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Cg(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Cg(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new lw(this)}function uw(e){fx.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function cw(){px.call(this),this.status=1}function lw(e){this.g=e}(sg=Sk.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():lx.g(),this.C=this.u?ux(this.u):ux(lx),this.g.onreadystatechange=bg(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(i){return void Ak(this,i)}e=n||"";var a=new Px(this.headers);r&&Ox(r,(function(e,t){a.set(t,e)})),r=function(e){e:{for(var t=Nk,n=e.length,r="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in r&&t.call(void 0,r[a],a,e)){t=a;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(a.T()),n=dg.FormData&&e instanceof dg.FormData,!(0<=Tg(Ck,t))||r||n||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),a.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Dk(this),0<this.B&&((this.K=function(e){return Wg&&$g()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=bg(this.pa,this)):this.A=Vb(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Ak(this,i)}},sg.pa=function(){"undefined"!=typeof lg&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Eb(this,"timeout"),this.abort(8))},sg.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Eb(this,"complete"),Eb(this,"abort"),Rk(this))},sg.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rk(this,!0)),Sk.Z.M.call(this)},sg.Fa=function(){this.s||(this.F||this.v||this.l?Pk(this):this.cb())},sg.cb=function(){Pk(this)},sg.ba=function(){try{return 2<Mk(this)?this.g.status:-1}catch(ok){return-1}},sg.ga=function(){try{return this.g?this.g.responseText:""}catch(ok){return""}},sg.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Tk(t)}},sg.Da=function(){return this.m},sg.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(sg=jk.prototype).ma=8,sg.G=1,sg.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},sg.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new vx(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Bg(n=Lg(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,a=0;a<this.l.length;a++){var i=this.l[a];if(void 0===(i="__data__"in i.g&&"string"===typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(r+=i)){r=a;break e}if(4096===r||a===this.l.length-1){r=a+1;break e}}r=1e3}else r=1e3;r=Hk(this,t,r),Wx(a=Fx(this.F),"RID",e),Wx(a,"CVER",22),this.D&&Wx(a,"X-HTTP-Session-Id",this.D),Gk(this,a),this.o&&n&&Fk(a,this.o,n),dk(this.i,t),this.Ra&&Wx(a,"TYPE","init"),this.ja?(Wx(a,"$req",r),Wx(a,"SID","null"),t.$=!0,xx(t,a,null)):xx(t,a,r),this.G=2}}else 3==this.G&&(e?Kk(this,e):0==this.l.length||uk(this.i)||Kk(this))},sg.Ga=function(){if(this.u=null,Qk(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=ax(bg(this.bb,this),e)}},sg.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,nx(10),Vk(this),Qk(this))},sg.ab=function(){null!=this.v&&(this.v=null,Vk(this),Yk(this),nx(19))},sg.jb=function(e){e?(this.h.info("Successfully pinged google.com"),nx(2)):(this.h.info("Failed to ping google.com"),nx(1))},(sg=iw.prototype).xa=function(){},sg.wa=function(){},sg.va=function(){},sg.ua=function(){},sg.Oa=function(){},ow.prototype.g=function(e,t){return new sw(e,t)},kg(sw,Sb),sw.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Mb(bg(e.hb,e,t))),nx(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=rw(e,null,e.W),qk(e)},sw.prototype.close=function(){Uk(this.g)},sw.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,zk(this.g,t)}else this.v?((t={}).__data__=Cb(e),zk(this.g,t)):zk(this.g,e)},sw.prototype.M=function(){this.g.j=null,delete this.j,Uk(this.g),delete this.g,sw.Z.M.call(this)},kg(uw,fx),kg(cw,px),kg(lw,iw),lw.prototype.xa=function(){Eb(this.g,"a")},lw.prototype.wa=function(e){Eb(this.g,new uw(e))},lw.prototype.va=function(e){Eb(this.g,new cw(e))},lw.prototype.ua=function(){Eb(this.g,"b")},ow.prototype.createWebChannel=ow.prototype.g,sw.prototype.send=sw.prototype.u,sw.prototype.open=sw.prototype.m,sw.prototype.close=sw.prototype.close,ix.NO_ERROR=0,ix.TIMEOUT=8,ix.HTTP_ERROR=6,ox.COMPLETE="complete",cx.EventType=dx,dx.OPEN="a",dx.CLOSE="b",dx.ERROR="c",dx.MESSAGE="d",Sb.prototype.listen=Sb.prototype.N,Sk.prototype.listenOnce=Sk.prototype.O,Sk.prototype.getLastError=Sk.prototype.La,Sk.prototype.getLastErrorCode=Sk.prototype.Da,Sk.prototype.getStatus=Sk.prototype.ba,Sk.prototype.getResponseJson=Sk.prototype.Qa,Sk.prototype.getResponseText=Sk.prototype.ga,Sk.prototype.send=Sk.prototype.ea;var dw=cg.createWebChannelTransport=function(){return new ow},fw=cg.getStatEventTarget=function(){return Jb()},pw=cg.ErrorCode=ix,hw=cg.EventType=ox,vw=cg.Event=Xb,mw=cg.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yw=cg.FetchXmlHttpFactory=gk,gw=cg.WebChannel=cx,bw=cg.XhrIo=Sk,xw="@firebase/firestore",kw=function(){function e(t){I(this,e),this.uid=t}return N(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();kw.UNAUTHENTICATED=new kw(null),kw.GOOGLE_CREDENTIALS=new kw("google-credentials-uid"),kw.FIRST_PARTY=new kw("first-party-uid"),kw.MOCK_USER=new kw("mock-user");var ww="9.6.9",_w=new ut("@firebase/firestore");function Tw(){return _w.logLevel}function Sw(e){if(_w.logLevel<=$e.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Cw);_w.debug.apply(_w,["Firestore (".concat(ww,"): ").concat(e)].concat((0,Ze.Z)(a)))}}function Ew(e){if(_w.logLevel<=$e.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Cw);_w.error.apply(_w,["Firestore (".concat(ww,"): ").concat(e)].concat((0,Ze.Z)(a)))}}function Iw(e){if(_w.logLevel<=$e.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map(Cw);_w.warn.apply(_w,["Firestore (".concat(ww,"): ").concat(e)].concat((0,Ze.Z)(a)))}}function Cw(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Nw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ww,") INTERNAL ASSERTION FAILED: ")+e;throw Ew(t),new Error(t)}function Aw(e,t){e||Nw()}function Ow(e,t){return e}var Pw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rw=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,r)).code=e,a.message=r,a.toString=function(){return"".concat(a.name,": [code=").concat(a.code,"]: ").concat(a.message)},a}return N(n)}(he),Dw=N((function e(){var t=this;I(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Mw=N((function e(t,n){I(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Lw=function(){function e(){I(this,e)}return N(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(kw.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Fw=function(){function e(t){I(this,e),this.token=t,this.changeListener=null}return N(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Bw=function(){function e(t){I(this,e),this.t=t,this.currentUser=kw.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=this.i,a=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},i=new Dw;this.o=function(){n.i++,n.currentUser=n.u(),i.resolve(),i=new Dw,e.enqueueRetryable((function(){return a(n.currentUser)}))};var o=function(){var t=i;e.enqueueRetryable(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,a(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Sw("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Sw("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Dw)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Sw("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Aw("string"==typeof n.accessToken),new Mw(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Aw(null===e||"string"==typeof e),new kw(e)}}]),e}(),jw=N((function e(t,n,r){I(this,e),this.type="FirstParty",this.user=kw.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var a=t.auth.getAuthHeaderValueForFirstParty([]);a&&this.headers.set("Authorization",a),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),Uw=function(){function e(t,n,r){I(this,e),this.h=t,this.l=n,this.m=r}return N(e,[{key:"getToken",value:function(){return Promise.resolve(new jw(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(kw.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Vw=N((function e(t){I(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ww=function(){function e(t){I(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Sw("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Sw("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var a=function(e){Sw("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return a(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?a(e):Sw("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Aw("string"==typeof t.token),e.p=t.token,new Vw(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),zw=function(){function e(t,n){var r=this;I(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return N(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function qw(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}zw.A=-1;var Kw=function(){function e(){I(this,e)}return N(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=qw(40),a=0;a<r.length;++a)n.length<20&&r[a]<t&&(n+=e.charAt(r[a]%e.length));return n}}]),e}();function Gw(e,t){return e<t?-1:e>t?1:0}function Hw(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Zw(e){return e+"\0"}var Yw=function(){function e(t,n){if(I(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Rw(Pw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Rw(Pw.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Rw(Pw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rw(Pw.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return N(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Gw(this.nanoseconds,e.nanoseconds):Gw(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Xw=function(){function e(t){I(this,e),this.timestamp=t}return N(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Yw(0,0))}}]),e}();function Qw(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jw(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $w(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var e_=function(){function e(t,n,r){I(this,e),void 0===n?n=0:n>t.length&&Nw(),void 0===r?r=t.length-n:r>t.length-n&&Nw(),this.segments=t,this.offset=n,this.len=r}return N(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var a=e.get(r),i=t.get(r);if(a<i)return-1;if(a>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),t_=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,Ze.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(e_),n_=/^[_a-zA-Z][_a-zA-Z0-9]*$/,r_=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return n_.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",a=0,i=function(){if(0===r.length)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;a<e.length;){var s=e[a];if("\\"===s){if(a+1===e.length)throw new Rw(Pw.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[a+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Rw(Pw.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,a+=2}else"`"===s?(o=!o,a++):"."!==s||o?(r+=s,a++):(i(),a++)}if(i(),o)throw new Rw(Pw.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(e_),a_=function(){function e(t){I(this,e),this.fields=t,t.sort(r_.comparator)}return N(e,[{key:"covers",value:function(e){var t,n=V(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Hw(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var i_=function(e){function t(e){I(this,t),this.binaryString=e}return N(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Gw(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();i_.EMPTY_BYTE_STRING=new i_("");var o_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function s_(e){if(Aw(!!e),"string"==typeof e){var t=0,n=o_.exec(e);if(Aw(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var a=new Date(e);return{seconds:Math.floor(a.getTime()/1e3),nanos:t}}return{seconds:u_(e.seconds),nanos:u_(e.nanos)}}function u_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function c_(e){return"string"==typeof e?i_.fromBase64String(e):i_.fromUint8Array(e)}function l_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function d_(e){var t=e.mapValue.fields.__previous_value__;return l_(t)?d_(t):t}function f_(e){var t=s_(e.mapValue.fields.__local_write_time__.timestampValue);return new Yw(t.seconds,t.nanos)}var p_=N((function e(t,n,r,a,i,o,s,u){I(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=a,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),h_=function(){function e(t,n){I(this,e),this.projectId=t,this.database=n||"(default)"}return N(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function v_(e){return null==e}function m_(e){return 0===e&&1/e==-1/0}function y_(e){return"number"==typeof e&&Number.isInteger(e)&&!m_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var g_=function(){function e(t){I(this,e),this.path=t}return N(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===t_.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(t_.fromString(t))}},{key:"fromName",value:function(t){return new e(t_.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(t_.emptyPath())}},{key:"comparator",value:function(e,t){return t_.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new t_(t.slice()))}}]),e}(),b_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},x_={nullValue:"NULL_VALUE"};function k_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?l_(e)?4:M_(e)?9:10:Nw()}function w_(e,t){if(e===t)return!0;var n=k_(e);if(n!==k_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return f_(e).isEqual(f_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=s_(e.timestampValue),r=s_(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return c_(e.bytesValue).isEqual(c_(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return u_(e.geoPointValue.latitude)===u_(t.geoPointValue.latitude)&&u_(e.geoPointValue.longitude)===u_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return u_(e.integerValue)===u_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=u_(e.doubleValue),r=u_(t.doubleValue);return n===r?m_(n)===m_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Hw(e.arrayValue.values||[],t.arrayValue.values||[],w_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Qw(n)!==Qw(r))return!1;for(var a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!w_(n[a],r[a])))return!1;return!0}(e,t);default:return Nw()}}function __(e,t){return void 0!==(e.values||[]).find((function(e){return w_(e,t)}))}function T_(e,t){if(e===t)return 0;var n=k_(e),r=k_(t);if(n!==r)return Gw(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Gw(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=u_(e.integerValue||e.doubleValue),r=u_(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return S_(e.timestampValue,t.timestampValue);case 4:return S_(f_(e),f_(t));case 5:return Gw(e.stringValue,t.stringValue);case 6:return function(e,t){var n=c_(e),r=c_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),a=0;a<n.length&&a<r.length;a++){var i=Gw(n[a],r[a]);if(0!==i)return i}return Gw(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Gw(u_(e.latitude),u_(t.latitude));return 0!==n?n:Gw(u_(e.longitude),u_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],a=0;a<n.length&&a<r.length;++a){var i=T_(n[a],r[a]);if(i)return i}return Gw(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(var o=0;o<r.length&&o<i.length;++o){var s=Gw(r[o],i[o]);if(0!==s)return s;var u=T_(n[r[o]],a[i[o]]);if(0!==u)return u}return Gw(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Nw()}}function S_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Gw(e,t);var n=s_(e),r=s_(t),a=Gw(n.seconds,r.seconds);return 0!==a?a:Gw(n.nanos,r.nanos)}function E_(e){return I_(e)}function I_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=s_(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?c_(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,g_.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,a=V(e.values||[]);try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+=I_(i)}}catch(o){a.e(o)}finally{a.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,a=V(Object.keys(e.fields||{}).sort());try{for(a.s();!(t=a.n()).done;){var i=t.value;r?r=!1:n+=",",n+="".concat(i,":").concat(I_(e.fields[i]))}}catch(o){a.e(o)}finally{a.f()}return n+"}"}(e.mapValue):Nw();var t,n}function C_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function N_(e){return!!e&&"integerValue"in e}function A_(e){return!!e&&"arrayValue"in e}function O_(e){return!!e&&"nullValue"in e}function P_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function R_(e){return!!e&&"mapValue"in e}function D_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Jw(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=D_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=D_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function M_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function L_(e,t){return void 0===e?t:void 0===t||T_(e,t)>0?e:t}function F_(e,t){return void 0===e?t:void 0===t||T_(e,t)<0?e:t}var B_=function(){function e(t){I(this,e),this.value=t}return N(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!R_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=D_(t)}},{key:"setAll",value:function(e){var t=this,n=r_.emptyPath(),r={},a=[];e.forEach((function(e,i){if(!n.isImmediateParentOf(i)){var o=t.getFieldsMap(n);t.applyChanges(o,r,a),r={},a=[],n=i.popLast()}e?r[i.lastSegment()]=D_(e):a.push(i.lastSegment())}));var i=this.getFieldsMap(n);this.applyChanges(i,r,a)}},{key:"delete",value:function(e){var t=this.field(e.popLast());R_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return w_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];R_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Jw(t,(function(t,n){return e[t]=n}));var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;delete e[i]}}catch(o){a.e(o)}finally{a.f()}}},{key:"clone",value:function(){return new e(D_(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function j_(e){var t=[];return Jw(e.fields,(function(e,n){var r=new r_([e]);if(R_(n)){var a=j_(n.mapValue).fields;if(0===a.length)t.push(r);else{var i,o=V(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new a_(t)}var U_=function(){function e(t,n,r,a,i,o){I(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=a,this.data=i,this.documentState=o}return N(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=B_.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=B_.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Xw.min(),Xw.min(),B_.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Xw.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Xw.min(),B_.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Xw.min(),B_.empty(),2)}}]),e}(),V_=N((function e(t,n,r,a){I(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=a}));function W_(e){return e.fields.find((function(e){return 2===e.kind}))}function z_(e){return e.fields.filter((function(e){return 2!==e.kind}))}V_.UNKNOWN_ID=-1;var q_=N((function e(t,n){I(this,e),this.fieldPath=t,this.kind=n})),K_=function(){function e(t,n){I(this,e),this.sequenceNumber=t,this.offset=n}return N(e,null,[{key:"empty",value:function(){return new e(0,G_.min())}}]),e}(),G_=function(){function e(t,n,r){I(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return N(e,null,[{key:"min",value:function(){return new e(Xw.min(),g_.empty(),-1)}}]),e}(),H_=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;I(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=a,this.limit=i,this.startAt=o,this.endAt=s,this.P=null}));function Z_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new H_(e,t,n,r,a,i,o)}function Y_(e){var t=Ow(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+E_(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),v_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return E_(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return E_(e)})).join(",")),t.P=n}return t.P}function X_(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!lT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(a=e.filters[r],i=t.filters[r],a.op!==i.op||!a.field.isEqual(i.field)||!w_(a.value,i.value))return!1;var a,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fT(e.startAt,t.startAt)&&fT(e.endAt,t.endAt)}function Q_(e){return g_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function J_(e,t){return e.filters.filter((function(e){return e instanceof $_&&e.field.isEqual(t)}))}var $_=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this)).field=e,i.op=r,i.value=a,i}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(T_(t,this.value)):null!==t&&k_(this.value)===k_(t)&&this.v(T_(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Nw()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new eT(e,t,r):"array-contains"===t?new aT(e,r):"in"===t?new iT(e,r):"not-in"===t?new oT(e,r):"array-contains-any"===t?new sT(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new tT(e,n):new nT(e,n)}}]),n}(function(){return N((function e(){I(this,e)}))}()),eT=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this,e,r,a)).key=g_.fromName(a.referenceValue),i}return N(n,[{key:"matches",value:function(e){var t=g_.comparator(e.key,this.key);return this.v(t)}}]),n}($_),tT=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,"in",r)).keys=rT("in",r),a}return N(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($_),nT=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,"not-in",r)).keys=rT("not-in",r),a}return N(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}($_);function rT(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return g_.fromName(e.referenceValue)}))}var aT=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return A_(t)&&__(t.arrayValue,this.value)}}]),n}($_),iT=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"in",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&__(this.value.arrayValue,t)}}]),n}($_),oT=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"not-in",r)}return N(n,[{key:"matches",value:function(e){if(__(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!__(this.value.arrayValue,t)}}]),n}($_),sT=function(e){P(n,e);var t=F(n);function n(e,r){return I(this,n),t.call(this,e,"array-contains-any",r)}return N(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!A_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return __(t.value.arrayValue,e)}))}}]),n}($_),uT=N((function e(t,n){I(this,e),this.position=t,this.inclusive=n})),cT=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";I(this,e),this.field=t,this.dir=n}));function lT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function dT(e,t,n){for(var r=0,a=0;a<e.position.length;a++){var i=t[a],o=e.position[a];if(r=i.field.isKeyField()?g_.comparator(g_.fromName(o.referenceValue),n.key):T_(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function fT(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!w_(e.position[n],t.position[n]))return!1;return!0}var pT=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;I(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=a,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.D=null,this.C=null,this.startAt,this.endAt}));function hT(e,t,n,r,a,i,o,s){return new pT(e,t,n,r,a,i,o,s)}function vT(e){return new pT(e)}function mT(e){return!v_(e.limit)&&"F"===e.limitType}function yT(e){return!v_(e.limit)&&"L"===e.limitType}function gT(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function bT(e){var t,n=V(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(a){n.e(a)}finally{n.f()}return null}function xT(e){return null!==e.collectionGroup}function kT(e){var t=Ow(e);if(null===t.D){t.D=[];var n=bT(t),r=gT(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new cT(n)),t.D.push(new cT(r_.keyField(),"asc"));else{var a,i=!1,o=V(t.explicitOrderBy);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.D.push(s),s.field.isKeyField()&&(i=!0)}}catch(c){o.e(c)}finally{o.f()}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new cT(r_.keyField(),u))}}}return t.D}function wT(e){var t=Ow(e);if(!t.C)if("F"===t.limitType)t.C=Z_(t.path,t.collectionGroup,kT(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],a=V(kT(t));try{for(a.s();!(n=a.n()).done;){var i=n.value,o="desc"===i.dir?"asc":"desc";r.push(new cT(i.field,o))}}catch(c){a.e(c)}finally{a.f()}var s=t.endAt?new uT(t.endAt.position,!t.endAt.inclusive):null,u=t.startAt?new uT(t.startAt.position,!t.startAt.inclusive):null;t.C=Z_(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.C}function _T(e,t,n){return new pT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function TT(e,t){return X_(wT(e),wT(t))&&e.limitType===t.limitType}function ST(e){return"".concat(Y_(wT(e)),"|lt:").concat(e.limitType)}function ET(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(E_(t.value));var t})).join(", "),"]")),v_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return E_(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return E_(e)})).join(",")),"Target(".concat(t,")")}(wT(e)),"; limitType=").concat(e.limitType,")")}function IT(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):g_.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=V(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(!a.field.isKeyField()&&null===t.data.field(a.field))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=V(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=dT(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,kT(e),t))&&!(e.endAt&&!function(e,t,n){var r=dT(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,kT(e),t))}(e,t)}function CT(e){return function(t,n){var r,a=!1,i=V(kT(e));try{for(i.s();!(r=i.n()).done;){var o=r.value,s=NT(o,t,n);if(0!==s)return s;a=a||o.field.isKeyField()}}catch(u){i.e(u)}finally{i.f()}return 0}}function NT(e,t,n){var r=e.field.isKeyField()?g_.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?T_(r,a):Nw()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nw()}}function AT(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:m_(t)?"-0":t}}function OT(e){return{integerValue:""+e}}function PT(e,t){return y_(t)?OT(t):AT(e,t)}var RT=N((function e(){I(this,e),this._=void 0}));function DT(e,t,n){return e instanceof FT?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof BT?jT(e,t):e instanceof UT?VT(e,t):function(e,t){var n=LT(e,t),r=zT(n)+zT(e.k);return N_(n)&&N_(e.k)?OT(r):AT(e.M,r)}(e,t)}function MT(e,t,n){return e instanceof BT?jT(e,t):e instanceof UT?VT(e,t):n}function LT(e,t){return e instanceof WT?N_(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var FT=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n)}(RT),BT=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return N(n)}(RT);function jT(e,t){var n,r=qT(t),a=V(e.elements);try{var i=function(){var e=n.value;r.some((function(t){return w_(t,e)}))||r.push(e)};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var UT=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).elements=e,r}return N(n)}(RT);function VT(e,t){var n,r=qT(t),a=V(e.elements);try{var i=function(){var e=n.value;r=r.filter((function(t){return!w_(t,e)}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return{arrayValue:{values:r}}}var WT=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).M=e,a.k=r,a}return N(n)}(RT);function zT(e){return u_(e.integerValue||e.doubleValue)}function qT(e){return A_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var KT=N((function e(t,n){I(this,e),this.field=t,this.transform=n}));var GT=N((function e(t,n){I(this,e),this.version=t,this.transformResults=n})),HT=function(){function e(t,n){I(this,e),this.updateTime=t,this.exists=n}return N(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function ZT(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var YT=N((function e(){I(this,e)}));function XT(e,t,n){e instanceof tS?function(e,t,n){var r=e.value.clone(),a=aS(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof nS?function(e,t,n){if(ZT(e.precondition,t)){var r=aS(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(rS(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function QT(e,t,n){e instanceof tS?function(e,t,n){if(ZT(e.precondition,t)){var r=e.value.clone(),a=iS(e.fieldTransforms,n,t);r.setAll(a),t.convertToFoundDocument(eS(t),r).setHasLocalMutations()}}(e,t,n):e instanceof nS?function(e,t,n){if(ZT(e.precondition,t)){var r=iS(e.fieldTransforms,n,t),a=t.data;a.setAll(rS(e)),a.setAll(r),t.convertToFoundDocument(eS(t),a).setHasLocalMutations()}}(e,t,n):function(e,t){ZT(e.precondition,t)&&t.convertToNoDocument(Xw.min())}(e,t)}function JT(e,t){var n,r=null,a=V(e.fieldTransforms);try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.field),s=LT(i.transform,o||null);null!=s&&(null==r&&(r=B_.empty()),r.set(i.field,s))}}catch(u){a.e(u)}finally{a.f()}return r||null}function $T(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hw(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof BT&&t instanceof BT||e instanceof UT&&t instanceof UT?Hw(e.elements,t.elements,w_):e instanceof WT&&t instanceof WT?w_(e.k,t.k):e instanceof FT&&t instanceof FT}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function eS(e){return e.isFoundDocument()?e.version:Xw.min()}var tS=function(e){P(n,e);var t=F(n);function n(e,r,a){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return I(this,n),(i=t.call(this)).key=e,i.value=r,i.precondition=a,i.fieldTransforms=o,i.type=0,i}return N(n)}(YT),nS=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return I(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=a,o.precondition=i,o.fieldTransforms=s,o.type=1,o}return N(n)}(YT);function rS(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function aS(e,t,n){var r=new Map;Aw(e.length===n.length);for(var a=0;a<n.length;a++){var i=e[a],o=i.transform,s=t.data.field(i.field);r.set(i.field,MT(o,s,n[a]))}return r}function iS(e,t,n){var r,a=new Map,i=V(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);a.set(o.field,DT(s,u,t))}}catch(c){i.e(c)}finally{i.f()}return a}var oS,sS,uS=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=2,a.fieldTransforms=[],a}return N(n)}(YT),cS=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).key=e,a.precondition=r,a.type=3,a.fieldTransforms=[],a}return N(n)}(YT),lS=N((function e(t){I(this,e),this.count=t}));function dS(e){switch(e){default:return Nw();case Pw.CANCELLED:case Pw.UNKNOWN:case Pw.DEADLINE_EXCEEDED:case Pw.RESOURCE_EXHAUSTED:case Pw.INTERNAL:case Pw.UNAVAILABLE:case Pw.UNAUTHENTICATED:return!1;case Pw.INVALID_ARGUMENT:case Pw.NOT_FOUND:case Pw.ALREADY_EXISTS:case Pw.PERMISSION_DENIED:case Pw.FAILED_PRECONDITION:case Pw.ABORTED:case Pw.OUT_OF_RANGE:case Pw.UNIMPLEMENTED:case Pw.DATA_LOSS:return!0}}function fS(e){if(void 0===e)return Ew("GRPC error has no .code"),Pw.UNKNOWN;switch(e){case oS.OK:return Pw.OK;case oS.CANCELLED:return Pw.CANCELLED;case oS.UNKNOWN:return Pw.UNKNOWN;case oS.DEADLINE_EXCEEDED:return Pw.DEADLINE_EXCEEDED;case oS.RESOURCE_EXHAUSTED:return Pw.RESOURCE_EXHAUSTED;case oS.INTERNAL:return Pw.INTERNAL;case oS.UNAVAILABLE:return Pw.UNAVAILABLE;case oS.UNAUTHENTICATED:return Pw.UNAUTHENTICATED;case oS.INVALID_ARGUMENT:return Pw.INVALID_ARGUMENT;case oS.NOT_FOUND:return Pw.NOT_FOUND;case oS.ALREADY_EXISTS:return Pw.ALREADY_EXISTS;case oS.PERMISSION_DENIED:return Pw.PERMISSION_DENIED;case oS.FAILED_PRECONDITION:return Pw.FAILED_PRECONDITION;case oS.ABORTED:return Pw.ABORTED;case oS.OUT_OF_RANGE:return Pw.OUT_OF_RANGE;case oS.UNIMPLEMENTED:return Pw.UNIMPLEMENTED;case oS.DATA_LOSS:return Pw.DATA_LOSS;default:return Nw()}}(sS=oS||(oS={}))[sS.OK=0]="OK",sS[sS.CANCELLED=1]="CANCELLED",sS[sS.UNKNOWN=2]="UNKNOWN",sS[sS.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sS[sS.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sS[sS.NOT_FOUND=5]="NOT_FOUND",sS[sS.ALREADY_EXISTS=6]="ALREADY_EXISTS",sS[sS.PERMISSION_DENIED=7]="PERMISSION_DENIED",sS[sS.UNAUTHENTICATED=16]="UNAUTHENTICATED",sS[sS.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sS[sS.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sS[sS.ABORTED=10]="ABORTED",sS[sS.OUT_OF_RANGE=11]="OUT_OF_RANGE",sS[sS.UNIMPLEMENTED=12]="UNIMPLEMENTED",sS[sS.INTERNAL=13]="INTERNAL",sS[sS.UNAVAILABLE=14]="UNAVAILABLE",sS[sS.DATA_LOSS=15]="DATA_LOSS";var pS=function(){function e(t,n){I(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return N(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=(0,W.Z)(r.value,2),o=i[0],s=i[1];if(this.equalsFn(o,e))return s}}catch(u){a.e(u)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Jw(this.inner,(function(t,n){var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=(0,W.Z)(r.value,2),o=i[0],s=i[1];e(o,s)}}catch(u){a.e(u)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return $w(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),hS=function(){function e(t,n){I(this,e),this.comparator=t,this.root=n||mS.EMPTY}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,mS.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mS.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new vS(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new vS(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new vS(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new vS(this.root,e,this.comparator,!0)}}]),e}(),vS=function(){function e(t,n,r,a){I(this,e),this.isReverse=a,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&a&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return N(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),mS=function(){function e(t,n,r,a,i){I(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=a?a:e.EMPTY,this.right=null!=i?i:e.EMPTY,this.size=this.left.size+1+this.right.size}return N(e,[{key:"copy",value:function(t,n,r,a,i){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=a?a:this.left,null!=i?i:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,a=n(e,r.key);return(r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===n(t,a.key)){if(a.right.isEmpty())return e.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Nw();if(this.right.isRed())throw Nw();var e=this.left.check();if(e!==this.right.check())throw Nw();return e+(this.isRed()?0:1)}}]),e}();mS.EMPTY=null,mS.RED=!0,mS.BLACK=!1,mS.EMPTY=new(function(){function e(){I(this,e),this.size=0}return N(e,[{key:"key",get:function(){throw Nw()}},{key:"value",get:function(){throw Nw()}},{key:"color",get:function(){throw Nw()}},{key:"left",get:function(){throw Nw()}},{key:"right",get:function(){throw Nw()}},{key:"copy",value:function(e,t,n,r,a){return this}},{key:"insert",value:function(e,t,n){return new mS(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var yS=function(){function e(t){I(this,e),this.comparator=t,this.data=new hS(this.comparator)}return N(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new gS(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new gS(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(0!==this.comparator(a,i))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),gS=function(){function e(t){I(this,e),this.iter=t}return N(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function bS(e){return e.hasNext()?e.getNext():void 0}var xS=new hS(g_.comparator);function kS(){return xS}var wS=new hS(g_.comparator);function _S(){return wS}function TS(){return new pS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var SS=new hS(g_.comparator),ES=new yS(g_.comparator);function IS(){for(var e=ES,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=e.add(o)}return e}var CS=new yS(Gw);function NS(){return CS}var AS=function(){function e(t,n,r,a,i){I(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=i}return N(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,OS.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Xw.min(),r,NS(),kS(),IS())}}]),e}(),OS=function(){function e(t,n,r,a,i){I(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=i}return N(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(i_.EMPTY_BYTE_STRING,n,IS(),IS(),IS())}}]),e}(),PS=N((function e(t,n,r,a){I(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.$=a})),RS=N((function e(t,n){I(this,e),this.targetId=t,this.F=n})),DS=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i_.EMPTY_BYTE_STRING,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;I(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=a})),MS=function(){function e(){I(this,e),this.B=0,this.L=BS(),this.q=i_.EMPTY_BYTE_STRING,this.U=!1,this.K=!0}return N(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.q}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.q=e)}},{key:"H",value:function(){var e=IS(),t=IS(),n=IS();return this.L.forEach((function(r,a){switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Nw()}})),new OS(this.q,this.U,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=BS()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.U=!0}}]),e}(),LS=function(){function e(t){I(this,e),this.nt=t,this.st=new Map,this.it=kS(),this.rt=FS(),this.ot=new yS(Gw)}return N(e,[{key:"at",value:function(e){var t,n=V(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.$&&e.$.isFoundDocument()?this.ut(r,e.$):this.ct(r,e.key,e.$)}}catch(s){n.e(s)}finally{n.f()}var a,i=V(e.removedTargetIds);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.ct(o,e.key,e.$)}}catch(s){i.e(s)}finally{i.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Nw()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.F.count,r=this.wt(t);if(r){var a=r.target;if(Q_(a))if(0===n){var i=new g_(a.path);this.ct(t,i,U_.newNoDocument(i,Xw.min()))}else Aw(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,a){var i=t.wt(a);if(i){if(r.current&&Q_(i.target)){var o=new g_(i.target.path);null!==t.it.get(o)||t.It(a,o)||t.ct(a,o,U_.newNoDocument(o,e))}r.j&&(n.set(a,r.H()),r.J())}}));var r=IS();this.rt.forEach((function(e,n){var a=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(a=!1,!1)})),a&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var a=new AS(e,n,this.ot,this.it,r);return this.it=kS(),this.rt=FS(),this.ot=new yS(Gw),a}},{key:"ut",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new MS,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new yS(Gw),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Sw("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new MS),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function FS(){return new hS(g_.comparator)}function BS(){return new hS(g_.comparator)}var jS={asc:"ASCENDING",desc:"DESCENDING"},US={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VS=N((function e(t,n){I(this,e),this.databaseId=t,this.N=n}));function WS(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function zS(e,t){return e.N?t.toBase64():t.toUint8Array()}function qS(e,t){return WS(e,t.toTimestamp())}function KS(e){return Aw(!!e),Xw.fromTimestamp(function(e){var t=s_(e);return new Yw(t.seconds,t.nanos)}(e))}function GS(e,t){return function(e){return new t_(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function HS(e){var t=t_.fromString(e);return Aw(mE(t)),t}function ZS(e,t){return GS(e.databaseId,t.path)}function YS(e,t){var n=HS(t);if(n.get(1)!==e.databaseId.projectId)throw new Rw(Pw.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Rw(Pw.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new g_($S(n))}function XS(e,t){return GS(e.databaseId,t)}function QS(e){var t=HS(e);return 4===t.length?t_.emptyPath():$S(t)}function JS(e){return new t_(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function $S(e){return Aw(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function eE(e,t,n){return{name:ZS(e,t),fields:n.value.mapValue.fields}}function tE(e,t,n){var r=YS(e,t.name),a=KS(t.updateTime),i=new B_({mapValue:{fields:t.fields}}),o=U_.newFoundDocument(r,a,i);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function nE(e,t){return"found"in t?function(e,t){Aw(!!t.found),t.found.name,t.found.updateTime;var n=YS(e,t.found.name),r=KS(t.found.updateTime),a=new B_({mapValue:{fields:t.found.fields}});return U_.newFoundDocument(n,r,a)}(e,t):"missing"in t?function(e,t){Aw(!!t.missing),Aw(!!t.readTime);var n=YS(e,t.missing),r=KS(t.readTime);return U_.newNoDocument(n,r)}(e,t):Nw()}function rE(e,t){var n;if(t instanceof tS)n={update:eE(e,t.key,t.value)};else if(t instanceof uS)n={delete:ZS(e,t.key)};else if(t instanceof nS)n={update:eE(e,t.key,t.data),updateMask:vE(t.fieldMask)};else{if(!(t instanceof cS))return Nw();n={verify:ZS(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof FT)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof BT)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof UT)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof WT)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Nw()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:qS(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Nw()}(e,t.precondition)),n}function aE(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?HT.updateTime(KS(e.updateTime)):void 0!==e.exists?HT.exists(e.exists):HT.none()}(t.currentDocument):HT.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Aw("REQUEST_TIME"===t.setToServerValue),n=new FT;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new BT(r)}else if("removeAllFromArray"in t){var a=t.removeAllFromArray.values||[];n=new UT(a)}else"increment"in t?n=new WT(e,t.increment):Nw();var i=r_.fromServerFormat(t.fieldPath);return new KT(i,n)}(e,t)})):[];if(t.update){t.update.name;var a=YS(e,t.update.name),i=new B_({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new a_(t.map((function(e){return r_.fromServerFormat(e)})))}(t.updateMask);return new nS(a,i,o,n,r)}return new tS(a,i,n,r)}if(t.delete){var s=YS(e,t.delete);return new uS(s,n)}if(t.verify){var u=YS(e,t.verify);return new cS(u,n)}return Nw()}function iE(e,t){return{documents:[XS(e,t.path)]}}function oE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=XS(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=XS(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var a=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(P_(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NAN"}};if(O_(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(P_(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NOT_NAN"}};if(O_(e.value))return{unaryFilter:{field:dE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dE(e.field),op:lE(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);a&&(n.structuredQuery.where=a);var i=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dE(e.field),direction:cE(e.dir)}}(e)}))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);var o,s=function(e,t){return e.N||v_(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function sE(e){var t=QS(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,a=null;if(r>0){Aw(1===r);var i=n.from[0];i.allDescendants?a=i.collectionId:t=t.child(i.collectionId)}var o=[];n.where&&(o=uE(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new cT(fE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return v_(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new uT(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new uT(n,t)}(n.endAt)),hT(t,a,s,o,u,"F",c,l)}function uE(e){return e?void 0!==e.unaryFilter?[hE(e)]:void 0!==e.fieldFilter?[pE(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return uE(e)})).reduce((function(e,t){return e.concat(t)})):Nw():[]}function cE(e){return jS[e]}function lE(e){return US[e]}function dE(e){return{fieldPath:e.canonicalString()}}function fE(e){return r_.fromServerFormat(e.fieldPath)}function pE(e){return $_.create(fE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nw()}}(e.fieldFilter.op),e.fieldFilter.value)}function hE(e){switch(e.unaryFilter.op){case"IS_NAN":var t=fE(e.unaryFilter.field);return $_.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=fE(e.unaryFilter.field);return $_.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=fE(e.unaryFilter.field);return $_.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var a=fE(e.unaryFilter.field);return $_.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Nw()}}function vE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function mE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function yE(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=bE(t)),t=gE(e.get(n),t);return bE(t)}function gE(e,t){for(var n=t,r=e.length,a=0;a<r;a++){var i=e.charAt(a);switch(i){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=i}}return n}function bE(e){return e+"\x01\x01"}function xE(e){var t=e.length;if(Aw(t>=2),2===t)return Aw("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),t_.emptyPath();for(var n=t-2,r=[],a="",i=0;i<t;){var o=e.indexOf("\x01",i);switch((o<0||o>n)&&Nw(),e.charAt(o+1)){case"\x01":var s=e.substring(i,o),u=void 0;0===a.length?u=s:(u=a+=s,a=""),r.push(u);break;case"\x10":a+=e.substring(i,o),a+="\0";break;case"\x11":a+=e.substring(i,o+1);break;default:Nw()}i=o+2}return new t_(r)}var kE=["userId","batchId"];function wE(e,t){return[e,yE(t)]}function _E(e,t,n){return[e,yE(t),n]}var TE={},SE=["parentPath","readTime"],EE=["canonicalId","targetId"],IE=["targetId","path"],CE=["path","targetId"],NE=["collectionId","parent"],AE=["indexId","uid"],OE=["uid","sequenceNumber"],PE=["indexId","uid","arrayValue","directionalValue","documentKey"],RE=["indexId","uid","documentKey"],DE=["userId","collectionPath","documentId"],ME=["userId","collectionPath","largestBatchId"],LE=["userId","collectionGroup","largestBatchId"],FE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),BE=[].concat((0,Ze.Z)(FE),["documentOverlays"]),jE=[].concat((0,Ze.Z)(BE),["indexConfiguration","indexState","indexEntries"]),UE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",VE=function(){function e(){I(this,e),this.onCommittedListeners=[]}return N(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),WE=function(){function e(t){var n=this;I(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return N(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Nw(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,a){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,a)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,a)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,a=0,i=!1;t.forEach((function(t){++r,t.next((function(){++a,i&&a===r&&e()}),(function(e){return n(e)}))})),i=!0,a===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),a=V(t);try{var i=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(a.s();!(n=a.n()).done;)i()}catch(o){a.e(o)}finally{a.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,a){r.push(t.call(n,e,a))})),this.waitFor(r)}}]),e}(),zE=function(){function e(t,n){var r=this;I(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Dw,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new GE(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=QE(e.target.error);r.At.reject(new GE(t,n))}}return N(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Sw("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new ZE(t)}}],[{key:"open",value:function(t,n,r,a){try{return new e(n,t.transaction(a,r))}catch(t){throw new GE(n,t)}}}]),e}(),qE=function(){function e(t,n,r){I(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(oe())&&Ew("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return N(e,[{key:"Nt",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Sw("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var a=indexedDB.open(n.name,n.version);a.onsuccess=function(t){var n=t.target.result;e(n)},a.onblocked=function(){r(new GE(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Rw(Pw.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Rw(Pw.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new GE(t,n))},a.onupgradeneeded=function(e){Sw("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,a.transaction,e.oldVersion,n.version).next((function(){Sw("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=j(G().mark((function e(t,n,r,a){var i,o,s,u,c=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(G().mark((function e(){var n,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=zE.open(c.db,t,i?"readonly":"readwrite",r),o=a(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),WE.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u="FirebaseError"!==e.t1.name&&o<3,Sw("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",u),this.close(),u){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Sw("SimpleDb","Removing database:",e),YE(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!pe())return!1;if(e.St())return!0;var t=oe(),n=e.Vt(t),r=0<n&&n<10,a=e.Dt(t),i=0<a&&a<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||i)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),KE=function(){function e(t){I(this,e),this.$t=t,this.Ft=!1,this.Bt=null}return N(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"qt",value:function(e){this.Bt=e}},{key:"delete",value:function(){return YE(this.$t.delete())}}]),e}(),GE=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,Pw.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",a}return N(n)}(Rw);function HE(e){return"IndexedDbTransactionError"===e.name}var ZE=function(){function e(t){I(this,e),this.store=t}return N(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Sw("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Sw("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),YE(n)}},{key:"add",value:function(e){return Sw("SimpleDb","ADD",this.store.name,e,e),YE(this.store.add(e))}},{key:"get",value:function(e){var t=this;return YE(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Sw("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Sw("SimpleDb","DELETE",this.store.name,e),YE(this.store.delete(e))}},{key:"count",value:function(){return Sw("SimpleDb","COUNT",this.store.name),YE(this.store.count())}},{key:"Ut",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),a=[];return this.Kt(r,(function(e,t){a.push(t)})).next((function(){return a}))}var i=this.store.getAll(n.range);return new WE((function(e,t){i.onerror=function(e){t(e.target.error)},i.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new WE((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Sw("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new WE((function(n,r){t.onerror=function(e){var t=QE(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new WE((function(r,a){e.onerror=function(e){a(e.target.error)},e.onsuccess=function(e){var a=e.target.result;if(a){var i=new KE(a),o=t(a.primaryKey,a.value,i);if(o instanceof WE){var s=o.catch((function(e){return i.done(),WE.reject(e)}));n.push(s)}i.isDone?r():null===i.Lt?a.continue():a.continue(i.Lt)}else r()}})).next((function(){return WE.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function YE(e){return new WE((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=QE(e.target.error);n(t)}}))}var XE=!1;function QE(e){var t=qE.Vt(oe());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Rw("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return XE||(XE=!0,setTimeout((function(){throw r}),0)),r}}return e}var JE=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).Ht=e,a.currentSequenceNumber=r,a}return N(n)}(VE);function $E(e,t){var n=Ow(e);return qE.xt(n.Ht,t)}var eI=function(){function e(t,n,r,a){I(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=a}return N(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var a=this.mutations[r];a.key.isEqual(e.key)&&XT(a,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=V(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&QT(r,e,this.localWriteTime)}}catch(s){n.e(s)}finally{n.f()}var a,i=V(this.mutations);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.key.isEqual(e.key)&&QT(o,e,this.localWriteTime)}}catch(s){i.e(s)}finally{i.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),a=r;t.applyToLocalView(a),r.isValidDocument()||a.convertToNoDocument(Xw.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),IS())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Hw(this.mutations,e.mutations,(function(e,t){return $T(e,t)}))&&Hw(this.baseMutations,e.baseMutations,(function(e,t){return $T(e,t)}))}}]),e}(),tI=function(){function e(t,n,r,a){I(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=a}return N(e,null,[{key:"from",value:function(t,n,r){Aw(t.mutations.length===r.length);for(var a=SS,i=t.mutations,o=0;o<i.length;o++)a=a.insert(i[o].key,r[o].version);return new e(t,n,r,a)}}]),e}(),nI=function(){function e(t,n){I(this,e),this.largestBatchId=t,this.mutation=n}return N(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),rI=function(){function e(t,n,r,a){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Xw.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Xw.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:i_.EMPTY_BYTE_STRING;I(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return N(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),aI=N((function e(t){I(this,e),this.Jt=t}));function iI(e,t){var n;if(t.document)n=tE(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=g_.fromSegments(t.noDocument.path),a=lI(t.noDocument.readTime);n=U_.newNoDocument(r,a),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Nw();var i=g_.fromSegments(t.unknownDocument.path),o=lI(t.unknownDocument.version);n=U_.newUnknownDocument(i,o)}return t.readTime&&n.setReadTime(uI(t.readTime)),n}function oI(e,t){var n=t.key.path.popLast().toArray(),r=sI(t.readTime);if(t.isFoundDocument()){var a=function(e,t){return{name:ZS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:WS(e,t.version.toTimestamp())}}(e.Jt,t);return{document:a,hasCommittedMutations:t.hasCommittedMutations,readTime:r,parentPath:n}}if(t.isNoDocument()){var i=t.key.path.toArray(),o=t.hasCommittedMutations;return{noDocument:{path:i,readTime:cI(t.version)},hasCommittedMutations:o,readTime:r,parentPath:n}}return t.isUnknownDocument()?{unknownDocument:{path:t.key.path.toArray(),version:cI(t.version)},hasCommittedMutations:!0,readTime:r,parentPath:n}:Nw()}function sI(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function uI(e){var t=new Yw(e[0],e[1]);return Xw.fromTimestamp(t)}function cI(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function lI(e){var t=new Yw(e.seconds,e.nanoseconds);return Xw.fromTimestamp(t)}function dI(e,t){for(var n=(t.baseMutations||[]).map((function(t){return aE(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var a=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var i=t.mutations[r+1];a.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return aE(e.Jt,t)})),s=Yw.fromMillis(t.localWriteTimeMs);return new eI(t.batchId,s,n,o)}function fI(e){var t,n,r=lI(e.readTime),a=void 0!==e.lastLimboFreeSnapshotVersion?lI(e.lastLimboFreeSnapshotVersion):Xw.min();return void 0!==e.query.documents?(Aw(1===(n=e.query).documents.length),t=wT(vT(QS(n.documents[0])))):t=function(e){return wT(sE(e))}(e.query),new rI(t,e.targetId,0,e.lastListenSequenceNumber,r,a,i_.fromBase64String(e.resumeToken))}function pI(e,t){var n,r=cI(t.snapshotVersion),a=cI(t.lastLimboFreeSnapshotVersion);n=Q_(t.target)?iE(e.Jt,t.target):oE(e.Jt,t.target);var i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Y_(t.target),readTime:r,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:n}}function hI(e){var t=sE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?_T(t,t.limit,"L"):t}function vI(e,t){return new nI(t.largestBatchId,aE(e.Jt,t.overlayMutation))}function mI(e,t){var n=t.path.lastSegment();return[e,yE(t.path.popLast()),n]}var yI=function(){function e(){I(this,e)}return N(e,[{key:"getBundleMetadata",value:function(e,t){return gI(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:lI(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gI(e).put({bundleId:(n=t).id,createTime:cI(KS(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return bI(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:hI(t.bundledQuery),readTime:lI(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return bI(e).put(function(e){return{name:e.name,readTime:cI(KS(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gI(e){return $E(e,"bundles")}function bI(e){return $E(e,"namedQueries")}var xI=function(){function e(t,n){I(this,e),this.M=t,this.userId=n}return N(e,[{key:"getOverlay",value:function(e,t){var n=this;return kI(e).get(mI(this.userId,t)).next((function(e){return e?vI(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,a=[];return n.forEach((function(n,i){var o=new nI(t,i);a.push(r.Xt(e,o))})),WE.waitFor(a)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=new Set;t.forEach((function(e){return a.add(yE(e.getCollectionPath()))}));var i=[];return a.forEach((function(t){var a=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);i.push(kI(e).Qt("collectionPathOverlayIndex",a))})),WE.waitFor(i)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,a=TS(),i=yE(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return kI(e).Ut("collectionPathOverlayIndex",o).next((function(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=vI(r.M,i);a.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return a}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var a,i=this,o=TS(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return kI(e).Wt({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=vI(i.M,t);o.size()<r||s.largestBatchId===a?(o.set(s.getKey(),s),a=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return kI(e).put(function(e,t,n){var r=mI(t,n.mutation.key),a=(0,W.Z)(r,3);a[0];return{userId:t,collectionPath:a[1],documentId:a[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:rE(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function kI(e){return $E(e,"documentOverlays")}var wI=function(){function e(){I(this,e)}return N(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(u_(e.integerValue));else if("doubleValue"in e){var n=u_(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),m_(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ae(c_(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ue(e.referenceValue,t);else if("geoPointValue"in e){var a=e.geoPointValue;this.ne(t,45),t.se(a.latitude||0),t.se(a.longitude||0)}else"mapValue"in e?M_(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Nw()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,a=Object.keys(n);r<a.length;r++){var i=a[r];this.re(i,t),this.te(n[i],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;this.te(i,t)}}catch(o){a.e(o)}finally{a.f()}}},{key:"ue",value:function(e,t){var n=this;this.ne(t,37),g_.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function _I(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function TI(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=_I(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}wI.fe=new wI;var SI=function(){function e(){I(this,e),this.buffer=new Uint8Array(1024),this.position=0}return N(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this._e(a);else if(a<2048)this._e(960|a>>>6),this._e(128|63&a);else if(r<"\ud800"||"\udbff"<r)this._e(480|a>>>12),this._e(128|63&a>>>6),this._e(128|63&a);else{var i=r.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.charCodeAt(0);if(a<128)this.ge(a);else if(a<2048)this.ge(960|a>>>6),this.ge(128|63&a);else if(r<"\ud800"||"\udbff"<r)this.ge(480|a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a);else{var i=r.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=TI(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=TI(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),EI=function(){function e(t){I(this,e),this.De=t}return N(e,[{key:"ae",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),II=function(){function e(t){I(this,e),this.De=t}return N(e,[{key:"ae",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),CI=function(){function e(){I(this,e),this.De=new SI,this.Ce=new EI(this.De),this.xe=new II(this.De)}return N(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),NI=function(){function e(t,n,r,a){I(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=a}return N(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function AI(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=OI(e.arrayValue,t.arrayValue))?n:0!==(n=OI(e.directionalValue,t.directionalValue))?n:g_.comparator(e.documentKey,t.documentKey)}function OI(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var PI=function(){function e(t){I(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=V(t.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.S()?this.$e=a:this.Oe.push(a)}}catch(i){r.e(i)}finally{r.f()}}return N(e,[{key:"Fe",value:function(e){var t=W_(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=z_(e),r=0,a=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.$e){var i=n[r];if(!this.Le(this.$e,i)||!this.qe(this.Me[a++],i))return!1;++r}for(;r<n.length;++r){var o=n[r];if(a>=this.Me.length||!this.qe(this.Me[a++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=V(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(a){n.e(a)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"qe",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),RI=function(){function e(){I(this,e),this.Ue=new DI}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ue.add(t),WE.resolve()}},{key:"getCollectionParents",value:function(e,t){return WE.resolve(this.Ue.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return WE.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return WE.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return WE.resolve(null)}},{key:"getFieldIndex",value:function(e,t){return WE.resolve(null)}},{key:"getFieldIndexes",value:function(e,t){return WE.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return WE.resolve(null)}},{key:"updateCollectionGroup",value:function(e,t,n){return WE.resolve()}},{key:"updateIndexEntries",value:function(e,t){return WE.resolve()}}]),e}(),DI=function(){function e(){I(this,e),this.index={}}return N(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new yS(t_.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new yS(t_.comparator)).toArray()}}]),e}(),MI=new Uint8Array(0),LI=function(){function e(t){I(this,e),this.user=t,this.Ke=new DI,this.Ge=new pS((function(e){return Y_(e)}),(function(e,t){return X_(e,t)})),this.uid=t.uid||""}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var i={collectionId:r,parent:yE(a)};return FI(e).put(i)}return WE.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Zw(t),""],!1,!0);return FI(e).Ut(r).next((function(e){var r,a=V(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(i.collectionId!==t)break;n.push(xE(i.parent))}}catch(o){a.e(o)}finally{a.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=jI(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=jI(e),r=UI(e),a=BI(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=BI(e),a=!0,i=new Map;return WE.forEach(this.Qe(t),(function(t){return n.getFieldIndex(e,t).next((function(e){a&&(a=!!e),i.set(t,e)}))})).next((function(){if(a){var e=IS();return WE.forEach(i,(function(a,i){var o;Sw("IndexedDbIndexManager","Using index ".concat((o=a,"id=".concat(o.indexId,"|cg=").concat(o.collectionGroup,"|f=").concat(o.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Y_(t)));var s=function(e,t){var n=W_(t);if(void 0===n)return null;var r,a=V(J_(e,n.fieldPath));try{for(a.s();!(r=a.n()).done;){var i=r.value;switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}}}catch(o){a.e(o)}finally{a.f()}return null}(i,a),u=function(e,t){var n,r=new Map,a=V(z_(t));try{for(a.s();!(n=a.n()).done;){var i,o=n.value,s=V(J_(e,o.fieldPath));try{for(s.s();!(i=s.n()).done;){var u=i.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){a.e(c)}finally{a.f()}return null}(i,a),c=function(e,t){var n,r,a=[],i=!0,o=V(z_(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,d=V(J_(e,u.fieldPath));try{for(d.s();!(s=d.n()).done;){var f=s.value,p=void 0,h=!0;switch(f.op){case"<":case"<=":p="nullValue"in(r=f.value)?x_:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?C_(h_.empty(),g_.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Nw();break;case"==":case"in":case">=":p=f.value;break;case">":p=f.value,h=!1;break;case"!=":case"not-in":p=x_}L_(c,p)===p&&(c=p,l=h)}}catch(y){d.e(y)}finally{d.f()}if(null!==e.startAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var m=e.startAt.position[v];L_(c,m)===m&&(c=m,l=e.startAt.inclusive);break}if(void 0===c)return null;a.push(c),i&&(i=l)}}catch(y){o.e(y)}finally{o.f()}return new uT(a,i)}(i,a),l=function(e,t){var n,r,a=[],i=!0,o=V(z_(t));try{for(o.s();!(n=o.n()).done;){var s,u=n.value,c=void 0,l=!0,d=V(J_(e,u.fieldPath));try{for(d.s();!(s=d.n()).done;){var f=s.value,p=void 0,h=!0;switch(f.op){case">=":case">":p="nullValue"in(r=f.value)?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?C_(h_.empty(),g_.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?b_:Nw(),h=!1;break;case"==":case"in":case"<=":p=f.value;break;case"<":p=f.value,h=!1;break;case"!=":case"not-in":p=b_}F_(c,p)===p&&(c=p,l=h)}}catch(y){d.e(y)}finally{d.f()}if(null!==e.endAt)for(var v=0;v<e.orderBy.length;++v)if(e.orderBy[v].field.isEqual(u.fieldPath)){var m=e.endAt.position[v];F_(c,m)===m&&(c=m,l=e.endAt.inclusive);break}if(void 0===c)return null;a.push(c),i&&(i=l)}}catch(y){o.e(y)}finally{o.f()}return new uT(a,i)}(i,a),d=n.je(a,i,c),f=n.je(a,i,l),p=n.We(a,i,u),h=n.ze(a.indexId,s,d,!!c&&c.inclusive,f,!!l&&l.inclusive,p);return WE.forEach(h,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){e=e.add(new g_(xE(t.documentKey)))}))}))}))})).next((function(){return e}))}return WE.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"ze",value:function(e,t,n,r,a,i,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(null!=n?n.length:1,null!=a?a.length:1),c=u/(null!=t?t.length:1),l=[],d=function(u){var d=t?s.He(t[u/c]):MI,f=n?s.Je(e,d,n[u%c],r):s.Ye(e),p=a?s.Xe(e,d,a[u%c],i):s.Ye(e+1);l.push.apply(l,(0,Ze.Z)(s.createRange(f,p,o.map((function(t){return s.Je(e,d,t,!0)})))))},f=0;f<u;++f)d(f);return l}},{key:"Je",value:function(e,t,n,r){var a=new NI(e,g_.empty(),t,n);return r?a:a.ke()}},{key:"Xe",value:function(e,t,n,r){var a=new NI(e,g_.empty(),t,n);return r?a.ke():a}},{key:"Ye",value:function(e){return new NI(e,g_.empty(),MI,MI)}},{key:"getFieldIndex",value:function(e,t){var n=new PI(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t=e.filter((function(e){return n.Fe(e)}));return t.sort((function(e,t){return t.fields.length-e.fields.length})),t.length>0?t[0]:null}))}},{key:"Ze",value:function(e,t){var n,r=new CI,a=V(z_(e));try{for(a.s();!(n=a.n()).done;){var i=n.value,o=t.data.field(i.fieldPath);if(null==o)return null;var s=r.Ne(i.kind);wI.fe.Zt(o,s)}}catch(u){a.e(u)}finally{a.f()}return r.Se()}},{key:"He",value:function(e){var t=new CI;return wI.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"We",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new CI);var a,i=0,o=V(z_(e));try{for(o.s();!(a=o.n()).done;){var s,u=a.value,c=n[i++],l=V(r);try{for(l.s();!(s=l.n()).done;){var d=s.value;if(this.tn(t,u.fieldPath)&&A_(c))r=this.en(r,u,c);else{var f=d.Ne(u.kind);wI.fe.Zt(c,f)}}}catch(p){l.e(p)}finally{l.f()}}}catch(p){o.e(p)}finally{o.f()}return this.nn(r)}},{key:"je",value:function(e,t,n){return null==n?null:this.We(e,t,n.position)}},{key:"nn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"en",value:function(e,t,n){var r,a=(0,Ze.Z)(e),i=[],o=V(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,u=r.value,c=V(a);try{for(c.s();!(s=c.n()).done;){var l=s.value,d=new CI;d.seed(l.Se()),wI.fe.Zt(u,d.Ne(t.kind)),i.push(d)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return i}},{key:"tn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof $_&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=jI(e),a=UI(e);return(t?r.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.Ut()).next((function(e){var t=[];return WE.forEach(e,(function(e){return a.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new K_(t.sequenceNumber,new G_(lI(t.readTime),new g_(xE(t.documentKey)),t.largestBatchId)):K_.empty(),r=e.fields.map((function(e){var t=(0,W.Z)(e,2),n=t[0],r=t[1];return new q_(r_.fromServerFormat(n),r)}));return new V_(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Gw(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,a=jI(e),i=UI(e);return this.sn(e).next((function(e){return a.Ut("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return WE.forEach(t,(function(t){return i.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:cI(r.readTime),documentKey:yE(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return WE.forEach(t,(function(t,a){var i=r.get(t.collectionGroup);return(i?WE.resolve(i):n.getFieldIndexes(e,t.collectionGroup)).next((function(i){return r.set(t.collectionGroup,i),WE.forEach(i,(function(r){return n.rn(e,t,r).next((function(t){var i=n.on(a,r);return t.isEqual(i)?WE.resolve():n.an(e,a,t,i)}))}))}))}))}},{key:"un",value:function(e,t,n){return BI(e).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,documentKey:yE(t.key.path)})}},{key:"cn",value:function(e,t,n){return BI(e).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,yE(t.key.path)])}},{key:"rn",value:function(e,t,n){var r=BI(e),a=new yS(AI);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,yE(t.path)])},(function(e,r){a=a.add(new NI(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return a}))}},{key:"on",value:function(e,t){var n=new yS(AI),r=this.Ze(t,e);if(null==r)return n;var a=W_(t);if(null!=a){var i=e.data.field(a.fieldPath);if(A_(i)){var o,s=V(i.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new NI(t.indexId,e.key,this.He(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new NI(t.indexId,e.key,MI,r));return n}},{key:"an",value:function(e,t,n,r){var a=this;Sw("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var i=[];return function(e,t,n,r,a){for(var i=e.getIterator(),o=t.getIterator(),s=bS(i),u=bS(o);s||u;){var c=!1,l=!1;if(s&&u){var d=n(s,u);d<0?l=!0:d>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=bS(o)):l?(a(s),s=bS(i)):(s=bS(i),u=bS(o))}}(n,r,AI,(function(n){i.push(a.un(e,t,n))}),(function(n){i.push(a.cn(e,t,n))})),WE.waitFor(i)}},{key:"sn",value:function(e){var t=1;return UI(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return AI(e,t)})).filter((function(e,t,n){return!t||0!==AI(e,n[t-1])}));var r=[];r.push(e);var a,i=V(n);try{for(i.s();!(a=i.n()).done;){var o=a.value,s=AI(o,e),u=AI(o,t);if(0===s)r[0]=e.ke();else if(s>0&&u<0)r.push(o),r.push(o.ke());else if(u>0)break}}catch(d){i.e(d)}finally{i.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,""],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,""]));return c}}]),e}();function FI(e){return $E(e,"collectionParents")}function BI(e){return $E(e,"indexEntries")}function jI(e){return $E(e,"indexConfiguration")}function UI(e){return $E(e,"indexState")}var VI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WI=function(){function e(t,n,r){I(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return N(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function zI(e,t,n){var r=e.store("mutations"),a=e.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.Wt({range:o},(function(e,t,n){return s++,n.delete()}));i.push(u.next((function(){Aw(1===s)})));var c,l=[],d=V(n.mutations);try{for(d.s();!(c=d.n()).done;){var f=c.value,p=_E(t,f.key.path,n.batchId);i.push(a.delete(p)),l.push(f.key)}}catch(h){d.e(h)}finally{d.f()}return WE.waitFor(i).next((function(){return l}))}function qI(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Nw();t=e.noDocument}return JSON.stringify(t).length}WI.DEFAULT_COLLECTION_PERCENTILE=10,WI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,WI.DEFAULT=new WI(41943040,WI.DEFAULT_COLLECTION_PERCENTILE,WI.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),WI.DISABLED=new WI(-1,0,0);var KI=function(){function e(t,n,r,a){I(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=a,this.hn={}}return N(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return HI(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this,i=ZI(e),o=HI(e);return o.add({}).next((function(s){Aw("number"==typeof s);var u,c=new eI(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return rE(e.Jt,t)})),a=n.mutations.map((function(t){return rE(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:a}}(a.M,a.userId,c),d=[],f=new yS((function(e,t){return Gw(e.canonicalString(),t.canonicalString())})),p=V(r);try{for(p.s();!(u=p.n()).done;){var h=u.value,v=_E(a.userId,h.key.path,s);f=f.add(h.key.path.popLast()),d.push(o.put(l)),d.push(i.put(v,TE))}}catch(m){p.e(m)}finally{p.f()}return f.forEach((function(t){d.push(a.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){a.hn[s]=c.keys()})),WE.waitFor(d).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return HI(e).get(t).next((function(e){return e?(Aw(e.userId===n.userId),dI(n.M,e)):null}))}},{key:"ln",value:function(e,t){var n=this;return this.hn[t]?WE.resolve(this.hn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.hn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]),i=null;return HI(e).Wt({index:"userMutationsIndex",range:a},(function(e,t,a){t.userId===n.userId&&(Aw(t.batchId>=r),i=dI(n.M,t)),a.done()})).next((function(){return i}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return HI(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return HI(e).Ut("userMutationsIndex",n).next((function(e){return e.map((function(e){return dI(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=wE(this.userId,t.path),a=IDBKeyRange.lowerBound(r),i=[];return ZI(e).Wt({range:a},(function(r,a,o){var s=(0,W.Z)(r,3),u=s[0],c=s[1],l=s[2],d=xE(c);if(u===n.userId&&t.path.isEqual(d))return HI(e).get(l).next((function(e){if(!e)throw Nw();Aw(e.userId===n.userId),i.push(dI(n.M,e))}));o.done()})).next((function(){return i}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new yS(Gw),a=[];return t.forEach((function(t){var i=wE(n.userId,t.path),o=IDBKeyRange.lowerBound(i),s=ZI(e).Wt({range:o},(function(e,a,i){var o=(0,W.Z)(e,3),s=o[0],u=o[1],c=o[2],l=xE(u);s===n.userId&&t.path.isEqual(l)?r=r.add(c):i.done()}));a.push(s)})),WE.waitFor(a).next((function(){return n.fn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,a=r.length+1,i=wE(this.userId,r),o=IDBKeyRange.lowerBound(i),s=new yS(Gw);return ZI(e).Wt({range:o},(function(e,t,i){var o=(0,W.Z)(e,3),u=o[0],c=o[1],l=o[2],d=xE(c);u===n.userId&&r.isPrefixOf(d)?d.length===a&&(s=s.add(l)):i.done()})).next((function(){return n.fn(e,s)}))}},{key:"fn",value:function(e,t){var n=this,r=[],a=[];return t.forEach((function(t){a.push(HI(e).get(t).next((function(e){if(null===e)throw Nw();Aw(e.userId===n.userId),r.push(dI(n.M,e))})))})),WE.waitFor(a).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return zI(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.dn(t.batchId)})),WE.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"dn",value:function(e){delete this.hn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return WE.resolve();var r=IDBKeyRange.lowerBound([t.userId]),a=[];return ZI(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var i=xE(e[1]);a.push(i)}else r.done()})).next((function(){Aw(0===a.length)}))}))}},{key:"containsKey",value:function(e,t){return GI(e,this.userId,t)}},{key:"_n",value:function(e){var t=this;return YI(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,a){return Aw(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,a)}}]),e}();function GI(e,t,n){var r=wE(t,n.path),a=r[1],i=IDBKeyRange.lowerBound(r),o=!1;return ZI(e).Wt({range:i,jt:!0},(function(e,n,r){var i=(0,W.Z)(e,3),s=i[0],u=i[1];i[2];s===t&&u===a&&(o=!0),r.done()})).next((function(){return o}))}function HI(e){return $E(e,"mutations")}function ZI(e){return $E(e,"documentMutations")}function YI(e){return $E(e,"mutationQueues")}var XI=function(){function e(t){I(this,e),this.wn=t}return N(e,[{key:"next",value:function(){return this.wn+=2,this.wn}}],[{key:"mn",value:function(){return new e(0)}},{key:"gn",value:function(){return new e(-1)}}]),e}(),QI=function(){function e(t,n){I(this,e),this.referenceDelegate=t,this.M=n}return N(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.yn(e).next((function(n){var r=new XI(n.highestTargetId);return n.highestTargetId=r.next(),t.pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.yn(e).next((function(e){return Xw.fromTimestamp(new Yw(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.yn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.yn(e).next((function(a){return a.highestListenSequenceNumber=t,n&&(a.lastRemoteSnapshotVersion=n.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),r.pn(e,a)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.In(e,t).next((function(){return n.yn(e).next((function(r){return r.targetCount+=1,n.Tn(t,r),n.pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.In(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return JI(e).delete(t.targetId)})).next((function(){return n.yn(e)})).next((function(t){return Aw(t.targetCount>0),t.targetCount-=1,n.pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return JI(e).Wt((function(o,s){var u=fI(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(a++,i.push(r.removeTargetData(e,u)))})).next((function(){return WE.waitFor(i)})).next((function(){return a}))}},{key:"forEachTarget",value:function(e,t){return JI(e).Wt((function(e,n){var r=fI(n);t(r)}))}},{key:"yn",value:function(e){return $I(e).get("targetGlobalKey").next((function(e){return Aw(null!==e),e}))}},{key:"pn",value:function(e,t){return $I(e).put("targetGlobalKey",t)}},{key:"In",value:function(e,t){return JI(e).put(pI(this.M,t))}},{key:"Tn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.yn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Y_(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),a=null;return JI(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var i=fI(n);X_(t,i.target)&&(a=i,r.done())})).next((function(){return a}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,a=[],i=eC(e);return t.forEach((function(t){var o=yE(t.path);a.push(i.put({targetId:n,path:o})),a.push(r.referenceDelegate.addReference(e,n,t))})),WE.waitFor(a)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,a=eC(e);return WE.forEach(t,(function(t){var i=yE(t.path);return WE.waitFor([a.delete([n,i]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=eC(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=eC(e),a=IS();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=xE(e[1]),i=new g_(r);a=a.add(i)})).next((function(){return a}))}},{key:"containsKey",value:function(e,t){var n=yE(t.path),r=IDBKeyRange.bound([n],[Zw(n)],!1,!0),a=0;return eC(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=(0,W.Z)(e,2),i=r[0];r[1];0!==i&&(a++,n.done())})).next((function(){return a>0}))}},{key:"Et",value:function(e,t){return JI(e).get(t).next((function(e){return e?fI(e):null}))}}]),e}();function JI(e){return $E(e,"targets")}function $I(e){return $E(e,"targetGlobal")}function eC(e){return $E(e,"targetDocuments")}function tC(e){return nC.apply(this,arguments)}function nC(){return nC=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Pw.FAILED_PRECONDITION&&t.message===UE){e.next=2;break}throw t;case 2:Sw("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),nC.apply(this,arguments)}function rC(e,t){var n=(0,W.Z)(e,2),r=n[0],a=n[1],i=(0,W.Z)(t,2),o=i[0],s=i[1],u=Gw(r,o);return 0===u?Gw(a,s):u}var aC=function(){function e(t){I(this,e),this.En=t,this.buffer=new yS(rC),this.An=0}return N(e,[{key:"Rn",value:function(){return++this.An}},{key:"bn",value:function(e){var t=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rC(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),iC=function(){function e(t,n){I(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Pn=!1,this.Vn=null}return N(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}},{key:"stop",value:function(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}},{key:"started",get:function(){return null!==this.Vn}},{key:"vn",value:function(e){var t=this,n=this.Pn?3e5:6e4;Sw("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.Vn=null,t.Pn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!HE(n.t0)){n.next=12;break}Sw("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,tC(n.t0);case 14:return n.next=16,t.vn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),oC=function(){function e(t,n){I(this,e),this.Sn=t,this.params=n}return N(e,[{key:"calculateTargetCount",value:function(e,t){return this.Sn.Dn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return WE.resolve(zw.A);var r=new aC(t);return this.Sn.forEachTarget(e,(function(e){return r.bn(e.sequenceNumber)})).next((function(){return n.Sn.Cn(e,(function(e){return r.bn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Sn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Sn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Sw("LruGarbageCollector","Garbage collection skipped; disabled"),WE.resolve(VI)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Sw("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),VI):n.xn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Sn.getCacheSize(e)}},{key:"xn",value:function(e,t){var n,r,a,i,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Sw("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return a=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Tw()<=$e.DEBUG&&Sw("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-i)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),WE.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})}))}}]),e}(),sC=function(){function e(t,n){I(this,e),this.db=t,this.garbageCollector=function(e,t){return new oC(e,t)}(this,n)}return N(e,[{key:"Dn",value:function(e){var t=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Nn",value:function(e){var t=0;return this.Cn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Cn",value:function(e,t){return this.kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return uC(e,n)}},{key:"removeReference",value:function(e,t,n){return uC(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return uC(e,t)}},{key:"Mn",value:function(e,t){return function(e,t){var n=!1;return YI(e).zt((function(r){return GI(e,r,t).next((function(e){return e&&(n=!0),WE.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[],i=0;return this.kn(e,(function(o,s){if(s<=t){var u=n.Mn(e,o).next((function(t){if(!t)return i++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Xw.min()),eC(e).delete([0,yE(o.path)])}))}));a.push(u)}})).next((function(){return WE.waitFor(a)})).next((function(){return r.apply(e)})).next((function(){return i}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return uC(e,t)}},{key:"kn",value:function(e,t){var n,r=eC(e),a=zw.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var i=(0,W.Z)(e,2),o=i[0],s=(i[1],r.path),u=r.sequenceNumber;0===o?(a!==zw.A&&t(new g_(xE(n)),a),a=u,n=s):a=zw.A})).next((function(){a!==zw.A&&t(new g_(xE(n)),a)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function uC(e,t){return eC(e).put(function(e,t){return{targetId:0,path:yE(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var cC=function(){function e(){I(this,e),this.changes=new pS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return N(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,U_.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?WE.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),lC=function(){function e(t){I(this,e),this.M=t}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return pC(e).put(hC(t),n)}},{key:"removeEntry",value:function(e,t){var n=pC(e),r=hC(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.On(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this;return pC(e).get(hC(t)).next((function(e){return n.$n(t,e)}))}},{key:"Fn",value:function(e,t){var n=this;return pC(e).get(hC(t)).next((function(e){return{document:n.$n(t,e),size:qI(e)}}))}},{key:"getEntries",value:function(e,t){var n=this,r=kS();return this.Bn(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a)})).next((function(){return r}))}},{key:"Ln",value:function(e,t){var n=this,r=kS(),a=new hS(g_.comparator);return this.Bn(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i),a=a.insert(e,qI(t))})).next((function(){return{documents:r,qn:a}}))}},{key:"Bn",value:function(e,t,n){if(t.isEmpty())return WE.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator(),i=a.getNext();return pC(e).Wt({range:r},(function(e,t,r){for(var o=g_.fromSegments(e);i&&g_.comparator(i,o)<0;)n(i,null),i=a.getNext();i&&i.isEqual(o)&&(n(i,t),i=a.hasNext()?a.getNext():null),i?r.qt(i.path.toArray()):r.done()})).next((function(){for(;i;)n(i,null),i=a.hasNext()?a.getNext():null}))}},{key:"getAll",value:function(e,t,n){var r=this,a=kS(),i=t.length+1,o={};if(n.isEqual(Xw.min())){var s=t.toArray();o.range=IDBKeyRange.lowerBound(s)}else{var u=t.toArray(),c=sI(n);o.range=IDBKeyRange.lowerBound([u,c],!0),o.index="collectionReadTimeIndex"}return pC(e).Wt(o,(function(e,n,o){if(e.length===i){var s=r.$n(g_.fromSegments(e),n);t.isPrefixOf(s.key.path)?a=a.insert(s.key,s):o.done()}})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new dC(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return fC(e).get("remoteDocumentGlobalKey").next((function(e){return Aw(!!e),e}))}},{key:"On",value:function(e,t){return fC(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=iI(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Xw.min()))return n}return U_.newInvalidDocument(e)}}]),e}(),dC=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).Un=e,a.trackRemovals=r,a.Kn=new pS((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),a}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,a=new yS((function(e,t){return Gw(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(i,o){var s=t.Kn.get(i);if(o.isValidDocument()){var u=oI(t.Un.M,o);a=a.add(i.path.popLast());var c=qI(u);r+=c-s,n.push(t.Un.addEntry(e,i,u))}else if(r-=s,t.trackRemovals){var l=oI(t.Un.M,o.convertToNoDocument(Xw.min()));n.push(t.Un.addEntry(e,i,l))}else n.push(t.Un.removeEntry(e,i))})),a.forEach((function(r){n.push(t.Un.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Un.updateMetadata(e,r)),WE.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Un.Fn(e,t).next((function(e){return n.Kn.set(t,e.size),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Un.Ln(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,t){n.Kn.set(e,t)})),t}))}}]),n}(cC);function fC(e){return $E(e,"remoteDocumentGlobal")}function pC(e){return $E(e,"remoteDocuments")}function hC(e){return e.path.toArray()}var vC=function(){function e(t){I(this,e),this.M=t}return N(e,[{key:"kt",value:function(e,t,n,r){var a=this,i=new zE("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kE,{unique:!0}),e.createObjectStore("documentMutations")}(e),mC(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=WE.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mC(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xw.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").Ut().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kE,{unique:!0});var r=t.store("mutations"),a=n.map((function(e){return r.put(e)}));return WE.waitFor(a)}))}(e,i)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return a.Gn(i)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),a.Qn(i)}))),n<7&&r>=7&&(o=o.next((function(){return a.jn(i)}))),n<8&&r>=8&&(o=o.next((function(){return a.Wn(e,i)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore("remoteDocuments");t.createIndex("readTimeIndex","readTime",{unique:!1}),t.createIndex("collectionReadTimeIndex",SE,{unique:!1})}(t)}))),n<10&&r>=10&&(o=o.next((function(){return a.zn(i)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:DE});t.createIndex("collectionPathOverlayIndex",ME,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",LE,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:AE}).createIndex("sequenceNumberIndex",OE,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:PE}).createIndex("documentKeyIndex",RE,{unique:!1})}(e)}))),o}},{key:"Qn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=qI(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Gn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.Ut().next((function(n){return WE.forEach(n,(function(n){var a=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ut("userMutationsIndex",a).next((function(r){return WE.forEach(r,(function(r){Aw(r.userId===n.userId);var a=dI(t.M,r);return zI(e,n.userId,a).next((function(){}))}))}))}))}))}},{key:"jn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,a){var i=new t_(n),o=function(e){return[0,yE(e)]}(i);r.push(t.get(o).next((function(n){return n?WE.resolve():function(n){return t.put({targetId:0,path:yE(n),sequenceNumber:e.highestListenSequenceNumber})}(i)})))})).next((function(){return WE.waitFor(r)}))}))}},{key:"Wn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:NE});var n=t.store("collectionParents"),r=new DI,a=function(e){if(r.add(e)){var t=e.lastSegment(),a=e.popLast();return n.put({collectionId:t,parent:yE(a)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new t_(e);return a(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=(0,W.Z)(e,3),r=(n[0],n[1]),i=(n[2],xE(r));return a(i.popLast())}))}))}},{key:"zn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var a=fI(r),i=pI(t.M,a);return n.put(i)}))}}]),e}();function mC(e){e.createObjectStore("targetDocuments",{keyPath:IE}).createIndex("documentTargetsIndex",CE,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",EE,{unique:!0}),e.createObjectStore("targetGlobal")}var yC="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",gC=function(){function e(t,n,r,a,i,o,s,u,c,l){var d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:12;if(I(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hn=i,this.window=o,this.document=s,this.Jn=c,this.Yn=l,this.Xn=d,this.Zn=null,this.ts=!1,this.isPrimary=!1,this.networkEnabled=!0,this.es=null,this.inForeground=!1,this.ns=null,this.ss=null,this.rs=Number.NEGATIVE_INFINITY,this.os=function(e){return Promise.resolve()},!e.vt())throw new Rw(Pw.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sC(this,a),this.us=n+"main",this.M=new aI(u),this.cs=new qE(this.us,this.Xn,new vC(this.M)),this.hs=new QI(this.referenceDelegate,this.M),this.ls=function(e){return new lC(e)}(this.M),this.fs=new yI,this.window&&this.window.localStorage?this.ds=this.window.localStorage:(this.ds=null,!1===l&&Ew("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return N(e,[{key:"start",value:function(){var e=this;return this._s().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Rw(Pw.FAILED_PRECONDITION,yC);return e.ws(),e.gs(),e.ys(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.hs.getHighestSequenceNumber(t)}))})).then((function(t){e.Zn=new zw(t,e.Jn)})).then((function(){e.ts=!0})).catch((function(t){return e.cs&&e.cs.close(),Promise.reject(t)}))}},{key:"ps",value:function(e){var t=this;return this.os=function(){var n=j(G().mark((function n(r){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.cs.Ot(function(){var t=j(G().mark((function t(n){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hn.enqueueAndForget(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t._s();case 4:case"end":return e.stop()}}),e)})))))}},{key:"_s",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return xC(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Is(t).next((function(t){t||(e.isPrimary=!1,e.Hn.enqueueRetryable((function(){return e.os(!1)})))}))})).next((function(){return e.Ts(t)})).next((function(n){return e.isPrimary&&!n?e.Es(t).next((function(){return!1})):!!n&&e.As(t).next((function(){return!0}))}))})).catch((function(t){if(HE(t))return Sw("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Sw("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hn.enqueueRetryable((function(){return e.os(t)})),e.isPrimary=t}))}},{key:"Is",value:function(e){var t=this;return bC(e).get("owner").next((function(e){return WE.resolve(t.Rs(e))}))}},{key:"bs",value:function(e){return xC(e).delete(this.clientId)}},{key:"Ps",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vs(this.rs,18e5)){e.next=6;break}return this.rs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=$E(e,"clientMetadata");return t.Ut().next((function(e){var n=i.vs(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return WE.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ds){n=V(t);try{for(n.s();!(r=n.n()).done;)a=r.value,this.ds.removeItem(this.Ss(a.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ys",value:function(){var e=this;this.ss=this.Hn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e._s().then((function(){return e.Ps()})).then((function(){return e.ys()}))}))}},{key:"Rs",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ts",value:function(e){var t=this;return this.Yn?WE.resolve(!0):bC(e).get("owner").next((function(n){if(null!==n&&t.Vs(n.leaseTimestampMs,5e3)&&!t.Ds(n.ownerId)){if(t.Rs(n)&&t.networkEnabled)return!0;if(!t.Rs(n)){if(!n.allowTabSynchronization)throw new Rw(Pw.FAILED_PRECONDITION,yC);return!1}}return!(!t.networkEnabled||!t.inForeground)||xC(e).Ut().next((function(e){return void 0===t.vs(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,a=t.networkEnabled===e.networkEnabled;if(n||r&&a)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Sw("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=j(G().mark((function e(){var t=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ts=!1,this.Cs(),this.ss&&(this.ss.cancel(),this.ss=null),this.xs(),this.Ns(),e.next=7,this.cs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new JE(e,zw.A);return t.Es(n).next((function(){return t.bs(n)}))}));case 7:this.cs.close(),this.ks();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vs",value:function(e,t){var n=this;return e.filter((function(e){return n.Vs(e.updateTimeMs,t)&&!n.Ds(e.clientId)}))}},{key:"Ms",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return xC(t).Ut().next((function(t){return e.vs(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ts}},{key:"getMutationQueue",value:function(e,t){return KI.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getIndexManager",value:function(e){return new LI(e)}},{key:"getDocumentOverlayCache",value:function(e){return xI.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;Sw("IndexedDbPersistence","Starting transaction:",e);var a,i,o="readonly"===t?"readonly":"readwrite",s=13===(a=this.Xn)?jE:12===a?BE:11===a?FE:void Nw();return this.cs.runTransaction(e,o,s,(function(a){return i=new JE(a,r.Zn?r.Zn.next():zw.A),"readwrite-primary"===t?r.Is(i).next((function(e){return!!e||r.Ts(i)})).next((function(t){if(!t)throw Ew("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hn.enqueueRetryable((function(){return r.os(!1)})),new Rw(Pw.FAILED_PRECONDITION,UE);return n(i)})).next((function(e){return r.As(i).next((function(){return e}))})):r.Os(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e){var t=this;return bC(e).get("owner").next((function(e){if(null!==e&&t.Vs(e.leaseTimestampMs,5e3)&&!t.Ds(e.ownerId)&&!t.Rs(e)&&!(t.Yn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Rw(Pw.FAILED_PRECONDITION,yC)}))}},{key:"As",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return bC(e).put("owner",t)}},{key:"Es",value:function(e){var t=this,n=bC(e);return n.get("owner").next((function(e){return t.Rs(e)?(Sw("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):WE.resolve()}))}},{key:"Vs",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ew("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ws",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ns=function(){e.Hn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e._s()}))},this.document.addEventListener("visibilitychange",this.ns),this.inForeground="visible"===this.document.visibilityState)}},{key:"xs",value:function(){this.ns&&(this.document.removeEventListener("visibilitychange",this.ns),this.ns=null)}},{key:"gs",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.es=function(){t.Cs(),!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hn.enterRestrictedMode(!0),t.Hn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.es))}},{key:"Ns",value:function(){this.es&&(this.window.removeEventListener("pagehide",this.es),this.es=null)}},{key:"Ds",value:function(e){var t;try{var n=null!==(null===(t=this.ds)||void 0===t?void 0:t.getItem(this.Ss(e)));return Sw("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ew("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Cs",value:function(){if(this.ds)try{this.ds.setItem(this.Ss(this.clientId),String(Date.now()))}catch(kg){Ew("Failed to set zombie client id.",kg)}}},{key:"ks",value:function(){if(this.ds)try{this.ds.removeItem(this.Ss(this.clientId))}catch(kg){}}},{key:"Ss",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return qE.vt()}}]),e}();function bC(e){return $E(e,"owner")}function xC(e){return $E(e,"clientMetadata")}function kC(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var wC=N((function e(t,n){I(this,e),this.progress=t,this.$s=n})),_C=function(){function e(t,n,r){I(this,e),this.ls=t,this.Fs=n,this.indexManager=r}return N(e,[{key:"Bs",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Ls(e,t,r)}))}},{key:"Ls",value:function(e,t,n){return this.ls.getEntry(e,t).next((function(e){var t,r=V(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(a){r.e(a)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,a=V(t);try{for(a.s();!(r=a.n()).done;){r.value.applyToLocalView(n)}}catch(i){a.e(i)}finally{a.f()}}))}},{key:"Us",value:function(e,t){var n=this;return this.ls.getEntries(e,t).next((function(t){return n.Ks(e,t).next((function(){return t}))}))}},{key:"Ks",value:function(e,t){var n=this;return this.Fs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Gs",value:function(e,t,n){return function(e){return g_.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):xT(t)?this.js(e,t,n):this.Ws(e,t,n)}},{key:"Qs",value:function(e,t){return this.Bs(e,new g_(t)).next((function(e){var t=_S();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"js",value:function(e,t,n){var r=this,a=t.collectionGroup,i=_S();return this.indexManager.getCollectionParents(e,a).next((function(o){return WE.forEach(o,(function(o){var s=function(e,t){return new pT(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(a));return r.Ws(e,s,n).next((function(e){e.forEach((function(e,t){i=i.insert(e,t)}))}))})).next((function(){return i}))}))}},{key:"Ws",value:function(e,t,n){var r,a=this;return this.ls.getAll(e,t.path,n).next((function(n){return r=n,a.Fs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){var a,i=t.value,o=V(i.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=s.key,c=r.get(u);null==c&&(c=U_.newInvalidDocument(u),r=r.insert(u,c)),QT(s,c,i.localWriteTime),c.isFoundDocument()||(r=r.remove(u))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){IT(t,n)||(r=r.remove(e))})),r}))}}]),e}(),TC=function(){function e(t,n,r,a){I(this,e),this.targetId=t,this.fromCache=n,this.zs=r,this.Hs=a}return N(e,null,[{key:"Js",value:function(t,n){var r,a=IS(),i=IS(),o=V(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:a=a.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,a,i)}}]),e}(),SC=function(){function e(){I(this,e)}return N(e,[{key:"Ys",value:function(e){this.Xs=e}},{key:"Gs",value:function(e,t,n,r){var a=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Xw.min())?this.Zs(e,t):this.Xs.Us(e,r).next((function(i){var o=a.ti(t,i);return(mT(t)||yT(t))&&a.ei(t.limitType,o,r,n)?a.Zs(e,t):(Tw()<=$e.DEBUG&&Sw("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ET(t)),a.Xs.Gs(e,t,n).next((function(e){return o.forEach((function(t){e=e.insert(t.key,t)})),e})))}))}},{key:"ti",value:function(e,t){var n=new yS(CT(e));return t.forEach((function(t,r){IT(e,r)&&(n=n.add(r))})),n}},{key:"ei",value:function(e,t,n,r){if(n.size!==t.size)return!0;var a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}},{key:"Zs",value:function(e,t){return Tw()<=$e.DEBUG&&Sw("QueryEngine","Using full collection scan to execute query:",ET(t)),this.Xs.Gs(e,t,Xw.min())}}]),e}(),EC=function(){function e(t,n,r,a){I(this,e),this.persistence=t,this.ni=n,this.M=a,this.si=new hS(Gw),this.ii=new pS((function(e){return Y_(e)}),X_),this.ri=Xw.min(),this.oi=t.getRemoteDocumentCache(),this.hs=t.getTargetCache(),this.fs=t.getBundleCache(),this.ai(r)}return N(e,[{key:"ai",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Fs=this.persistence.getMutationQueue(e,this.indexManager),this.ui=new _C(this.oi,this.Fs,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ui)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.si)}))}}]),e}();function IC(e,t,n,r){return new EC(e,t,n,r)}function CC(e,t){return NC.apply(this,arguments)}function NC(){return NC=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Fs.getAllMutationBatches(e).next((function(a){return t=a,r.ai(n),r.Fs.getAllMutationBatches(e)})).next((function(n){var a,i=[],o=[],s=IS(),u=V(t);try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push(c.batchId);var l,d=V(c.mutations);try{for(d.s();!(l=d.n()).done;){var f=l.value;s=s.add(f.key)}}catch(b){d.e(b)}finally{d.f()}}}catch(b){u.e(b)}finally{u.f()}var p,h=V(n);try{for(h.s();!(p=h.n()).done;){var v=p.value;o.push(v.batchId);var m,y=V(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(b){y.e(b)}finally{y.f()}}}catch(b){h.e(b)}finally{h.f()}return r.ui.Us(e,s).next((function(e){return{ci:e,removedBatchIds:i,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),NC.apply(this,arguments)}function AC(e,t){var n=Ow(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),a=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var a=n.batch,i=a.keys(),o=WE.resolve();return i.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var i=n.docVersions.get(e);Aw(null!==i),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Fs.removeMutationBatch(t,a)}))}(n,e,t,a).next((function(){return a.apply(e)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}function OC(e){var t=Ow(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.hs.getLastRemoteSnapshotVersion(e)}))}function PC(e,t){var n=Ow(e),r=t.snapshotVersion,a=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var i=n.oi.newChangeBuffer({trackRemovals:!0});a=n.si;var o=[];t.targetChanges.forEach((function(i,s){var u=a.get(s);if(u){o.push(n.hs.removeMatchingKeys(e,i.removedDocuments,s).next((function(){return n.hs.addMatchingKeys(e,i.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(i_.EMPTY_BYTE_STRING,Xw.min()).withLastLimboFreeSnapshotVersion(Xw.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,i)&&o.push(n.hs.updateTargetData(e,c))}}));var s=kS();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(RC(e,i,t.documentUpdates).next((function(e){s=e}))),!r.isEqual(Xw.min())){var u=n.hs.getLastRemoteSnapshotVersion(e).next((function(t){return n.hs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(u)}return WE.waitFor(o).next((function(){return i.apply(e)})).next((function(){return n.ui.Ks(e,s)})).next((function(){return s}))})).then((function(e){return n.si=a,e}))}function RC(e,t,n){var r=IS();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=kS();return n.forEach((function(n,a){var i=e.get(n);a.isNoDocument()&&a.version.isEqual(Xw.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!i.isValidDocument()||a.version.compareTo(i.version)>0||0===a.version.compareTo(i.version)&&i.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Sw("LocalStore","Ignoring outdated watch update for ",n,". Current version:",i.version," Watch version:",a.version)})),r}))}function DC(e,t){var n=Ow(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Fs.getNextMutationBatchAfterBatchId(e,t)}))}function MC(e,t){var n=Ow(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.hs.getTargetData(e,t).next((function(a){return a?(r=a,WE.resolve(r)):n.hs.allocateTargetId(e).next((function(a){return r=new rI(t,a,0,e.currentSequenceNumber),n.hs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.si.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}function LC(e,t,n){return FC.apply(this,arguments)}function FC(){return FC=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ow(t),i=a.si.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,a.persistence.runTransaction("Release target",o,(function(e){return a.persistence.referenceDelegate.removeTarget(e,i)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),HE(e.t1)){e.next=12;break}throw e.t1;case 12:Sw("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:a.si=a.si.remove(n),a.ii.delete(i.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),FC.apply(this,arguments)}function BC(e,t,n){var r=Ow(e),a=Xw.min(),i=IS();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Ow(e),a=r.ii.get(n);return void 0!==a?WE.resolve(r.si.get(a)):r.hs.getTargetData(t,n)}(r,e,wT(t)).next((function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,r.hs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){i=e}))})).next((function(){return r.ni.Gs(e,t,n?a:Xw.min(),n?i:IS())})).next((function(e){return{documents:e,hi:i}}))}))}function jC(e,t){var n=Ow(e),r=Ow(n.hs),a=n.si.get(t);return a?Promise.resolve(a.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function UC(e){var t=Ow(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=Ow(e),a=kS(),i=sI(n),o=pC(t),s=IDBKeyRange.lowerBound(i,!0);return o.Wt({index:"readTimeIndex",range:s},(function(e,t){var n=iI(r.M,t);a=a.insert(n.key,n),i=t.readTime})).next((function(){return{$s:a,readTime:uI(i)}}))}(t.oi,e,t.ri)})).then((function(e){var n=e.$s,r=e.readTime;return t.ri=r,n}))}function VC(e){return WC.apply(this,arguments)}function WC(){return WC=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ow(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=pC(e),n=Xw.min();return t.Wt({index:"readTimeIndex",reverse:!0},(function(e,t,r){t.readTime&&(n=uI(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){n.ri=e})));case 2:case"end":return e.stop()}}),e)}))),WC.apply(this,arguments)}function zC(e,t,n,r){return qC.apply(this,arguments)}function qC(){return qC=j(G().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Ow(t),o=IS(),s=kS(),u=V(r);try{for(u.s();!(c=u.n()).done;)l=c.value,d=n.li(l.metadata.name),l.document&&(o=o.add(d)),(f=n.fi(l)).setReadTime(n.di(l.metadata.readTime)),s=s.insert(d,f)}catch(v){u.e(v)}finally{u.f()}return p=i.oi.newChangeBuffer({trackRemovals:!0}),e.next=7,MC(i,function(e){return wT(vT(t_.fromString("__bundle__/docs/".concat(e))))}(a));case 7:return h=e.sent,e.abrupt("return",i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return RC(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return i.hs.removeMatchingKeysForTargetId(e,h.targetId).next((function(){return i.hs.addMatchingKeys(e,o,h.targetId)})).next((function(){return i.ui.Ks(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),qC.apply(this,arguments)}function KC(e,t){return GC.apply(this,arguments)}function GC(){return GC=j(G().mark((function e(t,n){var r,a,i,o=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:IS(),e.next=3,MC(t,wT(hI(n.bundledQuery)));case 3:return a=e.sent,i=Ow(t),e.abrupt("return",i.persistence.runTransaction("Save named query","readwrite",(function(e){var t=KS(n.readTime);if(a.snapshotVersion.compareTo(t)>=0)return i.fs.saveNamedQuery(e,n);var o=a.withResumeToken(i_.EMPTY_BYTE_STRING,t);return i.si=i.si.insert(o.targetId,o),i.hs.updateTargetData(e,o).next((function(){return i.hs.removeMatchingKeysForTargetId(e,a.targetId)})).next((function(){return i.hs.addMatchingKeys(e,r,a.targetId)})).next((function(){return i.fs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),GC.apply(this,arguments)}var HC=function(){function e(t){I(this,e),this.M=t,this._i=new Map,this.wi=new Map}return N(e,[{key:"getBundleMetadata",value:function(e,t){return WE.resolve(this._i.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:KS(n.createTime)}),WE.resolve()}},{key:"getNamedQuery",value:function(e,t){return WE.resolve(this.wi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:hI(e.bundledQuery),readTime:KS(e.readTime)}}(t)),WE.resolve()}}]),e}(),ZC=function(){function e(){I(this,e),this.overlays=new hS(g_.comparator),this.mi=new Map}return N(e,[{key:"getOverlay",value:function(e,t){return WE.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,a){r.Xt(e,t,a)})),WE.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,a=this.mi.get(n);return void 0!==a&&(a.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.mi.delete(n)),WE.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=TS(),a=t.length+1,i=new g_(t.child("")),o=this.overlays.getIteratorFrom(i);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===a&&s.largestBatchId>n&&r.set(s.getKey(),s)}return WE.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var a=new hS((function(e,t){return e-t})),i=this.overlays.getIterator();i.hasNext();){var o=i.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=a.get(o.largestBatchId);null===s&&(s=TS(),a=a.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=TS(),c=a.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return WE.resolve(u)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var a=this.mi.get(r.largestBatchId).delete(n.key);this.mi.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new nI(t,n));var i=this.mi.get(t);void 0===i&&(i=IS(),this.mi.set(t,i)),this.mi.set(t,i.add(n.key))}}}]),e}(),YC=function(){function e(){I(this,e),this.gi=new yS(XC.yi),this.pi=new yS(XC.Ii)}return N(e,[{key:"isEmpty",value:function(){return this.gi.isEmpty()}},{key:"addReference",value:function(e,t){var n=new XC(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}},{key:"Ti",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Ei(new XC(e,t))}},{key:"Ai",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Ri",value:function(e){var t=this,n=new g_(new t_([])),r=new XC(n,e),a=new XC(n,e+1),i=[];return this.pi.forEachInRange([r,a],(function(e){t.Ei(e),i.push(e.key)})),i}},{key:"bi",value:function(){var e=this;this.gi.forEach((function(t){return e.Ei(t)}))}},{key:"Ei",value:function(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}},{key:"Pi",value:function(e){var t=new g_(new t_([])),n=new XC(t,e),r=new XC(t,e+1),a=IS();return this.pi.forEachInRange([n,r],(function(e){a=a.add(e.key)})),a}},{key:"containsKey",value:function(e){var t=new XC(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),XC=function(){function e(t,n){I(this,e),this.key=t,this.Vi=n}return N(e,null,[{key:"yi",value:function(e,t){return g_.comparator(e.key,t.key)||Gw(e.Vi,t.Vi)}},{key:"Ii",value:function(e,t){return Gw(e.Vi,t.Vi)||g_.comparator(e.key,t.key)}}]),e}(),QC=function(){function e(t,n){I(this,e),this.indexManager=t,this.referenceDelegate=n,this.Fs=[],this.vi=1,this.Si=new yS(XC.yi)}return N(e,[{key:"checkEmpty",value:function(e){return WE.resolve(0===this.Fs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var a=this.vi;this.vi++,this.Fs.length>0&&this.Fs[this.Fs.length-1];var i=new eI(a,t,n,r);this.Fs.push(i);var o,s=V(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Si=this.Si.add(new XC(u.key,a)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return WE.resolve(i)}},{key:"lookupMutationBatch",value:function(e,t){return WE.resolve(this.Di(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Ci(n),a=r<0?0:r;return WE.resolve(this.Fs.length>a?this.Fs[a]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return WE.resolve(0===this.Fs.length?-1:this.vi-1)}},{key:"getAllMutationBatches",value:function(e){return WE.resolve(this.Fs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new XC(t,0),a=new XC(t,Number.POSITIVE_INFINITY),i=[];return this.Si.forEachInRange([r,a],(function(e){var t=n.Di(e.Vi);i.push(t)})),WE.resolve(i)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new yS(Gw);return t.forEach((function(e){var t=new XC(e,0),a=new XC(e,Number.POSITIVE_INFINITY);n.Si.forEachInRange([t,a],(function(e){r=r.add(e.Vi)}))})),WE.resolve(this.xi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,a=n;g_.isDocumentKey(a)||(a=a.child(""));var i=new XC(new g_(a),0),o=new yS(Gw);return this.Si.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Vi)),!0)}),i),WE.resolve(this.xi(o))}},{key:"xi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Di(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Aw(0===this.Ni(t.batchId,"removed")),this.Fs.shift();var r=this.Si;return WE.forEach(t.mutations,(function(a){var i=new XC(a.key,t.batchId);return r=r.delete(i),n.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((function(){n.Si=r}))}},{key:"dn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new XC(t,0),r=this.Si.firstAfterOrEqual(n);return WE.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Fs.length,WE.resolve()}},{key:"Ni",value:function(e,t){return this.Ci(e)}},{key:"Ci",value:function(e){return 0===this.Fs.length?0:e-this.Fs[0].batchId}},{key:"Di",value:function(e){var t=this.Ci(e);return t<0||t>=this.Fs.length?null:this.Fs[t]}}]),e}(),JC=function(){function e(t){I(this,e),this.ki=t,this.docs=new hS(g_.comparator),this.size=0}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return WE.resolve(n?n.document.mutableCopy():U_.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=kS();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():U_.newInvalidDocument(e))})),WE.resolve(r)}},{key:"getAll",value:function(e,t,n){for(var r=kS(),a=new g_(t.child("")),i=this.docs.getIteratorFrom(a);i.hasNext();){var o=i.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||u.readTime.compareTo(n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return WE.resolve(r)}},{key:"Mi",value:function(e,t){return WE.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new $C(this)}},{key:"getSize",value:function(e){return WE.resolve(this.size)}}]),e}(),$C=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).Un=e,r}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,a){a.isValidDocument()?n.push(t.Un.addEntry(e,a)):t.Un.removeEntry(r)})),WE.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Un.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Un.getEntries(e,t)}}]),n}(cC),eN=function(){function e(t){I(this,e),this.persistence=t,this.Oi=new pS((function(e){return Y_(e)}),X_),this.lastRemoteSnapshotVersion=Xw.min(),this.highestTargetId=0,this.$i=0,this.Fi=new YC,this.targetCount=0,this.Bi=XI.mn()}return N(e,[{key:"forEachTarget",value:function(e,t){return this.Oi.forEach((function(e,n){return t(n)})),WE.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return WE.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return WE.resolve(this.$i)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Bi.next(),WE.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$i&&(this.$i=t),WE.resolve()}},{key:"In",value:function(e){this.Oi.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Bi=new XI(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.In(t),this.targetCount+=1,WE.resolve()}},{key:"updateTargetData",value:function(e,t){return this.In(t),WE.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Oi.delete(t.target),this.Fi.Ri(t.targetId),this.targetCount-=1,WE.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,a=0,i=[];return this.Oi.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Oi.delete(o),i.push(r.removeMatchingKeysForTargetId(e,s.targetId)),a++)})),WE.waitFor(i).next((function(){return a}))}},{key:"getTargetCount",value:function(e){return WE.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Oi.get(t)||null;return WE.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Fi.Ti(t,n),WE.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Fi.Ai(t,n);var r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((function(t){a.push(r.markPotentiallyOrphaned(e,t))})),WE.waitFor(a)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Fi.Ri(t),WE.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Fi.Pi(t);return WE.resolve(n)}},{key:"containsKey",value:function(e,t){return WE.resolve(this.Fi.containsKey(t))}}]),e}(),tN=function(){function e(t,n){var r=this;I(this,e),this.Li={},this.overlays={},this.Zn=new zw(0),this.ts=!1,this.ts=!0,this.referenceDelegate=t(this),this.hs=new eN(this),this.indexManager=new RI,this.ls=new JC((function(e){return r.referenceDelegate.qi(e)})),this.M=new aI(n),this.fs=new HC(this.M)}return N(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ts=!1,Promise.resolve()}},{key:"started",get:function(){return this.ts}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ZC,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Li[e.toKey()];return n||(n=new QC(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.hs}},{key:"getRemoteDocumentCache",value:function(){return this.ls}},{key:"getBundleCache",value:function(){return this.fs}},{key:"runTransaction",value:function(e,t,n){var r=this;Sw("MemoryPersistence","Starting transaction:",e);var a=new nN(this.Zn.next());return this.referenceDelegate.Ui(),n(a).next((function(e){return r.referenceDelegate.Ki(a).next((function(){return e}))})).toPromise().then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Gi",value:function(e,t){return WE.or(Object.values(this.Li).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),nN=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return N(n)}(VE),rN=function(){function e(t){I(this,e),this.persistence=t,this.Qi=new YC,this.ji=null}return N(e,[{key:"zi",get:function(){if(this.ji)return this.ji;throw Nw()}},{key:"addReference",value:function(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),WE.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),WE.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.zi.add(t.toString()),WE.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qi.Ri(t.targetId).forEach((function(e){return n.zi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.zi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ui",value:function(){this.ji=new Set}},{key:"Ki",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return WE.forEach(this.zi,(function(r){var a=g_.fromPath(r);return t.Hi(e,a).next((function(e){e||n.removeEntry(a,Xw.min())}))})).next((function(){return t.ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hi(e,t).next((function(e){e?n.zi.delete(t.toString()):n.zi.add(t.toString())}))}},{key:"qi",value:function(e){return 0}},{key:"Hi",value:function(e,t){var n=this;return WE.or([function(){return WE.resolve(n.Qi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gi(e,t)}])}}],[{key:"Wi",value:function(t){return new e(t)}}]),e}();function aN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function iN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function oN(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var sN=function(){function e(t,n,r,a){I(this,e),this.user=t,this.batchId=n,this.state=r,this.error=a}return N(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var a,i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new Rw(i.error.code,i.error.message))),o?new e(t,n,i.state,a):(Ew("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),uN=function(){function e(t,n,r){I(this,e),this.targetId=t,this.state=n,this.error=r}return N(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,a=JSON.parse(n),i="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return i&&a.error&&((i="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(r=new Rw(a.error.code,a.error.message))),i?new e(t,a.state,r):(Ew("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),cN=function(){function e(t,n){I(this,e),this.clientId=t,this.activeTargetIds=n}return N(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),a="object"==typeof r&&r.activeTargetIds instanceof Array,i=NS(),o=0;a&&o<r.activeTargetIds.length;++o)a=y_(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return a?new e(t,i):(Ew("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),lN=function(){function e(t,n){I(this,e),this.clientId=t,this.onlineState=n}return N(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ew("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),dN=function(){function e(){I(this,e),this.activeTargetIds=NS()}return N(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fN=function(){function e(t,n,r,a,i){I(this,e),this.window=t,this.Hn=n,this.persistenceKey=r,this.tr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new hS(Gw),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.rr=aN(this.persistenceKey,this.tr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new dN),this.ur=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.cr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return N(e,[{key:"start",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i,o,s,u,c,l,d,f=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ms();case 2:t=e.sent,n=V(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((a=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(i=this.getItem(aN(this.persistenceKey,a)))&&(o=cN.Ji(a,i))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=V(this.ir);try{for(c.s();!(l=c.n()).done;)d=l.value,this.nr(d)}catch(p){c.e(p)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(oN(this.persistenceKey,e));if(n){var r=uN.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(oN(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(){this.Ar()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Sw("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Sw("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Sw("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Sw("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void Ew("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hn.enqueueRetryable(j(G().mark((function e(){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.ur.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(a=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(a.clientId,a));case 9:e.next=39;break;case 11:if(!t.cr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(i=t.Vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.vr(i));case 16:e.next=39;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=39;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=39;break;case 32:if(n.key!==t.ar){e.next=37;break}u=function(e){var t=zw.A;if(null!=e)try{var n=JSON.parse(e);Aw("number"==typeof n),t=n}catch(e){Ew("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==zw.A&&t.sequenceNumberHandler(u),e.next=39;break;case 37:if(n.key!==t.dr){e.next=39;break}return e.abrupt("return",t.syncEngine.Cr());case 39:e.next=42;break;case 41:t.ir.push(n);case 42:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new sN(this.currentUser,e,t,n),a=iN(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Yi())}},{key:"pr",value:function(e){var t=iN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=oN(this.persistenceKey,e),a=new uN(e,t,n);this.setItem(r,a.Yi())}},{key:"Ar",value:function(){this.setItem(this.dr,"value-not-used")}},{key:"Rr",value:function(e){var t=this.ur.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return cN.Ji(n,t)}},{key:"Vr",value:function(e,t){var n=this.cr.exec(e),r=Number(n[1]),a=void 0!==n[2]?n[2]:null;return sN.Ji(new kw(a),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return uN.Ji(r,t)}},{key:"wr",value:function(e){return lN.Ji(e)}},{key:"vr",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Nr(t.batchId,t.state,t.error));case 2:Sw("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.kr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),a=this.gr(this.sr),i=this.gr(r),o=[],s=[];return i.forEach((function(e){a.has(e)||o.push(e)})),a.forEach((function(e){i.has(e)||s.push(e)})),this.syncEngine.Mr(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=NS();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),pN=function(){function e(){I(this,e),this.Or=new dN,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return N(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Or.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Or.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Or.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Or.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Or=new dN,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),hN=function(){function e(){I(this,e)}return N(e,[{key:"Fr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),vN=function(){function e(){var t=this;I(this,e),this.Br=function(){return t.Lr()},this.qr=function(){return t.Ur()},this.Kr=[],this.Gr()}return N(e,[{key:"Fr",value:function(e){this.Kr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Br),window.removeEventListener("offline",this.qr)}},{key:"Gr",value:function(){window.addEventListener("online",this.Br),window.addEventListener("offline",this.qr)}},{key:"Lr",value:function(){Sw("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=V(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Ur",value:function(){Sw("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=V(this.Kr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),mN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},yN=function(){function e(t){I(this,e),this.Qr=t.Qr,this.jr=t.jr}return N(e,[{key:"Wr",value:function(e){this.zr=e}},{key:"Hr",value:function(e){this.Jr=e}},{key:"onMessage",value:function(e){this.Yr=e}},{key:"close",value:function(){this.jr()}},{key:"send",value:function(e){this.Qr(e)}},{key:"Xr",value:function(){this.zr()}},{key:"Zr",value:function(e){this.Jr(e)}},{key:"eo",value:function(e){this.Yr(e)}}]),e}(),gN=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return N(n,[{key:"ao",value:function(e,t,n,r){return new Promise((function(a,i){var o=new bw;o.listenOnce(hw.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case pw.NO_ERROR:var t=o.getResponseJson();Sw("Connection","XHR received:",JSON.stringify(t)),a(t);break;case pw.TIMEOUT:Sw("Connection",'RPC "'+e+'" timed out'),i(new Rw(Pw.DEADLINE_EXCEEDED,"Request time out"));break;case pw.HTTP_ERROR:var n=o.getStatus();if(Sw("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Pw).indexOf(t)>=0?t:Pw.UNKNOWN}(r.status);i(new Rw(s,r.message))}else i(new Rw(Pw.UNKNOWN,"Server responded with status "+o.getStatus()))}else i(new Rw(Pw.UNAVAILABLE,"Connection failed."));break;default:Nw()}}finally{Sw("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"co",value:function(e,t,n){var r=[this.no,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dw(),i=fw(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new yw({})),this.oo(o.initMessageHeaders,t,n),se()||le()||oe().indexOf("Electron/")>=0||de()||oe().indexOf("MSAppHost/")>=0||ce()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");Sw("Connection","Creating WebChannel: "+s,o);var u=a.createWebChannel(s,o),c=!1,l=!1,d=new yN({Qr:function(e){l?Sw("Connection","Not sending because WebChannel is closed:",e):(c||(Sw("Connection","Opening WebChannel transport."),u.open(),c=!0),Sw("Connection","WebChannel sending:",e),u.send(e))},jr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,gw.EventType.OPEN,(function(){l||Sw("Connection","WebChannel transport opened.")})),f(u,gw.EventType.CLOSE,(function(){l||(l=!0,Sw("Connection","WebChannel transport closed"),d.Zr())})),f(u,gw.EventType.ERROR,(function(e){l||(l=!0,Iw("Connection","WebChannel transport errored:",e),d.Zr(new Rw(Pw.UNAVAILABLE,"The operation could not be completed")))})),f(u,gw.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Aw(!!n);var r=n,a=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(a){Sw("Connection","WebChannel received error:",a);var i=a.status,o=function(e){var t=oS[e];if(void 0!==t)return fS(t)}(i),s=a.message;void 0===o&&(o=Pw.INTERNAL,s="Unknown error status: "+i+" with message "+a.message),l=!0,d.Zr(new Rw(o,s)),u.close()}else Sw("Connection","WebChannel received:",n),d.eo(n)}})),f(i,vw.STAT_EVENT,(function(e){e.stat===mw.PROXY?Sw("Connection","Detected buffering proxy"):e.stat===mw.NOPROXY&&Sw("Connection","Detected no buffering proxy")})),setTimeout((function(){d.Xr()}),0),d}}]),n}(function(){function e(t){I(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.no=n+"://"+t.host,this.so="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return N(e,[{key:"io",value:function(e,t,n,r,a){var i=this.ro(e,t);Sw("RestConnection","Sending: ",i,n);var o={};return this.oo(o,r,a),this.ao(e,i,o,n).then((function(e){return Sw("RestConnection","Received: ",e),e}),(function(t){throw Iw("RestConnection","".concat(e," failed with error: "),t,"url: ",i,"request:",n),t}))}},{key:"uo",value:function(e,t,n,r,a){return this.io(e,t,n,r,a)}},{key:"oo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ww,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ro",value:function(e,t){var n=mN[e];return"".concat(this.no,"/v1/").concat(t,":").concat(n)}}]),e}());function bN(){return"undefined"!=typeof window?window:null}function xN(){return"undefined"!=typeof document?document:null}function kN(e){return new VS(e,!0)}var wN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;I(this,e),this.Hn=t,this.timerId=n,this.ho=r,this.lo=a,this.fo=i,this._o=0,this.wo=null,this.mo=Date.now(),this.reset()}return N(e,[{key:"reset",value:function(){this._o=0}},{key:"yo",value:function(){this._o=this.fo}},{key:"po",value:function(e){var t=this;this.cancel();var n=Math.floor(this._o+this.Io()),r=Math.max(0,Date.now()-this.mo),a=Math.max(0,n-r);a>0&&Sw("ExponentialBackoff","Backing off for ".concat(a," ms (base delay: ").concat(this._o," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.wo=this.Hn.enqueueAfterDelay(this.timerId,a,(function(){return t.mo=Date.now(),e()})),this._o*=this.lo,this._o<this.ho&&(this._o=this.ho),this._o>this.fo&&(this._o=this.fo)}},{key:"To",value:function(){null!==this.wo&&(this.wo.skipDelay(),this.wo=null)}},{key:"cancel",value:function(){null!==this.wo&&(this.wo.cancel(),this.wo=null)}},{key:"Io",value:function(){return(Math.random()-.5)*this._o}}]),e}(),_N=function(){function e(t,n,r,a,i,o,s,u){I(this,e),this.Hn=t,this.Eo=r,this.Ao=a,this.Ro=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.bo=0,this.Po=null,this.Vo=null,this.stream=null,this.vo=new wN(t,n)}return N(e,[{key:"So",value:function(){return 1===this.state||5===this.state||this.Do()}},{key:"Do",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Co()}},{key:"stop",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.So(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xo",value:function(){this.state=0,this.vo.reset()}},{key:"No",value:function(){var e=this;this.Do()&&null===this.Po&&(this.Po=this.Hn.enqueueAfterDelay(this.Eo,6e4,(function(){return e.ko()})))}},{key:"Mo",value:function(e){this.Oo(),this.stream.send(e)}},{key:"ko",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Do()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.Po&&(this.Po.cancel(),this.Po=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Oo(),this.$o(),this.vo.cancel(),this.bo++,4!==t?this.vo.reset():n&&n.code===Pw.RESOURCE_EXHAUSTED?(Ew(n.toString()),Ew("Using maximum backoff delay to prevent overloading the backend."),this.vo.yo()):n&&n.code===Pw.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Fo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Hr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Bo(this.bo),n=this.bo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,W.Z)(t,2),a=r[0],i=r[1];e.bo===n&&e.Lo(a,i)}),(function(n){t((function(){var t=new Rw(Pw.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Lo",value:function(e,t){var n=this,r=this.Bo(this.bo);this.stream=this.Uo(e,t),this.stream.Wr((function(){r((function(){return n.state=2,n.Vo=n.Hn.enqueueAfterDelay(n.Ao,1e4,(function(){return n.Do()&&(n.state=3),Promise.resolve()})),n.listener.Wr()}))})),this.stream.Hr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Co",value:function(){var e=this;this.state=5,this.vo.po(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return Sw("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Bo",value:function(e){var t=this;return function(n){t.Hn.enqueueAndForget((function(){return t.bo===e?n():(Sw("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),TN=function(e){P(n,e);var t=F(n);function n(e,r,a,i,o,s){var u;return I(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,a,i,s)).M=o,u}return N(n,[{key:"Uo",value:function(e,t){return this.Ro.co("Listen",e,t)}},{key:"onMessage",value:function(e){this.vo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Nw()}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.N?(Aw(void 0===t||"string"==typeof t),i_.fromBase64String(t||"")):(Aw(void 0===t||t instanceof Uint8Array),i_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Pw.UNKNOWN:fS(e.code);return new Rw(t,e.message||"")}(o);n=new DS(r,a,i,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=YS(e,u.document.name),l=KS(u.document.updateTime),d=new B_({mapValue:{fields:u.document.fields}}),f=U_.newFoundDocument(c,l,d),p=u.targetIds||[],h=u.removedTargetIds||[];n=new PS(p,h,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=YS(e,v.document),y=v.readTime?KS(v.readTime):Xw.min(),g=U_.newNoDocument(m,y),b=v.removedTargetIds||[];n=new PS([],b,g.key,g)}else if("documentRemove"in t){t.documentRemove;var x=t.documentRemove;x.document;var k=YS(e,x.document),w=x.removedTargetIds||[];n=new PS([],w,k,null)}else{if(!("filter"in t))return Nw();t.filter;var _=t.filter;_.targetId;var T=_.count||0,S=new lS(T),E=_.targetId;n=new RS(E,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Xw.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Xw.min():t.readTime?KS(t.readTime):Xw.min()}(e);return this.listener.Ko(t,n)}},{key:"Go",value:function(e){var t={};t.database=JS(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=Q_(r)?{documents:iE(e,r)}:{query:oE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=zS(e,t.resumeToken):t.snapshotVersion.compareTo(Xw.min())>0&&(n.readTime=WS(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nw()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Mo(t)}},{key:"Qo",value:function(e){var t={};t.database=JS(this.M),t.removeTarget=e,this.Mo(t)}}]),n}(_N),SN=function(e){P(n,e);var t=F(n);function n(e,r,a,i,o,s){var u;return I(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,a,i,s)).M=o,u.jo=!1,u}return N(n,[{key:"Wo",get:function(){return this.jo}},{key:"start",value:function(){this.jo=!1,this.lastStreamToken=void 0,cn(R(n.prototype),"start",this).call(this)}},{key:"Fo",value:function(){this.jo&&this.zo([])}},{key:"Uo",value:function(e,t){return this.Ro.co("Write",e,t)}},{key:"onMessage",value:function(e){if(Aw(!!e.streamToken),this.lastStreamToken=e.streamToken,this.jo){this.vo.reset();var t=function(e,t){return e&&e.length>0?(Aw(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?KS(e.updateTime):KS(t);return n.isEqual(Xw.min())&&(n=KS(t)),new GT(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=KS(e.commitTime);return this.listener.Ho(n,t)}return Aw(!e.writeResults||0===e.writeResults.length),this.jo=!0,this.listener.Jo()}},{key:"Yo",value:function(){var e={};e.database=JS(this.M),this.Mo(e)}},{key:"zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return rE(t.M,e)}))};this.Mo(n)}}]),n}(_N),EN=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o;return I(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.Ro=a,o.M=i,o.Xo=!1,o}return N(n,[{key:"Zo",value:function(){if(this.Xo)throw new Rw(Pw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"io",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=(0,W.Z)(a,2),o=i[0],s=i[1];return r.Ro.io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pw.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Rw(Pw.UNKNOWN,e.toString())}))}},{key:"uo",value:function(e,t,n){var r=this;return this.Zo(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var i=(0,W.Z)(a,2),o=i[0],s=i[1];return r.Ro.uo(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Pw.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Rw(Pw.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Xo=!0}}]),n}(function(){return N((function e(){I(this,e)}))}()),IN=function(){function e(t,n){I(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ta=0,this.ea=null,this.na=!0}return N(e,[{key:"sa",value:function(){var e=this;0===this.ta&&(this.ia("Unknown"),this.ea=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ea=null,e.ra("Backend didn't respond within 10 seconds."),e.ia("Offline"),Promise.resolve()})))}},{key:"oa",value:function(e){"Online"===this.state?this.ia("Unknown"):(this.ta++,this.ta>=1&&(this.aa(),this.ra("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ia("Offline")))}},{key:"set",value:function(e){this.aa(),this.ta=0,"Online"===e&&(this.na=!1),this.ia(e)}},{key:"ia",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ra",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.na?(Ew(t),this.na=!1):Sw("OnlineStateTracker",t)}},{key:"aa",value:function(){null!==this.ea&&(this.ea.cancel(),this.ea=null)}}]),e}(),CN=N((function e(t,n,r,a,i){var o=this;I(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ua=[],this.ca=new Map,this.ha=new Set,this.la=[],this.fa=i,this.fa.Fr((function(e){r.enqueueAndForget(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=jN(o),!e.t0){e.next=5;break}return Sw("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ow(t)).ha.add(4),e.next=4,ON(n);case 4:return n.da.set("Unknown"),n.ha.delete(4),e.next=8,NN(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.da=new IN(r,a)}));function NN(e){return AN.apply(this,arguments)}function AN(){return AN=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jN(t)){e.next=18;break}n=V(t.la),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return a=r.value,e.next=8,a(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),AN.apply(this,arguments)}function ON(e){return PN.apply(this,arguments)}function PN(){return PN=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=V(t.la),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return a=r.value,e.next=7,a(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),PN.apply(this,arguments)}function RN(e,t){var n=Ow(e);n.ca.has(t.targetId)||(n.ca.set(t.targetId,t),BN(n)?FN(n):hA(n).Do()&&MN(n,t))}function DN(e,t){var n=Ow(e),r=hA(n);n.ca.delete(t),r.Do()&&LN(n,t),0===n.ca.size&&(r.Do()?r.No():jN(n)&&n.da.set("Unknown"))}function MN(e,t){e._a.Z(t.targetId),hA(e).Go(t)}function LN(e,t){e._a.Z(t),hA(e).Qo(t)}function FN(e){e._a=new LS({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.ca.get(t)||null}}),hA(e).start(),e.da.sa()}function BN(e){return jN(e)&&!hA(e).So()&&e.ca.size>0}function jN(e){return 0===Ow(e).ha.size}function UN(e){e._a=void 0}function VN(e){return WN.apply(this,arguments)}function WN(){return WN=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.ca.forEach((function(e,n){MN(t,e)}));case 1:case"end":return e.stop()}}),e)}))),WN.apply(this,arguments)}function zN(e,t){return qN.apply(this,arguments)}function qN(){return qN=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:UN(t),BN(t)?(t.da.oa(n),FN(t)):t.da.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),qN.apply(this,arguments)}function KN(e,t,n){return GN.apply(this,arguments)}function GN(){return GN=j(G().mark((function e(t,n,r){var a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.da.set("Online"),!(n instanceof DS&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,a=V(n.targetIds),e.prev=2,a.s();case 4:if((i=a.n()).done){e.next=14;break}if(o=i.value,e.t0=t.ca.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.ca.delete(o),t._a.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),a.e(e.t1);case 19:return e.prev=19,a.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Sw("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,HN(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof PS?t._a.at(n):n instanceof RS?t._a._t(n):t._a.ht(n),r.isEqual(Xw.min())){e.next=29;break}return e.prev=14,e.next=17,OC(t.localStore);case 17:if(a=e.sent,e.t1=r.compareTo(a)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e._a.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var a=e.ca.get(r);a&&e.ca.set(r,a.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.ca.get(t);if(n){e.ca.set(t,n.withResumeToken(i_.EMPTY_BYTE_STRING,n.snapshotVersion)),LN(e,t);var r=new rI(n.target,t,1,n.sequenceNumber);MN(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Sw("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,HN(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),GN.apply(this,arguments)}function HN(e,t,n){return ZN.apply(this,arguments)}function ZN(){return ZN=j(G().mark((function e(t,n,r){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(HE(n)){e.next=2;break}throw n;case 2:return t.ha.add(1),e.next=5,ON(t);case 5:t.da.set("Offline"),r||(r=function(){return OC(t.localStore)}),t.asyncQueue.enqueueRetryable(j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sw("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.ha.delete(1),e.next=6,NN(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),ZN.apply(this,arguments)}function YN(e,t){return t().catch((function(n){return HN(e,n,t)}))}function XN(e){return QN.apply(this,arguments)}function QN(){return QN=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Ow(t),r=vA(n),a=n.ua.length>0?n.ua[n.ua.length-1].batchId:-1;case 2:if(!JN(n)){e.next=19;break}return e.prev=3,e.next=6,DC(n.localStore,a);case 6:if(null!==(i=e.sent)){e.next=10;break}return 0===n.ua.length&&r.No(),e.abrupt("break",19);case 10:a=i.batchId,$N(n,i),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,HN(n,e.t0);case 17:e.next=2;break;case 19:eA(n)&&tA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),QN.apply(this,arguments)}function JN(e){return jN(e)&&e.ua.length<10}function $N(e,t){e.ua.push(t);var n=vA(e);n.Do()&&n.Wo&&n.zo(t.mutations)}function eA(e){return jN(e)&&!vA(e).So()&&e.ua.length>0}function tA(e){vA(e).start()}function nA(e){return rA.apply(this,arguments)}function rA(){return rA=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vA(t).Yo();case 1:case"end":return e.stop()}}),e)}))),rA.apply(this,arguments)}function aA(e){return iA.apply(this,arguments)}function iA(){return iA=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vA(t),r=V(t.ua);try{for(r.s();!(a=r.n()).done;)i=a.value,n.zo(i.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),iA.apply(this,arguments)}function oA(e,t,n){return sA.apply(this,arguments)}function sA(){return sA=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ua.shift(),i=tI.from(a,n,r),e.next=3,YN(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}));case 3:return e.next=5,XN(t);case 5:case"end":return e.stop()}}),e)}))),sA.apply(this,arguments)}function uA(e,t){return cA.apply(this,arguments)}function cA(){return cA=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&vA(t).Wo,!e.t0){e.next=4;break}return e.next=4,function(){var e=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!dS(a=n.code)||a===Pw.ABORTED){e.next=7;break}return r=t.ua.shift(),vA(t).xo(),e.next=5,YN(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,XN(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:eA(t)&&tA(t);case 5:case"end":return e.stop()}}),e)}))),cA.apply(this,arguments)}function lA(e,t){return dA.apply(this,arguments)}function dA(){return dA=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Ow(t)).asyncQueue.verifyOperationInProgress(),Sw("RemoteStore","RemoteStore received new credentials"),a=jN(r),r.ha.add(3),e.next=6,ON(r);case 6:return a&&r.da.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.ha.delete(3),e.next=12,NN(r);case 12:case"end":return e.stop()}}),e)}))),dA.apply(this,arguments)}function fA(e,t){return pA.apply(this,arguments)}function pA(){return pA=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ow(t),!n){e.next=7;break}return r.ha.delete(2),e.next=5,NN(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.ha.add(2),e.next=12,ON(r);case 12:r.da.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),pA.apply(this,arguments)}function hA(e){return e.wa||(e.wa=function(e,t,n){var r=Ow(e);return r.Zo(),new TN(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:VN.bind(null,e),Hr:zN.bind(null,e),Ko:KN.bind(null,e)}),e.la.push(function(){var t=j(G().mark((function t(n){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.wa.xo(),BN(e)?FN(e):e.da.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.wa.stop();case 6:UN(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.wa}function vA(e){return e.ma||(e.ma=function(e,t,n){var r=Ow(e);return r.Zo(),new SN(t,r.Ro,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Wr:nA.bind(null,e),Hr:uA.bind(null,e),Jo:aA.bind(null,e),Ho:oA.bind(null,e)}),e.la.push(function(){var t=j(G().mark((function t(n){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.ma.xo(),t.next=4,XN(e);case 4:t.next=9;break;case 6:return t.next=8,e.ma.stop();case 8:e.ua.length>0&&(Sw("RemoteStore","Stopping write stream with ".concat(e.ua.length," pending writes")),e.ua=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.ma}var mA=function(){function e(t,n,r,a,i){I(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=a,this.removalCallback=i,this.deferred=new Dw,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return N(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rw(Pw.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,a,i){var o=new e(t,n,Date.now()+r,a,i);return o.start(r),o}}]),e}();function yA(e,t){if(Ew("AsyncQueue","".concat(t,": ").concat(e)),HE(e))return new Rw(Pw.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var gA=function(){function e(t){I(this,e),this.comparator=t?function(e,n){return t(e,n)||g_.comparator(e.key,n.key)}:function(e,t){return g_.comparator(e.key,t.key)},this.keyedMap=_S(),this.sortedSet=new hS(this.comparator)}return N(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var a=n.getNext().key,i=r.getNext().key;if(!a.isEqual(i))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),bA=function(){function e(){I(this,e),this.ga=new hS(g_.comparator)}return N(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Nw():this.ga=this.ga.insert(t,e)}},{key:"ya",value:function(){var e=[];return this.ga.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xA=function(){function e(t,n,r,a,i,o,s,u){I(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return N(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&TT(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,a){var i=[];return n.forEach((function(e){i.push({type:0,doc:e})})),new e(t,n,gA.emptySet(n),i,r,a,!0,!1)}}]),e}(),kA=N((function e(){I(this,e),this.pa=void 0,this.listeners=[]})),wA=N((function e(){I(this,e),this.queries=new pS((function(e){return ST(e)}),TT),this.onlineState="Unknown",this.Ia=new Set}));function _A(e,t){return TA.apply(this,arguments)}function TA(){return TA=j(G().mark((function e(t,n){var r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ow(t),a=n.query,i=!1,(o=r.queries.get(a))||(i=!0,o=new kA),!i){e.next=13;break}return e.prev=3,e.next=6,r.onListen(a);case 6:o.pa=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=yA(e.t0,"Initialization of query '".concat(ET(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(a,o),o.listeners.push(n),n.Ta(r.onlineState),o.pa&&n.Ea(o.pa)&&NA(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),TA.apply(this,arguments)}function SA(e,t){return EA.apply(this,arguments)}function EA(){return EA=j(G().mark((function e(t,n){var r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ow(t),a=n.query,i=!1,(o=r.queries.get(a))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),!i){e.next=6;break}return e.abrupt("return",(r.queries.delete(a),r.onUnlisten(a)));case 6:case"end":return e.stop()}}),e)}))),EA.apply(this,arguments)}function IA(e,t){var n,r=Ow(e),a=!1,i=V(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=V(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Ea(o)&&(a=!0)}}catch(d){l.e(d)}finally{l.f()}u.pa=o}}}catch(d){i.e(d)}finally{i.f()}a&&NA(r)}function CA(e,t,n){var r=Ow(e),a=r.queries.get(t);if(a){var i,o=V(a.listeners);try{for(o.s();!(i=o.n()).done;){i.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function NA(e){e.Ia.forEach((function(e){e.next()}))}var AA=function(){function e(t,n,r){I(this,e),this.query=t,this.Aa=n,this.Ra=!1,this.ba=null,this.onlineState="Unknown",this.options=r||{}}return N(e,[{key:"Ea",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=V(e.docChanges);try{for(r.s();!(t=r.n()).done;){var a=t.value;3!==a.type&&n.push(a)}}catch(o){r.e(o)}finally{r.f()}e=new xA(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var i=!1;return this.Ra?this.Pa(e)&&(this.Aa.next(e),i=!0):this.Va(e,this.onlineState)&&(this.va(e),i=!0),this.ba=e,i}},{key:"onError",value:function(e){this.Aa.error(e)}},{key:"Ta",value:function(e){this.onlineState=e;var t=!1;return this.ba&&!this.Ra&&this.Va(this.ba,e)&&(this.va(this.ba),t=!0),t}},{key:"Va",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Sa||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Pa",value:function(e){if(e.docChanges.length>0)return!0;var t=this.ba&&this.ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"va",value:function(e){e=xA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Ra=!0,this.Aa.next(e)}}]),e}(),OA=function(){function e(t,n){I(this,e),this.payload=t,this.byteLength=n}return N(e,[{key:"Da",value:function(){return"metadata"in this.payload}}]),e}(),PA=function(){function e(t){I(this,e),this.M=t}return N(e,[{key:"li",value:function(e){return YS(this.M,e)}},{key:"fi",value:function(e){return e.metadata.exists?tE(this.M,e.document,!1):U_.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}},{key:"di",value:function(e){return KS(e)}}]),e}(),RA=function(){function e(t,n,r){I(this,e),this.Ca=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.progress=DA(t)}return N(e,[{key:"xa",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Na",value:function(e){var t,n=new Map,r=new PA(this.M),a=V(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.metadata.queries){var o,s=r.li(i.metadata.name),u=V(i.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||IS()).add(s);n.set(c,l)}}catch(d){u.e(d)}finally{u.f()}}}}catch(d){a.e(d)}finally{a.f()}return n}},{key:"complete",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zC(this.localStore,new PA(this.M),this.documents,this.Ca.id);case 2:t=e.sent,n=this.Na(this.documents),r=V(this.queries),e.prev=5,r.s();case 7:if((a=r.n()).done){e.next=13;break}return i=a.value,e.next=11,KC(this.localStore,i,n.get(i.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",new wC(Object.assign({},this.progress),t)));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function DA(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var MA=N((function e(t){I(this,e),this.key=t})),LA=N((function e(t){I(this,e),this.key=t})),FA=function(){function e(t,n){I(this,e),this.query=t,this.ka=n,this.Ma=null,this.current=!1,this.Oa=IS(),this.mutatedKeys=IS(),this.$a=CT(t),this.Fa=new gA(this.$a)}return N(e,[{key:"Ba",get:function(){return this.ka}},{key:"La",value:function(e,t){var n=this,r=t?t.qa:new bA,a=t?t.Fa:this.Fa,i=t?t.mutatedKeys:this.mutatedKeys,o=a,s=!1,u=mT(this.query)&&a.size===this.query.limit?a.last():null,c=yT(this.query)&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((function(e,t){var l=a.get(e),d=IT(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!d&&(d.hasLocalMutations||n.mutatedKeys.has(d.key)&&d.hasCommittedMutations),h=!1;l&&d?l.data.isEqual(d.data)?f!==p&&(r.track({type:3,doc:d}),h=!0):n.Ua(l,d)||(r.track({type:2,doc:d}),h=!0,(u&&n.$a(d,u)>0||c&&n.$a(d,c)<0)&&(s=!0)):!l&&d?(r.track({type:0,doc:d}),h=!0):l&&!d&&(r.track({type:1,doc:l}),h=!0,(u||c)&&(s=!0)),h&&(d?(o=o.add(d),i=p?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),mT(this.query)||yT(this.query))for(;o.size>this.query.limit;){var l=mT(this.query)?o.last():o.first();o=o.delete(l.key),i=i.delete(l.key),r.track({type:1,doc:l})}return{Fa:o,qa:r,ei:s,mutatedKeys:i}}},{key:"Ua",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,a=this.Fa;this.Fa=e.Fa,this.mutatedKeys=e.mutatedKeys;var i=e.qa.ya();i.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nw()}};return n(e)-n(t)}(e.type,t.type)||r.$a(e.doc,t.doc)})),this.Ka(n);var o=t?this.Ga():[],s=0===this.Oa.size&&this.current?1:0,u=s!==this.Ma;return this.Ma=s,0!==i.length||u?{snapshot:new xA(this.query,e.Fa,a,i,e.mutatedKeys,0===s,u,!1),Qa:o}:{Qa:o}}},{key:"Ta",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Fa:this.Fa,qa:new bA,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{Qa:[]}}},{key:"ja",value:function(e){return!this.ka.has(e)&&!!this.Fa.has(e)&&!this.Fa.get(e).hasLocalMutations}},{key:"Ka",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.ka=t.ka.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.ka=t.ka.delete(e)})),this.current=e.current)}},{key:"Ga",value:function(){var e=this;if(!this.current)return[];var t=this.Oa;this.Oa=IS(),this.Fa.forEach((function(t){e.ja(t.key)&&(e.Oa=e.Oa.add(t.key))}));var n=[];return t.forEach((function(t){e.Oa.has(t)||n.push(new LA(t))})),this.Oa.forEach((function(e){t.has(e)||n.push(new MA(e))})),n}},{key:"Wa",value:function(e){this.ka=e.hi,this.Oa=IS();var t=this.La(e.documents);return this.applyChanges(t,!0)}},{key:"za",value:function(){return xA.fromInitialDocuments(this.query,this.Fa,this.mutatedKeys,0===this.Ma)}}]),e}(),BA=N((function e(t,n,r){I(this,e),this.query=t,this.targetId=n,this.view=r})),jA=N((function e(t){I(this,e),this.key=t,this.Ha=!1})),UA=function(){function e(t,n,r,a,i,o){I(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=a,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ja={},this.Ya=new pS((function(e){return ST(e)}),TT),this.Xa=new Map,this.Za=new Set,this.tu=new hS(g_.comparator),this.eu=new Map,this.nu=new YC,this.su={},this.iu=new Map,this.ru=XI.gn(),this.onlineState="Unknown",this.ou=void 0}return N(e,[{key:"isPrimaryClient",get:function(){return!0===this.ou}}]),e}();function VA(e,t){return WA.apply(this,arguments)}function WA(){return WA=j(G().mark((function e(t,n){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=DO(t),!(o=r.Ya.get(n))){e.next=6;break}a=o.targetId,r.sharedClientState.addLocalQueryTarget(a),i=o.view.za(),e.next=15;break;case 6:return e.next=8,MC(r.localStore,wT(n));case 8:return s=e.sent,r.isPrimaryClient&&RN(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),a=s.targetId,e.next=14,zA(r,n,a,"current"===u);case 14:i=e.sent;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)}))),WA.apply(this,arguments)}function zA(e,t,n,r){return qA.apply(this,arguments)}function qA(){return qA=j(G().mark((function e(t,n,r,a){var i,o,s,u,c,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.au=function(e,n,r){return function(){var e=j(G().mark((function e(t,n,r,a){var i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.view.La(r),e.t0=i.ei,!e.t0){e.next=6;break}return e.next=5,BC(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.La(t,i)}));case 5:i=e.sent;case 6:return o=a&&a.targetChanges.get(n.targetId),s=n.view.applyChanges(i,t.isPrimaryClient,o),e.abrupt("return",(lO(t,n.targetId,s.Qa),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,BC(t.localStore,n,!0);case 3:return i=e.sent,o=new FA(n,i.hi),s=o.La(i.documents),u=OS.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),lO(t,r,c.Qa),l=new BA(n,r,o),e.abrupt("return",(t.Ya.set(n,l),t.Xa.has(r)?t.Xa.get(r).push(n):t.Xa.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),qA.apply(this,arguments)}function KA(e,t){return GA.apply(this,arguments)}function GA(){return GA=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Ow(t),a=r.Ya.get(n),!((i=r.Xa.get(a.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Xa.set(a.targetId,i.filter((function(e){return!TT(e,n)}))),void r.Ya.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(a.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(a.targetId),e.t0){e.next=9;break}return e.next=9,LC(r.localStore,a.targetId,!1).then((function(){r.sharedClientState.clearQueryState(a.targetId),DN(r.remoteStore,a.targetId),uO(r,a.targetId)})).catch(tC);case 9:e.next=14;break;case 11:return uO(r,a.targetId),e.next=14,LC(r.localStore,a.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function HA(e,t,n){return ZA.apply(this,arguments)}function ZA(){return ZA=j(G().mark((function e(t,n,r){var a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=MO(t),e.prev=1,e.next=4,function(e,t){var n,r=Ow(e),a=Yw.now(),i=t.reduce((function(e,t){return e.add(t.key)}),IS());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.ui.Us(e,i).next((function(i){n=i;var o,s=[],u=V(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=JT(c,n.get(c.key));null!=l&&s.push(new nS(c.key,l,j_(l.value.mapValue),HT.exists(!0)))}}catch(d){u.e(d)}finally{u.f()}return r.Fs.addMutationBatch(e,a,s,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(a.localStore,n);case 4:return i=e.sent,a.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.su[e.currentUser.toKey()];r||(r=new hS(Gw)),r=r.insert(t,n),e.su[e.currentUser.toKey()]=r}(a,i.batchId,r),e.next=9,pO(a,i.changes);case 9:return e.next=11,XN(a.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=yA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),ZA.apply(this,arguments)}function YA(e,t){return XA.apply(this,arguments)}function XA(){return XA=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),e.prev=1,e.next=4,PC(r.localStore,n);case 4:return a=e.sent,n.targetChanges.forEach((function(e,t){var n=r.eu.get(t);n&&(Aw(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Ha=!0:e.modifiedDocuments.size>0?Aw(n.Ha):e.removedDocuments.size>0&&(Aw(n.Ha),n.Ha=!1))})),e.next=8,pO(r,a,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,tC(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),XA.apply(this,arguments)}function QA(e,t,n){var r=Ow(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var a=[];r.Ya.forEach((function(e,n){var r=n.view.Ta(t);r.snapshot&&a.push(r.snapshot)})),function(e,t){var n=Ow(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var a,i=V(n.listeners);try{for(i.s();!(a=i.n()).done;){a.value.Ta(t)&&(r=!0)}}catch(o){i.e(o)}finally{i.f()}})),r&&NA(n)}(r.eventManager,t),a.length&&r.Ja.Ko(a),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function JA(e,t,n){return $A.apply(this,arguments)}function $A(){return $A=j(G().mark((function e(t,n,r){var a,i,o,s,u,c;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=Ow(t)).sharedClientState.updateQueryState(n,"rejected",r),i=a.eu.get(n),!(o=i&&i.key)){e.next=14;break}return s=(s=new hS(g_.comparator)).insert(o,U_.newNoDocument(o,Xw.min())),u=IS().add(o),c=new AS(Xw.min(),new Map,new yS(Gw),s,u),e.next=9,YA(a,c);case 9:a.tu=a.tu.remove(o),a.eu.delete(n),fO(a),e.next=16;break;case 14:return e.next=16,LC(a.localStore,n,!1).then((function(){return uO(a,n,r)})).catch(tC);case 16:case"end":return e.stop()}}),e)}))),$A.apply(this,arguments)}function eO(e,t){return tO.apply(this,arguments)}function tO(){return tO=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),a=n.batch.batchId,e.prev=1,e.next=4,AC(r.localStore,n);case 4:return i=e.sent,sO(r,a,null),oO(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),e.next=10,pO(r,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,tC(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),tO.apply(this,arguments)}function nO(e,t,n){return rO.apply(this,arguments)}function rO(){return rO=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ow(t),e.prev=1,e.next=4,function(e,t){var n=Ow(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Fs.lookupMutationBatch(e,t).next((function(t){return Aw(null!==t),r=t.keys(),n.Fs.removeMutationBatch(e,t)})).next((function(){return n.Fs.performConsistencyCheck(e)})).next((function(){return n.ui.Us(e,r)}))}))}(a.localStore,n);case 4:return i=e.sent,sO(a,n,r),oO(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,pO(a,i);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,tC(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),rO.apply(this,arguments)}function aO(e,t){return iO.apply(this,arguments)}function iO(){return iO=j(G().mark((function e(t,n){var r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jN((r=Ow(t)).remoteStore)||Sw("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Ow(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Fs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(a=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(i=r.iu.get(a)||[]).push(n),r.iu.set(a,i),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=yA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),iO.apply(this,arguments)}function oO(e,t){(e.iu.get(t)||[]).forEach((function(e){e.resolve()})),e.iu.delete(t)}function sO(e,t,n){var r=Ow(e),a=r.su[r.currentUser.toKey()];if(a){var i=a.get(t);i&&(n?i.reject(n):i.resolve(),a=a.remove(t)),r.su[r.currentUser.toKey()]=a}}function uO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,a=V(e.Xa.get(t));try{for(a.s();!(r=a.n()).done;){var i=r.value;e.Ya.delete(i),n&&e.Ja.uu(i,n)}}catch(o){a.e(o)}finally{a.f()}e.Xa.delete(t),e.isPrimaryClient&&e.nu.Ri(t).forEach((function(t){e.nu.containsKey(t)||cO(e,t)}))}function cO(e,t){e.Za.delete(t.path.canonicalString());var n=e.tu.get(t);null!==n&&(DN(e.remoteStore,n),e.tu=e.tu.remove(t),e.eu.delete(n),fO(e))}function lO(e,t,n){var r,a=V(n);try{for(a.s();!(r=a.n()).done;){var i=r.value;i instanceof MA?(e.nu.addReference(i.key,t),dO(e,i)):i instanceof LA?(Sw("SyncEngine","Document no longer in limbo: "+i.key),e.nu.removeReference(i.key,t),e.nu.containsKey(i.key)||cO(e,i.key)):Nw()}}catch(o){a.e(o)}finally{a.f()}}function dO(e,t){var n=t.key,r=n.path.canonicalString();e.tu.get(n)||e.Za.has(r)||(Sw("SyncEngine","New document in limbo: "+n),e.Za.add(r),fO(e))}function fO(e){for(;e.Za.size>0&&e.tu.size<e.maxConcurrentLimboResolutions;){var t=e.Za.values().next().value;e.Za.delete(t);var n=new g_(t_.fromString(t)),r=e.ru.next();e.eu.set(r,new jA(n)),e.tu=e.tu.insert(n,r),RN(e.remoteStore,new rI(wT(vT(n.path)),r,2,zw.A))}}function pO(e,t,n){return hO.apply(this,arguments)}function hO(){return hO=j(G().mark((function e(t,n,r){var a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Ow(t),i=[],o=[],s=[],e.t0=a.Ya.isEmpty(),e.t0){e.next=9;break}return a.Ya.forEach((function(e,t){s.push(a.au(t,n,r).then((function(e){if(e){a.isPrimaryClient&&a.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),i.push(e);var n=TC.Js(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return a.Ja.Ko(i),e.next=9,function(){var e=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return WE.forEach(n,(function(t){return WE.forEach(t.zs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return WE.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),HE(e.t0)){e.next=10;break}throw e.t0;case 10:Sw("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:a=V(n);try{for(a.s();!(i=a.n()).done;)o=i.value,s=o.targetId,o.fromCache||(u=r.si.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.si=r.si.insert(s,l))}catch(d){a.e(d)}finally{a.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(a.localStore,o);case 9:case"end":return e.stop()}}),e)}))),hO.apply(this,arguments)}function vO(e,t){return mO.apply(this,arguments)}function mO(){return mO=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Ow(t)).currentUser.isEqual(n)){e.next=11;break}return Sw("SyncEngine","User change. New user:",n.toKey()),e.next=5,CC(r.localStore,n);case 5:return a=e.sent,r.currentUser=n,function(e,t){e.iu.forEach((function(e){e.forEach((function(e){e.reject(new Rw(Pw.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.iu.clear()}(r),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),e.next=11,pO(r,a.ci);case 11:case"end":return e.stop()}}),e)}))),mO.apply(this,arguments)}function yO(e,t){var n=Ow(e),r=n.eu.get(t);if(r&&r.Ha)return IS().add(r.key);var a=IS(),i=n.Xa.get(t);if(!i)return a;var o,s=V(i);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.Ya.get(u);a=a.unionWith(c.view.Ba)}}catch(l){s.e(l)}finally{s.f()}return a}function gO(e,t){return bO.apply(this,arguments)}function bO(){return bO=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),e.next=3,BC(r.localStore,n.query,!0);case 3:return a=e.sent,i=n.view.Wa(a),e.abrupt("return",(r.isPrimaryClient&&lO(r,n.targetId,i.Qa),i));case 6:case"end":return e.stop()}}),e)}))),bO.apply(this,arguments)}function xO(e){return kO.apply(this,arguments)}function kO(){return kO=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ow(t),e.abrupt("return",UC(n.localStore).then((function(e){return pO(n,e)})));case 2:case"end":return e.stop()}}),e)}))),kO.apply(this,arguments)}function wO(e,t,n,r){return _O.apply(this,arguments)}function _O(){return _O=j(G().mark((function e(t,n,r,a){var i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ow(t),e.next=3,function(e,t){var n=Ow(e),r=Ow(n.Fs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.ln(e,t).next((function(t){return t?n.ui.Us(e,t):WE.resolve(null)}))}))}(i.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,XN(i.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(sO(i,n,a||null),oO(i,n),function(e,t){Ow(Ow(e).Fs).dn(t)}(i.localStore,n)):Nw();case 11:return e.next=13,pO(i,o);case 13:e.next=16;break;case 15:Sw("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),_O.apply(this,arguments)}function TO(e,t){return SO.apply(this,arguments)}function SO(){return SO=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(DO(r=Ow(t)),MO(r),!0!==n||!0===r.ou){e.next=13;break}return a=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,EO(r,a.toArray());case 5:return i=e.sent,r.ou=!0,e.next=9,fA(r.remoteStore,!0);case 9:o=V(i);try{for(o.s();!(s=o.n()).done;)u=s.value,RN(r.remoteStore,u)}catch(d){o.e(d)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ou){e.next=25;break}return c=[],l=Promise.resolve(),r.Xa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return uO(r,t),LC(r.localStore,t,!0)})),DN(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,EO(r,c);case 21:return function(e){var t=Ow(e);t.eu.forEach((function(e,n){DN(t.remoteStore,n)})),t.nu.bi(),t.eu=new Map,t.tu=new hS(g_.comparator)}(r),r.ou=!1,e.next=25,fA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),SO.apply(this,arguments)}function EO(e,t,n){return IO.apply(this,arguments)}function IO(){return IO=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m,y;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ow(t),i=[],o=[],s=V(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(d=a.Xa.get(c))||0===d.length){e.next=34;break}return e.next=11,MC(a.localStore,wT(d[0]));case 11:l=e.sent,f=V(d),e.prev=13,f.s();case 15:if((p=f.n()).done){e.next=24;break}return h=p.value,v=a.Ya.get(h),e.next=20,gO(a,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,jC(a.localStore,c);case 36:return y=e.sent,e.next=39,MC(a.localStore,y);case 39:return l=e.sent,e.next=42,zA(a,CO(y),c,!1);case 42:i.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(a.Ja.Ko(o),i));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),IO.apply(this,arguments)}function CO(e){return hT(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function NO(e){var t=Ow(e);return Ow(Ow(t.localStore).persistence).Ms()}function AO(e,t,n,r){return OO.apply(this,arguments)}function OO(){return OO=j(G().mark((function e(t,n,r,a){var i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ow(t)).ou){e.next=5;break}Sw("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!i.Xa.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,UC(i.localStore);case 11:return o=e.sent,s=AS.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,pO(i,o,s);case 15:return e.abrupt("break",21);case 16:return e.next=18,LC(i.localStore,n,!0);case 18:return uO(i,n,a),e.abrupt("break",21);case 20:Nw();case 21:case"end":return e.stop()}}),e)}))),OO.apply(this,arguments)}function PO(e,t,n){return RO.apply(this,arguments)}function RO(){return RO=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=DO(t)).ou){e.next=45;break}i=V(n),e.prev=3,i.s();case 5:if((o=i.n()).done){e.next=21;break}if(s=o.value,!a.Xa.has(s)){e.next=10;break}return Sw("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,jC(a.localStore,s);case 12:return u=e.sent,e.next=15,MC(a.localStore,u);case 15:return c=e.sent,e.next=18,zA(a,CO(u),c.targetId,!1);case 18:RN(a.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),i.e(e.t0);case 26:return e.prev=26,i.f(),e.finish(26);case 29:l=V(r),e.prev=30,f=G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,e.t0=a.Xa.has(t),!e.t0){e.next=5;break}return e.next=5,LC(a.localStore,t,!1).then((function(){DN(a.remoteStore,t),uO(a,t)})).catch(tC);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((d=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),RO.apply(this,arguments)}function DO(e){var t=Ow(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=YA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=JA.bind(null,t),t.Ja.Ko=IA.bind(null,t.eventManager),t.Ja.uu=CA.bind(null,t.eventManager),t}function MO(e){var t=Ow(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eO.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nO.bind(null,t),t}function LO(e,t,n){var r=Ow(e);(function(){var e=j(G().mark((function e(t,n,r){var a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return a=e.sent,e.next=6,function(e,t){var n=Ow(e),r=KS(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.fs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,a);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(a)));case 10:return r._updateProgress(DA(a)),i=new RA(a,t.localStore,n.M),e.next=14,n.cu();case 14:o=e.sent;case 15:if(!o){e.next=25;break}return e.next=18,i.xa(o);case 18:return(s=e.sent)&&r._updateProgress(s),e.next=22,n.cu();case 22:o=e.sent;case 23:e.next=15;break;case 25:return e.next=27,i.complete();case 27:return u=e.sent,e.next=30,pO(t,u.$s,void 0);case 30:return e.next=32,function(e,t){var n=Ow(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.fs.saveBundleMetadata(e,t)}))}(t.localStore,a);case 32:r._completeWith(u.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),Iw("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}}),e,null,[[0,35]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var FO=function(){function e(){I(this,e),this.synchronizeTabs=!1}return N(e,[{key:"initialize",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=kN(t.databaseInfo.databaseId),this.sharedClientState=this.hu(t),this.persistence=this.lu(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.fu(t),this.localStore=this.du(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fu",value:function(e){return null}},{key:"du",value:function(e){return IC(this.persistence,new SC,e.initialUser,this.M)}},{key:"lu",value:function(e){return new tN(rN.Wi,this.M)}},{key:"hu",value:function(e){return new pN}},{key:"terminate",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BO=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this))._u=e,i.cacheSizeBytes=r,i.forceOwnership=a,i.synchronizeTabs=!1,i}return N(n,[{key:"initialize",value:function(){var e=j(G().mark((function e(t){var r=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(R(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,VC(this.localStore);case 4:return e.next=6,this._u.initialize(this,t);case 6:return e.next=8,MO(this._u.syncEngine);case 8:return e.next=10,XN(this._u.remoteStore);case 10:return e.next=12,this.persistence.ps((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"du",value:function(e){return IC(this.persistence,new SC,e.initialUser,this.M)}},{key:"fu",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new iC(t,e.asyncQueue)}},{key:"lu",value:function(e){var t=kC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?WI.withCacheSize(this.cacheSizeBytes):WI.DEFAULT;return new gC(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,bN(),xN(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"hu",value:function(e){return new pN}}]),n}(FO),jO=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,r,!1))._u=e,a.cacheSizeBytes=r,a.synchronizeTabs=!0,a}return N(n,[{key:"initialize",value:function(){var e=j(G().mark((function e(t){var r,a=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cn(R(n.prototype),"initialize",this).call(this,t);case 2:if(r=this._u.syncEngine,e.t0=this.sharedClientState instanceof fN,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Nr:wO.bind(null,r),kr:AO.bind(null,r),Mr:PO.bind(null,r),Ms:NO.bind(null,r),Cr:xO.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ps(function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TO(a._u.syncEngine,t);case 2:a.gcScheduler&&(t&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):t||a.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t=bN();if(!fN.vt(t))throw new Rw(Pw.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=kC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fN(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BO),UO=function(){function e(){I(this,e)}return N(e,[{key:"initialize",value:function(){var e=j(G().mark((function e(t,n){var r=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return QA(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=vO.bind(null,this.syncEngine),e.next=12,fA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new wA}},{key:"createDatastore",value:function(e){var t,n=kN(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new gN(t));return function(e,t,n,r){return new EN(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,a,i,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,a=function(e){return QA(o.syncEngine,e,0)},i=vN.vt()?new vN:new hN,new CN(t,n,r,a,i)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,a,i,o){var s=new UA(e,t,n,r,a,i);return o&&(s.ou=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ow(t),Sw("RemoteStore","RemoteStore shutting down."),n.ha.add(5),e.next=5,ON(n);case 5:n.fa.shutdown(),n.da.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function VO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return j(G().mark((function r(){var a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return a={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,a));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var WO=function(){function e(t){I(this,e),this.observer=t,this.muted=!1}return N(e,[{key:"next",value:function(e){this.observer.next&&this.wu(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.wu(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"mu",value:function(){this.muted=!0}},{key:"wu",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),zO=function(){function e(t,n){var r=this;I(this,e),this.gu=t,this.M=n,this.metadata=new Dw,this.buffer=new Uint8Array,this.yu=new TextDecoder("utf-8"),this.pu().then((function(e){e&&e.Da()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return N(e,[{key:"close",value:function(){return this.gu.cancel()}},{key:"getMetadata",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cu",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.pu());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pu",value:function(){var e=j(G().mark((function e(){var t,n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Iu();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.yu.decode(t),r=Number(n),isNaN(r)&&this.Tu("length string (".concat(n,") is not valid number")),e.next=9,this.Eu(r);case 9:return a=e.sent,e.abrupt("return",new OA(JSON.parse(a),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Au",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Iu",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Au()<0)){e.next=7;break}return e.next=3,this.Ru();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Au())<0&&this.Tu("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Eu",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ru();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Tu("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.yu.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tu",value:function(e){throw this.gu.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ru",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.gu.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),qO=function(){function e(t){I(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return N(e,[{key:"lookup",value:function(){var e=j(G().mark((function e(t){var n,r=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Rw(Pw.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=j(G().mark((function e(t,n){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),a=JS(r.M)+"/documents",i={documents:n.map((function(e){return ZS(r.M,e)}))},e.next=5,r.uo("BatchGetDocuments",a,i);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=nE(r.M,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Aw(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new uS(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=j(G().mark((function e(){var t,n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=g_.fromPath(t);n.mutations.push(new cS(r,n.precondition(r)))})),e.next=7,function(){var e=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ow(t),a=JS(r.M)+"/documents",i={writes:n.map((function(e){return rE(r.M,e)}))},e.next=3,r.io("Commit",a,i);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Nw();t=Xw.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Rw(Pw.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?HT.updateTime(t):HT.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xw.min()))throw new Rw(Pw.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return HT.updateTime(t)}return HT.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),KO=function(){function e(t,n,r,a){I(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=a,this.bu=5,this.vo=new wN(this.asyncQueue,"transaction_retry")}return N(e,[{key:"run",value:function(){this.bu-=1,this.Pu()}},{key:"Pu",value:function(){var e=this;this.vo.po(j(G().mark((function t(){var n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new qO(e.datastore),(r=e.Vu(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.vu(t)}))}))})).catch((function(t){e.vu(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Vu",value:function(e){try{var t=this.updateFunction(e);return!v_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"vu",value:function(e){var t=this;this.bu>0&&this.Su(e)?(this.bu-=1,this.asyncQueue.enqueueAndForget((function(){return t.Pu(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Su",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!dS(t)}return!1}}]),e}(),GO=function(){function e(t,n,r,a){var i=this;I(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=kw.UNAUTHENTICATED,this.clientId=Kw.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sw("FirestoreClient","Received user=",t.uid),e.next=3,i.authCredentialListener(t);case 3:i.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Sw("FirestoreClient","Received new app check token=",e),i.appCheckCredentialListener(e,i.user)}))}return N(e,[{key:"getConfiguration",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Rw(Pw.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Dw;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(j(G().mark((function n(){var r;return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=yA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function HO(e,t){return ZO.apply(this,arguments)}function ZO(){return ZO=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Sw("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:a=r.initialUser,t.setCredentialChangeListener(function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=a.isEqual(t),e.t0){e.next=5;break}return e.next=4,CC(n.localStore,t);case 4:a=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ZO.apply(this,arguments)}function YO(e,t){return XO.apply(this,arguments)}function XO(){return XO=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,QO(t);case 3:return r=e.sent,Sw("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return a=e.sent,e.next=10,n.initialize(r,a);case 10:t.setCredentialChangeListener((function(e){return lA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return lA(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),XO.apply(this,arguments)}function QO(e){return JO.apply(this,arguments)}function JO(){return JO=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Sw("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,HO(t,new FO);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),JO.apply(this,arguments)}function $O(e){return eP.apply(this,arguments)}function eP(){return eP=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Sw("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,YO(t,new UO);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),eP.apply(this,arguments)}function tP(e){return QO(e).then((function(e){return e.persistence}))}function nP(e){return QO(e).then((function(e){return e.localStore}))}function rP(e){return $O(e).then((function(e){return e.remoteStore}))}function aP(e){return $O(e).then((function(e){return e.syncEngine}))}function iP(e){return oP.apply(this,arguments)}function oP(){return oP=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$O(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=VA.bind(null,n.syncEngine),r.onUnlisten=KA.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),oP.apply(this,arguments)}function sP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function a(){return G().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new WO({next:function(i){t.enqueueAndForget((function(){return SA(e,o)}));var s=i.docs.has(n);!s&&i.fromCache?a.reject(new Rw(Pw.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&i.fromCache&&r&&"server"===r.source?a.reject(new Rw(Pw.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):a.resolve(i)},error:function(e){return a.reject(e)}}),o=new AA(vT(n.path),i,{includeMetadataChanges:!0,Sa:!0});return _A(e,o)},a.next=3,iP(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}function uP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function a(){return G().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.t0=function(e,t,n,r,a){var i=new WO({next:function(n){t.enqueueAndForget((function(){return SA(e,o)})),n.fromCache&&"server"===r.source?a.reject(new Rw(Pw.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:function(e){return a.reject(e)}}),o=new AA(n,i,{includeMetadataChanges:!0,Sa:!0});return _A(e,o)},a.next=3,iP(e);case 3:return a.t1=a.sent,a.t2=e.asyncQueue,a.t3=t,a.t4=n,a.t5=r,a.abrupt("return",(0,a.t0)(a.t1,a.t2,a.t3,a.t4,a.t5));case 9:case"end":return a.stop()}}),a)})))),r.promise}var cP=new Map;function lP(e,t,n){if(!n)throw new Rw(Pw.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function dP(e,t,n,r){if(!0===t&&!0===r)throw new Rw(Pw.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fP(e){if(!g_.isDocumentKey(e))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function pP(e){if(g_.isDocumentKey(e))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function hP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Nw()}function vP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Rw(Pw.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=hP(e);throw new Rw(Pw.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function mP(e,t){if(t<=0)throw new Rw(Pw.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var yP=function(){function e(t){var n;if(I(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Rw(Pw.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rw(Pw.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,dP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return N(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),gP=function(){function e(t,n,r){I(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yP({}),this._settingsFrozen=!1,t instanceof h_?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Rw(Pw.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new h_(e.options.projectId)}(t))}return N(e,[{key:"app",get:function(){if(!this._app)throw new Rw(Pw.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Rw(Pw.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lw;switch(e.type){case"gapi":var t=e.client;return Aw(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Uw(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Rw(Pw.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=cP.get(e);t&&(Sw("ComponentProvider","Removing Datastore"),cP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function bP(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(e=vP(e,gP))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==t&&Iw("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},i),{host:"".concat(t,":").concat(n),ssl:!1})),a.mockUserToken){var o,s;if("string"==typeof a.mockUserToken)o=a.mockUserToken,s=kw.MOCK_USER;else{o=ie(a.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=a.mockUserToken.sub||a.mockUserToken.user_id;if(!u)throw new Rw(Pw.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new kw(u)}e._authCredentials=new Fw(new Mw(o,s))}}var xP=function(){function e(t,n,r){I(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return N(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new wP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),kP=function(){function e(t,n,r){I(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return N(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),wP=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this,e,r,vT(a)))._path=a,i.type="collection",i}return N(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xP(this.firestore,null,new g_(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(kP);function _P(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=je(e),lP("collection","path",t),e instanceof gP){var i=t_.fromString.apply(t_,[t].concat(r));return pP(i),new wP(e,null,i)}if(!(e instanceof xP||e instanceof wP))throw new Rw(Pw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(t_.fromString.apply(t_,[t].concat(r)));return pP(o),new wP(e.firestore,null,o)}function TP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=je(e),1===arguments.length&&(t=Kw.R()),lP("doc","path",t),e instanceof gP){var i=t_.fromString.apply(t_,[t].concat(r));return fP(i),new xP(e,null,new g_(i))}if(!(e instanceof xP||e instanceof wP))throw new Rw(Pw.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(t_.fromString.apply(t_,[t].concat(r)));return fP(o),new xP(e.firestore,e instanceof wP?e.converter:null,new g_(o))}function SP(e,t){return e=je(e),t=je(t),(e instanceof xP||e instanceof wP)&&(t instanceof xP||t instanceof wP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function EP(e,t){return e=je(e),t=je(t),e instanceof kP&&t instanceof kP&&e.firestore===t.firestore&&TT(e._query,t._query)&&e.converter===t.converter}var IP=function(){function e(){var t=this;I(this,e),this.Du=Promise.resolve(),this.Cu=[],this.xu=!1,this.Nu=[],this.ku=null,this.Mu=!1,this.Ou=!1,this.$u=[],this.vo=new wN(this,"async_queue_retry"),this.Fu=function(){var e=xN();e&&Sw("AsyncQueue","Visibility state changed to "+e.visibilityState),t.vo.To()};var n=xN();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Fu)}return N(e,[{key:"isShuttingDown",get:function(){return this.xu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Bu(),this.Lu(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.xu){this.xu=!0,this.Ou=e||!1;var t=xN();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Fu)}}},{key:"enqueue",value:function(e){var t=this;if(this.Bu(),this.xu)return new Promise((function(){}));var n=new Dw;return this.Lu((function(){return t.xu&&t.Ou?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Cu.push(e),t.qu()}))}},{key:"qu",value:function(){var e=j(G().mark((function e(){var t=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Cu.length){e.next=14;break}return e.prev=1,e.next=4,this.Cu[0]();case 4:this.Cu.shift(),this.vo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),HE(e.t0)){e.next=12;break}throw e.t0;case 12:Sw("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Cu.length>0&&this.vo.po((function(){return t.qu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Lu",value:function(e){var t=this,n=this.Du.then((function(){return t.Mu=!0,e().catch((function(e){t.ku=e,t.Mu=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ew("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Mu=!1,e}))}));return this.Du=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Bu(),this.$u.indexOf(e)>-1&&(t=0);var a=mA.createAndSchedule(this,e,t,n,(function(e){return r.Uu(e)}));return this.Nu.push(a),a}},{key:"Bu",value:function(){this.ku&&Nw()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ku",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Du,e.next=3,t;case 3:if(t!==this.Du){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Gu",value:function(e){var t,n=V(this.Nu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Qu",value:function(e){var t=this;return this.Ku().then((function(){t.Nu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=V(t.Nu);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.skipDelay(),"all"!==e&&a.timerId===e)break}}catch(i){r.e(i)}finally{r.f()}return t.Ku()}))}},{key:"ju",value:function(e){this.$u.push(e)}},{key:"Uu",value:function(e){var t=this.Nu.indexOf(e);this.Nu.splice(t,1)}}]),e}();function CP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,a=V(["next","error","complete"]);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"==typeof r[i])return!0}}catch(o){a.e(o)}finally{a.f()}return!1}(e)}var NP=function(){function e(){I(this,e),this._progressObserver={},this._taskCompletionResolver=new Dw,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return N(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),AP=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this,e,r,a)).type="firestore",i._queue=new IP,i._persistenceKey="name"in e?e.name:"[DEFAULT]",i}return N(n,[{key:"_terminate",value:function(){return this._firestoreClient||PP(this),this._firestoreClient.terminate()}}]),n}(gP);function OP(e){return e._firestoreClient||PP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function PP(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new p_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new GO(e._authCredentials,e._appCheckCredentials,e._queue,r)}function RP(e,t,n){var r=new Dw;return e.asyncQueue.enqueue(j(G().mark((function a(){return G().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,HO(e,n);case 3:return a.next=5,YO(e,t);case 5:r.resolve(),a.next=13;break;case 8:if(a.prev=8,a.t0=a.catch(0),function(e){return"FirebaseError"===e.name?e.code===Pw.FAILED_PRECONDITION||e.code===Pw.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a.t0)){a.next=12;break}throw a.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a.t0),r.reject(a.t0);case 13:case"end":return a.stop()}}),a,null,[[0,8]])})))).then((function(){return r.promise}))}function DP(e){return function(e){return e.asyncQueue.enqueue(j(G().mark((function t(){var n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tP(e);case 2:return n=t.sent,t.next=5,rP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Ow(e);return t.ha.delete(0),NN(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(OP(e=vP(e,AP)))}function MP(e){return function(e){return e.asyncQueue.enqueue(j(G().mark((function t(){var n,r;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tP(e);case 2:return n=t.sent,t.next=5,rP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Ow(t)).ha.add(0),e.next=4,ON(n);case 4:n.da.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(OP(e=vP(e,AP)))}function LP(e,t){var n=OP(e=vP(e,AP)),r=new NP;return function(e,t,n,r){var a=function(e,t){return function(e,t){return new zO(e,t)}(function(e,t){if(e instanceof Uint8Array)return VO(e,t);if(e instanceof ArrayBuffer)return VO(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,kN(t));e.asyncQueue.enqueueAndForget(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=LO,t.next=3,aP(e);case 3:t.t1=t.sent,t.t2=a,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function FP(e,t){return function(e,t){return e.asyncQueue.enqueue(j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Ow(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.fs.getNamedQuery(e,t)}))},n.next=3,nP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(OP(e=vP(e,AP)),t).then((function(t){return t?new kP(e,null,t.query):null}))}function BP(e){if(e._initialized||e._terminated)throw new Rw(Pw.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jP=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0;a<n.length;++a)if(0===n[a].length)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new r_(n)}return N(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var UP=function(){function e(t){I(this,e),this._byteString=t}return N(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(i_.fromBase64String(t))}catch(t){throw new Rw(Pw.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(i_.fromUint8Array(t))}}]),e}(),VP=N((function e(t){I(this,e),this._methodName=t})),WP=function(){function e(t,n){if(I(this,e),!isFinite(t)||t<-90||t>90)throw new Rw(Pw.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Rw(Pw.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return N(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Gw(this._lat,e._lat)||Gw(this._long,e._long)}}]),e}(),zP=/^__.*__$/,qP=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new nS(e,this.data,this.fieldMask,t,this.fieldTransforms):new tS(e,this.data,t,this.fieldTransforms)}}]),e}(),KP=function(){function e(t,n,r){I(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return new nS(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function GP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nw()}}var HP=function(){function e(t,n,r,a,i,o){I(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=a,void 0===i&&this.Wu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return N(e,[{key:"path",get:function(){return this.settings.path}},{key:"zu",get:function(){return this.settings.zu}},{key:"Hu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Ju",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Xu(e),r}},{key:"Zu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Hu({path:n,Yu:!1});return r.Wu(),r}},{key:"tc",value:function(e){return this.Hu({path:void 0,Yu:!0})}},{key:"ec",value:function(e){return pR(e,this.settings.methodName,this.settings.nc||!1,this.path,this.settings.sc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Wu",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Xu(this.path.get(e))}},{key:"Xu",value:function(e){if(0===e.length)throw this.ec("Document fields must not be empty");if(GP(this.zu)&&zP.test(e))throw this.ec('Document fields cannot begin and end with "__"')}}]),e}(),ZP=function(){function e(t,n,r){I(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||kN(t)}return N(e,[{key:"ic",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new HP({zu:e,methodName:t,sc:n,path:r_.emptyPath(),Yu:!1,nc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function YP(e){var t=e._freezeSettings(),n=kN(e._databaseId);return new ZP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function XP(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ic(i.merge||i.mergeFields?2:0,t,n,a);cR("Data must be an object, but it was:",o,r);var s,u,c=sR(r,o);if(i.merge)s=new a_(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){var l,d=[],f=V(i.mergeFields);try{for(f.s();!(l=f.n()).done;){var p=l.value,h=lR(t,p,n);if(!o.contains(h))throw new Rw(Pw.INVALID_ARGUMENT,"Field '".concat(h,"' is specified in your field mask but missing from your input data."));hR(d,h)||d.push(h)}}catch(v){f.e(v)}finally{f.f()}s=new a_(d),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new qP(new B_(c),s,u)}var QP=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.zu)throw 1===e.zu?e.ec("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ec("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VP);function JP(e,t,n){return new HP({zu:3,sc:t.settings.sc,methodName:e._methodName,Yu:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var $P=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){return new KT(e.path,new FT)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(VP),eR=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e)).rc=r,a}return N(n,[{key:"_toFieldTransform",value:function(e){var t=JP(this,e,!0),n=this.rc.map((function(e){return oR(e,t)})),r=new BT(n);return new KT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VP),tR=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e)).rc=r,a}return N(n,[{key:"_toFieldTransform",value:function(e){var t=JP(this,e,!0),n=this.rc.map((function(e){return oR(e,t)})),r=new UT(n);return new KT(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VP),nR=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e)).oc=r,a}return N(n,[{key:"_toFieldTransform",value:function(e){var t=new WT(e.M,PT(e.M,this.oc));return new KT(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(VP);function rR(e,t,n,r){var a=e.ic(1,t,n);cR("Data must be an object, but it was:",a,r);var i=[],o=B_.empty();Jw(r,(function(e,r){var s=fR(t,e,n);r=je(r);var u=a.Zu(s);if(r instanceof QP)i.push(s);else{var c=oR(r,u);null!=c&&(i.push(s),o.set(s,c))}}));var s=new a_(i);return new KP(o,s,a.fieldTransforms)}function aR(e,t,n,r,a,i){var o=e.ic(1,t,n),s=[lR(t,r,n)],u=[a];if(i.length%2!=0)throw new Rw(Pw.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<i.length;c+=2)s.push(lR(t,i[c])),u.push(i[c+1]);for(var l=[],d=B_.empty(),f=s.length-1;f>=0;--f)if(!hR(l,s[f])){var p=s[f],h=u[f];h=je(h);var v=o.Zu(p);if(h instanceof QP)l.push(p);else{var m=oR(h,v);null!=m&&(l.push(p),d.set(p,m))}}var y=new a_(l);return new KP(d,y,o.fieldTransforms)}function iR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return oR(n,e.ic(r?4:3,t))}function oR(e,t){if(uR(e=je(e)))return cR("Unsupported field value:",t,e),sR(e,t);if(e instanceof VP)return function(e,t){if(!GP(t.zu))throw t.ec("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ec("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Yu&&4!==t.zu)throw t.ec("Nested arrays are not supported");return function(e,t){var n,r=[],a=0,i=V(e);try{for(i.s();!(n=i.n()).done;){var o=oR(n.value,t.tc(a));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),a++}}catch(s){i.e(s)}finally{i.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=je(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return PT(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Yw.fromDate(e);return{timestampValue:WS(t.M,n)}}if(e instanceof Yw){var r=new Yw(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:WS(t.M,r)}}if(e instanceof WP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof UP)return{bytesValue:zS(t.M,e._byteString)};if(e instanceof xP){var a=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(a))throw t.ec("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(a.projectId,"/").concat(a.database));return{referenceValue:GS(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ec("Unsupported field value: ".concat(hP(e)))}(e,t)}function sR(e,t){var n={};return $w(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jw(e,(function(e,r){var a=oR(r,t.Ju(e));null!=a&&(n[e]=a)})),{mapValue:{fields:n}}}function uR(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Yw||e instanceof WP||e instanceof UP||e instanceof xP||e instanceof VP)}function cR(e,t,n){if(!uR(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=hP(n);throw"an object"===r?t.ec(e+" a custom object"):t.ec(e+" "+r)}}function lR(e,t,n){if((t=je(t))instanceof jP)return t._internalPath;if("string"==typeof t)return fR(e,t);throw pR("Field path arguments must be of type string or ",e,!1,void 0,n)}var dR=new RegExp("[~\\*/\\[\\]]");function fR(e,t,n){if(t.search(dR)>=0)throw pR("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return z(jP,(0,Ze.Z)(t.split(".")))._internalPath}catch(r){throw pR("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pR(e,t,n,r,a){var i=r&&!r.isEmpty(),o=void 0!==a,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(i||o)&&(u+=" (found",i&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(a)),u+=")"),new Rw(Pw.INVALID_ARGUMENT,s+e+u)}function hR(e,t){return e.some((function(e){return e.isEqual(t)}))}var vR=function(){function e(t,n,r,a,i){I(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=a,this._converter=i}return N(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new xP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new mR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(yR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),mR=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){return cn(R(n.prototype),"data",this).call(this)}}]),n}(vR);function yR(e,t){return"string"==typeof t?fR(e,t):t instanceof jP?t._internalPath:t._delegate._internalPath}var gR=function(){function e(t,n){I(this,e),this.hasPendingWrites=t,this.fromCache=n}return N(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),bR=function(e){P(n,e);var t=F(n);function n(e,r,a,i,o,s){var u;return I(this,n),(u=t.call(this,e,r,a,i,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return N(n,[{key:"exists",value:function(){return cn(R(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new xR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(yR("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(vR),xR=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return cn(R(n.prototype),"data",this).call(this,e)}}]),n}(bR),kR=function(){function e(t,n,r,a){I(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new gR(a.hasPendingWrites,a.fromCache),this.query=r}return N(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new xR(n._firestore,n._userDataWriter,r.key,r,new gR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rw(Pw.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new xR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new xR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new gR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),a=-1,i=-1;return 0!==t.type&&(a=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(i=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:wR(t.type),doc:n,oldIndex:a,newIndex:i}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function wR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nw()}}function _R(e,t){return e instanceof bR&&t instanceof bR?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof kR&&t instanceof kR&&e._firestore===t._firestore&&EP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function TR(e){if(yT(e)&&0===e.explicitOrderBy.length)throw new Rw(Pw.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var SR=N((function e(){I(this,e)}));function ER(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var a=0,i=n;a<i.length;a++){var o=i[a];e=o._apply(e)}return e}var IR=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this)).ac=e,i.uc=r,i.cc=a,i.type="where",i}return N(n,[{key:"_apply",value:function(e){var t=YP(e.firestore),n=function(e,t,n,r,a,i,o){var s;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){BR(o,i);var u,c=[],l=V(o);try{for(l.s();!(u=l.n()).done;){var d=u.value;c.push(FR(r,e,d))}}catch(p){l.e(p)}finally{l.f()}s={arrayValue:{values:c}}}else s=FR(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||BR(o,i),s=iR(n,"where",o,"in"===i||"not-in"===i);var f=$_.create(a,i,s);return function(e,t){if(t.S()){var n=bT(e);if(null!==n&&!n.isEqual(t.field))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=gT(e);null!==r&&jR(e,t.field,r)}var a=function(e,t){var n,r=V(e.filters);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.indexOf(a.op)>=0)return a.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.ac,this.uc,this.cc);return new kP(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new pT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(SR);var CR=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this)).ac=e,a.hc=r,a.type="orderBy",a}return N(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new cT(t,n);return function(e,t){if(null===gT(e)){var n=bT(e);null!==n&&jR(e,n,t.field)}}(e,r),r}(e._query,this.ac,this.hc);return new kP(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new pT(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(SR);var NR=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this)).type=e,i.lc=r,i.fc=a,i}return N(n,[{key:"_apply",value:function(e){return new kP(e.firestore,e.converter,_T(e._query,this.lc,this.fc))}}]),n}(SR);var AR=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this)).type=e,i.dc=r,i._c=a,i}return N(n,[{key:"_apply",value:function(e){var t=LR(e,this.type,this.dc,this._c);return new kP(e.firestore,e.converter,function(e,t){return new pT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(SR);function OR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AR("startAt",t,!0)}function PR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new AR("startAfter",t,!1)}var RR=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this)).type=e,i.dc=r,i._c=a,i}return N(n,[{key:"_apply",value:function(e){var t=LR(e,this.type,this.dc,this._c);return new kP(e.firestore,e.converter,function(e,t){return new pT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(SR);function DR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RR("endBefore",t,!1)}function MR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new RR("endAt",t,!0)}function LR(e,t,n,r){if(n[0]=je(n[0]),n[0]instanceof vR)return function(e,t,n,r,a){if(!r)throw new Rw(Pw.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var i,o=[],s=V(kT(e));try{for(s.s();!(i=s.n()).done;){var u=i.value;if(u.field.isKeyField())o.push(C_(t,r.key));else{var c=r.data.field(u.field);if(l_(c))throw new Rw(Pw.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(d){s.e(d)}finally{s.f()}return new uT(o,a)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var a=YP(e.firestore);return function(e,t,n,r,a,i){var o=e.explicitOrderBy;if(a.length>o.length)throw new Rw(Pw.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<a.length;u++){var c=a[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!xT(e)&&-1!==c.indexOf("/"))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(t_.fromString(c));if(!g_.isDocumentKey(l))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var d=new g_(l);s.push(C_(t,d))}else{var f=iR(n,r,c);s.push(f)}}return new uT(s,i)}(e._query,e.firestore._databaseId,a,t,n,r)}function FR(e,t,n){if("string"==typeof(n=je(n))){if(""===n)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xT(t)&&-1!==n.indexOf("/"))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(t_.fromString(n));if(!g_.isDocumentKey(r))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return C_(e,new g_(r))}if(n instanceof xP)return C_(e,n._key);throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(hP(n),"."))}function BR(e,t){if(!Array.isArray(e)||0===e.length)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function jR(e,t,n){if(!n.isEqual(t))throw new Rw(Pw.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var UR=function(){function e(){I(this,e)}return N(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(k_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return u_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(c_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Nw()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Jw(e.fields,(function(e,a){r[e]=n.convertValue(a,t)})),r}},{key:"convertGeoPoint",value:function(e){return new WP(u_(e.latitude),u_(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=d_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(f_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=s_(e);return new Yw(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=t_.fromString(e);Aw(mE(n));var r=new h_(n.get(1),n.get(3)),a=new g_(n.popFirst(5));return r.isEqual(t)||Ew("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}]),e}();function VR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var WR=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new UP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xP(this.firestore,null,t)}}]),n}(UR),zR=function(){function e(t,n){I(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=YP(t)}return N(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=qR(e,this._firestore),a=VR(r.converter,t,n),i=XP(this._dataReader,"WriteBatch.set",r._key,a,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,HT.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,a=qR(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=je(t))||t instanceof jP?aR(this._dataReader,"WriteBatch.update",a._key,t,n,o):rR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(r.toMutation(a._key,HT.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=qR(e,this._firestore);return this._mutations=this._mutations.concat(new uS(t._key,HT.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Rw(Pw.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function qR(e,t){if((e=je(e)).firestore!==t)throw new Rw(Pw.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var KR=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new UP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xP(this.firestore,null,t)}}]),n}(UR);function GR(e){e=vP(e,xP);var t=vP(e.firestore,AP),n=OP(t),r=new KR(t);return function(e,t){var n=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function r(){return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=j(G().mark((function e(t,n,r){var a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Ow(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.ui.Bs(e,t)}))}(t,n);case 3:(a=e.sent).isFoundDocument()?r.resolve(a):a.isNoDocument()?r.resolve(null):r.reject(new Rw(Pw.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),i=yA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(i);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new bR(t,r,e._key,n,new gR(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function HR(e){e=vP(e,kP);var t=vP(e.firestore,AP),n=OP(t),r=new KR(t);return function(e,t){var n=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function r(){return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=j(G().mark((function e(t,n,r){var a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,BC(t,n,!0);case 3:a=e.sent,i=new FA(n,a.hi),o=i.La(a.documents),s=i.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=yA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,nP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new kR(t,r,e,n)}))}function ZR(e,t,n){e=vP(e,xP);var r=vP(e.firestore,AP),a=VR(e.converter,t,n);return JR(r,[XP(YP(r),"setDoc",e._key,a,null!==e.converter,n).toMutation(e._key,HT.none())])}function YR(e,t,n){e=vP(e,xP);for(var r=vP(e.firestore,AP),a=YP(r),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return JR(r,[("string"==typeof(t=je(t))||t instanceof jP?aR(a,"updateDoc",e._key,t,n,o):rR(a,"updateDoc",e._key,t)).toMutation(e._key,HT.exists(!0))])}function XR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a,i,o;e=je(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||CP(n[u])||(s=n[u],u++);var c,l,d,f={includeMetadataChanges:s.includeMetadataChanges};if(CP(n[u])){var p=n[u];n[u]=null===(a=p.next)||void 0===a?void 0:a.bind(p),n[u+1]=null===(i=p.error)||void 0===i?void 0:i.bind(p),n[u+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof xP)l=vP(e.firestore,AP),d=vT(e._key.path),c={next:function(t){n[u]&&n[u]($R(l,e,t))},error:n[u+1],complete:n[u+2]};else{var h=vP(e,kP);l=vP(h.firestore,AP),d=h._query;var v=new KR(l);c={next:function(e){n[u]&&n[u](new kR(l,v,h,e))},error:n[u+1],complete:n[u+2]},TR(e._query)}return function(e,t,n,r){var a=new WO(r),i=new AA(t,a,n);return e.asyncQueue.enqueueAndForget(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_A,t.next=3,iP(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){a.mu(),e.asyncQueue.enqueueAndForget(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SA,t.next=3,iP(e);case 3:return t.t1=t.sent,t.t2=i,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(OP(l),d,f,c)}function QR(e,t){return function(e,t){var n=new WO(t);return e.asyncQueue.enqueueAndForget(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ow(e).Ia.add(t),t.next()},t.next=3,iP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.mu(),e.asyncQueue.enqueueAndForget(j(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Ow(e).Ia.delete(t)},t.next=3,iP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(OP(e=vP(e,AP)),CP(t)?t:{next:t})}function JR(e,t){return function(e,t){var n=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function r(){return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=HA,r.next=3,aP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(OP(e),t)}function $R(e,t,n){var r=n.docs.get(t._key),a=new KR(e);return new bR(e,a,t._key,r,new gR(n.hasPendingWrites,n.fromCache),t.converter)}var eD=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,r))._firestore=e,a}return N(n,[{key:"get",value:function(e){var t=this,r=qR(e,this._firestore),a=new KR(this._firestore);return cn(R(n.prototype),"get",this).call(this,e).then((function(e){return new bR(t._firestore,a,r._key,e._document,new gR(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){I(this,e),this._firestore=t,this._transaction=n,this._dataReader=YP(t)}return N(e,[{key:"get",value:function(e){var t=this,n=qR(e,this._firestore),r=new WR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Nw();var a=e[0];if(a.isFoundDocument())return new vR(t._firestore,r,a.key,a,n.converter);if(a.isNoDocument())return new vR(t._firestore,r,n._key,null,n.converter);throw Nw()}))}},{key:"set",value:function(e,t,n){var r=qR(e,this._firestore),a=VR(r.converter,t,n),i=XP(this._dataReader,"Transaction.set",r._key,a,null!==r.converter,n);return this._transaction.set(r._key,i),this}},{key:"update",value:function(e,t,n){for(var r,a=qR(e,this._firestore),i=arguments.length,o=new Array(i>3?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return r="string"==typeof(t=je(t))||t instanceof jP?aR(this._dataReader,"Transaction.update",a._key,t,n,o):rR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,r),this}},{key:"delete",value:function(e){var t=qR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function tD(e,t){return function(e,t){var n=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function r(){var a;return G().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e){return $O(e).then((function(e){return e.datastore}))}(e);case 2:a=r.sent,new KO(e.asyncQueue,a,t,n).run();case 4:case"end":return r.stop()}}),r)})))),n.promise}(OP(e=vP(e,AP)),(function(n){return t(new eD(e,n))}))}function nD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new eR("arrayUnion",t)}function rD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tR("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ww=e}(Et),bt(new Ye("firestore",(function(e,n){var r=n.options,a=e.getProvider("app").getImmediate(),i=new AP(a,new Bw(e.getProvider("auth-internal")),new Ww(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),i._setSettings(r),i}),"PUBLIC")),Pt(xw,"3.4.6",e),Pt(xw,"3.4.6","esm2017")}();function aD(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rw("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function iD(){if("undefined"===typeof Uint8Array)throw new Rw("unimplemented","Uint8Arrays are not available in this environment.")}function oD(){if("undefined"==typeof atob)throw new Rw("unimplemented","Blobs are unavailable in Firestore in this environment.")}var sD=function(){function e(t){I(this,e),this._delegate=t}return N(e,[{key:"toBase64",value:function(){return oD(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return iD(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return oD(),new e(UP.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return iD(),new e(UP.fromUint8Array(t))}}]),e}();function uD(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,a=V(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i in r&&"function"===typeof r[i])return!0}}catch(o){a.e(o)}finally{a.f()}return!1}(e,["next","error","complete"])}var cD=function(){function e(){I(this,e)}return N(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){BP(e=vP(e,AP));var n=OP(e),r=e._freezeSettings(),a=new UO;return RP(n,a,new BO(a,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){BP(e=vP(e,AP));var t=OP(e),n=e._freezeSettings(),r=new UO;return RP(t,r,new jO(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Rw(Pw.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Dw;return e._queue.enqueueAndForgetEvenWhileRestricted(j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qE.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,qE.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(kC(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),lD=function(){function e(t,n,r){var a=this;I(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return a.terminate()}},t instanceof h_||(this._appCompat=t)}return N(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Iw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};bP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return DP(this._delegate)}},{key:"disableNetwork",value:function(){return MP(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&dP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Dw;return e.asyncQueue.enqueueAndForget(j(G().mark((function n(){return G().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=aO,n.next=3,aP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(OP(e=vP(e,AP)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return QR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Rw("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new TD(this,_P(this._delegate,e))}catch(t){throw mD(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new vD(this,TP(this._delegate,e))}catch(t){throw mD(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new kD(this,function(e,t){if(e=vP(e,gP),lP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rw(Pw.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new kP(e,null,function(e){return new pT(t_.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw mD(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return tD(this._delegate,(function(n){return e(new fD(t,n))}))}},{key:"batch",value:function(){var e=this;return OP(this._delegate),new pD(new zR(this._delegate,(function(t){return JR(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return LP(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return FP(this._delegate,e).then((function(e){return e?new kD(t,e):null}))}}]),e}(),dD=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new sD(new UP(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return vD.forKey(t,this.firestore,null)}}]),n}(UR);var fD=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return N(e,[{key:"get",value:function(e){var t=this,n=SD(e);return this._delegate.get(n).then((function(e){return new bD(t._firestore,new bR(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=SD(e);return n?(aD("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=SD(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=SD(e);return this._delegate.delete(t),this}}]),e}(),pD=function(){function e(t){I(this,e),this._delegate=t}return N(e,[{key:"set",value:function(e,t,n){var r=SD(e);return n?(aD("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,a=new Array(r>3?r-3:0),i=3;i<r;i++)a[i-3]=arguments[i];var o,s=SD(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(a));return this}},{key:"delete",value:function(e){var t=SD(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),hD=function(){function e(t,n,r){I(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return N(e,[{key:"fromFirestore",value:function(e,t){var n=new xR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xD(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,a=r.get(t);a||(a=new WeakMap,r.set(t,a));var i=a.get(n);return i||(i=new e(t,new dD(t),n),a.set(n,i)),i}}]),e}();hD.INSTANCES=new WeakMap;var vD=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return N(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new TD(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new TD(this.firestore,_P(this._delegate,e))}catch(t){throw mD(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=je(e))instanceof xP&&SP(this._delegate,e)}},{key:"set",value:function(e,t){t=aD("DocumentReference.set",t);try{return t?ZR(this._delegate,e,t):ZR(this._delegate,e)}catch(n){throw mD(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];try{return 1===arguments.length?YR(this._delegate,e):YR.apply(void 0,[this._delegate,e,t].concat(r))}catch(i){throw mD(i,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return JR(vP(e.firestore,AP),[new uS(e._key,HT.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=yD(n),i=gD(n,(function(t){return new bD(e.firestore,new bR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return XR(this._delegate,a,i)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?GR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vP(e,xP);var t=vP(e.firestore,AP);return sP(OP(t),e._key,{source:"server"}).then((function(n){return $R(t,e,n)}))}(this._delegate):function(e){e=vP(e,xP);var t=vP(e.firestore,AP);return sP(OP(t),e._key).then((function(n){return $R(t,e,n)}))}(this._delegate),t.then((function(e){return new bD(n.firestore,new bR(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Rw("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new xP(n._delegate,r,new g_(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new xP(n._delegate,r,t))}}]),e}();function mD(e,t,n){return e.message=e.message.replace(t,n),e}function yD(e){var t,n=V(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!uD(r))return r}}catch(a){n.e(a)}finally{n.f()}return{}}function gD(e,t){var n,r,a;return{next:function(e){a.next&&a.next(t(e))},error:null===(n=(a=uD(e[0])?e[0]:uD(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(a),complete:null===(r=a.complete)||void 0===r?void 0:r.bind(a)}}var bD=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"ref",get:function(){return new vD(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return _R(this._delegate,e._delegate)}}]),e}(),xD=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Nw()}(void 0!==t),t}}]),n}(bD),kD=function(){function e(t,n){I(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return N(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,ER(this._delegate,function(e,t,n){var r=t,a=yR("where",e);return new IR(a,r,n)}(t,n,r)))}catch(a){throw mD(a,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,ER(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=yR("orderBy",e);return new CR(n,t)}(t,n)))}catch(r){throw mD(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,ER(this._delegate,function(e){return mP("limit",e),new NR("limit",e,"F")}(t)))}catch(n){throw mD(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,ER(this._delegate,function(e){return mP("limitToLast",e),new NR("limitToLast",e,"L")}(t)))}catch(n){throw mD(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,ER(this._delegate,OR.apply(void 0,arguments)))}catch(t){throw mD(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,ER(this._delegate,PR.apply(void 0,arguments)))}catch(t){throw mD(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,ER(this._delegate,DR.apply(void 0,arguments)))}catch(t){throw mD(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,ER(this._delegate,MR.apply(void 0,arguments)))}catch(t){throw mD(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return EP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?HR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=vP(e,kP);var t=vP(e.firestore,AP),n=OP(t),r=new KR(t);return uP(n,e._query,{source:"server"}).then((function(n){return new kR(t,r,e,n)}))}(this._delegate):function(e){e=vP(e,kP);var t=vP(e.firestore,AP),n=OP(t),r=new KR(t);return TR(e._query),uP(n,e._query).then((function(n){return new kR(t,r,e,n)}))}(this._delegate),t.then((function(e){return new _D(n.firestore,new kR(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var a=yD(n),i=gD(n,(function(t){return new _D(e.firestore,new kR(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return XR(this._delegate,a,i)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(hD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),wD=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new xD(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),_D=function(){function e(t,n){I(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"query",get:function(){return new kD(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new xD(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new wD(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new xD(n._firestore,r))}))}},{key:"isEqual",value:function(e){return _R(this._delegate,e._delegate)}}]),e}(),TD=function(e){P(n,e);var t=F(n);function n(e,r){var a;return I(this,n),(a=t.call(this,e,r)).firestore=e,a._delegate=r,a}return N(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new vD(this.firestore,e):null}},{key:"doc",value:function(e){try{return new vD(this.firestore,void 0===e?TP(this._delegate):TP(this._delegate,e))}catch(t){throw mD(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=vP(e.firestore,AP),r=TP(e),a=VR(e.converter,t);return JR(n,[XP(YP(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,HT.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new vD(t.firestore,e)}))}},{key:"isEqual",value:function(e){return SP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(hD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(kD);function SD(e){return vP(e,xP)}var ED,ID=function(){function e(){I(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=z(jP,n)}return N(e,[{key:"isEqual",value:function(e){return(e=je(e))instanceof jP&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(r_.keyField().canonicalString())}}]),e}(),CD=function(){function e(t){I(this,e),this._delegate=t}return N(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new $P("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new QP("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=nD.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=rD.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new nR("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ND={Firestore:lD,GeoPoint:WP,Timestamp:Yw,Blob:sD,Transaction:fD,WriteBatch:pD,DocumentReference:vD,DocumentSnapshot:bD,Query:kD,QueryDocumentSnapshot:xD,QuerySnapshot:_D,CollectionReference:TD,FieldPath:ID,FieldValue:CD,setLogLevel:function(e){!function(e){_w.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Ye("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ND)))}(e,(function(e,t){return new lD(e,t,new cD)})),e.registerVersion("@firebase/firestore-compat","0.1.15")}(nn);var AD="@firebase/installations",OD="0.5.6",PD=1e4,RD="w:".concat(OD),DD="FIS_v2",MD=36e5,LD=(ED={},(0,E.Z)(ED,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,E.Z)(ED,"not-registered","Firebase Installation is not registered."),(0,E.Z)(ED,"installation-not-found","Firebase Installation not found."),(0,E.Z)(ED,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),(0,E.Z)(ED,"app-offline","Could not process request. Application offline."),(0,E.Z)(ED,"delete-pending-registration","Can't delete installation while there is a pending registration request."),ED),FD=new ve("installations","Installations",LD);function BD(e){return e instanceof he&&e.code.includes("request-failed")}function jD(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function UD(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function VD(e,t){return WD.apply(this,arguments)}function WD(){return(WD=j(K.mark((function e(t,n){var r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,a=r.error,e.abrupt("return",FD.create("request-failed",{requestName:t,serverCode:a.code,serverMessage:a.message,serverStatus:a.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zD(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qD(e,t){var n=t.refreshToken,r=zD(e);return r.append("Authorization",function(e){return"".concat(DD," ").concat(e)}(n)),r}function KD(e){return GD.apply(this,arguments)}function GD(){return GD=j(K.mark((function e(t){var n;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),GD.apply(this,arguments)}function HD(e,t){return ZD.apply(this,arguments)}function ZD(){return(ZD=j(K.mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,i=n.fid,o=jD(r),s=zD(r),!(u=a.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,u.getHeartbeatsHeader();case 8:(c=e.sent)&&s.append("x-firebase-client",c);case 10:return l={fid:i,authVersion:DD,appId:r.appId,sdkVersion:RD},d={method:"POST",headers:s,body:JSON.stringify(l)},e.next=14,KD((function(){return fetch(o,d)}));case 14:if(!(f=e.sent).ok){e.next=23;break}return e.next=18,f.json();case 18:return p=e.sent,h={fid:p.fid||i,registrationStatus:2,refreshToken:p.refreshToken,authToken:UD(p.authToken)},e.abrupt("return",h);case 23:return e.next=25,VD("Create Installation",f);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YD(e){return new Promise((function(t){setTimeout(t,e)}))}var XD=/^[cdef][\w-]{21}$/;function QD(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,(0,Ze.Z)(t))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return XD.test(t)?t:""}catch(lA){return""}}function JD(e){return"".concat(e.appName,"!").concat(e.appId)}var $D=new Map;function eM(e,t){var n=JD(e);tM(n,t),function(e,t){var n=rM();n&&n.postMessage({key:e,fid:t});aM()}(n,t)}function tM(e,t){var n=$D.get(e);if(n){var r,a=V(n);try{for(a.s();!(r=a.n()).done;){(0,r.value)(t)}}catch(i){a.e(i)}finally{a.f()}}}var nM=null;function rM(){return!nM&&"BroadcastChannel"in self&&((nM=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){tM(e.data.key,e.data.fid)}),nM}function aM(){0===$D.size&&nM&&(nM.close(),nM=null)}var iM="firebase-installations-store",oM=null;function sM(){return oM||(oM=Ke("firebase-installations-database",1,(function(e,t){if(0===t)e.createObjectStore(iM)}))),oM}function uM(e,t){return cM.apply(this,arguments)}function cM(){return cM=j(K.mark((function e(t,n){var r,a,i,o,s;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JD(t),e.next=3,sM();case 3:return a=e.sent,i=a.transaction(iM,"readwrite"),o=i.objectStore(iM),e.next=8,o.get(r);case 8:return s=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,i.complete;case 13:return s&&s.fid===n.fid||eM(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),cM.apply(this,arguments)}function lM(e){return dM.apply(this,arguments)}function dM(){return dM=j(K.mark((function e(t){var n,r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JD(t),e.next=3,sM();case 3:return r=e.sent,a=r.transaction(iM,"readwrite"),e.next=7,a.objectStore(iM).delete(n);case 7:return e.next=9,a.complete;case 9:case"end":return e.stop()}}),e)}))),dM.apply(this,arguments)}function fM(e,t){return pM.apply(this,arguments)}function pM(){return pM=j(K.mark((function e(t,n){var r,a,i,o,s,u;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=JD(t),e.next=3,sM();case 3:return a=e.sent,i=a.transaction(iM,"readwrite"),o=i.objectStore(iM),e.next=8,o.get(r);case 8:if(s=e.sent,void 0!==(u=n(s))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(u,r);case 17:return e.next=19,i.complete;case 19:return!u||s&&s.fid===u.fid||eM(t,u.fid),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)}))),pM.apply(this,arguments)}function hM(e){return vM.apply(this,arguments)}function vM(){return(vM=j(K.mark((function e(t){var n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fM(t.appConfig,(function(e){var r=mM(e),a=yM(t,r);return n=a.registrationPromise,a.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mM(e){return wM(e||{fid:QD(),registrationStatus:0})}function yM(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(FD.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return gM.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:bM(e)}:{installationEntry:t}}function gM(){return(gM=j(K.mark((function e(t,n){var r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,HD(t,n);case 3:return r=e.sent,e.abrupt("return",uM(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!BD(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,lM(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,uM(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function bM(e){return xM.apply(this,arguments)}function xM(){return(xM=j(K.mark((function e(t){var n,r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kM(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,YD(100);case 6:return e.next=8,kM(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,hM(t);case 14:if(r=e.sent,a=r.installationEntry,!(i=r.registrationPromise)){e.next=21;break}return e.abrupt("return",i);case 21:return e.abrupt("return",a);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kM(e){return fM(e,(function(e){if(!e)throw FD.create("installation-not-found");return wM(e)}))}function wM(e){return 1===(t=e).registrationStatus&&t.registrationTime+PD<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function _M(e,t){return TM.apply(this,arguments)}function TM(){return(TM=j(K.mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,a=t.heartbeatServiceProvider,i=SM(r,n),o=qD(r,n),!(s=a.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,s.getHeartbeatsHeader();case 7:(u=e.sent)&&o.append("x-firebase-client",u);case 9:return c={installation:{sdkVersion:RD,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,KD((function(){return fetch(i,l)}));case 13:if(!(d=e.sent).ok){e.next=22;break}return e.next=17,d.json();case 17:return f=e.sent,p=UD(f),e.abrupt("return",p);case 22:return e.next=24,VD("Generate Auth Token",d);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SM(e,t){var n=t.fid;return"".concat(jD(e),"/").concat(n,"/authTokens:generate")}function EM(e){return IM.apply(this,arguments)}function IM(){return IM=j(K.mark((function e(t){var n,r,a,i,o=arguments;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,fM(t.appConfig,(function(e){if(!RM(e))throw FD.create("not-registered");var a=e.authToken;if(!n&&DM(a))return e;if(1===a.requestStatus)return r=CM(t,n),e;if(!navigator.onLine)throw FD.create("app-offline");var i=MM(e);return r=OM(t,i),i}));case 3:if(a=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=a.authToken;case 11:return i=e.t0,e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)}))),IM.apply(this,arguments)}function CM(e,t){return NM.apply(this,arguments)}function NM(){return(NM=j(K.mark((function e(t,n){var r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,AM(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,YD(100);case 6:return e.next=8,AM(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(a=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",EM(t,n));case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AM(e){return fM(e,(function(e){if(!RM(e))throw FD.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+PD<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function OM(e,t){return PM.apply(this,arguments)}function PM(){return(PM=j(K.mark((function e(t,n){var r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_M(t,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,uM(t.appConfig,a);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!BD(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,lM(t.appConfig);case 15:e.next=20;break;case 17:return i=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,uM(t.appConfig,i);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function RM(e){return void 0!==e&&2===e.registrationStatus}function DM(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+MD}(e)}function MM(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function LM(){return(LM=j(K.mark((function e(t){var n,r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,hM(n);case 3:return r=e.sent,a=r.installationEntry,(i=r.registrationPromise)?i.catch(console.error):EM(n).catch(console.error),e.abrupt("return",a.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FM(){return FM=j(K.mark((function e(t){var n,r,a,i=arguments;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,BM(r);case 4:return e.next=6,EM(r,n);case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)}))),FM.apply(this,arguments)}function BM(e){return jM.apply(this,arguments)}function jM(){return(jM=j(K.mark((function e(t){var n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hM(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function UM(e){return FD.create("missing-app-config-values",{valueName:e})}var VM,WM="installations",zM=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw UM("App Configuration");if(!e.name)throw UM("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw UM(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:xt(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},qM=function(e){var t=xt(e.getProvider("app").getImmediate(),WM).getImmediate(),n={getId:function(){return function(e){return LM.apply(this,arguments)}(t)},getToken:function(e){return function(e){return FM.apply(this,arguments)}(t,e)}};return n};bt(new Ye(WM,zM,"PUBLIC")),bt(new Ye("installations-internal",qM,"PRIVATE")),Pt(AD,OD),Pt(AD,OD,"esm2017");var KM,GM,HM="/firebase-messaging-sw.js",ZM="/firebase-cloud-messaging-push-scope",YM="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",XM="google.c.a.c_id";function QM(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,Ze.Z)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function JM(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(KM||(KM={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(GM||(GM={}));var $M="fcm_token_details_db",eL="fcm_token_object_Store";function tL(e){return nL.apply(this,arguments)}function nL(){return nL=j(K.mark((function e(t){var n,r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("databases"in indexedDB)){e.next=7;break}return e.next=3,indexedDB.databases();case 3:if(n=e.sent,r=n.map((function(e){return e.name})),r.includes($M)){e.next=7;break}return e.abrupt("return",null);case 7:return a=null,e.next=10,Ke($M,5,function(){var e=j(K.mark((function e(n,r,i,o){var s,u,c,l,d,f;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<2)){e.next=2;break}return e.abrupt("return");case 2:if(n.objectStoreNames.contains(eL)){e.next=4;break}return e.abrupt("return");case 4:return u=o.objectStore(eL),e.next=7,u.index("fcmSenderId").get(t);case 7:return c=e.sent,e.next=10,u.clear();case 10:if(c){e.next=12;break}return e.abrupt("return");case 12:if(2!==r){e.next=19;break}if((l=c).auth&&l.p256dh&&l.endpoint){e.next=16;break}return e.abrupt("return");case 16:a={token:l.fcmToken,createTime:null!==(s=l.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:"string"===typeof l.vapidKey?l.vapidKey:QM(l.vapidKey)}},e.next=20;break;case 19:3===r?a={token:(d=c).fcmToken,createTime:d.createTime,subscriptionOptions:{auth:QM(d.auth),p256dh:QM(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:QM(d.vapidKey)}}:4===r&&(a={token:(f=c).fcmToken,createTime:f.createTime,subscriptionOptions:{auth:QM(f.auth),p256dh:QM(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:QM(f.vapidKey)}});case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=14,Ge($M);case 14:return e.next=16,Ge("fcm_vapid_details_db");case 16:return e.next=18,Ge("undefined");case 18:return e.abrupt("return",rL(a)?a:null);case 19:case"end":return e.stop()}}),e)}))),nL.apply(this,arguments)}function rL(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var aL="firebase-messaging-store",iL=null;function oL(){return iL||(iL=Ke("firebase-messaging-database",1,(function(e,t){if(0===t)e.createObjectStore(aL)}))),iL}function sL(e){return uL.apply(this,arguments)}function uL(){return uL=j(K.mark((function e(t){var n,r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pL(t),e.next=3,oL();case 3:return r=e.sent,e.next=6,r.transaction(aL).objectStore(aL).get(n);case 6:if(!(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:return e.next=13,tL(t.appConfig.senderId);case 13:if(!(i=e.sent)){e.next=18;break}return e.next=17,cL(t,i);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)}))),uL.apply(this,arguments)}function cL(e,t){return lL.apply(this,arguments)}function lL(){return lL=j(K.mark((function e(t,n){var r,a,i;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pL(t),e.next=3,oL();case 3:return a=e.sent,i=a.transaction(aL,"readwrite"),e.next=7,i.objectStore(aL).put(n,r);case 7:return e.next=9,i.complete;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),lL.apply(this,arguments)}function dL(e){return fL.apply(this,arguments)}function fL(){return fL=j(K.mark((function e(t){var n,r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pL(t),e.next=3,oL();case 3:return r=e.sent,a=r.transaction(aL,"readwrite"),e.next=7,a.objectStore(aL).delete(n);case 7:return e.next=9,a.complete;case 9:case"end":return e.stop()}}),e)}))),fL.apply(this,arguments)}function pL(e){return e.appConfig.appId}var hL=(VM={},(0,E.Z)(VM,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,E.Z)(VM,"only-available-in-window","This method is available in a Window context."),(0,E.Z)(VM,"only-available-in-sw","This method is available in a service worker context."),(0,E.Z)(VM,"permission-default","The notification permission was not granted and dismissed instead."),(0,E.Z)(VM,"permission-blocked","The notification permission was not granted and blocked instead."),(0,E.Z)(VM,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,E.Z)(VM,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,E.Z)(VM,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,E.Z)(VM,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,E.Z)(VM,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,E.Z)(VM,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,E.Z)(VM,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,E.Z)(VM,"token-update-no-token","FCM returned no token when updating the user to push."),(0,E.Z)(VM,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,E.Z)(VM,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,E.Z)(VM,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,E.Z)(VM,"invalid-vapid-key","The public VAPID key must be a string."),(0,E.Z)(VM,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),VM),vL=new ve("messaging","Messaging",hL);function mL(e,t){return yL.apply(this,arguments)}function yL(){return(yL=j(K.mark((function e(t,n){var r,a,i,o,s,u;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_L(t);case 2:return r=e.sent,a=SL(n),i={method:"POST",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch(wL(t.appConfig),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),vL.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw u=o.error.message,vL.create("token-subscribe-failed",{errorInfo:u});case 20:if(o.token){e.next=22;break}throw vL.create("token-subscribe-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function gL(e,t){return bL.apply(this,arguments)}function bL(){return(bL=j(K.mark((function e(t,n){var r,a,i,o,s,u;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_L(t);case 2:return r=e.sent,a=SL(n.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch("".concat(wL(t.appConfig),"/").concat(n.token),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),vL.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw u=o.error.message,vL.create("token-update-failed",{errorInfo:u});case 20:if(o.token){e.next=22;break}throw vL.create("token-update-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function xL(e,t){return kL.apply(this,arguments)}function kL(){return(kL=j(K.mark((function e(t,n){var r,a,i,o,s;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_L(t);case 2:return r=e.sent,a={method:"DELETE",headers:r},e.prev=4,e.next=7,fetch("".concat(wL(t.appConfig),"/").concat(n),a);case 7:return i=e.sent,e.next=10,i.json();case 10:if(!(o=e.sent).error){e.next=14;break}throw s=o.error.message,vL.create("token-unsubscribe-failed",{errorInfo:s});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(4),vL.create("token-unsubscribe-failed",{errorInfo:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function wL(e){var t=e.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}function _L(e){return TL.apply(this,arguments)}function TL(){return(TL=j(K.mark((function e(t){var n,r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return a=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(a)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function SL(e){var t=e.p256dh,n=e.auth,r=e.endpoint,a=e.vapidKey,i={web:{endpoint:r,auth:n,p256dh:t}};return a!==YM&&(i.web.applicationPubKey=a),i}var EL=6048e5;function IL(e){return CL.apply(this,arguments)}function CL(){return(CL=j(K.mark((function e(t){var n,r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ML(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:QM(n.getKey("auth")),p256dh:QM(n.getKey("p256dh"))},e.next=6,sL(t.firebaseDependencies);case 6:if(a=e.sent){e.next=11;break}return e.abrupt("return",RL(t.firebaseDependencies,r));case 11:if(FL(a.subscriptionOptions,r)){e.next=23;break}return e.prev=12,e.next=15,xL(t.firebaseDependencies,a.token);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.warn(e.t0);case 20:return e.abrupt("return",RL(t.firebaseDependencies,r));case 23:if(!(Date.now()>=a.createTime+EL)){e.next=27;break}return e.abrupt("return",OL(t,{token:a.token,createTime:Date.now(),subscriptionOptions:r}));case 27:return e.abrupt("return",a.token);case 28:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}function NL(e){return AL.apply(this,arguments)}function AL(){return(AL=j(K.mark((function e(t){var n,r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sL(t.firebaseDependencies);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,xL(t.firebaseDependencies,n.token);case 6:return e.next=8,dL(t.firebaseDependencies);case 8:return e.next=10,t.swRegistration.pushManager.getSubscription();case 10:if(!(r=e.sent)){e.next=13;break}return e.abrupt("return",r.unsubscribe());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function OL(e,t){return PL.apply(this,arguments)}function PL(){return(PL=j(K.mark((function e(t,n){var r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gL(t.firebaseDependencies,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,cL(t.firebaseDependencies,a);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,NL(t);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function RL(e,t){return DL.apply(this,arguments)}function DL(){return(DL=j(K.mark((function e(t,n){var r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mL(t,n);case 2:return r=e.sent,a={token:r,createTime:Date.now(),subscriptionOptions:n},e.next=6,cL(t,a);case 6:return e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ML(e,t){return LL.apply(this,arguments)}function LL(){return(LL=j(K.mark((function e(t,n){var r;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:JM(n)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FL(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,a=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&a&&i}function BL(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var a=t.notification.image;a&&(e.notification.image=a)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function jL(e){return"object"===typeof e&&!!e&&XM in e}function UL(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function VL(e){return vL.create("missing-app-config-values",{valueName:e})}UL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),UL("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var WL=function(){function e(t,n,r){I(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var a=function(e){if(!e||!e.options)throw VL("App Configuration Object");if(!e.name)throw VL("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var a=r[n];if(!t[a])throw VL(a)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:a,installations:n,analyticsProvider:r}}return N(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function zL(e){return qL.apply(this,arguments)}function qL(){return(qL=j(K.mark((function e(t){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(HM,{scope:ZM});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch((function(){})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),vL.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function KL(e,t){return GL.apply(this,arguments)}function GL(){return(GL=j(K.mark((function e(t,n){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n||t.swRegistration){e.next=3;break}return e.next=3,zL(t);case 3:if(n||!t.swRegistration){e.next=5;break}return e.abrupt("return");case 5:if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw vL.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HL(e,t){return ZL.apply(this,arguments)}function ZL(){return(ZL=j(K.mark((function e(t,n){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=YM);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YL(e,t){return XL.apply(this,arguments)}function XL(){return(XL=j(K.mark((function e(t,n){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw vL.create("only-available-in-window");case 2:if("default"!==Notification.permission){e.next=5;break}return e.next=5,Notification.requestPermission();case 5:if("granted"===Notification.permission){e.next=7;break}throw vL.create("permission-blocked");case 7:return e.next=9,HL(t,null===n||void 0===n?void 0:n.vapidKey);case 9:return e.next=11,KL(t,null===n||void 0===n?void 0:n.serviceWorkerRegistration);case 11:return e.abrupt("return",IL(t));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function QL(e,t,n){return JL.apply(this,arguments)}function JL(){return(JL=j(K.mark((function e(t,n,r){var a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$L(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(a,{message_id:r["google.c.a.c_id"],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $L(e){switch(e){case GM.NOTIFICATION_CLICKED:return"notification_open";case GM.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function eF(){return(eF=j(K.mark((function e(t,n){var r,a;return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===GM.PUSH_RECEIVED&&("function"===typeof t.onMessageHandler?t.onMessageHandler(BL(r)):t.onMessageHandler.next(BL(r))),!jL(a=r.data)||"1"!==a["google.c.a.e"]){e.next=8;break}return e.next=8,QL(t,r.messageType,a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var tF,nF="@firebase/messaging",rF="0.9.10",aF=function(e){var t=new WL(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(function(e){return function(e,t){return eF.apply(this,arguments)}(t,e)})),t},iF=function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return YL(t,e)}}};function oF(){return(oF=j(K.mark((function e(t){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw vL.create("only-available-in-window");case 2:if(t.swRegistration){e.next=5;break}return e.next=5,zL(t);case 5:return e.abrupt("return",NL(t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sF(e,t){return uF.apply(this,arguments)}function uF(){return(uF=j(K.mark((function e(t,n){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=je(t),e.abrupt("return",YL(t,n));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cF(e){return function(e){return oF.apply(this,arguments)}(e=je(e))}function lF(e,t){return function(e,t){if(!navigator)throw vL.create("only-available-in-window");return e.onMessageHandler=t,function(){e.onMessageHandler=null}}(e=je(e),t)}bt(new Ye("messaging",aF,"PUBLIC")),bt(new Ye("messaging-internal",iF,"PRIVATE")),Pt(nF,rF),Pt(nF,rF,"esm2017");var dF,fF,pF="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",hF="FCM_MSG";function vF(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,Ze.Z)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mF(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(dF||(dF={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(fF||(fF={}));var yF="fcm_token_details_db",gF="fcm_token_object_Store";function bF(e){return xF.apply(this,arguments)}function xF(){return xF=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("databases"in indexedDB)){e.next=7;break}return e.next=3,indexedDB.databases();case 3:if(n=e.sent,r=n.map((function(e){return e.name})),r.includes(yF)){e.next=7;break}return e.abrupt("return",null);case 7:return a=null,e.next=10,Ke(yF,5,function(){var e=j(G().mark((function e(n,r,i,o){var s,u,c,l,d,f;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r<2)){e.next=2;break}return e.abrupt("return");case 2:if(n.objectStoreNames.contains(gF)){e.next=4;break}return e.abrupt("return");case 4:return u=o.objectStore(gF),e.next=7,u.index("fcmSenderId").get(t);case 7:return c=e.sent,e.next=10,u.clear();case 10:if(c){e.next=12;break}return e.abrupt("return");case 12:if(2!==r){e.next=19;break}if((l=c).auth&&l.p256dh&&l.endpoint){e.next=16;break}return e.abrupt("return");case 16:a={token:l.fcmToken,createTime:null!==(s=l.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:"string"===typeof l.vapidKey?l.vapidKey:vF(l.vapidKey)}},e.next=20;break;case 19:3===r?a={token:(d=c).fcmToken,createTime:d.createTime,subscriptionOptions:{auth:vF(d.auth),p256dh:vF(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:vF(d.vapidKey)}}:4===r&&(a={token:(f=c).fcmToken,createTime:f.createTime,subscriptionOptions:{auth:vF(f.auth),p256dh:vF(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:vF(f.vapidKey)}});case 20:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=14,Ge(yF);case 14:return e.next=16,Ge("fcm_vapid_details_db");case 16:return e.next=18,Ge("undefined");case 18:return e.abrupt("return",kF(a)?a:null);case 19:case"end":return e.stop()}}),e)}))),xF.apply(this,arguments)}function kF(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var wF="firebase-messaging-store",_F=null;function TF(){return _F||(_F=Ke("firebase-messaging-database",1,(function(e,t){if(0===t)e.createObjectStore(wF)}))),_F}function SF(e){return EF.apply(this,arguments)}function EF(){return EF=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=OF(t),e.next=3,TF();case 3:return r=e.sent,e.next=6,r.transaction(wF).objectStore(wF).get(n);case 6:if(!(a=e.sent)){e.next=11;break}return e.abrupt("return",a);case 11:return e.next=13,bF(t.appConfig.senderId);case 13:if(!(i=e.sent)){e.next=18;break}return e.next=17,IF(t,i);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e)}))),EF.apply(this,arguments)}function IF(e,t){return CF.apply(this,arguments)}function CF(){return CF=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=OF(t),e.next=3,TF();case 3:return a=e.sent,i=a.transaction(wF,"readwrite"),e.next=7,i.objectStore(wF).put(n,r);case 7:return e.next=9,i.complete;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)}))),CF.apply(this,arguments)}function NF(e){return AF.apply(this,arguments)}function AF(){return AF=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=OF(t),e.next=3,TF();case 3:return r=e.sent,a=r.transaction(wF,"readwrite"),e.next=7,a.objectStore(wF).delete(n);case 7:return e.next=9,a.complete;case 9:case"end":return e.stop()}}),e)}))),AF.apply(this,arguments)}function OF(e){return e.appConfig.appId}var PF=(tF={},(0,E.Z)(tF,"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),(0,E.Z)(tF,"only-available-in-window","This method is available in a Window context."),(0,E.Z)(tF,"only-available-in-sw","This method is available in a service worker context."),(0,E.Z)(tF,"permission-default","The notification permission was not granted and dismissed instead."),(0,E.Z)(tF,"permission-blocked","The notification permission was not granted and blocked instead."),(0,E.Z)(tF,"unsupported-browser","This browser doesn't support the API's required to use the Firebase SDK."),(0,E.Z)(tF,"indexed-db-unsupported","This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)"),(0,E.Z)(tF,"failed-service-worker-registration","We are unable to register the default service worker. {$browserErrorMessage}"),(0,E.Z)(tF,"token-subscribe-failed","A problem occurred while subscribing the user to FCM: {$errorInfo}"),(0,E.Z)(tF,"token-subscribe-no-token","FCM returned no token when subscribing the user to push."),(0,E.Z)(tF,"token-unsubscribe-failed","A problem occurred while unsubscribing the user from FCM: {$errorInfo}"),(0,E.Z)(tF,"token-update-failed","A problem occurred while updating the user from FCM: {$errorInfo}"),(0,E.Z)(tF,"token-update-no-token","FCM returned no token when updating the user to push."),(0,E.Z)(tF,"use-sw-after-get-token","The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used."),(0,E.Z)(tF,"invalid-sw-registration","The input to useServiceWorker() must be a ServiceWorkerRegistration."),(0,E.Z)(tF,"invalid-bg-handler","The input to setBackgroundMessageHandler() must be a function."),(0,E.Z)(tF,"invalid-vapid-key","The public VAPID key must be a string."),(0,E.Z)(tF,"use-vapid-key-after-get-token","The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."),tF),RF=new ve("messaging","Messaging",PF);function DF(e,t){return MF.apply(this,arguments)}function MF(){return(MF=j(G().mark((function e(t,n){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VF(t);case 2:return r=e.sent,a=zF(n),i={method:"POST",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch(UF(t.appConfig),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),RF.create("token-subscribe-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw u=o.error.message,RF.create("token-subscribe-failed",{errorInfo:u});case 20:if(o.token){e.next=22;break}throw RF.create("token-subscribe-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function LF(e,t){return FF.apply(this,arguments)}function FF(){return(FF=j(G().mark((function e(t,n){var r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VF(t);case 2:return r=e.sent,a=zF(n.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(a)},e.prev=5,e.next=8,fetch("".concat(UF(t.appConfig),"/").concat(n.token),i);case 8:return s=e.sent,e.next=11,s.json();case 11:o=e.sent,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(5),RF.create("token-update-failed",{errorInfo:e.t0});case 17:if(!o.error){e.next=20;break}throw u=o.error.message,RF.create("token-update-failed",{errorInfo:u});case 20:if(o.token){e.next=22;break}throw RF.create("token-update-no-token");case 22:return e.abrupt("return",o.token);case 23:case"end":return e.stop()}}),e,null,[[5,14]])})))).apply(this,arguments)}function BF(e,t){return jF.apply(this,arguments)}function jF(){return(jF=j(G().mark((function e(t,n){var r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VF(t);case 2:return r=e.sent,a={method:"DELETE",headers:r},e.prev=4,e.next=7,fetch("".concat(UF(t.appConfig),"/").concat(n),a);case 7:return i=e.sent,e.next=10,i.json();case 10:if(!(o=e.sent).error){e.next=14;break}throw s=o.error.message,RF.create("token-unsubscribe-failed",{errorInfo:s});case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(4),RF.create("token-unsubscribe-failed",{errorInfo:e.t0});case 19:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}function UF(e){var t=e.projectId;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}function VF(e){return WF.apply(this,arguments)}function WF(){return(WF=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return a=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(a)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zF(e){var t=e.p256dh,n=e.auth,r=e.endpoint,a=e.vapidKey,i={web:{endpoint:r,auth:n,p256dh:t}};return a!==pF&&(i.web.applicationPubKey=a),i}var qF=6048e5;function KF(e){return GF.apply(this,arguments)}function GF(){return(GF=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$F(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:vF(n.getKey("auth")),p256dh:vF(n.getKey("p256dh"))},e.next=6,SF(t.firebaseDependencies);case 6:if(a=e.sent){e.next=11;break}return e.abrupt("return",QF(t.firebaseDependencies,r));case 11:if(tB(a.subscriptionOptions,r)){e.next=23;break}return e.prev=12,e.next=15,BF(t.firebaseDependencies,a.token);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.warn(e.t0);case 20:return e.abrupt("return",QF(t.firebaseDependencies,r));case 23:if(!(Date.now()>=a.createTime+qF)){e.next=27;break}return e.abrupt("return",YF(t,{token:a.token,createTime:Date.now(),subscriptionOptions:r}));case 27:return e.abrupt("return",a.token);case 28:case"end":return e.stop()}}),e,null,[[12,17]])})))).apply(this,arguments)}function HF(e){return ZF.apply(this,arguments)}function ZF(){return(ZF=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,SF(t.firebaseDependencies);case 2:if(!(n=e.sent)){e.next=8;break}return e.next=6,BF(t.firebaseDependencies,n.token);case 6:return e.next=8,NF(t.firebaseDependencies);case 8:return e.next=10,t.swRegistration.pushManager.getSubscription();case 10:if(!(r=e.sent)){e.next=13;break}return e.abrupt("return",r.unsubscribe());case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YF(e,t){return XF.apply(this,arguments)}function XF(){return(XF=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,LF(t.firebaseDependencies,n);case 3:return r=e.sent,a=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,IF(t.firebaseDependencies,a);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,HF(t);case 14:throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function QF(e,t){return JF.apply(this,arguments)}function JF(){return(JF=j(G().mark((function e(t,n){var r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DF(t,n);case 2:return r=e.sent,a={token:r,createTime:Date.now(),subscriptionOptions:n},e.next=6,IF(t,a);case 6:return e.abrupt("return",a.token);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $F(e,t){return eB.apply(this,arguments)}function eB(){return(eB=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(!(r=e.sent)){e.next=5;break}return e.abrupt("return",r);case 5:return e.abrupt("return",t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:mF(n)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tB(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,a=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&a&&i}function nB(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var a=t.notification.image;a&&(e.notification.image=a)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function rB(e){return new Promise((function(t){setTimeout(t,e)}))}function aB(e,t){return iB.apply(this,arguments)}function iB(){return(iB=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=oB,e.t1=n,e.next=4,t.firebaseDependencies.installations.getId();case 4:e.t2=e.sent,r=(0,e.t0)(e.t1,e.t2),sB(t,r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oB(e,t){var n,r,a={};return e.from&&(a.project_number=e.from),e.fcmMessageId&&(a.message_id=e.fcmMessageId),a.instance_id=t,e.notification?a.message_type=dF.DISPLAY_NOTIFICATION.toString():a.message_type=dF.DATA_MESSAGE.toString(),a.sdk_platform=3..toString(),a.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(a.collapse_key=e.collapse_key),a.event=1..toString(),(null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label)&&(a.analytics_label=null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label),a}function sB(e,t){var n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),e.logEvents.push(n)}function uB(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function cB(){return cB=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.newSubscription){e.next=5;break}return e.next=4,HF(n);case 4:return e.abrupt("return");case 5:return e.next=7,SF(n.firebaseDependencies);case 7:return i=e.sent,e.next=10,HF(n);case 10:return n.vapidKey=null!==(a=null===(r=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==a?a:pF,e.next=13,KF(n);case 13:case"end":return e.stop()}}),e)}))),cB.apply(this,arguments)}function lB(){return(lB=j(G().mark((function e(t,n){var r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pB(t)){e.next=3;break}return e.abrupt("return");case 3:if(!n.deliveryMetricsExportedToBigQueryEnabled){e.next=6;break}return e.next=6,aB(n,r);case 6:return e.next=8,gB();case 8:if(!mB(a=e.sent)){e.next=11;break}return e.abrupt("return",yB(a,r));case 11:if(!r.notification){e.next=14;break}return e.next=14,bB(fB(r));case 14:if(n){e.next=16;break}return e.abrupt("return");case 16:if(!n.onBackgroundMessageHandler){e.next=24;break}if(i=nB(r),"function"!==typeof n.onBackgroundMessageHandler){e.next=23;break}return e.next=21,n.onBackgroundMessageHandler(i);case 21:e.next=24;break;case 23:n.onBackgroundMessageHandler.next(i);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dB(){return dB=j(G().mark((function e(t){var n,r,a,i,o,s,u;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(r=null===(n=t.notification)||void 0===n?void 0:n.data)||void 0===r?void 0:r.FCM_MSG){e.next=5;break}return e.abrupt("return");case 5:if(!t.action){e.next=7;break}return e.abrupt("return");case 7:if(t.stopImmediatePropagation(),t.notification.close(),i=xB(a)){e.next=12;break}return e.abrupt("return");case 12:if(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host===s.host){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,hB(o);case 18:if(u=e.sent){e.next=27;break}return e.next=22,self.clients.openWindow(i);case 22:return u=e.sent,e.next=25,rB(3e3);case 25:e.next=30;break;case 27:return e.next=29,u.focus();case 29:u=e.sent;case 30:if(u){e.next=32;break}return e.abrupt("return");case 32:return a.messageType=fF.NOTIFICATION_CLICKED,a.isFirebaseMessaging=!0,e.abrupt("return",u.postMessage(a));case 35:case"end":return e.stop()}}),e)}))),dB.apply(this,arguments)}function fB(e){var t=Object.assign({},e.notification);return t.data=(0,E.Z)({},hF,e),t}function pB(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function hB(e){return vB.apply(this,arguments)}function vB(){return(vB=j(G().mark((function e(t){var n,r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gB();case 2:n=e.sent,r=V(n),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=13;break}if(i=a.value,o=new URL(i.url,self.location.href),t.host!==o.host){e.next=11;break}return e.abrupt("return",i);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[4,15,18,21]])})))).apply(this,arguments)}function mB(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}function yB(e,t){t.isFirebaseMessaging=!0,t.messageType=fF.PUSH_RECEIVED;var n,r=V(e);try{for(r.s();!(n=r.n()).done;){n.value.postMessage(t)}}catch(a){r.e(a)}finally{r.f()}}function gB(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function bB(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports ".concat(r," actions. The remaining actions will not be displayed.")),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function xB(e){var t,n,r,a,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||("object"===typeof(a=e.data)&&a&&"google.c.a.c_id"in a?self.location.origin:null)}function kB(e){return RF.create("missing-app-config-values",{valueName:e})}uB("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),uB("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var wB=function(){function e(t,n,r){I(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var a=function(e){if(!e||!e.options)throw kB("App Configuration Object");if(!e.name)throw kB("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var a=r[n];if(!t[a])throw kB(a)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:a,installations:n,analyticsProvider:r}}return N(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}(),_B=function(e){var t=new wB(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(function(e){e.waitUntil(function(e,t){return lB.apply(this,arguments)}(e,t))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(function(e,t){return cB.apply(this,arguments)}(e,t))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(function(e){return dB.apply(this,arguments)}(e))})),t};function TB(e,t){return function(e,t){if(void 0!==self.document)throw RF.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,function(){e.onBackgroundMessageHandler=null}}(e=je(e),t)}bt(new Ye("messaging-sw",_B,"PUBLIC"));var SB=function(){function e(t,n){I(this,e),this.app=t,this._delegate=n,this.app=t,this._delegate=n}return N(e,[{key:"getToken",value:function(){var e=j(K.mark((function e(t){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",sF(this._delegate,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteToken",value:function(){var e=j(K.mark((function e(){return K.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cF(this._delegate));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onMessage",value:function(e){return lF(this._delegate,e)}},{key:"onBackgroundMessage",value:function(e){return TB(this._delegate,e)}}]),e}(),EB=function(e){return self&&"ServiceWorkerGlobalScope"in self?new SB(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()):new SB(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate())},IB={isSupported:function(){return self&&"ServiceWorkerGlobalScope"in self?pe()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"undefined"!==typeof window&&pe()&&!("undefined"===typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}};nn.INTERNAL.registerComponent(new Ye("messaging-compat",EB,"PUBLIC").setServiceProps(IB)),nn.registerVersion("@firebase/messaging-compat","0.1.10");function CB(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function NB(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map((function(e){return NB(e)}));if("function"===typeof e||"object"===typeof e)return CB(e,(function(e){return NB(e)}));throw new Error("Data cannot be encoded in JSON: "+e)}function AB(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return AB(e)})):"function"===typeof e||"object"===typeof e?CB(e,(function(e){return AB(e)})):e}var OB="functions",PB={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},RB=function(e){P(n,e);var t=F(n);function n(e,r,a){var i;return I(this,n),(i=t.call(this,"".concat(OB,"/").concat(e),r||"")).details=a,i}return N(n)}(he);function DB(e,t){var n=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),r=n,a=void 0;try{var i=t&&t.error;if(i){var o=i.status;if("string"===typeof o){if(!PB[o])return new RB("internal","internal");n=PB[o],r=o}var s=i.message;"string"===typeof s&&(r=s),void 0!==(a=i.details)&&(a=AB(a))}}catch(u){}return"ok"===n?null:new RB(n,r,a)}var MB=function(){function e(t,n,r){var a=this;I(this,e),this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then((function(e){return a.auth=e}),(function(){})),this.messaging||n.get().then((function(e){return a.messaging=e}),(function(){})),this.appCheck||r.get().then((function(e){return a.appCheck=e}),(function(){}))}return N(e,[{key:"getAuthToken",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.auth.getToken();case 5:return t=e.sent,e.abrupt("return",null===t||void 0===t?void 0:t.accessToken);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getMessagingToken",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.messaging&&"Notification"in self&&"granted"===Notification.permission){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,this.messaging.getToken();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",void 0);case 11:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"getAppCheckToken",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.appCheck){e.next=7;break}return e.next=3,this.appCheck.getToken();case 3:if(!(t=e.sent).error){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",t.token);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContext",value:function(){var e=j(G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAuthToken();case 2:return t=e.sent,e.next=5,this.getMessagingToken();case 5:return n=e.sent,e.next=8,this.getAppCheckToken();case 8:return r=e.sent,e.abrupt("return",{authToken:t,messagingToken:n,appCheckToken:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),LB="us-central1";function FB(e){var t=null;return{promise:new Promise((function(n,r){t=setTimeout((function(){r(new RB("deadline-exceeded","deadline-exceeded"))}),e)})),cancel:function(){t&&clearTimeout(t)}}}var BB=function(){function e(t,n,r,a){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:LB,s=arguments.length>5?arguments[5]:void 0;I(this,e),this.app=t,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new MB(n,r,a),this.cancelAllRequests=new Promise((function(e){i.deleteService=function(){return Promise.resolve(e())}}));try{var u=new URL(o);this.customDomain=u.origin,this.region=LB}catch(c){this.customDomain=null,this.region=o}}return N(e,[{key:"_delete",value:function(){return this.deleteService()}},{key:"_url",value:function(e){var t=this.app.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}]),e}();function jB(e,t,n){return function(r){return function(e,t,n,r){return WB.apply(this,arguments)}(e,t,r,n||{})}}function UB(e,t,n,r){return VB.apply(this,arguments)}function VB(){return VB=j(G().mark((function e(t,n,r,a){var i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r["Content-Type"]="application/json",e.prev=1,e.next=4,a(t,{method:"POST",body:JSON.stringify(n),headers:r});case 4:i=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",{status:0,json:null});case 10:return o=null,e.prev=11,e.next=14,i.json();case 14:o=e.sent,e.next=19;break;case 17:e.prev=17,e.t1=e.catch(11);case 19:return e.abrupt("return",{status:i.status,json:o});case 20:case"end":return e.stop()}}),e,null,[[1,7],[11,17]])}))),VB.apply(this,arguments)}function WB(){return WB=j(G().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t._url(n),r=NB(r),o={data:r},s={},e.next=6,t.contextProvider.getContext();case 6:return(u=e.sent).authToken&&(s.Authorization="Bearer "+u.authToken),u.messagingToken&&(s["Firebase-Instance-ID-Token"]=u.messagingToken),null!==u.appCheckToken&&(s["X-Firebase-AppCheck"]=u.appCheckToken),c=a.timeout||7e4,l=FB(c),e.next=14,Promise.race([UB(i,o,s,t.fetchImpl),l.promise,t.cancelAllRequests]);case 14:if(d=e.sent,l.cancel(),d){e.next=18;break}throw new RB("cancelled","Firebase Functions instance was deleted.");case 18:if(!(f=DB(d.status,d.json))){e.next=21;break}throw f;case 21:if(d.json){e.next=23;break}throw new RB("internal","Response is not valid JSON object.");case 23:if("undefined"===typeof(p=d.json.data)&&(p=d.json.result),"undefined"!==typeof p){e.next=27;break}throw new RB("internal","Response is missing data field.");case 27:return h=AB(p),e.abrupt("return",{data:h});case 29:case"end":return e.stop()}}),e)}))),WB.apply(this,arguments)}var zB="@firebase/functions",qB="0.7.9";function KB(e,t,n){!function(e,t,n){e.emulatorOrigin="http://".concat(t,":").concat(n)}(je(e),t,n)}!function(e,t){bt(new Ye(OB,(function(t,n){var r=n.instanceIdentifier,a=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("messaging-internal"),s=t.getProvider("app-check-internal");return new BB(a,i,o,s,r,e)}),"PUBLIC").setMultipleInstances(!0)),Pt(zB,qB,t),Pt(zB,qB,"esm2017")}(fetch.bind(self));var GB=function(){function e(t,n){I(this,e),this.app=t,this._delegate=n,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}return N(e,[{key:"httpsCallable",value:function(e,t){return function(e,t,n){return jB(je(e),t,n)}(this._delegate,e,t)}},{key:"useFunctionsEmulator",value:function(e){var t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(null==t)throw new he("functions","No origin provided to useFunctionsEmulator()");if(null==t[2])throw new he("functions","Port missing in origin provided to useFunctionsEmulator()");return KB(this._delegate,t[1],Number(t[2]))}},{key:"useEmulator",value:function(e,t){return KB(this._delegate,e,t)}}]),e}(),HB=function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),a=e.getProvider("functions").getImmediate({identifier:null!==n&&void 0!==n?n:"us-central1"});return new GB(r,a)};!function(){var e={Functions:GB};nn.INTERNAL.registerComponent(new Ye("functions-compat",HB,"PUBLIC").setServiceProps(e).setMultipleInstances(!0))}(),nn.registerVersion("@firebase/functions-compat","0.1.10");for(var ZB=nn.initializeApp({apiKey:"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE",authDomain:"ghost-f8b34.firebaseapp.com",projectId:"ghost-f8b34",storageBucket:"ghost-f8b34.appspot.com",messagingSenderId:"838623299070",appId:"1:838623299070:web:b73429fee525b7c01cacaf",measurementId:"G-85ZG5FVKQ4"}).firestore(),YB=nn.auth(),XB=nn.storage(),QB=new nn.auth.GoogleAuthProvider,JB=n(1065),$B=n(8894),ej=n(173),tj=n(1642),nj=n(5545),rj=n(5403),aj=n(3911),ij=n(7750),oj=n(2094),sj=n(184),uj=((0,$B.yP)(JB.ZP),[]),cj=0;cj<200;cj++)uj.push((0,sj.jsx)("h1",{children:"filler"}));var lj=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).updateDimensions=function(){r.setState({width:window.innerWidth,height:window.innerHeight})},r.state={height:window.innerHeight,width:window.innerWidth,index:0,top:!0,bgColor:"transparent",hide:!0},r.updateDimensions=r.updateDimensions.bind(A(r)),r.changeToIndex=r.changeToIndex.bind(A(r)),r.handleScroll=r.handleScroll.bind(A(r)),r.changeOnSwitch=r.changeOnSwitch.bind(A(r)),r.checkIndex=r.checkIndex.bind(A(r)),r.closeMenu=r.closeMenu.bind(A(r)),r}return N(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.updateDimensions),window.addEventListener("scroll",this.handleScroll,!0)}},{key:"componentDidUpdate",value:function(e){var t=this;e.open!==this.props.open&&(!0===this.props.open&&(this.setState({hide:!1},(function(){return setTimeout((function(){return t.changeToIndex(1)}),0)})),this.setState({top:!0})),!1===this.props.open&&this.changeToIndex(0))}},{key:"changeToIndex",value:function(e){this.setState({index:e}),this.setState({bgColor:"transparent"})}},{key:"handleScroll",value:function(e){var t=e.target;"y"===this.props.axis&&(t.scrollTop<=0?this.setState({top:!0}):this.setState({top:!1}))}},{key:"changeOnSwitch",value:function(){this.setState({bgColor:"transparent"})}},{key:"closeMenu",value:function(){this.changeToIndex(0)}},{key:"checkIndex",value:function(){0===this.state.index&&(this.setState({hide:!0}),!0===this.props.open&&this.props.close()),this.state.index>=1&&this.setState({bgColor:"white"})}},{key:"render",value:function(){var e=this.state,t=e.height,n=e.width,r=e.index,a=e.top,i=e.hide,o=e.bgColor,s=this.props,u=s.children,c=s.title,l=s.axis,d=s.disabled,f=(sj.Fragment,!i&&(this.changeOnSwitch,this.changeToIndex,this.checkIndex,this.handleScroll,this.closeMenu),(0,sj.jsx)(sj.Fragment,{children:!i&&(0,sj.jsx)("div",{className:"sliding-menu",style:{height:t,width:n,backgroundColor:o},children:(0,sj.jsxs)(JB.ZP,{containerStyle:{height:t,width:n},axis:l,disabled:!a||d,onSwitching:this.changeOnSwitch,onChangeIndex:this.changeToIndex,onTransitionEnd:this.checkIndex,index:r,enableMouseEvents:!0,children:[(0,sj.jsx)("div",{style:{height:t,width:n}}),(0,sj.jsx)("div",{onScroll:this.handleScroll,style:{backgroundColor:"white",height:t,width:n},children:(0,sj.jsxs)("div",{style:{backgroundColor:"white"},children:[(0,sj.jsx)(Tj,{position:"fixed",hidden:!1,Parenttitle:c,close:this.closeMenu,axis:l}),u]})})]})})}));return(0,sj.jsx)(sj.Fragment,{children:f})}}]),n}(_.Component);lj.defaultProps={title:"",axis:"y",disabled:!1,keyboard:!0};var dj=lj,fj=n(5172),pj=n(8996),hj=n(4147).version,vj=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).signOut=r.signOut.bind(A(r)),r.signIn=r.signIn.bind(A(r)),r}return N(n,[{key:"signOut",value:function(){this.props.GsignOut(),this.props.close()}},{key:"signIn",value:function(){this.props.GsignIn(),this.props.close()}},{key:"render",value:function(){var e=this.props.userDoc;return(0,sj.jsxs)("main",{className:"main",children:[(0,sj.jsxs)("div",{className:"section info",children:[(0,sj.jsxs)("div",{className:"row",children:[(0,sj.jsx)("div",{className:"pic-container",children:(0,sj.jsx)("img",{src:e.profile_pic_url,style:{borderRadius:"1rem",marginRight:"1rem"},alt:""})}),(0,sj.jsxs)("div",{className:"col",children:[(0,sj.jsx)("h1",{children:e.name}),(0,sj.jsx)("i",{children:(0,sj.jsx)("h5",{children:e.username})})]})]}),(0,sj.jsxs)("div",{className:"row",style:{justifyContent:"space-between"},children:[(0,sj.jsxs)("h5",{children:["Total: ",e.sent+e.received]}),(0,sj.jsxs)("h5",{children:["Sent: ",e.sent]}),(0,sj.jsxs)("h5",{children:["Received: ",e.received]})]})]}),0===Object.keys(e.friends).filter((function(t){return t!==e.id})).length?null:(0,sj.jsxs)("div",{className:"section",children:[(0,sj.jsx)("h1",{children:"Friends"}),(0,sj.jsx)("div",{className:"col",style:{justifyContent:"center"},children:Object.keys(e.friends).filter((function(t){return t!==e.id})).sort().map((function(t){return(0,sj.jsx)("h3",{children:e.friends[t].name})}))})]}),(0,sj.jsxs)("div",{className:"section snapMap",children:[(0,sj.jsx)("h1",{children:"Snap Map"}),(0,sj.jsx)("img",{src:"https://media.npr.org/assets/img/2017/06/30/snapchat-world_custom-7763b62a81588d5def16ef6335a573d94e0dc908.jpg"})]}),(0,sj.jsx)("div",{className:"section",style:{justifyContent:"center"},children:(0,sj.jsx)("div",{className:"row",style:{justifyContent:"center"},children:"N/A"!==e.created&&(0,sj.jsxs)("h3",{children:["Joined Snapchat Clone on ",e.created]})})}),(0,sj.jsx)("div",{className:"section",children:(0,sj.jsx)("div",{className:"row",style:{justifyContent:"center"},children:"Guest"===e.name?(0,sj.jsx)("button",{onClick:this.signIn,className:"login",children:(0,sj.jsx)("h2",{children:"Login"})}):(0,sj.jsx)("button",{onClick:this.signOut,className:"logout",children:(0,sj.jsx)("h2",{children:"Logout"})})})}),(0,sj.jsx)("div",{className:"section",children:(0,sj.jsx)("div",{className:"row",style:{justifyContent:"center"},children:(0,sj.jsxs)("p",{children:["Project Yellow Ghost v",hj]})})})]})}}]),n}(_.Component),mj=n(2424),yj=function(e){P(n,e);var t=F(n);function n(){return I(this,n),t.apply(this,arguments)}return N(n,[{key:"render",value:function(){var e=this.props,t=e.peopleList,n=e.userDoc,r=e.edit_friends;return(0,sj.jsx)("main",{className:"main",children:(0,sj.jsx)(gj,{userDoc:n,friends:n.friends,pending:n.pending,strangers:t.strangers,everyone:t.everyone,edit_friends:r,email:n.email,added_me:n.added_me})})}}]),n}(_.Component);function gj(e){var t=e.strangers;return Object.keys(e.added_me).forEach((function(e){delete t[e]})),(0,sj.jsxs)("div",{className:"screen",children:[(0,sj.jsxs)("h3",{className:"friend-head",children:["Quick Add (",Object.keys(e.strangers).length,")"]}),(0,sj.jsx)("ul",{className:"friend-list-container",children:Object.keys(t).sort().map((function(n){return(0,sj.jsx)(kj,{strangers:t,k:n,edit_friends:e.edit_friends})}))}),0===Object.keys(t).length?(0,sj.jsx)("p",{children:"You are friends with everyone"}):null,0===Object.keys(e.added_me).length?null:(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)("h3",{className:"friend-head",children:["Added Me (",Object.keys(e.added_me).length,")"]}),(0,sj.jsx)("ul",{className:"friend-list-container",children:Object.keys(e.added_me).sort().map((function(t){return(0,sj.jsx)(xj,{added_me:e.added_me,k:t,edit_friends:e.edit_friends})}))})]}),(0,sj.jsxs)("h3",{className:"friend-head",children:["Friends (",Object.keys(e.friends).length-1,")"]}),(0,sj.jsx)("ul",{className:"friend-list-container",children:Object.keys(e.friends).filter((function(t){return t!==e.userDoc.id})).sort().map((function(t){return(0,sj.jsx)(bj,{friends:e.friends,k:t,edit_friends:e.edit_friends,email:e.email})}))}),Object.keys(e.friends).length-1===0?(0,sj.jsx)("p",{children:"Add some friends!"}):null,(0,sj.jsxs)("h3",{className:"friend-head",children:["Everyone (",Object.keys(e.everyone).length,")"]}),(0,sj.jsx)("ul",{className:"friend-list-container",children:Object.keys(e.everyone).sort().map((function(t){return(0,sj.jsx)(wj,{everyone:e.everyone,k:t})}))}),(0,sj.jsx)("div",{className:"footer"})]})}function bj(e){var t=e.friends,n=e.k;return(0,sj.jsx)(sj.Fragment,{children:e.email===n?null:(0,sj.jsxs)("li",{className:"item-container",children:[(0,sj.jsxs)("div",{className:"pic-info-mix",children:[(0,sj.jsx)("div",{className:"pic-container",children:(0,sj.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url,alt:""})}),(0,sj.jsxs)("div",{className:"friend-info",children:[(0,sj.jsx)("h2",{children:t[n].name}),(0,sj.jsx)("p",{style:{fontSize:"0.9rem"},children:t[n].username})]})]}),(0,sj.jsx)("div",{className:"friend-button",children:e.email===n?null:"pending"===t[n].status?(0,sj.jsx)("button",{onClick:function(){return e.edit_friends("remove request",n,t[n])},children:"Remove Request"}):(0,sj.jsx)("button",{onClick:function(){return e.edit_friends("remove",n,t[n])},children:"Remove"})})]})})}function xj(e){var t=e.added_me,n=e.k;return(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("li",{className:"item-container",children:[(0,sj.jsxs)("div",{className:"pic-info-mix",children:[(0,sj.jsx)("div",{className:"pic-container",children:(0,sj.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url,alt:""})}),(0,sj.jsxs)("div",{className:"friend-info",children:[(0,sj.jsx)("h2",{children:t[n].name}),(0,sj.jsx)("p",{style:{fontSize:"0.9rem"},children:t[n].username})]})]}),(0,sj.jsx)("div",{className:"friend-button",children:(0,sj.jsxs)("button",{onClick:function(){return e.edit_friends("accept request",n,t[n])},children:[(0,sj.jsx)("img",{alt:"add friend",className:"add-friend-list-icon",src:mj}),"Add"]})})]})})}function kj(e){var t=e.strangers,n=e.k;return(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("li",{className:"item-container",children:[(0,sj.jsxs)("div",{className:"pic-info-mix",children:[(0,sj.jsx)("div",{className:"pic-container",children:(0,sj.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url,alt:""})}),(0,sj.jsxs)("div",{className:"friend-info",children:[(0,sj.jsx)("h2",{children:t[n].name}),(0,sj.jsx)("p",{style:{fontSize:"0.9rem"},children:t[n].username})]})]}),(0,sj.jsx)("div",{className:"friend-button",children:(0,sj.jsxs)("button",{onClick:function(){return e.edit_friends("add",n,t[n])},children:[(0,sj.jsx)("img",{className:"add-friend-list-icon",src:mj,alt:"add friend list icon"}),"Add"]})})]})})}function wj(e){var t=e.everyone,n=e.k;return(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("li",{className:"item-container",children:[(0,sj.jsxs)("div",{className:"pic-info-mix",children:[(0,sj.jsx)("div",{className:"pic-container",children:(0,sj.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url,alt:""})}),(0,sj.jsxs)("div",{className:"friend-info",children:[(0,sj.jsx)("h2",{children:t[n].name}),(0,sj.jsx)("p",{style:{fontSize:"0.9rem"},children:t[n].username})]})]}),(0,sj.jsx)("div",{className:"friend-button"})]})})}function _j(e){var t=e.position,n=e.index,r=e.incFlipCam,a=e.close,i=e.Parenttitle,o=e.axis,s=e.hidden,u=e.GsignIn,c=e.GsignOut,l=e.userDoc,d=e.peopleList,f=e.edit_friends,p="",h=(0,sj.jsx)(fj.Z,{});"x"===o?h=(0,sj.jsx)(pj.Z,{}):"y"===o&&(h=(0,sj.jsx)(fj.Z,{}));var v=(0,_.useState)(!1),m=(0,W.Z)(v,2),y=m[0],g=m[1],b=(0,_.useState)(!1),x=(0,W.Z)(b,2),k=x[0],w=x[1],T=(0,_.useState)(!1),S=(0,W.Z)(T,2),E=S[0],I=S[1],C=(0,_.useState)(!1),N=(0,W.Z)(C,2),A=N[0],O=N[1],P=function(){O(!A)},R=(0,sj.jsx)("button",{onClick:P,children:(0,sj.jsx)(oj.Z,{})}),D={shawdow:{backgroundColor:"white",boxShadow:"0 0.1rem 1rem black"},transparent:{backgroundColor:"transparent",boxShadow:"0 0rem 0rem black"}};0===n&&(p="Chat"),1===n&&(R=(0,sj.jsx)("button",{onClick:r,children:(0,sj.jsx)(aj.Z,{})})),2===n&&(p="Discover");var M=function(){g(!y)},L=function(){w(!k)},F=function(){I(!E)};return"fixed"===t?(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("ul",{className:"main-navbar "+(s?"ghost":"navbar-fixed"),children:[(0,sj.jsx)("li",{children:(0,sj.jsx)("ul",{children:(0,sj.jsx)("li",{children:(0,sj.jsx)("button",{onClick:a,children:h})})})}),(0,sj.jsx)("li",{children:(0,sj.jsx)("h1",{children:i})}),(0,sj.jsx)("li",{children:(0,sj.jsx)("ul",{children:(0,sj.jsx)("li",{style:{opacity:0},children:(0,sj.jsx)("button",{children:(0,sj.jsx)(ij.Z,{})})})})})]})}):(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)("ul",{className:"main-navbar "+(s?"ghost":"floating-navbar"),style:1===n?D.transparent:D.shawdow,children:[(0,sj.jsx)("li",{children:(0,sj.jsxs)("ul",{children:[(0,sj.jsx)("li",{children:(0,sj.jsx)("button",{onClick:M,children:(0,sj.jsx)(nj.Z,{})})}),(0,sj.jsx)("li",{children:(0,sj.jsx)("button",{onClick:F,children:(0,sj.jsx)(rj.Z,{})})})]})}),(0,sj.jsx)("li",{children:(0,sj.jsx)("h1",{children:p})}),(0,sj.jsx)("li",{children:(0,sj.jsxs)("ul",{children:[(0,sj.jsx)("li",{children:(0,sj.jsx)("button",{onClick:L,children:(0,sj.jsx)(ij.Z,{})})}),(0,sj.jsx)("li",{children:R})]})})]}),!s&&(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)(dj,{open:y,close:M,title:"Account",axis:"x",children:[(0,sj.jsx)(_j,{position:"fixed"}),(0,sj.jsx)(vj,{close:M,GsignIn:u,GsignOut:c,userDoc:l})]}),(0,sj.jsxs)(dj,{open:E,close:F,title:"Search",children:[(0,sj.jsx)(_j,{position:"fixed"}),(0,sj.jsx)("h1",{children:"Searchs"})]}),(0,sj.jsxs)(dj,{open:k,close:L,title:"Add Friends",children:[(0,sj.jsx)(_j,{position:"fixed"}),(0,sj.jsx)(yj,{userDoc:l,peopleList:d,edit_friends:f})]}),(0,sj.jsxs)(dj,{open:A,close:P,title:"Extra",children:[(0,sj.jsx)(_j,{position:"fixed"}),(0,sj.jsx)("h1",{children:"Extra"})]})]})]})}_j.defaultProps={hidden:!0};var Tj=_j,Sj=n(8477),Ej=n(8365),Ij=n(8243);function Cj(e){var t,n=e.index,r=e.changeToIndex;return t="relative"===e.type?(0,sj.jsx)("ul",{className:"main-footer relative-footer",children:(0,sj.jsx)("li",{children:0===n?(0,sj.jsx)("button",{disabled:!0,onClick:function(){return r(0)},style:{backgroundColor:"lightblue"},children:(0,sj.jsx)(Sj.Z,{})}):(0,sj.jsx)("button",{onClick:function(){return r(0)},children:(0,sj.jsx)(Sj.Z,{})})})}):(0,sj.jsxs)("ul",{className:"main-footer floating-footer",children:[(0,sj.jsx)("li",{children:0===n?(0,sj.jsx)("button",{onClick:function(){return r(0)},style:{backgroundColor:"lightblue"},children:(0,sj.jsx)(Sj.Z,{})}):(0,sj.jsx)("button",{onClick:function(){return r(0)},children:(0,sj.jsx)(Sj.Z,{})})}),(0,sj.jsx)("li",{children:1===n?(0,sj.jsx)("button",{onClick:function(){return r(1)},style:{backgroundColor:"yellow"},children:(0,sj.jsx)(Ej.Z,{})}):(0,sj.jsx)("button",{onClick:function(){return r(1)},children:(0,sj.jsx)(Ej.Z,{})})}),(0,sj.jsx)("li",{children:2===n?(0,sj.jsx)("button",{onClick:function(){return r(2)},style:{backgroundColor:"mediumSlateBlue"},children:(0,sj.jsx)(Ij.Z,{})}):(0,sj.jsx)("button",{onClick:function(){return r(2)},children:(0,sj.jsx)(Ij.Z,{})})})]}),(0,sj.jsx)(sj.Fragment,{children:t})}var Nj=n(2007),Aj=n.n(Nj),Oj=n(8937);function Pj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pj(Object(n),!0).forEach((function(t){(0,E.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pj(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dj=n(3366);function Mj(e,t,n){return e+" "+(1!==e?t+"s":t)+" "+n}function Lj(e){var t=new Date(e);if(!Number.isNaN(t.valueOf()))return t;var n=String(e).match(/\d+/g);if(null==n||n.length<=2)return t;var r=n.map((function(e){return parseInt(e)})),a=sn(r),i=a[0],o=a[1],s=a.slice(2),u=[i,o-1].concat((0,Ze.Z)(s));return new Date(Date.UTC.apply(Date,(0,Ze.Z)(u)))}var Fj=["date","formatter","component","live","minPeriod","maxPeriod","title","now"];function Bj(){return Bj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bj.apply(this,arguments)}var jj=3600,Uj=86400,Vj=7*Uj,Wj=30*Uj,zj=365*Uj;function qj(e){var t=e.date,n=e.formatter,r=void 0===n?Mj:n,a=e.component,i=void 0===a?"time":a,o=e.live,s=void 0===o||o,u=e.minPeriod,c=void 0===u?0:u,l=e.maxPeriod,d=void 0===l?Vj:l,f=e.title,p=e.now,h=void 0===p?function(){return Date.now()}:p,v=function(e,t){if(null==e)return{};var n,r,a=(0,Dj.Z)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Fj),m=function(){var e=(0,_.useState)(0),t=(0,W.Z)(e,2),n=(t[0],t[1]);return(0,_.useCallback)((function(){n((function(e){return e+1}))}),[])}();(0,_.useEffect)((function(){if(s){var e;return function n(r){var a=Lj(t).valueOf();if(a){var i=h(),o=Math.round(Math.abs(i-a)/1e3),s=o<60?1e3:o<jj?6e4:o<Uj?36e5:6048e5,u=Math.min(Math.max(s,1e3*c),1e3*d);u&&(e&&clearTimeout(e),e=setTimeout(n,u)),r||m()}else console.warn("[react-timeago] Invalid Date provided")}(!0),function(){clearTimeout(e)}}}),[t,m,s,d,c,h]);var y=i,g=Lj(t).valueOf();if(!g)return null;var b=h(),x=Math.round(Math.abs(b-g)/1e3),k=g<b?"ago":"from now",w=x<60?[Math.round(x),"second"]:x<jj?[Math.round(x/60),"minute"]:x<Uj?[Math.round(x/jj),"hour"]:x<Vj?[Math.round(x/Uj),"day"]:x<Wj?[Math.round(x/Vj),"week"]:x<zj?[Math.round(x/Wj),"month"]:[Math.round(x/zj),"year"],T=(0,W.Z)(w,2),S=T[0],E=T[1],I="undefined"===typeof f?"string"===typeof t?t:Lj(t).toISOString().substr(0,16).replace("T"," "):f,C="time"===y?Rj(Rj({},v),{},{dateTime:Lj(t).toISOString()}):v,N=Mj.bind(null,S,E,k);return _.createElement(y,Bj({},C,{title:I}),r(S,E,k,g,N,h))}function Kj(e){var t,n=e.friend,r=e.streak_emoji,a=e.disableNavFootSlide,i=e.userDoc,o=e.height,s=e.width,u=e.loggedIn,c=e.toggleSnapShot,l=(0,_.useState)(9/16),d=(0,W.Z)(l,2),f=(d[0],d[1]),p=(0,_.useState)([]),h=(0,W.Z)(p,2),v=(h[0],h[1],(0,_.useState)(null)),m=(0,W.Z)(v,2),y=m[0],g=m[1],b=(0,_.useState)(null),x=(0,W.Z)(b,2),k=x[0],w=x[1],T=(0,_.useState)(!1),S=(0,W.Z)(T,2),I=S[0],C=S[1],N="message-"+n.status,A={"new-friend":"New Friend!",new:"New Snap",received:"Received",sent:"Sent",opened:"Opened",pending:"Pending","not-friends":"Unfriended You",blocked:"Blocked"}[n.status];t={"not-friends":"\ud83d\udc94",blocked:"\u26d4",pending:"\u23f3"}[n.status];var O=function(){if(u)if(c(!1),Object.keys(n.snaps).length>0){var e,t=n.snaps[Object.keys(n.snaps)[0]].id;w(t),ZB.collection("Photos").doc(t).get().then((function(e){g(e.data().image_url),a(!0)}));var r=i,o=Object.keys(n.snaps)[0];delete r.friends[n.id].snaps[o],ZB.collection("Users").doc(i.id).update((e={},(0,E.Z)(e,"friends.".concat(n.id,".snaps"),r.friends[n.id].snaps),(0,E.Z)(e,"received",nn.firestore.FieldValue.increment(1)),e)).then((function(){if(Object.keys(r.friends[n.id].snaps).length<=0){var e,t,a=(new Date).toLocaleString();ZB.collection("Users").doc(n.id).update((e={},(0,E.Z)(e,"friends.".concat(i.id,".status"),"opened"),(0,E.Z)(e,"friends.".concat(i.id,".last_time_stamp"),a),(0,E.Z)(e,"friends.".concat(i.id,".streakRef"),a),e)),ZB.collection("Users").doc(i.id).update((t={},(0,E.Z)(t,"friends.".concat(n.id,".status"),"received"),(0,E.Z)(t,"friends.".concat(n.id,".last_time_stamp"),a),(0,E.Z)(t,"friends.".concat(n.id,".snaps"),[]),(0,E.Z)(t,"friends.".concat(n.id,".streakRef"),a),t))}})),ZB.collection("Photos").doc(t).get().then((function(e){e.data().sent.length<=1?(C(!0),ZB.collection("Users").doc(i.id).update({deleteSnaps:nn.firestore.FieldValue.arrayUnion(t)})):(C(!1),ZB.collection("Photos").doc(t).update({sent:nn.firestore.FieldValue.arrayRemove(i.id)}))}))}else{var s;(new Date).toLocaleString();ZB.collection("Users").doc(i.id).update((s={},(0,E.Z)(s,"friends.".concat(n.id,".status"),"received"),(0,E.Z)(s,"friends.".concat(n.id,".snaps"),[]),s))}else{var l=Object.keys(n.snaps).sort()[0];g(n.snaps[l].src),a(!0),i.received+=1}},P=function(e){ZB.collection("Photos").doc(e).delete(),XB.ref("posts/".concat(e)).delete()};return(0,_.useEffect)((function(){f(9/16),y&&(!1===ej.tq?window.innerHeight/window.innerWidth>16/9?(document.getElementById("receivedImg").style.height="auto",document.getElementById("receivedImg").style.width="100%"):(document.getElementById("receivedImg").style.height="100%",document.getElementById("receivedImg").style.width="auto"):null!==document.getElementById("receivedImg")&&(o>s?(f(o/s),document.getElementById("receivedImg").style.height="100%",document.getElementById("receivedImg").style.width="auto"):(f(o/s*1.7),document.getElementById("receivedImg").style.height="100%",document.getElementById("receivedImg").style.width="auto")))}),[o,s,y]),(0,sj.jsx)(sj.Fragment,{children:y?(0,sj.jsx)("div",{className:"img-overlay",style:{height:o,width:s},onClick:function(){if(u)k&&I&&(P(k),ZB.collection("Users").doc(i.id).update({deleteSnaps:nn.firestore.FieldValue.arrayRemove(k)})),Object.keys(n.snaps).length<=0?(c(!0),g(null),a(!1)):O();else{var e=Object.keys(n.snaps).sort()[0];delete n.snaps[e],Object.keys(n.snaps).length>0?O():(n.status="received",g(null),a(!1))}},children:(0,sj.jsx)("img",{id:"receivedImg",src:y})}):(0,sj.jsxs)("li",{className:"message-main row",onClick:"new"===n.status?O:null,children:[(0,sj.jsx)("div",{className:"row",children:(0,sj.jsx)("img",{className:"friend-profile-pic",src:null===n.profile_pic_url?Oj:n.profile_pic_url,alt:""})}),(0,sj.jsxs)("div",{className:"col",children:[(0,sj.jsx)("h3",{children:n.name}),(0,sj.jsxs)("div",{className:"message-info",children:[(0,sj.jsxs)("div",{className:"message-info-container",children:[t?(0,sj.jsx)("p",{children:t}):(0,sj.jsx)("div",{className:N}),(0,sj.jsx)("h5",{children:A})]}),(0,sj.jsx)("h5",{className:"time-stamp",children:n.last_time_stamp&&"not-friends"!==n.status?(0,sj.jsxs)(sj.Fragment,{children:[" ",(0,sj.jsx)("div",{className:"separator"})," ",(0,sj.jsx)(qj,{date:n.last_time_stamp})," "]}):null}),(0,sj.jsx)("div",{className:"row",children:null===n.streak?null:(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)("div",{className:"separator",style:{marginRight:"0.3rem"}}),(0,sj.jsx)("h5",{children:n.streak}),(0,sj.jsx)("h5",{children:i.streak_emoji?i.streak_emoji:r})]})})]})]})]})})}Kj.defaultProps={friend:{created:"today",profile_pic_url:Oj,name:"Guest",status:"new-friend",streak:0,sent:0,received:0,last_time_stamp:null,snaps:[]},streak_emoji:"\ud83d\udd25",pic:"Guest",email:"Guest@Guest.com,",key:"Guest@Guest.com,"},Kj.requiredProps={friend:Aj().shape({created:Aj().string,profile_pic_url:Aj().string,name:Aj().string,status:Aj().string,streak:Aj().number,sent:Aj().number,received:Aj().number,last_time_stamp:Aj().string,snaps:Aj().arrayOf(Aj().string)}),streak_emoji:Aj().string,pic:Aj().string,email:Aj().string,key:Aj().string};for(var Gj=[],Hj=0;Hj<30;Hj+=1)Gj.push((0,sj.jsx)(Kj,{}));var Zj=function(e){var t=e.userDoc,n=e.disableNavFootSlide,r=e.height,a=e.width,i=e.loggedIn,o=e.toggleSnapShot;return(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("ul",{className:"messages-container",children:[!i&&(0,sj.jsx)("li",{children:(0,sj.jsx)("div",{className:"guest_message",children:(0,sj.jsx)("h4",{children:"Welcome to Project Yellow Ghost, a web app version of SnapChat. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if you want to start using this product. Happy Snapping!"})})}),Object.keys(t.friends).sort().map((function(e){return(0,sj.jsx)(Kj,{disableNavFootSlide:n,friend:t.friends[e],userDoc:t,height:r,width:a,loggedIn:i,toggleSnapShot:o})}))]})})};n(8744);n(97),n(9804);var Yj=n(9905),Xj=(n(2266),n(5776)),Qj=(n(9595),n(7462)),Jj=n(8182),$j=n(9451),eU=n(104),tU=n(2466),nU=n(6001),rU=["sx"];function aU(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){nU.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,Dj.Z)(e,rU)),a=r.systemProps,i=r.otherProps;return t=Array.isArray(n)?[a].concat((0,Ze.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,tU.P)(e)?(0,Qj.Z)({},a,e):a}:(0,Qj.Z)({},a,n),(0,Qj.Z)({},i,{sx:t})}var iU=n(886),oU=["className","component"];var sU=n(7829),uU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=e.defaultClassName,r=void 0===n?"MuiBox-root":n,a=e.generateClassName,i=e.styleFunctionSx,o=void 0===i?eU.Z:i,s=(0,$j.ZP)("div")(o),u=_.forwardRef((function(e,n){var i=(0,iU.Z)(t),o=aU(e),u=o.className,c=o.component,l=void 0===c?"div":c,d=(0,Dj.Z)(o,oU);return(0,sj.jsx)(s,(0,Qj.Z)({as:l,ref:n,className:(0,Jj.Z)(u,a?a(r):r),theme:i},d))}));return u}({defaultTheme:(0,n(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:sU.Z.generate}),cU=uU;function lU(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var dU=n(767),fU=(n(76),n(2110),n(1346));T.useInsertionEffect?T.useInsertionEffect:_.useLayoutEffect;function pU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,fU.O)(t)}var hU=function(){var e=pU.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var vU=n(4036),mU=n(1046),yU=n(7630),gU=n(5159),bU=n(208);function xU(e){return(0,gU.Z)("MuiCircularProgress",e)}(0,bU.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var kU,wU,_U,TU,SU,EU,IU,CU,NU=["className","color","disableShrink","size","style","thickness","value","variant"],AU=44,OU=hU(SU||(SU=kU||(kU=lU(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),PU=hU(EU||(EU=wU||(wU=lU(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),RU=(0,yU.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["color".concat((0,vU.Z)(n.color))]]}})((function(e){var t=e.ownerState,n=e.theme;return(0,Qj.Z)({display:"inline-block"},"determinate"===t.variant&&{transition:n.transitions.create("transform")},"inherit"!==t.color&&{color:n.palette[t.color].main})}),(function(e){return"indeterminate"===e.ownerState.variant&&pU(IU||(IU=_U||(_U=lU(["\n      animation: "," 1.4s linear infinite;\n    "]))),OU)})),DU=(0,yU.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(e,t){return t.svg}})({display:"block"}),MU=(0,yU.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(e,t){var n=e.ownerState;return[t.circle,t["circle".concat((0,vU.Z)(n.variant))],n.disableShrink&&t.circleDisableShrink]}})((function(e){var t=e.ownerState,n=e.theme;return(0,Qj.Z)({stroke:"currentColor"},"determinate"===t.variant&&{transition:n.transitions.create("stroke-dashoffset")},"indeterminate"===t.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(e){var t=e.ownerState;return"indeterminate"===t.variant&&!t.disableShrink&&pU(CU||(CU=TU||(TU=lU(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),PU)})),LU=_.forwardRef((function(e,t){var n=(0,mU.Z)({props:e,name:"MuiCircularProgress"}),r=n.className,a=n.color,i=void 0===a?"primary":a,o=n.disableShrink,s=void 0!==o&&o,u=n.size,c=void 0===u?40:u,l=n.style,d=n.thickness,f=void 0===d?3.6:d,p=n.value,h=void 0===p?0:p,v=n.variant,m=void 0===v?"indeterminate":v,y=(0,Dj.Z)(n,NU),g=(0,Qj.Z)({},n,{color:i,disableShrink:s,size:c,thickness:f,value:h,variant:m}),b=function(e){var t=e.classes,n=e.variant,r=e.color,a=e.disableShrink,i={root:["root",n,"color".concat((0,vU.Z)(r))],svg:["svg"],circle:["circle","circle".concat((0,vU.Z)(n)),a&&"circleDisableShrink"]};return(0,dU.Z)(i,xU,t)}(g),x={},k={},w={};if("determinate"===m){var _=2*Math.PI*((AU-f)/2);x.strokeDasharray=_.toFixed(3),w["aria-valuenow"]=Math.round(h),x.strokeDashoffset="".concat(((100-h)/100*_).toFixed(3),"px"),k.transform="rotate(-90deg)"}return(0,sj.jsx)(RU,(0,Qj.Z)({className:(0,Jj.Z)(b.root,r),style:(0,Qj.Z)({width:c,height:c},k,l),ownerState:g,ref:t,role:"progressbar"},w,y,{children:(0,sj.jsx)(DU,{className:b.svg,ownerState:g,viewBox:"".concat(22," ").concat(22," ").concat(AU," ").concat(AU),children:(0,sj.jsx)(MU,{className:b.circle,style:x,ownerState:g,cx:AU,cy:AU,r:(AU-f)/2,fill:"none",strokeWidth:f})})}))})),FU=LU,BU={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"},jU=n(5735),UU=n(2065),VU=n(4843),WU=n(6868),zU=n(3031);var qU=_.createContext(null);function KU(e,t){var n=Object.create(null);return e&&_.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,_.isValidElement)(e)?t(e):e}(e)})),n}function GU(e,t,n){return null!=n[t]?n[t]:e.props[t]}function HU(e,t,n){var r=KU(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,a=Object.create(null),i=[];for(var o in e)o in t?i.length&&(a[o]=i,i=[]):i.push(o);var s={};for(var u in t){if(a[u])for(r=0;r<a[u].length;r++){var c=a[u][r];s[a[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<i.length;r++)s[i[r]]=n(i[r]);return s}(t,r);return Object.keys(a).forEach((function(i){var o=a[i];if((0,_.isValidElement)(o)){var s=i in t,u=i in r,c=t[i],l=(0,_.isValidElement)(c)&&!c.props.in;!u||s&&!l?u||!s||l?u&&s&&(0,_.isValidElement)(c)&&(a[i]=(0,_.cloneElement)(o,{onExited:n.bind(null,o),in:c.props.in,exit:GU(o,"exit",e),enter:GU(o,"enter",e)})):a[i]=(0,_.cloneElement)(o,{in:!1}):a[i]=(0,_.cloneElement)(o,{onExited:n.bind(null,o),in:!0,exit:GU(o,"exit",e),enter:GU(o,"enter",e)})}})),a}var ZU=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},YU=function(e){var t,n;function r(t,n){var r,a=(r=e.call(this,t,n)||this).handleExited.bind(A(r));return r.state={contextValue:{isMounting:!0},handleExited:a,firstRender:!0},r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,O(t,n);var a=r.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},r.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,i=t.handleExited;return{children:t.firstRender?(n=e,r=i,KU(n.children,(function(e){return(0,_.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:GU(e,"appear",n),enter:GU(e,"enter",n),exit:GU(e,"exit",n)})}))):HU(e,a,i),firstRender:!1}},a.handleExited=function(e,t){var n=KU(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,Qj.Z)({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=(0,Dj.Z)(e,["component","childFactory"]),a=this.state.contextValue,i=ZU(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?_.createElement(qU.Provider,{value:a},i):_.createElement(qU.Provider,{value:a},_.createElement(t,r,i))},r}(_.Component);YU.propTypes={},YU.defaultProps={component:"div",childFactory:function(e){return e}};var XU=YU;var QU=function(e){var t=e.className,n=e.classes,r=e.pulsate,a=void 0!==r&&r,i=e.rippleX,o=e.rippleY,s=e.rippleSize,u=e.in,c=e.onExited,l=e.timeout,d=_.useState(!1),f=(0,W.Z)(d,2),p=f[0],h=f[1],v=(0,Jj.Z)(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),m={width:s,height:s,top:-s/2+o,left:-s/2+i},y=(0,Jj.Z)(n.child,p&&n.childLeaving,a&&n.childPulsate);return u||p||h(!0),_.useEffect((function(){if(!u&&null!=c){var e=setTimeout(c,l);return function(){clearTimeout(e)}}}),[c,u,l]),(0,sj.jsx)("span",{className:v,style:m,children:(0,sj.jsx)("span",{className:y})})};var JU,$U,eV,tV,nV,rV,aV,iV,oV=(0,bU.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),sV=["center","classes","className"],uV=hU(nV||(nV=JU||(JU=lU(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),cV=hU(rV||(rV=$U||($U=lU(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),lV=hU(aV||(aV=eV||(eV=lU(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),dV=(0,yU.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),fV=(0,yU.ZP)(QU,{name:"MuiTouchRipple",slot:"Ripple"})(iV||(iV=tV||(tV=lU(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),oV.rippleVisible,uV,550,(function(e){return e.theme.transitions.easing.easeInOut}),oV.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),oV.child,oV.childLeaving,cV,550,(function(e){return e.theme.transitions.easing.easeInOut}),oV.childPulsate,lV,(function(e){return e.theme.transitions.easing.easeInOut})),pV=_.forwardRef((function(e,t){var n=(0,mU.Z)({props:e,name:"MuiTouchRipple"}),r=n.center,a=void 0!==r&&r,i=n.classes,o=void 0===i?{}:i,s=n.className,u=(0,Dj.Z)(n,sV),c=_.useState([]),l=(0,W.Z)(c,2),d=l[0],f=l[1],p=_.useRef(0),h=_.useRef(null);_.useEffect((function(){h.current&&(h.current(),h.current=null)}),[d]);var v=_.useRef(!1),m=_.useRef(null),y=_.useRef(null),g=_.useRef(null);_.useEffect((function(){return function(){clearTimeout(m.current)}}),[]);var b=_.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,a=e.rippleSize,i=e.cb;f((function(e){return[].concat((0,Ze.Z)(e),[(0,sj.jsx)(fV,{classes:{ripple:(0,Jj.Z)(o.ripple,oV.ripple),rippleVisible:(0,Jj.Z)(o.rippleVisible,oV.rippleVisible),ripplePulsate:(0,Jj.Z)(o.ripplePulsate,oV.ripplePulsate),child:(0,Jj.Z)(o.child,oV.child),childLeaving:(0,Jj.Z)(o.childLeaving,oV.childLeaving),childPulsate:(0,Jj.Z)(o.childPulsate,oV.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:a},p.current)])})),p.current+=1,h.current=i}),[o]),x=_.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,u=t.fakeElement,c=void 0!==u&&u;if("mousedown"===e.type&&v.current)v.current=!1;else{"touchstart"===e.type&&(v.current=!0);var l,d,f,p=c?null:g.current,h=p?p.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(h.width/2),d=Math.round(h.height/2);else{var x=e.touches?e.touches[0]:e,k=x.clientX,w=x.clientY;l=Math.round(k-h.left),d=Math.round(w-h.top)}if(s)(f=Math.sqrt((2*Math.pow(h.width,2)+Math.pow(h.height,2))/3))%2===0&&(f+=1);else{var _=2*Math.max(Math.abs((p?p.clientWidth:0)-l),l)+2,T=2*Math.max(Math.abs((p?p.clientHeight:0)-d),d)+2;f=Math.sqrt(Math.pow(_,2)+Math.pow(T,2))}e.touches?null===y.current&&(y.current=function(){b({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})},m.current=setTimeout((function(){y.current&&(y.current(),y.current=null)}),80)):b({pulsate:i,rippleX:l,rippleY:d,rippleSize:f,cb:n})}}),[a,b]),k=_.useCallback((function(){x({},{pulsate:!0})}),[x]),w=_.useCallback((function(e,t){if(clearTimeout(m.current),"touchend"===e.type&&y.current)return y.current(),y.current=null,void(m.current=setTimeout((function(){w(e,t)})));y.current=null,f((function(e){return e.length>0?e.slice(1):e})),h.current=t}),[]);return _.useImperativeHandle(t,(function(){return{pulsate:k,start:x,stop:w}}),[k,x,w]),(0,sj.jsx)(dV,(0,Qj.Z)({className:(0,Jj.Z)(o.root,oV.root,s),ref:g},u,{children:(0,sj.jsx)(XU,{component:null,exit:!0,children:d})}))})),hV=pV;function vV(e){return(0,gU.Z)("MuiButtonBase",e)}var mV,yV=(0,bU.Z)("MuiButtonBase",["root","disabled","focusVisible"]),gV=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],bV=(0,yU.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((mV={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,E.Z)(mV,"&.".concat(yV.disabled),{pointerEvents:"none",cursor:"default"}),(0,E.Z)(mV,"@media print",{colorAdjust:"exact"}),mV)),xV=_.forwardRef((function(e,t){var n=(0,mU.Z)({props:e,name:"MuiButtonBase"}),r=n.action,a=n.centerRipple,i=void 0!==a&&a,o=n.children,s=n.className,u=n.component,c=void 0===u?"button":u,l=n.disabled,d=void 0!==l&&l,f=n.disableRipple,p=void 0!==f&&f,h=n.disableTouchRipple,v=void 0!==h&&h,m=n.focusRipple,y=void 0!==m&&m,g=n.LinkComponent,b=void 0===g?"a":g,x=n.onBlur,k=n.onClick,w=n.onContextMenu,T=n.onDragLeave,S=n.onFocus,E=n.onFocusVisible,I=n.onKeyDown,C=n.onKeyUp,N=n.onMouseDown,A=n.onMouseLeave,O=n.onMouseUp,P=n.onTouchEnd,R=n.onTouchMove,D=n.onTouchStart,M=n.tabIndex,L=void 0===M?0:M,F=n.TouchRippleProps,B=n.touchRippleRef,j=n.type,U=(0,Dj.Z)(n,gV),V=_.useRef(null),z=_.useRef(null),q=(0,VU.Z)(z,B),K=(0,zU.Z)(),G=K.isFocusVisibleRef,H=K.onFocus,Z=K.onBlur,Y=K.ref,X=_.useState(!1),Q=(0,W.Z)(X,2),J=Q[0],$=Q[1];function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return(0,WU.Z)((function(r){return t&&t(r),!n&&z.current&&z.current[e](r),!0}))}d&&J&&$(!1),_.useImperativeHandle(r,(function(){return{focusVisible:function(){$(!0),V.current.focus()}}}),[]),_.useEffect((function(){J&&y&&!p&&z.current.pulsate()}),[p,y,J]);var te=ee("start",N),ne=ee("stop",w),re=ee("stop",T),ae=ee("stop",O),ie=ee("stop",(function(e){J&&e.preventDefault(),A&&A(e)})),oe=ee("start",D),se=ee("stop",P),ue=ee("stop",R),ce=ee("stop",(function(e){Z(e),!1===G.current&&$(!1),x&&x(e)}),!1),le=(0,WU.Z)((function(e){V.current||(V.current=e.currentTarget),H(e),!0===G.current&&($(!0),E&&E(e)),S&&S(e)})),de=function(){var e=V.current;return c&&"button"!==c&&!("A"===e.tagName&&e.href)},fe=_.useRef(!1),pe=(0,WU.Z)((function(e){y&&!fe.current&&J&&z.current&&" "===e.key&&(fe.current=!0,z.current.stop(e,(function(){z.current.start(e)}))),e.target===e.currentTarget&&de()&&" "===e.key&&e.preventDefault(),I&&I(e),e.target===e.currentTarget&&de()&&"Enter"===e.key&&!d&&(e.preventDefault(),k&&k(e))})),he=(0,WU.Z)((function(e){y&&" "===e.key&&z.current&&J&&!e.defaultPrevented&&(fe.current=!1,z.current.stop(e,(function(){z.current.pulsate(e)}))),C&&C(e),k&&e.target===e.currentTarget&&de()&&" "===e.key&&!e.defaultPrevented&&k(e)})),ve=c;"button"===ve&&(U.href||U.to)&&(ve=b);var me={};"button"===ve?(me.type=void 0===j?"button":j,me.disabled=d):(U.href||U.to||(me.role="button"),d&&(me["aria-disabled"]=d));var ye=(0,VU.Z)(Y,V),ge=(0,VU.Z)(t,ye),be=_.useState(!1),xe=(0,W.Z)(be,2),ke=xe[0],we=xe[1];_.useEffect((function(){we(!0)}),[]);var _e=ke&&!p&&!d;var Te=(0,Qj.Z)({},n,{centerRipple:i,component:c,disabled:d,disableRipple:p,disableTouchRipple:v,focusRipple:y,tabIndex:L,focusVisible:J}),Se=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,a=e.classes,i={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,dU.Z)(i,vV,a);return n&&r&&(o.root+=" ".concat(r)),o}(Te);return(0,sj.jsxs)(bV,(0,Qj.Z)({as:ve,className:(0,Jj.Z)(Se.root,s),ownerState:Te,onBlur:ce,onClick:k,onContextMenu:ne,onFocus:le,onKeyDown:pe,onKeyUp:he,onMouseDown:te,onMouseLeave:ie,onMouseUp:ae,onDragLeave:re,onTouchEnd:se,onTouchMove:ue,onTouchStart:oe,ref:ge,tabIndex:d?-1:L,type:j},me,U,{children:[o,_e?(0,sj.jsx)(hV,(0,Qj.Z)({ref:q,center:i},F)):null]}))})),kV=xV;function wV(e){return(0,gU.Z)("MuiButton",e)}var _V=(0,bU.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var TV,SV=_.createContext({}),EV=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],IV=function(e){return(0,Qj.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},CV=(0,yU.ZP)(kV,{shouldForwardProp:function(e){return(0,yU.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,vU.Z)(n.color))],t["size".concat((0,vU.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,vU.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,Qj.Z)({},n.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:n.shape.borderRadius,transition:n.transitions.create(["background-color","box-shadow","border-color","color"],{duration:n.transitions.duration.short}),"&:hover":(0,Qj.Z)({textDecoration:"none",backgroundColor:(0,UU.Fq)(n.palette.text.primary,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===r.variant&&"inherit"!==r.color&&{backgroundColor:(0,UU.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===r.variant&&"inherit"!==r.color&&{border:"1px solid ".concat(n.palette[r.color].main),backgroundColor:(0,UU.Fq)(n.palette[r.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===r.variant&&{backgroundColor:n.palette.grey.A100,boxShadow:n.shadows[4],"@media (hover: none)":{boxShadow:n.shadows[2],backgroundColor:n.palette.grey[300]}},"contained"===r.variant&&"inherit"!==r.color&&{backgroundColor:n.palette[r.color].dark,"@media (hover: none)":{backgroundColor:n.palette[r.color].main}}),"&:active":(0,Qj.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[8]})},(0,E.Z)(t,"&.".concat(_V.focusVisible),(0,Qj.Z)({},"contained"===r.variant&&{boxShadow:n.shadows[6]})),(0,E.Z)(t,"&.".concat(_V.disabled),(0,Qj.Z)({color:n.palette.action.disabled},"outlined"===r.variant&&{border:"1px solid ".concat(n.palette.action.disabledBackground)},"outlined"===r.variant&&"secondary"===r.color&&{border:"1px solid ".concat(n.palette.action.disabled)},"contained"===r.variant&&{color:n.palette.action.disabled,boxShadow:n.shadows[0],backgroundColor:n.palette.action.disabledBackground})),t),"text"===r.variant&&{padding:"6px 8px"},"text"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main},"outlined"===r.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].main,border:"1px solid ".concat((0,UU.Fq)(n.palette[r.color].main,.5))},"contained"===r.variant&&{color:n.palette.getContrastText(n.palette.grey[300]),backgroundColor:n.palette.grey[300],boxShadow:n.shadows[2]},"contained"===r.variant&&"inherit"!==r.color&&{color:n.palette[r.color].contrastText,backgroundColor:n.palette[r.color].main},"inherit"===r.color&&{color:"inherit",borderColor:"currentColor"},"small"===r.size&&"text"===r.variant&&{padding:"4px 5px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"text"===r.variant&&{padding:"8px 11px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"outlined"===r.variant&&{padding:"3px 9px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"outlined"===r.variant&&{padding:"7px 21px",fontSize:n.typography.pxToRem(15)},"small"===r.size&&"contained"===r.variant&&{padding:"4px 10px",fontSize:n.typography.pxToRem(13)},"large"===r.size&&"contained"===r.variant&&{padding:"8px 22px",fontSize:n.typography.pxToRem(15)},r.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,E.Z)(t,"&.".concat(_V.focusVisible),{boxShadow:"none"}),(0,E.Z)(t,"&:active",{boxShadow:"none"}),(0,E.Z)(t,"&.".concat(_V.disabled),{boxShadow:"none"}),t)})),NV=(0,yU.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,vU.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,Qj.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},IV(t))})),AV=(0,yU.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,vU.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,Qj.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},IV(t))})),OV=_.forwardRef((function(e,t){var n=_.useContext(SV),r=(0,jU.Z)(n,e),a=(0,mU.Z)({props:r,name:"MuiButton"}),i=a.children,o=a.color,s=void 0===o?"primary":o,u=a.component,c=void 0===u?"button":u,l=a.className,d=a.disabled,f=void 0!==d&&d,p=a.disableElevation,h=void 0!==p&&p,v=a.disableFocusRipple,m=void 0!==v&&v,y=a.endIcon,g=a.focusVisibleClassName,b=a.fullWidth,x=void 0!==b&&b,k=a.size,w=void 0===k?"medium":k,T=a.startIcon,S=a.type,E=a.variant,I=void 0===E?"text":E,C=(0,Dj.Z)(a,EV),N=(0,Qj.Z)({},a,{color:s,component:c,disabled:f,disableElevation:h,disableFocusRipple:m,fullWidth:x,size:w,type:S,variant:I}),A=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,a=e.size,i=e.variant,o=e.classes,s={root:["root",i,"".concat(i).concat((0,vU.Z)(t)),"size".concat((0,vU.Z)(a)),"".concat(i,"Size").concat((0,vU.Z)(a)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,vU.Z)(a))],endIcon:["endIcon","iconSize".concat((0,vU.Z)(a))]},u=(0,dU.Z)(s,wV,o);return(0,Qj.Z)({},o,u)}(N),O=T&&(0,sj.jsx)(NV,{className:A.startIcon,ownerState:N,children:T}),P=y&&(0,sj.jsx)(AV,{className:A.endIcon,ownerState:N,children:y});return(0,sj.jsxs)(CV,(0,Qj.Z)({ownerState:N,className:(0,Jj.Z)(l,n.className),component:c,disabled:f,focusRipple:!m,focusVisibleClassName:(0,Jj.Z)(A.focusVisible,g),ref:t,type:S},C,{classes:A,children:[O,i,P]}))})),PV=OV,RV=new Uint8Array(16);function DV(){if(!TV&&!(TV="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return TV(RV)}var MV=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var LV=function(e){return"string"===typeof e&&MV.test(e)},FV=[],BV=0;BV<256;++BV)FV.push((BV+256).toString(16).substr(1));var jV=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(FV[e[t+0]]+FV[e[t+1]]+FV[e[t+2]]+FV[e[t+3]]+"-"+FV[e[t+4]]+FV[e[t+5]]+"-"+FV[e[t+6]]+FV[e[t+7]]+"-"+FV[e[t+8]]+FV[e[t+9]]+"-"+FV[e[t+10]]+FV[e[t+11]]+FV[e[t+12]]+FV[e[t+13]]+FV[e[t+14]]+FV[e[t+15]]).toLowerCase();if(!LV(n))throw TypeError("Stringified UUID is invalid");return n};for(var UV=function(e,t,n){var r=(e=e||{}).random||(e.rng||DV)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return jV(r)},VV=[],WV=0;WV<40;WV++)VV.push((0,sj.jsx)("h1",{children:"filler"}));function zV(e){var t=e.height,n=e.width,r=e.img,a=e.close,i=(e.backToCapture,e.userDoc),o=e.setUserDoc,s=e.toggleSwipe,u=e.sent,c=e.toggleSnapShot,l=_.useState(!1),d=(0,W.Z)(l,2),f=d[0],p=d[1],h=_.useState(!1),v=(0,W.Z)(h,2),m=(v[0],v[1]),y=(_.useRef(),(0,_.useState)([])),g=(0,W.Z)(y,2),b=g[0],x=g[1],k=(0,_.useState)(!1),w=(0,W.Z)(k,2),T=w[0],S=w[1],I=(0,_.useState)(!1),C=(0,W.Z)(I,2),N=C[0],A=C[1],O=UV(),P=(new Date).toLocaleString();(0,_.useEffect)((function(){T&&(console.log("uploaded"),m(!0),p(!1),s(!1),"N/A"!==i.created&&"Guest@Guest.com"!==i.email&&(c(!0),a()),setTimeout((function(){return u()}),100))}),[T]);var R=function(e){fetch(r).then((function(e){return e.blob()})).then((function(t){S(!1);var n,r,a,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct(),t=arguments.length>1?arguments[1]:void 0;return xt(e=je(e),Yl).getImmediate({identifier:t})}(),o=ed(i,"posts/".concat(e));(n=o,r=t,Dl(n=je(n),r,a)).then((function(t){$l(t.ref).then((function(t){F(e,t)}))}))}))},D=function(){A(!0),r.startsWith("data:")?L(O):r.startsWith("blob:")&&R(O)},M=function(){var e=i;b.map((function(t){if(void 0!==e.friends[t])if(e.friends[t].last_time_stamp=(new Date).toLocaleString(),e.friends[t].status="sent",e.sent+=1,t===i.email){e.friends[t].status="new",e.friends[t].sent+=1,e.friends[t].received+=1;var n={id:O,type:"picture",src:r};e.friends[t].snaps[P]=n}else e.friends[t].sent=e.friends[t].sent+1})),o(e),S(!0)},L=function(e){S(!1);var t=XB.ref("posts/".concat(e)).putString(r,"data_url");t.on("state_changed",(function(e){e.bytesTransferred,e.totalBytes}),(function(e){console.log("Could not upload to storage")}),(function(){t.snapshot.ref.getDownloadURL().then((function(t){F(e,t)}))}))},F=function(e,t){ZB.collection("Photos").doc(e).set({image_url:t,opened:[],sender:i.id,sent:b,time_stamp:P}).then((function(){B()})).catch((function(e){console.error("Error writing document: ",e)}))},B=function(){var e=ZB.collection("Users").doc(i.id),t=i;b.forEach((function(e){t.friends[e].status="sent",t.friends[e].sent=t.friends[e].sent+1,t.friends[e].last_time_stamp=P})),e.update({friends:t.friends,sent:nn.firestore.FieldValue.increment(b.length)}).then((function(){j()}))},j=function(){b.forEach((function(e){var t;ZB.collection("Users").doc(e).update((t={},(0,E.Z)(t,"friends.".concat(i.id,".status"),"new"),(0,E.Z)(t,"friends.".concat(i.id,".snaps.").concat(P.replace(/\//g,"-")),{id:O,type:"picture"}),(0,E.Z)(t,"friends.".concat(i.id,".received"),nn.firestore.FieldValue.increment(1)),(0,E.Z)(t,"friends.".concat(i.id,".last_time_stamp"),P),(0,E.Z)(t,"friends.".concat(i.id,".streakRef"),nn.firestore.FieldValue.arrayUnion(P)),t))})),S(!0)},U=function(e){var t=[];e.forEach((function(e){t.push(e)})),x(t)};return(0,sj.jsx)(sj.Fragment,{children:(0,sj.jsxs)("div",{className:"send-screen",style:{height:t,width:n},children:[(0,sj.jsx)(Tj,{}),(0,sj.jsx)("div",{className:"send-section",style:{style:"relative",maxHeight:"100%",width:"100%",overflow:"auto"},children:Object.keys(i.friends).map((function(e){return(0,sj.jsx)(qV,{friend:i.friends[e],id:e,sendList:b,handleSendList:U})}))}),b.length>0&&(0,sj.jsxs)("div",{className:"send-footer main-footer",children:[(0,sj.jsx)("div",{style:{width:"50%",display:"flex",position:"relative",overflow:"hidden"},children:(0,sj.jsxs)("h2",{children:["Selected: ",b.length]})}),(0,sj.jsxs)(cU,{sx:{m:1,position:"relative"},children:[(0,sj.jsx)(PV,{variant:"contained",disabled:N,onClick:function(){f||("N/A"===i.created&&"Guest@Guest.com"===i.email?M():(D(),c(!1)),s(!0),m(!1),p(!0))},children:"Send"}),f&&(0,sj.jsx)(FU,{size:24,sx:{color:BU[500],position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]})]})]})})}function qV(e){var t,n=e.friend,r=e.sendList,a=e.id,i=e.handleSendList,o=(0,_.useState)(!1),s=(0,W.Z)(o,2),u=s[0],c=s[1],l=r;return(0,sj.jsxs)("button",{className:"item-container",onClick:function(){!1===u?(l.push(a),i(l)):(t=l.filter((function(e){return e!==a})),i(t)),c(!u)},disabled:"pending"===n.status||"not-friends"===n.status,children:[(0,sj.jsxs)("div",{className:"row",children:[(0,sj.jsx)("img",{src:n.profile_pic_url,className:"profile-pic"}),u?(0,sj.jsx)("h1",{style:{color:"rgb(31, 168, 247)"},children:n.name}):(0,sj.jsx)("h1",{style:{color:"black"},children:n.name}),("pending"===n.status||"not-friends"===n.status)&&(0,sj.jsx)("p",{style:{marginLeft:"1rem",color:"red"},children:(0,sj.jsx)("i",{children:n.status})})]}),(0,sj.jsx)("div",{children:u?(0,sj.jsx)("div",{className:"selected-circle",children:(0,sj.jsx)("img",{className:"checkmark",src:Xj,alt:"U+2713"})}):(0,sj.jsx)("div",{className:"unselected-circle",children:(0,sj.jsx)("img",{className:"checkmark",src:Xj,alt:"U+2713"})})})]})}function KV(e){var t=e.width,n=e.height,r=e.close,a=e.img,i=(e.changedToSend,e.save),o=e.backToCapture,s=e.userDoc,u=e.setUserDoc,c=e.sent,l=e.toggleSnapShot,d=(0,_.useState)(!1),f=(0,W.Z)(d,2),p=f[0],h=f[1],v=(0,_.useState)(!1),m=(0,W.Z)(v,2),y=m[0],g=m[1],b=function(){h(!p)};return(0,_.useEffect)((function(){!1===ej.tq?n/t>16/9?(document.getElementById("capturedImg").style.height="auto",document.getElementById("capturedImg").style.width="100%"):(document.getElementById("capturedImg").style.height="100%",document.getElementById("capturedImg").style.width="auto"):null!==document.getElementById("capturedImg")&&(document.getElementById("capturedImg").style.height="100%",document.getElementById("capturedImg").style.width="auto")}),[n,t]),(0,_.useEffect)((function(){null!==a&&(document.querySelector("#capturedImg").src="".concat(a))}),[a]),(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsxs)("div",{className:"captured-screen",style:{height:n,width:t},children:[(0,sj.jsxs)("div",{className:"floating-navbar main-navbar capture-navbar",style:{backgroundColor:"transparent",zIndex:1},children:[(0,sj.jsx)("button",{className:"closeButton shadow",onClick:r,children:(0,sj.jsx)(Yj.Z,{className:"closeIcon",style:{height:"2.5rem",width:"2.5rem"}})}),(0,sj.jsx)("ul",{})]}),(0,sj.jsxs)("div",{className:"captured-footer main-footer",children:[(0,sj.jsx)("button",{onClick:i,children:"Save"}),a?(0,sj.jsx)("button",{onClick:b,children:"Send To"}):(0,sj.jsx)("button",{style:{backgroundColor:"lightcoral"},children:"Cannot Send"})]}),(0,sj.jsx)("img",{id:"capturedImg"})]}),(0,sj.jsx)(dj,{open:p,close:b,title:"Send",disabled:y,keyboard:!1,children:(0,sj.jsx)(zV,{height:n,width:t,img:a,close:r,backToCapture:o,userDoc:s,setUserDoc:u,toggleSwipe:function(e){!1===e&&g(e),!0===e&&g(e)},sent:c,toggleSnapShot:l})})]})}qV.defaultProps={sendList:[],id:"Guest@Guest.com",friend:{"Guest@Guest.com":{created:(new Date).toLocaleString(),profile_pic_url:Oj,name:"Guest",status:"new-friend",streak:0,sent:0,received:0,last_time_stamp:null,snaps:[]}}};var GV=function(){function e(t,n){I(this,e),this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return N(e,[{key:"get",value:function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}},{key:"set",value:function(e,t){this.dataIdsCount++,this.data.set(e,t)}},{key:"has",value:function(e){return this.data.has(e)}},{key:"delete",value:function(e){return this.dataIdsCount--,this.data.delete(e)}},{key:"numDataIds",value:function(){return this.dataIdsCount}}]),e}(),HV=function(){function e(){I(this,e)}return N(e,[{key:"refCount",value:function(e){return ZV("refCount")}},{key:"incRef",value:function(e){return ZV("incRef")}},{key:"timerAvailable",value:function(){return!0}},{key:"time",value:function(e){return ZV("time")}},{key:"read",value:function(e){return ZV("read")}},{key:"readSync",value:function(e){return ZV("readSync")}},{key:"readToGPU",value:function(e,t){return ZV("readToGPU")}},{key:"numDataIds",value:function(){return ZV("numDataIds")}},{key:"disposeData",value:function(e,t){return ZV("disposeData")}},{key:"write",value:function(e,t,n){return ZV("write")}},{key:"move",value:function(e,t,n,r,a){return ZV("move")}},{key:"memory",value:function(){return ZV("memory")}},{key:"floatPrecision",value:function(){return ZV("floatPrecision")}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"dispose",value:function(){return ZV("dispose")}}]),e}();function ZV(e){throw new Error("'".concat(e,"' not yet implemented or not found in the registry. ")+"This kernel may not be supported by the tfjs backend you have chosen")}function YV(e){return e%2===0?e:e+1}function XV(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function QV(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function JV(e,t){if(!e)throw new Error("string"===typeof t?t:t())}function $V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";JV(rW(e,t),(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}function eW(e){JV(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function tW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(null==t&&(t=[]),Array.isArray(e)||hW(e)&&!n)for(var r=0;r<e.length;++r)tW(e[r],t,n);else t.push(e);return t}function nW(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function rW(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function aW(e){return e%1===0}function iW(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function oW(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function sW(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return 0},n=arguments.length>2?arguments[2]:void 0;return new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function uW(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. "+"Found -1 at dim ".concat(r," and dim ").concat(a));r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found ".concat(e[a]," at dim ").concat(a));if(-1===r){if(t>0&&t!==n)throw Error("Size(".concat(t,") must match the product of shape ").concat(e));return e}if(0===n)throw Error("Cannot infer the missing size in [".concat(e,"] when ")+"there are 0 elements");if(t%n!==0)throw Error("The implicit shape can't be a fractional number. "+"Got ".concat(t," / ").concat(n));var i=e.slice();return i[r]=t/n,i}function cW(e,t){var n=t.length;return e=null==e?t.map((function(e,t){return t})):[].concat(e),JV(e.every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-".concat(n,", ").concat(n,") but ")+"got axis ".concat(e)})),JV(e.every((function(e){return aW(e)})),(function(){return"All values in axis param must be integers but "+"got axis ".concat(e)})),e.map((function(e){return e<0?n+e:e}))}function lW(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:cW(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis ".concat(s," since its dim '").concat(e[s],"' is not 1"));(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function dW(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type ".concat(e));n=new Uint8Array(t)}return n}function fW(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type ".concat(e));n=new Array(t)}return n}function pW(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function hW(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}function vW(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype ".concat(e))}function mW(e){return"string"===typeof e||e instanceof String}function yW(e){return Array.isArray(e)?yW(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":"number"===typeof e?"float32":mW(e)?"string":function(e){return"boolean"===typeof e}(e)?"bool":"float32"}function gW(e){return!!(e&&e.constructor&&e.call&&e.apply)}function bW(e,t){for(var n=t;n<e;++n)if(e%n===0)return n;return e}function xW(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function kW(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=new Array;if(1===t.length)for(var i=t[0]*(r?2:1),o=0;o<i;o++)a[o]=n[e+o];else for(var s=t[0],u=t.slice(1),c=u.reduce((function(e,t){return e*t}))*(r?2:1),l=0;l<s;l++)a[l]=kW(e+l*c,u,n,r);return a}function wW(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return t[0];var r=e.reduce((function(e,t){return e*t}))*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error("[".concat(e,"] does not match the input size ").concat(t.length).concat(n?" for a complex tensor":"","."));return kW(0,e,t,n)}function _W(e,t){for(var n=TW(e,t),r=0;r<n.length;r++)n[r]=1;return n}function TW(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type ".concat(t))}function SW(e){e.forEach((function(t){JV(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got "+"shape [".concat(e,"].")}))}))}function EW(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function IW(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function CW(e){return e&&e.then&&"function"===typeof e.then}var NW="tfjsflags",AW=function(){function e(t){I(this,e),this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=OW,this.populateURLFlags()}return N(e,[{key:"setPlatform",value:function(e,t){null!=this.platform&&(RW().getBool("IS_TEST")||RW().getBool("PROD")||console.warn("Platform ".concat(this.platformName," has already been set. ")+"Overwriting the platform with ".concat(e,"."))),this.platformName=e,this.platform=t}},{key:"registerFlag",value:function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];RW().getBool("IS_TEST")||RW().getBool("PROD")||console.warn("Setting feature override from URL ".concat(e,": ").concat(r,".")),this.set(e,r)}}},{key:"getAsync",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(CW(t))throw new Error("Flag ".concat(e," cannot be synchronously evaluated. ")+"Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]}},{key:"getNumber",value:function(e){return this.get(e)}},{key:"getBool",value:function(e){return this.get(e)}},{key:"getFlags",value:function(){return this.flags}},{key:"features",get:function(){return this.flags}},{key:"set",value:function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag ".concat(e," as it has not been registered."));this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}},{key:"evaluateFlag",value:function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '".concat(e,"': no evaluation function found."));return this.flagRegistry[e].evaluationFn()}},{key:"setFlags",value:function(e){this.flags=Object.assign({},e)}},{key:"reset",value:function(){this.flags={},this.urlFlags={},this.populateURLFlags()}},{key:"populateURLFlags",value:function(){var e=this;if("undefined"!==typeof this.global&&"undefined"!==typeof this.global.location&&"undefined"!==typeof this.global.location.search){var t=this.getQueryParams(this.global.location.search);if(NW in t)t.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=(0,W.Z)(n,2),a=r[0],i=r[1];e.urlFlags[a]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if("".concat(+t)===t)return+t;throw new Error("Could not parse value flag value ".concat(t," for flag ").concat(e,"."))}(a,i)}))}}}]),e}();function OW(e){var t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return PW(t,r[0],r[1]),r.join("=")})),t}function PW(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function RW(){return MW}var DW,MW=null;function LW(){if(null==DW){var e;if("undefined"!==typeof window)e=window;else if("undefined"!==typeof n.g)e=n.g;else if("undefined"!==typeof process)e=process;else{if("undefined"===typeof self)throw new Error("Could not find a global object");e=self}DW=e}return DW}function FW(e,t){var n=function(){var e=LW();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);var r=t();return n.set(e,r),n.get(e)}var BW="Abs",jW="Acos",UW="Acosh",VW="Add",WW="AddN",zW="All",qW="Any",KW="ArgMax",GW="ArgMin",HW="Asin",ZW="Asinh",YW="Atan",XW="Atanh",QW="Atan2",JW="AvgPool",$W="AvgPool3D",ez="BatchMatMul",tz="BatchToSpaceND",nz="Bincount",rz="BroadcastArgs",az="Cast",iz="Ceil",oz="ClipByValue",sz="Complex",uz="ComplexAbs",cz="Concat",lz="Conv2D",dz="Conv2DBackpropFilter",fz="Conv2DBackpropInput",pz="Conv3D",hz="Conv3DBackpropInputV2",vz="Cos",mz="Cosh",yz="Cumsum",gz="CropAndResize",bz="DenseBincount",xz="DepthToSpace",kz="DepthwiseConv2dNative",wz="DepthwiseConv2dNativeBackpropFilter",_z="DepthwiseConv2dNativeBackpropInput",Tz="Diag",Sz="Dilation2D",Ez="RealDiv",Iz="Einsum",Cz="Elu",Nz="Equal",Az="Exp",Oz="ExpandDims",Pz="Expm1",Rz="Fill",Dz="FlipLeftRight",Mz="Floor",Lz="FloorDiv",Fz="FusedBatchNorm",Bz="GatherV2",jz="GatherNd",Uz="Greater",Vz="GreaterEqual",Wz="Identity",zz="IFFT",qz="Imag",Kz="IsFinite",Gz="IsInf",Hz="IsNan",Zz="LeakyRelu",Yz="Less",Xz="LessEqual",Qz="LinSpace",Jz="Log",$z="Log1p",eq="LogicalAnd",tq="LogicalNot",nq="LogicalOr",rq="LRN",aq="Max",iq="Maximum",oq="MaxPool",sq="MaxPool3D",uq="MaxPoolWithArgmax",cq="Mean",lq="Min",dq="Minimum",fq="MirrorPad",pq="Multinomial",hq="Multiply",vq="Neg",mq="NotEqual",yq="NonMaxSuppressionV3",gq="NonMaxSuppressionV4",bq="NonMaxSuppressionV5",xq="OnesLike",kq="OneHot",wq="Pack",_q="PadV2",Tq="Pow",Sq="Prelu",Eq="Prod",Iq="Range",Cq="Real",Nq="Reciprocal",Aq="Relu",Oq="Reshape",Pq="ResizeNearestNeighbor",Rq="ResizeBilinear",Dq="Relu6",Mq="Reverse",Lq="Round",Fq="Rsqrt",Bq="ScatterNd",jq="Select",Uq="Selu",Vq="Slice",Wq="Sin",zq="Sinh",qq="Sign",Kq="Sigmoid",Gq="Softplus",Hq="Sqrt",Zq="Sum",Yq="SpaceToBatchND",Xq="SplitV",Qq="Softmax",Jq="SparseFillEmptyRows",$q="SparseReshape",eK="SparseSegmentMean",tK="SparseSegmentSum",nK="SparseToDense",rK="SquaredDifference",aK="Square",iK="StridedSlice",oK="StringNGrams",sK="StringSplit",uK="StringToHashBucketFast",cK="Sub",lK="Tan",dK="Tanh",fK="Tile",pK="TopK",hK="Transform",vK="Transpose",mK="Unique",yK="Unpack",gK="UnsortedSegmentSum",bK="ZerosLike",xK="Step",kK="FromPixels",wK="RotateWithOffset",_K="_FusedMatMul",TK="FusedConv2D",SK="FusedDepthwiseConv2D";function EK(){var e;RW().getBool("IS_TEST")||RW().getBool("PROD")||(e=console).warn.apply(e,arguments)}var IK=FW("kernelRegistry",(function(){return new Map})),CK=FW("gradRegistry",(function(){return new Map}));function NK(e,t){var n=RK(e,t);return IK.get(n)}function AK(e){return CK.get(e)}function OK(e){for(var t=IK.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=(0,W.Z)(i,2),s=o[0],u=o[1],c=s.split("_");(0,W.Z)(c,1)[0]===e&&n.push(u)}return n}function PK(e){var t=e.kernelName,n=e.backendName,r=RK(t,n);IK.has(r)&&EK("The kernel '".concat(t,"' for backend ")+"'".concat(n,"' is already registered")),IK.set(r,e)}function RK(e,t){return"".concat(t,"_").concat(e)}var DK=n(8987),MK=n.n(DK)()||DK;function LK(e){return MK.fromString(e,!0,16)}var FK=LK("c3a5c85c97cb3127"),BK=LK("b492b66fbe98f273"),jK=LK("9ae16a3b2f90404f");function UK(e){return e.xor(e.shru(47))}function VK(e,t,n){var r=e.slice(t,t+n);return MK.fromBytes(Array.from(r),!0,!0)}function WK(e,t){return VK(e,t,8)}function zK(e,t){return VK(e,t,4)}function qK(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function KK(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:LK("9ddfea08eb382d69"),r=e.xor(t).mul(n);r=r.xor(r.shru(47));var a=t.xor(r).mul(n);return a=(a=a.xor(a.shru(47))).mul(n)}function GK(e,t,n,r){return function(e,t,n,r,a,i){a=a.add(e),i=qK(i.add(a).add(r),21);var o=a;return a=(a=a.add(t)).add(n),i=i.add(qK(a,44)),[a.add(r),i.add(o)]}(WK(e,t),WK(e,t+8),WK(e,t+16),WK(e,t+24),n,r)}function HK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;if(t>=8){var n=jK.add(2*t),r=WK(e,0).add(jK),a=WK(e,t-8),i=qK(a,37).mul(n).add(r),o=qK(r,25).add(a).mul(n);return KK(i,o,n)}if(t>=4){var s=jK.add(2*t),u=zK(e,0);return KK(u.shl(3).add(t),zK(e,t-4),s)}if(t>0){var c=e[0],l=e[t>>1],d=e[t-1],f=c+(l<<8),p=t+(d<<2);return UK(jK.mul(f).xor(FK.mul(p))).mul(jK)}return jK}function ZK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=jK.add(2*t),r=WK(e,0).mul(BK),a=WK(e,8),i=WK(e,t-8).mul(n),o=WK(e,t-16).mul(jK);return KK(qK(r.add(a),43).add(qK(i,30)).add(o),r.add(qK(a.add(jK),18)).add(i),n)}function YK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=jK.add(2*t),r=WK(e,0).mul(jK),a=WK(e,8),i=WK(e,t-8).mul(n),o=WK(e,t-16).mul(jK),s=qK(r.add(a),43).add(qK(i,30)).add(o),u=KK(s,r.add(qK(a.add(jK),18)).add(i),n),c=WK(e,16).mul(n),l=WK(e,24),d=s.add(WK(e,t-32)).mul(n),f=u.add(WK(e,t-24)).mul(n);return KK(qK(c.add(l),43).add(qK(d,30)).add(f),c.add(qK(l.add(r),18)).add(d),n)}function XK(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length,n=MK.fromNumber(81,!0);if(t<=32)return t<=16?HK(e,t):ZK(e,t);if(t<=64)return YK(e,t);var r=n,a=n.mul(BK).add(113),i=UK(a.mul(jK).add(113)).mul(jK),o=[MK.UZERO,MK.UZERO],s=[MK.UZERO,MK.UZERO];r=r.mul(jK).add(WK(e,0));var u=0,c=64*(t-1>>6),l=c+(t-1&63)-63;do{r=qK(r.add(a).add(o[0]).add(WK(e,u+8)),37).mul(BK),a=qK(a.add(o[1]).add(WK(e,u+48)),42).mul(BK),r=r.xor(s[1]),a=a.add(o[0]).add(WK(e,u+40)),i=qK(i.add(s[0]),33).mul(BK),o=GK(e,u,o[1].mul(BK),r.add(s[0])),s=GK(e,u+32,i.add(s[1]),a.add(WK(e,u+16)));var d=[r,i];i=d[0],r=d[1],u+=64}while(u!==c);var f=BK.add(i.and(255).shl(1));u=l,s[0]=s[0].add(t-1&63),o[0]=o[0].add(s[0]),s[0]=s[0].add(o[0]),r=qK(r.add(a).add(o[0]).add(WK(e,u+8)),37).mul(f),a=qK(a.add(o[1]).add(WK(e,u+48)),42).mul(f),r=r.xor(s[1].mul(9)),a=a.add(o[0].mul(9).add(WK(e,u+40))),i=qK(i.add(s[0]),33).mul(f),o=GK(e,u,o[1].mul(f),r.add(s[0])),s=GK(e,u+32,i.add(s[1]),a.add(WK(e,u+16)));var p=[r,i];return i=p[0],r=p[1],KK(KK(o[0],s[0],f).add(UK(a).mul(FK)).add(i),KK(o[1],s[1],f).add(r),f)}function QK(e,t){return"string"===t?eG(e):JK([e],t)}function JK(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=tW(e)),RW().getBool("DEBUG")&&function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type ".concat(t," being uploaded contains ").concat(r,"."))}}(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type ".concat(t))}function $K(){return RW().platform.now()}function eG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",RW().platform.encode(e,t)}function tG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return t=t||"utf-8",RW().platform.decode(e,t)}var nG=function(){function e(t,n){I(this,e),this.backendTimer=t,this.logger=n,null==n&&(this.logger=new rG)}return N(e,[{key:"profileKernel",value:function(e,t,n){var r,a,i=function(){r=n()},o=$K();if(this.backendTimer.timerAvailable())a=this.backendTimer.time(i);else{i();var s,u=V(r);try{for(u.s();!(s=u.n()).done;){s.value.dataSync()}}catch(d){u.e(d)}finally{u.f()}a=Promise.resolve({kernelMs:$K()-o})}if(RW().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var c=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found ".concat(a," in the result of '").concat(n,"'")),!0}}(t,n.dtype,e)}))},l=0;l<r.length;l++)c(l);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}}},{key:"logKernelProfile",value:function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))}}]),e}();var rG=function(){function e(){I(this,e)}return N(e,[{key:"logKernelProfile",value:function(e,t,n,r,a,i){var o="number"===typeof r?oW("".concat(r,"ms"),9):r.error,s=oW(e,25),u=t.rank,c=t.size,l=oW(t.shape.toString(),14),d="";for(var f in a){var p=a[f];if(null!=p){var h=p.shape||t.shape,v=h.length;d+="".concat(f,": ").concat(v,"D ").concat(v>0?h:""," ")}}console.log("%c".concat(s,"\t%c").concat(o,"\t%c").concat(u,"D ").concat(l,"\t%c").concat(c,"\t%c").concat(d,"\t%c").concat(i),"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}]),e}();function aG(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var c in u){for(var l=u[c],d=!1,f=0;f<t.length;f++)if(r[l.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),d=!0,a[s.id]=!0;break}if(d)break}}var p={};p[n.id]=!0;for(var h={},v=e.length-1;v>=0;v--)for(var m=e[v],y=m.inputs,g=0;g<m.outputs.length;g++)if(p[m.outputs[g].id]){for(var b in y)p[y[b].id]=!0,h[m.id]=!0;break}for(var x=[],k=0;k<e.length;k++){var w=e[k];if(a[w.id]&&h[w.id]){var _={};for(var T in w.inputs){var S=w.inputs[T];r[S.id]&&(_[T]=S)}var E=Object.assign({},w);E.inputs=_,E.outputs=w.outputs,x.push(E)}}return x}function iG(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found "+"for ".concat(i.kernelName,"."));var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input ".concat(t,". ")+"Available gradients found: ".concat(Object.keys(s),"."));var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"".concat(t," must have 'float32' dtype, but has '").concat(a.dtype,"'"));var o=i.inputs[t];if(!rW(a.shape,o.shape))throw new Error("Error in gradient for op ".concat(i.kernelName,". The gradient of input ")+"'".concat(t,"' has shape '").concat(a.shape,"', which does not match ")+"the shape of the input '".concat(o.shape,"'"));if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var c in i.inputs)u(c)},i=t.length-1;i>=0;i--)a(i)}function oG(e,t,n,r){var a=xW(t),i=function(e,t,n,r){var a=nW(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?lG(e):e;if(s>1)for(var c=0;c<a/i;c++)for(var l=c*i,d=0;d<i;d++)o[d]=Math.max(o[d],sG(u[l+d],0,n).length);return o}(e,t,n,a),o=t.length,s=cG(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: ".concat(n)),u.push("  rank: ".concat(o)),u.push("  shape: [".concat(t,"]")),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function sG(e,t,n){return oW(Array.isArray(e)?"".concat(parseFloat(e[0].toFixed(7))," + ")+"".concat(parseFloat(e[1].toFixed(7)),"j"):mW(e)?"'".concat(e,"'"):"bool"===n?uG(e):parseFloat(e.toFixed(7)).toString(),t)}function uG(e){return 0===e?"false":"true"}function cG(e,t,n,r,a){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u){if("complex64"===n){var c=lG(e);return[sG(c[0],0,n)]}return"bool"===n?[uG(e[0])]:[e[0].toString()]}if(1===u){if(s>20){var l=3*o,d=Array.from(e.slice(0,l)),f=Array.from(e.slice((s-3)*o,s*o));return"complex64"===n&&(d=lG(d),f=lG(f)),["["+d.map((function(e,t){return sG(e,a[t],n)})).join(", ")+", ..., "+f.map((function(e,t){return sG(e,a[s-3+t],n)})).join(", ")+"]"]}var p="complex64"===n?lG(e):Array.from(e);return["["+p.map((function(e,t){return sG(e,a[t],n)})).join(", ")+"]"]}var h=t.slice(1),v=r.slice(1),m=r[0]*o,y=[];if(s>20){for(var g=0;g<3;g++){var b=g*m,x=b+m;y.push.apply(y,(0,Ze.Z)(cG(e.slice(b,x),h,n,v,a,!1)))}y.push("...");for(var k=s-3;k<s;k++){var w=k*m,_=w+m;y.push.apply(y,(0,Ze.Z)(cG(e.slice(w,_),h,n,v,a,k===s-1)))}}else for(var T=0;T<s;T++){var S=T*m,E=S+m;y.push.apply(y,(0,Ze.Z)(cG(e.slice(S,E),h,n,v,a,T===s-1)))}var I=2===u?",":"";y[0]="["+y[0]+I;for(var C=1;C<y.length-1;C++)y[C]=" "+y[C]+I;for(var N=",\n",A=2;A<u;A++)N+="\n";return y[y.length-1]=" "+y[y.length-1]+"]"+(i?"":N),y}function lG(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var dG=function(){function e(t,n,r){var a=this;if(I(this,e),this.dtype=n,this.shape=t.slice(),this.size=nW(t),null!=r){var i=r.length;JV(i===this.size,(function(){return"Length of values '".concat(i,"' does not match the size ")+"inferred by the shape '".concat(a.size,"'.")}))}if("complex64"===n)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||fW(n,this.size),this.strides=xW(t)}return N(e,[{key:"set",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),JV(r.length===this.rank,(function(){return"The number of provided coordinates (".concat(r.length,") must ")+"match the rank (".concat(t.rank,")")}));var i=this.locToIndex(r);this.values[i]=e}},{key:"get",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at ".concat(t,". ")+"  Buffer shape=".concat(this.shape);throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]}},{key:"locToIndex",value:function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}},{key:"indexToLoc",value:function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}},{key:"rank",get:function(){return this.shape.length}},{key:"toTensor",value:function(){return fG().makeTensor(this.values,this.shape,this.dtype)}}]),e}(),fG=null,pG=null;var hG=function(){function e(t,n,r,a){I(this,e),this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=nW(t),this.strides=xW(t),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return N(e,[{key:"rank",get:function(){return this.shape.length}},{key:"buffer",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",pG.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bufferSync",value:function(){return pG.buffer(this.shape,this.dtype,this.dataSync())}},{key:"array",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",wW(this.shape,t,"complex64"===this.dtype));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"arraySync",value:function(){return wW(this.shape,this.dataSync(),"complex64"===this.dtype)}},{key:"data",value:function(){var e=j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=fG().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return tG(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"dataToGPU",value:function(e){return this.throwIfDisposed(),fG().readToGPU(this.dataId,e)}},{key:"dataSync",value:function(){this.throwIfDisposed();var e=fG().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return tG(e)}))}catch(lA){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}},{key:"bytes",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,fG().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"dispose",value:function(){this.isDisposed||(fG().disposeTensor(this),this.isDisposedInternal=!0)}},{key:"isDisposed",get:function(){return this.isDisposedInternal}},{key:"throwIfDisposed",value:function(){if(this.isDisposed)throw new Error("Tensor is disposed.")}},{key:"print",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return pG.print(this,e)}},{key:"clone",value:function(){return this.throwIfDisposed(),pG.clone(this)}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.dataSync();return oG(t,this.shape,this.dtype,e)}},{key:"cast",value:function(e){return this.throwIfDisposed(),pG.cast(this,e)}},{key:"variable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return this.throwIfDisposed(),fG().makeVariable(this,e,t,n)}}]),e}();Object.defineProperty(hG,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}}),FW("Tensor",(function(){return hG}));var vG,mG,yG,gG,bG,xG=function(e){P(n,e);var t=F(n);function n(e,r,a,i){var o;return I(this,n),(o=t.call(this,e.shape,e.dtype,e.dataId,i)).trainable=r,o.name=a,o}return N(n,[{key:"assign",value:function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value (".concat(e.dtype,") and ")+"previous value (".concat(this.dtype,") must match"));if(!rW(e.shape,this.shape))throw new Error("shape of the new value (".concat(e.shape,") and ")+"previous value (".concat(this.shape,") must match"));fG().disposeTensor(this),this.dataId=e.dataId,fG().incRef(this,null)}},{key:"dispose",value:function(){fG().disposeVariable(this),this.isDisposedInternal=!0}}]),n}(hG);Object.defineProperty(xG,Symbol.hasInstance,{value:function(e){return e instanceof hG&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(vG||(vG={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(mG||(mG={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(yG||(yG={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(gG||(gG={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(bG||(bG={}));var kG={float32:gG,int32:mG,bool:yG,complex64:bG};function wG(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast ".concat(e," with ").concat(t))}return kG[e][t]}function _G(e){return wG(e,"int32")}function TG(e,t){if(e.dtype===t.dtype)return[e,t];var n=wG(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function SG(e,t){JV(e.dtype===t.dtype,(function(){return"The dtypes of the first(".concat(e.dtype,") and")+" second(".concat(t.dtype,") input must match")}))}function EG(e){var t=[];return IG(e,t,new Set),t}function IG(e,t,n){if(null!=e)if(e instanceof hG)t.push(e);else if(r=e,Array.isArray(r)||"object"===typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),IG(o,t,n))}}}function CG(e){return null!=e.kernelName}var NG=function(){function e(){I(this,e),this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return N(e,[{key:"dispose",value:function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()}}]),e}(),AG=function(){function e(t){I(this,e),this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new NG}return N(e,[{key:"ready",value:function(){var e=j(G().mark((function e(){var t,n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '".concat(this.backendName,"' has not yet been initialized. Make ")+"sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '".concat(t,"' has not yet been ")+"initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"backendNames",value:function(){return Object.keys(this.registryFactory)}},{key:"findBackend",value:function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]}},{key:"findBackendFactory",value:function(e){return e in this.registryFactory?this.registryFactory[e].factory:null}},{key:"registerBackend",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e in this.registryFactory?(EK("".concat(e," backend was already registered. ")+"Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}},{key:"setBackend",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '".concat(t,"' not found in registry"));case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new nG(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setupRegisteredKernels",value:function(){var e=this;OK(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))}},{key:"disposeRegisteredKernels",value:function(e){var t=this;OK(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))}},{key:"initializeBackend",value:function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend ".concat(e,", no registration found."));try{var r=n.factory();if(!r||r instanceof HV||"function"!==typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,EK("Initialization of backend ".concat(e," failed")),EK(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(o){return EK("Initialization of backend ".concat(e," failed")),EK(o.stack||o.message),{success:!1,asyncInit:!1}}}},{key:"removeBackend",value:function(e){if(!(e in this.registryFactory))throw new Error("".concat(e," backend not found in registry"));this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}},{key:"getSortedBackends",value:function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))}},{key:"initializeBackendsAndReturnBest",value:function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}},{key:"moveData",value:function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t),i=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,a,n.shape,n.dtype,i),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}},{key:"tidy",value:function(e,t){var n,r=this,a=null;if(null==t){if("function"!==typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!==typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!==typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))}},{key:"scopedRun",value:function(e,t,n){e();try{var r=n();return t(),r}catch(a){throw t(),a}}},{key:"nextTensorId",value:function(){return e.nextTensorId++}},{key:"nextVariableId",value:function(){return e.nextVariableId++}},{key:"clone",value:function(e){var t=DG.runKernel(Wz,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t={x:e},n={dtype:"float32"};return DG.runKernel(az,t,n)}}}),[],{}),t}},{key:"runKernel",value:function(e,t,n){if(null==this.backendName&&this.backend,!(null!=NK(e,this.backendName)))throw new Error("Kernel '".concat(e,"' not registered for backend '").concat(this.backendName,"'"));return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}},{key:"shouldCheckForMemLeaks",value:function(){return this.ENV.getBool("IS_TEST")}},{key:"checkKernelForMemLeak",value:function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '".concat(this.backendName,"' has an internal memory leak ")+"(".concat(o," data ids) after running '").concat(e,"'"))}},{key:"runKernelFunc",value:function(e){var t,n,r,a=this,i=[],o=this.isTapeOn(),s=this.state.numBytes,u=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var c=CG(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(CG(e)){var l=e.kernelName,d=e.inputs,f=e.attrs;null==this.backendName&&this.backend;var p=NK(l,this.backendName);JV(null!=p,(function(){return"Cannot find registered kernel '".concat(l,"' for backend '").concat(a.backendName,"'")})),n=function(){var e=a.backend.numDataIds();r=p.kernelFunc({inputs:d,attrs:f,backend:a.backend});var t=Array.isArray(r)?r:[r];a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(l,e,t);var n=t.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return a.makeTensorFromDataId(t,n,r)}));if(o){var s=a.getTensorsForGradient(l,d,n);i=a.saveTensorsForBackwardMode(s)}return n}}else{var h=e.forwardFunc,v=function(e){o&&(i=e.map((function(e){return a.keep(a.clone(e))})))};n=function(){var e=a.backend.numDataIds();r=a.tidy((function(){return h(a.backend,v)}));var t=Array.isArray(r)?r:[r];return a.shouldCheckForMemLeaks()&&a.checkKernelForMemLeak(c,e,t),t}}var m,y=e.inputs,g=e.attrs,b=CG(e)?null:e.backwardsFunc;return this.scopedRun((function(){return a.state.kernelDepth++}),(function(){return a.state.kernelDepth--}),(function(){a.ENV.getBool("DEBUG")||a.state.profiling?(m=a.profiler.profileKernel(c,y,(function(){return n()})),a.ENV.getBool("DEBUG")&&a.profiler.logKernelProfile(m),t=m.outputs):t=n()})),o&&this.addTapeNode(c,y,t,b,i,g),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-u,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(y).map((function(e){return null!=y[e]?y[e].shape:null})),outputShapes:t.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(r)?t:t[0]}},{key:"saveTensorsForBackwardMode",value:function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n}},{key:"getTensorsForGradient",value:function(e,t,n){var r=AK(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(JV(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return[]}},{key:"makeTensor",value:function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&mW(e[0])&&(a=e.map((function(e){return eG(e)})));var i=r.write(a,t,n),o=new hG(t,n,i,this.nextTensorId());if(this.trackTensor(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=function(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o}},{key:"makeTensorFromDataId",value:function(e,t,n,r){var a=new hG(t,n=n||"float32",e,this.nextTensorId());return this.trackTensor(a,r),a}},{key:"makeVariable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new xG(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name ".concat(a.name," was already registered"));return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a}},{key:"trackTensor",value:function(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;var n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*vW(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof xG||this.track(e)}},{key:"incRef",value:function(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}},{key:"removeDataId",value:function(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}},{key:"disposeTensor",value:function(e){if(this.state.tensorInfo.has(e.dataId)){var t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){var n=e.size*vW(e.dtype);this.state.numBytes-=n}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}}},{key:"disposeVariables",value:function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}}},{key:"disposeVariable",value:function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}},{key:"memory",value:function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}},{key:"profile",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,(0,Ze.Z)(this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot})))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=V(this.state.activeProfile.kernels),e.prev=12,a.s();case 14:if((i=a.n()).done){e.next=24;break}return o=i.value,e.next=18,o.kernelTimeMs;case 18:return o.kernelTimeMs=e.sent,e.next=21,o.extraInfo;case 21:o.extraInfo=e.sent;case 22:e.next=14;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(12),a.e(e.t0);case 29:return e.prev=29,a.f(),e.finish(29);case 32:return e.abrupt("return",this.state.activeProfile);case 33:case"end":return e.stop()}}),e,this,[[12,26,29,32]])})));return function(t){return e.apply(this,arguments)}}()},{key:"isTapeOn",value:function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}},{key:"addTapeNode",value:function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=AK(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=TW(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)}},{key:"keep",value:function(e){return e.kept=!0,e}},{key:"startTape",value:function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}},{key:"endTape",value:function(){this.state.gradientDepth--}},{key:"startScope",value:function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}},{key:"endScope",value:function(e){for(var t=this,n=EG(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))}},{key:"gradients",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(JV(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '".concat(n.dtype,"'"));var i=this.scopedRun((function(){return r.startTape()}),(function(){return r.endTape()}),(function(){return r.tidy("forward",e)}));JV(i instanceof hG,(function(){return"The result y returned by f() must be a tensor."}));var o=aG(this.state.activeTape,t,i);if(!a&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e={};e[i.id]=null==n?OG(i.shape):n,iG(e,o,(function(e){return r.tidy(e)}),MG);var a=t.map((function(t){return e[t.id]}));return 0===r.state.gradientDepth&&(r.state.activeTape.forEach((function(e){var t,n=V(e.saved);try{for(n.s();!(t=n.n()).done;){t.value.dispose()}}catch(r){n.e(r)}finally{n.f()}})),r.state.activeTape=null),{value:i,grads:a}}))}},{key:"customGrad",value:function(e){var t=this;return JV(gW(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;JV(r.every((function(e){return e instanceof hG})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};r.forEach((function(e,t){o[t]=e}));var s=function(t,n){return JV((i=e.apply(void 0,[].concat(r,[n]))).value instanceof hG,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),JV(gW(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value},u=function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];JV(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),JV(a.every((function(e){return e instanceof hG})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o};return t.runKernelFunc({forwardFunc:s,backwardsFunc:u,inputs:o})}}},{key:"readSync",value:function(e){return this.state.tensorInfo.get(e).backend.readSync(e)}},{key:"read",value:function(e){return this.state.tensorInfo.get(e).backend.read(e)}},{key:"readToGPU",value:function(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}},{key:"time",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$K(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=$K()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"track",value:function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}},{key:"reset",value:function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new NG,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}]),e}();function OG(e){var t=_W(nW(e),"float32");return DG.makeTensor(t,e,"float32")}function PG(){var e=LW();if(null==e._tfengine){var t=new AW(e);e._tfengine=new AG(t)}return function(e){MW=e}(e._tfengine.ENV),function(e){fG=e}((function(){return e._tfengine})),e._tfengine}AG.nextTensorId=0,AG.nextVariableId=0;var RG,DG=PG();function MG(e,t){var n={a:e,b:t};return DG.runKernel(VW,n)}function LG(e){if(void 0!==RG)return RG;if(e||"undefined"!==typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;var t=e.userAgent||e.vendor||("undefined"!==typeof window?window.opera:"");if(!t){var n=e;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function FG(){return"undefined"!==typeof window&&null!=window.document||"undefined"!==typeof WorkerGlobalScope}var BG=RW();function jG(e,t){var n=e;if(hW(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||hW(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&RW().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&UG(e,r,[]),r}function UG(e,t,n){if(n=n||[],Array.isArray(e)||hW(e)){JV(t.length>0,(function(){return"Element arr[".concat(n.join("]["),"] should be a primitive, ")+"but is an array of ".concat(e.length," elements")})),JV(e.length===t[0],(function(){return"Element arr[".concat(n.join("]["),"] should have ").concat(t[0]," ")+"elements, but has ".concat(e.length," elements")}));for(var r=t.slice(1),a=0;a<e.length;++a)UG(e[a],r,n.concat(a))}else JV(0===t.length,(function(){return"Element arr[".concat(n.join("]["),"] is a primitive, ")+"but should be an array/TypedArray of ".concat(t[0]," elements")}))}function VG(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '".concat(n,"' passed to '").concat(r,"' must ")+"be ".concat(e," tensor, but got ").concat(t," tensor"))}}function WG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(e instanceof hG)return VG(r,e.dtype,t,n),e;var a=yW(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),VG(r,a,t,n),null==e||!hW(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '".concat(t,"' passed to '").concat(n,"' must be a ")+"Tensor or TensorLike, but got '".concat(i,"'"))}var o=jG(e,a);hW(e)||Array.isArray(e)||(e=[e]);var s=!0,u="string"!==a?JK(e,a):tW(e,[],s);return DG.makeTensor(u,o,a)}function zG(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"numeric";if(!Array.isArray(e))throw new Error("Argument ".concat(t," passed to ").concat(n," must be a ")+"`Tensor[]` or `TensorLike[]`");var a=e;return a.map((function(e,a){return WG(e,"".concat(t,"[").concat(a,"]"),n,r)}))}BG.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),BG.registerFlag("IS_BROWSER",(function(){return FG()})),BG.registerFlag("IS_NODE",(function(){return"undefined"!==typeof process&&"undefined"!==typeof process.versions&&"undefined"!==typeof process.versions.node})),BG.registerFlag("IS_CHROME",(function(){return"undefined"!==typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),BG.registerFlag("PROD",(function(){return!1})),BG.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return BG.getBool("DEBUG")})),BG.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),BG.registerFlag("IS_TEST",(function(){return!1})),BG.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0})),BG.registerFlag("WRAP_TO_IMAGEBITMAP",(function(){return!1}));var qG="__op";function KG(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+"".concat(t.length," keys."));var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=qG;var a=function(){DG.startScope(n);try{var e=r.apply(void 0,arguments);return CW(e)&&console.error("Cannot return a Promise inside of tidy."),DG.endScope(e),e}catch(t){throw DG.endScope(null),t}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}var GG=KG({complex_:function(e,t){var n=WG(e,"real","complex"),r=WG(t,"imag","complex");$V(n.shape,r.shape,"real and imag shapes, ".concat(n.shape," and ").concat(r.shape,", ")+"must match in call to tf.complex().");var a={real:n,imag:r};return DG.runKernel(sz,a)}});function HG(e,t,n,r){if(null==r&&(r=yW(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!hW(e)&&!Array.isArray(e)&&"number"!==typeof e&&"boolean"!==typeof e&&"string"!==typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){SW(t);var a=nW(t),i=nW(n);JV(a===i,(function(){return"Based on the provided shape, [".concat(t,"], the tensor should have ")+"".concat(a," values but has ").concat(i)}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==nW(t.slice(o));JV(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape "+"(".concat(n,") does not match the provided ")+"shape (".concat(t,"). ")}))}}return hW(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?JK(e,r):tW(e,[],!0),DG.makeTensor(e,t,r)}function ZG(e,t,n){return HG(e,t,jG(e,n),n)}var YG={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};function XG(e,t){var n,r,a={},i=0,o=V(t);try{for(o.s();!(r=o.n()).done;){var s=r.value,u=s.name,c=s.dtype,l=s.shape,d=nW(l),f=void 0;if("quantization"in s){var p=s.quantization;if("uint8"===p.dtype||"uint16"===p.dtype){if(!("min"in p)||!("scale"in p))throw new Error("Weight ".concat(s.name," with quantization ").concat(p.dtype," ")+"doesn't have corresponding metadata min and scale.")}else{if("float16"!==p.dtype)throw new Error("Weight ".concat(s.name," has unknown ")+"quantization dtype ".concat(p.dtype,". ")+"Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==c)throw new Error("Weight ".concat(s.name," is quantized with ").concat(p.dtype," ")+"which only supports weights of type float32 not ".concat(c,"."))}var h=YG[p.dtype],v=e.slice(i,i+d*h),m="uint8"===p.dtype?new Uint8Array(v):new Uint16Array(v);if("float32"===c)if("uint8"===p.dtype||"uint16"===p.dtype){f=new Float32Array(m.length);for(var y=0;y<m.length;y++){var g=m[y];f[y]=g*p.scale+p.min}}else{if("float16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type float32.");void 0===n&&(n=oH()),f=n(m)}else{if("int32"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));if("uint8"!==p.dtype&&"uint16"!==p.dtype)throw new Error("Unsupported quantization type ".concat(p.dtype," ")+"for weight type int32.");f=new Int32Array(m.length);for(var b=0;b<m.length;b++){var x=m[b];f[b]=Math.round(x*p.scale+p.min)}}i+=d*h}else if("string"===c){var k=nW(s.shape);f=[];for(var w=0;w<k;w++){var _=new Uint32Array(e.slice(i,i+4))[0];i+=4;var T=new Uint8Array(e.slice(i,i+_));f.push(T),i+=_}}else{var S=YG[c],E=e.slice(i,i+d*S);if("float32"===c)f=new Float32Array(E);else if("int32"===c)f=new Int32Array(E);else if("bool"===c)f=new Uint8Array(E);else{if("complex64"!==c)throw new Error("Unsupported dtype in weight '".concat(u,"': ").concat(c));f=new Float32Array(E);for(var I=new Float32Array(f.length/2),C=new Float32Array(f.length/2),N=0;N<I.length;N++)I[N]=f[2*N],C[N]=f[2*N+1];var A=ZG(I,l,"float32"),O=ZG(C,l,"float32");a[u]=GG(A,O),A.dispose(),O.dispose()}i+=d*S}"complex64"!==c&&(a[u]=ZG(f,l,c))}}catch(P){o.e(P)}finally{o.f()}return a}var QG="undefined"!==typeof Buffer&&("undefined"===typeof Blob||"undefined"===typeof atob||"undefined"===typeof btoa);function JG(e){return QG?Buffer.byteLength(e):new Blob([e]).size}function $G(e){if(QG)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function eH(e){if(QG){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function tH(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function nH(e,t){var n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function rH(e,t){return aH.apply(this,arguments)}function aH(){return aH=j(G().mark((function e(t,n){var r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.trainingConfig&&(r.trainingConfig=t.trainingConfig),null==t.weightsManifest){e.next=11;break}return e.next=5,n(t.weightsManifest);case 5:a=e.sent,i=(0,W.Z)(a,2),o=i[0],s=i[1],r.weightSpecs=o,r.weightData=s;case 11:return null!=t.signature&&(r.signature=t.signature),null!=t.userDefinedMetadata&&(r.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(r.modelInitializer=t.modelInitializer),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)}))),aH.apply(this,arguments)}function iH(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:JG(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:JG(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function oH(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0===(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}var sH=function(){function e(){I(this,e),this.saveRouters=[],this.loadRouters=[]}return N(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerSaveRouter",value:function(t){e.getInstance().saveRouters.push(t)}},{key:"registerLoadRouter",value:function(t){e.getInstance().loadRouters.push(t)}},{key:"getSaveHandlers",value:function(t){return e.getHandlers(t,"save")}},{key:"getLoadHandlers",value:function(t,n){return e.getHandlers(t,"load",n)}},{key:"getHandlers",value:function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a}}]),e}(),uH="tensorflowjs",cH="models_store",lH="model_info_store";function dH(){if(!RW().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"===typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function fH(e){var t=e.result;t.createObjectStore(cH,{keyPath:"modelPath"}),t.createObjectStore(lH,{keyPath:"modelPath"})}var pH=function(){function e(t){if(I(this,e),this.indexedDB=dH(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return N(e,[{key:"save",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"databaseAction",value:function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(uH,1);a.onupgradeneeded=function(){return fH(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(cH,"readonly"),s=o.objectStore(cH).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '".concat(n.modelPath,"' ")+"in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,c=iH(t),l=i.transaction(lH,"readwrite"),d=l.objectStore(lH),f=d.put({modelPath:n.modelPath,modelArtifactsInfo:c});f.onsuccess=function(){var a=(u=i.transaction(cH,"readwrite")).objectStore(cH).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:c});a.onsuccess=function(){return e({modelArtifactsInfo:c})},a.onerror=function(e){var t=(d=l.objectStore(lH)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},l.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))}}]),e}();pH.URL_SCHEME="indexeddb://";var hH=function(e){return RW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(pH.URL_SCHEME)?(t=e.slice(pH.URL_SCHEME.length),new pH(t)):null;var t};sH.registerSaveRouter(hH),sH.registerLoadRouter(hH);var vH=function(){function e(){I(this,e),this.indexedDB=dH()}return N(e,[{key:"listModels",value:function(){var e=j(G().mark((function e(){var t=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(uH,1);r.onupgradeneeded=function(){return fH(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(lH,"readonly"),i=a.objectStore(lH).getAll();i.onsuccess=function(){var t,n={},r=V(i.result);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}}catch(o){r.e(o)}finally{r.f()}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(r=t).startsWith(pH.URL_SCHEME)?r.slice(pH.URL_SCHEME.length):r,e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(uH,1);a.onupgradeneeded=function(){return fH(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(lH,"readwrite"),s=o.objectStore(lH),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '".concat(t,"' ")+"in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(cH,"readwrite")).objectStore(cH).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}var r}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),mH="/",yH="tensorflowjs_models",gH="info",bH="model_topology",xH="weight_specs",kH="weight_data",wH="model_metadata";function _H(e){return{info:[yH,e,gH].join(mH),topology:[yH,e,bH].join(mH),weightSpecs:[yH,e,xH].join(mH),weightData:[yH,e,kH].join(mH),modelMetadata:[yH,e,wH].join(mH)}}function TH(e){for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];window.localStorage.removeItem(r)}}function SH(e){var t=e.split(mH);if(t.length<3)throw new Error("Invalid key format: ".concat(e));return t.slice(1,t.length-1).join(mH)}var EH=function(){function e(t){if(I(this,e),!RW().getBool("IS_BROWSER")||"undefined"===typeof window||"undefined"===typeof window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=_H(this.modelPath)}return N(e,[{key:"save",value:function(){var e=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=iH(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,$G(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0},this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 17:throw e.prev=17,e.t0=e.catch(7),TH(this.keys),new Error("Failed to save model '".concat(this.modelPath,"' to local storage: ")+"size quota being exceeded is a possible cause of this failure: "+"modelTopologyBytes=".concat(a.modelTopologyBytes,", ")+"weightSpecsBytes=".concat(a.weightSpecsBytes,", ")+"weightDataBytes=".concat(a.weightDataBytes,"."));case 21:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '".concat(this.modelPath,"'"));case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '".concat(this.modelPath,"' ")+"is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '".concat(this.modelPath,"' ")+"are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer),null!=o.trainingConfig&&(n.trainingConfig=o.trainingConfig)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model "+"'".concat(this.modelPath,"' are missing."));case 19:return n.weightData=eH(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();EH.URL_SCHEME="localstorage://";var IH=function(e){return RW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(EH.URL_SCHEME)?(t=e.slice(EH.URL_SCHEME.length),new EH(t)):null;var t};sH.registerSaveRouter(IH),sH.registerLoadRouter(IH);var CH=function(){function e(){I(this,e),JV(RW().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),JV("undefined"===typeof window||"undefined"!==typeof window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return N(e,[{key:"listModels",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=yH+mH,r=mH+gH,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=SH(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(a=t).startsWith(EH.URL_SCHEME)?a.slice(EH.URL_SCHEME.length):a,n=_H(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '".concat(t,"'"));case 4:return r=JSON.parse(this.LS.getItem(n.info)),TH(n),e.abrupt("return",r);case 7:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),NH="://",AH=function(){function e(){I(this,e),this.managers={}}return N(e,null,[{key:"getInstance",value:function(){return null==e.instance&&(e.instance=new e),e.instance}},{key:"registerManager",value:function(t,n){JV(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(NH)&&(t=t.slice(0,t.indexOf(NH))),JV(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();JV(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '".concat(t,"'.")})),r.managers[t]=n}},{key:"getManager",value:function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '".concat(e,"'"));return t}},{key:"getSchemes",value:function(){return Object.keys(this.getInstance().managers)}}]),e}();var OH=function(){function e(){I(this,e)}return N(e,[{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)}))},{key:"now",value:function(){return performance.now()}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got ".concat(t));return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return new TextDecoder(t).decode(e)}}]),e}();if(RW().get("IS_BROWSER")){RW().setPlatform("browser",new OH);try{AH.registerManager(EH.URL_SCHEME,new CH)}catch(Noe){}try{AH.registerManager(pH.URL_SCHEME,new vH)}catch(Noe){}}var PH,RH=function(){return n(5410)};var DH=function(){function e(){I(this,e),this.util=n(8628),this.textEncoder=new this.util.TextEncoder}return N(e,[{key:"fetch",value:function(e,t){return null!=RW().global.fetch?RW().global.fetch(e,t):(null==PH&&(PH=RH()),PH(e,t))}},{key:"now",value:function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}},{key:"encode",value:function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got ".concat(t));return this.textEncoder.encode(e)}},{key:"decode",value:function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}}]),e}();function MH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32",n=arguments.length>2?arguments[2]:void 0;return t=t||"float32",SW(e),new dG(e,t,n)}RW().get("IS_NODE")&&!RW().get("IS_BROWSER")&&RW().setPlatform("node",new DH);var LH=KG({cast_:function(e,t){var n=WG(e,"x","cast");if(!function(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}(t))throw new Error("Failed to cast to unknown dtype ".concat(t));if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return DG.runKernel(az,r,a)}});var FH=KG({clone_:function(e){var t={x:WG(e,"x","clone","string_or_numeric")};return DG.runKernel(Wz,t)}});function BH(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(e.toString(t))}PG(),pG={buffer:MH,cast:LH,clone:FH,print:BH};function jH(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var UH=function(){function e(t){if(I(this,e),!RW().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return N(e,[{key:"save",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o,s;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a=nH(t,r),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor).download=this.modelJsonFileName,o.href=i,e.next=15,jH((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 15:if(null==t.weightData){e.next=21;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=21,jH((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 21:return e.abrupt("return",{modelArtifactsInfo:iH(t)});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();UH.URL_SCHEME="downloads://";function VH(e,t,n,r){!function(e){JV(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){JV(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got startFraction ".concat(e)})),JV(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but "+"got endFraction ".concat(t)})),JV(t>=e,(function(){return"startFraction must be no more than endFraction, but "+"got startFraction ".concat(e," and endFraction ")+"".concat(t)}))}(n=null==n?0:n,r=null==r?1:r);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function WH(e,t){return zH.apply(this,arguments)}function zH(){return(zH=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?RW().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,VH(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),c=.5,l=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,VH(u,n.onProgress,c,l);case 26:e.t1=e.sent;case 27:return d=e.t1,e.abrupt("return",d);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}sH.registerSaveRouter((function(e){return RW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(UH.URL_SCHEME)?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"model";return new UH(e)}(e.slice(UH.URL_SCHEME.length)):null}));var qH=function(){function e(t,n){if(I(this,e),this.DEFAULT_METHOD="POST",null==n&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,this.weightUrlConverter=n.weightUrlConverter,null!=n.fetchFunc?(JV("function"===typeof n.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=n.fetchFunc):this.fetch=RW().platform.fetch,JV(null!=t&&t.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(t)&&JV(2===t.length,(function(){return"URL paths for http must have a length of 2, "+"(actual length is ".concat(t.length,").")})),this.path=t,null!=n.requestInit&&null!=n.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return N(e,[{key:"save",value:function(){var e=j(G().mark((function e(t){var n,r,a,i;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a=nH(t,r),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=10,this.fetch(this.path,n);case 10:if(!(i=e.sent).ok){e.next=15;break}return e.abrupt("return",{modelArtifactsInfo:iH(t),responses:[i]});case 15:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+"".concat(i.status,"."));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"load",value:function(){var e=j(G().mark((function e(){var t,n,r,a,i,o=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to ".concat(this.path," failed with status code ")+"".concat(t.status,". Please verify this URL points to ")+"the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from ".concat(this.path,"."),this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,null!=a||null!=i){e.next=20;break}throw new Error("The JSON from HTTP path ".concat(this.path," contains neither model ")+"topology or manifest for weights.");case 20:return e.abrupt("return",rH(n,(function(e){return o.loadWeights(e)})));case 21:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadWeights",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Array.isArray(this.path)?this.path[1]:this.path,r=KH(n),a=(0,W.Z)(r,2),i=a[0],o=a[1],s=this.weightPathPrefix||i,u=[],c=V(t);try{for(c.s();!(l=c.n()).done;)d=l.value,u.push.apply(u,(0,Ze.Z)(d.weights))}catch(Noe){c.e(Noe)}finally{c.f()}f=[],p=[],h=V(t);try{for(h.s();!(v=h.n()).done;){m=v.value,y=V(m.paths);try{for(y.s();!(g=y.n()).done;)b=g.value,null!=this.weightUrlConverter?p.push(this.weightUrlConverter(b)):f.push(s+b+o)}catch(Noe){y.e(Noe)}finally{y.f()}}}catch(Noe){h.e(Noe)}finally{h.f()}if(!this.weightUrlConverter){e.next=19;break}return e.t0=f.push,e.t1=f,e.t2=Ze.Z,e.next=16,Promise.all(p);case 16:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 19:return e.next=21,WH(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 21:return x=e.sent,e.abrupt("return",[u,tH(x)]);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function KH(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function GH(e){return null!=e.match(qH.URL_SCHEME_REGEX)}qH.URL_SCHEME_REGEX=/^https?:\/\//;var HH=function(e,t){if("undefined"===typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return GH(e)})):GH(e))?ZH(e,t):null};function ZH(e,t){return new qH(e,t)}function YH(e,t){return ZH(e,t)}sH.registerSaveRouter(HH),sH.registerLoadRouter(HH);var XH;function QH(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function JH(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o){var s="Operands could not be broadcast together with shapes "+"".concat(e," and ").concat(t,".");throw Error(s)}n.unshift(i)}}return n}function $H(e,t,n){if(eW(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=jG(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return HG(e,t,r,n)}function eZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!==typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, "+"but was ".concat(e.constructor.name));s=!0}if(a){var u=2;if(a&&e.readyState<u)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}var c=NK(kK,DG.backendName);if(null!=c){var l={pixels:e},d={numChannels:t};return DG.runKernel(kK,l,d)}var f,p,h=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],v=(0,W.Z)(h,2),m=v[0],y=v[1];if(o)f=e.getContext("2d").getImageData(0,0,m,y).data;else if(r||n)f=e.data;else if(i||a||s){if(null==XH)if("undefined"===typeof document){if("undefined"===typeof OffscreenCanvas||"undefined"===typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");XH=new OffscreenCanvas(1,1).getContext("2d")}else XH=document.createElement("canvas").getContext("2d");XH.canvas.width=m,XH.canvas.height=y,XH.drawImage(e,0,0,m,y),f=XH.getImageData(0,0,m,y).data}if(4===t)p=new Int32Array(f);else{var g=m*y;p=new Int32Array(g*t);for(var b=0;b<g;b++)for(var x=0;x<t;++x)p[b*t+x]=f[4*b+x]}var k=[y,m,t];return $H(p,k,"int32")}var tZ=KG({fromPixels_:eZ});function nZ(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher,"+" but the rank was ".concat(n,"."));if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(r,"."));if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type,"+" but the dtype was ".concat(t.dtype,"."));if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+"".concat(t.shape[r-1]," vs. ").concat(n));if(0===nW(e.shape))throw new Error("Requested more than 0 entries, but input is empty."+" Input shape: ".concat(e.shape,"."));for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,c=a.slice();c.pop();for(var l=1,d=i;d<n;++d)l*=u[d],c.push(u[d]);var f=[].concat((0,Ze.Z)(xW(e.shape).map((function(e){return e/l}))),[1]).slice(0,i);return[c,o,l,f]}function rZ(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher,"+" but the rank was ".concat(t.rank,"."));if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher,"+" but the rank was ".concat(e.rank,"."));if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: ".concat(t.dtype));if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: ".concat(n));if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: ".concat(t.shape));if(0===e.size)throw new Error("Updates specified for empty output. updates shape: ".concat(e.shape))}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + "+"shape[sliceDim:], got updates.shape: ".concat(n.shape)+", indices.shape: ".concat(t.shape,", shape: ").concat(e)+", sliceDim: ".concat(r,", and batchDim: ").concat(a,".");if(n.rank<a)throw new Error(i+" update.rank < ".concat(a,". "));if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < ".concat(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != ".concat(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape[".concat(o,"] (").concat(n.shape[o],") != indices.shape[").concat(o,"] (").concat(t.shape[o],")."));for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape[".concat(s+a,"] (").concat(n.shape[s+a],") != shape[").concat(s+a,"] (").concat(e[s+a],")"))}(n,t,e)}function aZ(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:nW(t.shape)/u,sliceSize:o,strides:[].concat((0,Ze.Z)(xW(n.slice(0,a))),[1]),outputSize:nW(n)}}function iZ(e,t,n){var r=e.shape.length;JV(r===t.length,(function(){return"Error in slice".concat(r,"D: Length of begin ").concat(t," must ")+"match the rank of the array (".concat(r,").")})),JV(r===n.length,(function(){return"Error in slice".concat(r,"D: Length of size ").concat(n," must ")+"match the rank of the array (".concat(r,").")}));for(var a=function(a){JV(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice".concat(r,"D: begin[").concat(a,"] + size[").concat(a,"] ")+"(".concat(t[a]+n[a],") would overflow input.shape[").concat(a,"] (").concat(e.shape[a],")")}))},i=0;i<r;++i)a(i)}function oZ(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function sZ(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function uZ(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function cZ(e,t,n){var r,a,i=e.shape.length;return(r="number"===typeof t?[t].concat((0,Ze.Z)(new Array(i-1).fill(0))):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){JV(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"===typeof n?[n].concat((0,Ze.Z)(new Array(i-1).fill(-1))):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(JV(-1===t,(function(){return"Negative size values should be exactly -1 but got "+"".concat(t," for the slice() size at index ").concat(n,".")})),e.shape[n]-r[n])})),[r,a]}function lZ(e,t,n,r,a,i,o,s,u){var c;if(null==r?(c=new Array(t.length)).fill(1):c=r,null!=o&&0!==(o&o-1))throw new Error("Multiple ellipses in slice is not allowed.");for(var l=!1,d={dims:c.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:c.slice(),beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u},f=0;f<d.dims;f++)l&&0!==(1<<f&s)&&d.numAddAxisAfterEllipsis++,1<<f&o&&(l=!0);l||(d.ellipsisMask|=1<<d.dims,d.dims++);var p={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;var n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(var r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask)for(var a=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);n<a;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r;else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error("Index out of range using input dim ".concat(n,"; input ")+"has only ".concat(t.dims," dims, ").concat(t.begin.length,"."));null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(d,p);for(var h=!0,v=!0,m=!0,y=[],g=[],b=0;b<e.length;++b){if(0===p.strides[b])throw Error("strides[".concat(b,"] must be non-zero"));var x=!!(p.shrinkAxisMask&1<<b),k=e[b];if(-1!==k){var w=[p.beginMask&1<<b,p.endMask&1<<b],_=[p.strides[b]>0?0:-1,p.strides[b]>0?k:k-1];if(x&&p.strides[b]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===p.strides[b];var T=!!(p.beginMask&1<<b&&p.endMask&1<<b);if(p.beginValid&&p.endValid){if(x){var S=p.begin[b]<0?k+p.begin[b]:p.begin[b];if(p.begin[b]=S,p.end[b]=p.begin[b]+1,S<0||S>=k)throw Error("slice index ".concat(p.begin[b]," of dimension ").concat(b," out of bounds."))}else p.begin[b]=dZ(p.begin[b],0,p.strides[b],k,w,_),p.end[b]=dZ(p.end[b],1,p.strides[b],k,w,_);var E=1===p.strides[b]&&0===p.begin[b]&&p.end[b]===k;h=h&&E,v=v&&(0===b&&1===p.strides[b]||E)}else h=h&&1===p.strides[b]&&T,v=v&&(0===b&&1===p.strides[b]||T);var I=void 0,C=!1;if(p.beginValid&&p.endValid?(I=p.end[b]-p.begin[b],C=!0):x?(I=1,C=!0):T&&k>=0&&(I=p.strides[b]<0?-k:k,C=!0),C){var N=void 0;N=0===I||I<0!==p.strides[b]<0?0:Math.trunc(I/p.strides[b])+(I%p.strides[b]!==0?1:0),y.push(N)}else y.push(-1)}else y.push(x?1:-1)}for(var A=0;A<p.finalShapeGatherIndices.length;++A){var O=p.finalShapeGatherIndices[A];O>=0?g.push(y[O]):-2===O&&g.push(1)}var P=g.filter((function(e,t){return-2!==p.finalShapeGatherIndices[t]}));return{finalShapeSparse:P,finalShape:g,isIdentity:h,sliceDim0:v,isSimpleSlice:m,begin:p.begin,end:p.end,strides:p.strides}}function dZ(e,t,n,r,a,i){if(a[t])return n>0?i[t]:i[t+1&1];var o=e<0?r+e:e;return o<i[0]?i[0]:o>i[1]?i[1]:o}var fZ=KG({abs_:function(e){var t=WG(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return DG.runKernel(uz,n)}var r={x:t};return DG.runKernel(BW,r)}});var pZ=KG({acos_:function(e){var t={x:WG(e,"x","acos")};return DG.runKernel(jW,t)}});var hZ=KG({acosh_:function(e){var t={x:WG(e,"x","acosh")};return DG.runKernel(UW,t)}});var vZ=KG({add_:function(e,t){var n=WG(e,"a","add"),r=WG(t,"b","add"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(VW,o)}});var mZ=KG({addN_:function(e){JV(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),JV(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+"".concat(e.length)}));var t=e.map((function(e,t){return WG(e,"tensors".concat(t),"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!rW(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return DG.runKernel(WW,r)}});var yZ=KG({all_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","all","bool"),a={x:r},i={axis:t,keepDims:n};return DG.runKernel(zW,a,i)}});var gZ=KG({any_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","any","bool"),a={x:r},i={axis:t,keepDims:n};return DG.runKernel(qW,a,i)}});var bZ=KG({argMax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","argMax"),r={x:n},a={axis:t};return DG.runKernel(KW,r,a)}});var xZ=KG({argMin_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","argMin"),r={x:n},a={axis:t};return DG.runKernel(GW,r,a)}});var kZ=KG({asin_:function(e){var t={x:WG(e,"x","asin")};return DG.runKernel(HW,t)}});var wZ=KG({asinh_:function(e){var t={x:WG(e,"x","asinh")};return DG.runKernel(ZW,t)}});var _Z=KG({atan_:function(e){var t={x:WG(e,"x","atan")};return DG.runKernel(YW,t)}});var TZ=KG({atan2_:function(e,t){var n=WG(e,"a","atan2"),r=WG(t,"b","atan2"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(QW,o)}});var SZ=KG({atanh_:function(e){var t={x:WG(e,"x","atanh")};return DG.runKernel(XW,t)}});function EZ(e,t,n,r,a,i){var o,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",u=OZ(t),c=(0,W.Z)(u,2),l=c[0],d=c[1];if("channelsLast"===s)o=[l,d,e[3],e[3]];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));o=[l,d,e[1],e[1]]}return CZ(e,o,n,r,a,i,!1,s)}function IZ(e,t,n,r,a,i){var o,s,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NDHWC",c=PZ(t),l=(0,W.Z)(c,3),d=l[0],f=l[1],p=l[2];if("NDHWC"===u)s="channelsLast",o=[d,f,p,e[4],e[4]];else{if("NCDHW"!==u)throw new Error("Unknown dataFormat ".concat(u));s="channelsFirst",o=[d,f,p,e[1],e[1]]}return NZ(e,o,n,r,a,!1,s,i)}function CZ(e,t,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"channelsLast",u=-1,c=-1,l=-1,d=-1;if("channelsLast"===s){var f=(0,W.Z)(e,4);u=f[0],c=f[1],l=f[2],d=f[3]}else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat ".concat(s));var p=(0,W.Z)(e,4);u=p[0],d=p[1],c=p[2],l=p[3]}var h,v=(0,W.Z)(t,4),m=v[0],y=v[1],g=v[3],b=OZ(n),x=(0,W.Z)(b,2),k=x[0],w=x[1],_=OZ(r),T=(0,W.Z)(_,2),S=T[0],E=T[1],I=RZ(m,S),C=RZ(y,E),N=DZ(a,c,l,k,w,I,C,i,s),A=N.padInfo,O=N.outHeight,P=N.outWidth,R=o?g*d:g;return"channelsFirst"===s?h=[u,R,O,P]:"channelsLast"===s&&(h=[u,O,P,R]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:l,inChannels:d,outHeight:O,outWidth:P,outChannels:R,padInfo:A,strideHeight:k,strideWidth:w,filterHeight:m,filterWidth:y,effectiveFilterHeight:I,effectiveFilterWidth:C,dilationHeight:S,dilationWidth:E,inShape:e,outShape:h,filterShape:t}}function NZ(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"channelsLast",s=arguments.length>7?arguments[7]:void 0,u=-1,c=-1,l=-1,d=-1,f=-1;if("channelsLast"===o){var p=(0,W.Z)(e,5);u=p[0],c=p[1],l=p[2],d=p[3],f=p[4]}else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat ".concat(o));var h=(0,W.Z)(e,5);u=h[0],f=h[1],c=h[2],l=h[3],d=h[4]}var v,m=(0,W.Z)(t,5),y=m[0],g=m[1],b=m[2],x=m[4],k=PZ(n),w=(0,W.Z)(k,3),_=w[0],T=w[1],S=w[2],E=PZ(r),I=(0,W.Z)(E,3),C=I[0],N=I[1],A=I[2],O=RZ(y,C),P=RZ(g,N),R=RZ(b,A),D=MZ(a,c,l,d,_,T,S,O,P,R,s),M=D.padInfo,L=D.outDepth,F=D.outHeight,B=D.outWidth,j=i?x*f:x;return"channelsFirst"===o?v=[u,j,L,F,B]:"channelsLast"===o&&(v=[u,L,F,B,j]),{batchSize:u,dataFormat:o,inDepth:c,inHeight:l,inWidth:d,inChannels:f,outDepth:L,outHeight:F,outWidth:B,outChannels:j,padInfo:M,strideDepth:_,strideHeight:T,strideWidth:S,filterDepth:y,filterHeight:g,filterWidth:b,effectiveFilterDepth:O,effectiveFilterHeight:P,effectiveFilterWidth:R,dilationDepth:C,dilationHeight:N,dilationWidth:A,inShape:e,outShape:v,filterShape:t}}function AZ(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=RZ(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function OZ(e){return"number"===typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function PZ(e){return"number"===typeof e?[e,e,e]:e}function RZ(e,t){return t<=1?e:e+(e-1)*(t-1)}function DZ(e,t,n,r,a,i,o,s,u){var c,l,d;if("number"===typeof e){c={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=AZ(e,t,n));var i=e[0],o=e[1];return[LZ((i-t+2*r)/n+1,a),LZ((o-t+2*r)/n+1,a)]}([t,n],i,r,e,s);l=f[0],d=f[1]}else if("same"===e){l=Math.ceil(t/r),d=Math.ceil(n/a);var p=Math.max(0,(l-1)*r+i-t),h=Math.max(0,(d-1)*a+o-n),v=Math.floor(p/2),m=p-v,y=Math.floor(h/2);c={top:v,bottom:m,left:y,right:h-y,type:"SAME"}}else if("valid"===e)c={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-i+1)/r),d=Math.ceil((n-o+1)/a);else{if("object"!==typeof e)throw Error("Unknown padding parameter: ".concat(e));var g="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],k="channelsLast"===u?e[2][1]:e[3][1];c={top:g,bottom:b,left:x,right:k,type:0===g&&0===b&&0===x&&0===k?"VALID":"EXPLICIT"},l=LZ((t-i+g+b)/r+1,s),d=LZ((n-o+x+k)/a+1,s)}return{padInfo:c,outHeight:l,outWidth:d}}function MZ(e,t,n,r,a,i,o,s,u,c,l){var d,f,p,h;if("number"===typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,a,i){null==a&&(a=AZ(e,t,r));var o=e[0],s=e[1],u=e[2];return[LZ((o-t+2*a)/r+1,i),LZ((s-t+2*a)/r+1,i),LZ((u-t+2*a)/r+1,i),n]}([t,n,r,1],s,1,a,e,l);f=v[0],p=v[1],h=v[2]}else if("same"===e){var m=((f=Math.ceil(t/a))-1)*a+s-t,y=((p=Math.ceil(n/i))-1)*i+u-n,g=((h=Math.ceil(r/o))-1)*o+c-r,b=Math.floor(m/2),x=m-b,k=Math.floor(y/2),w=y-k,_=Math.floor(g/2);d={top:k,bottom:w,left:_,right:g-_,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: ".concat(e));d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),p=Math.ceil((n-u+1)/i),h=Math.ceil((r-c+1)/o)}return{padInfo:d,outDepth:f,outHeight:p,outWidth:h}}function LZ(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode ".concat(t))}}function FZ(e){var t=OZ(e),n=(0,W.Z)(t,3),r=n[0],a=n[1],i=n[2];return 1===r&&1===a&&1===i}function BZ(e,t){return FZ(e)||FZ(t)}function jZ(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat ".concat(e))}function UZ(e,t,n){if(null!=n){if("string"===typeof t)throw Error("Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,"."));if("number"===typeof t)JV(aW(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}));else{if("object"!==typeof t)throw Error("Error in ".concat(e,": Unknown padding parameter: ").concat(t));t.forEach((function(t){t.forEach((function(t){JV(aW(t),(function(){return"Error in ".concat(e,": pad must be an integer when using ")+"dimRoundingMode ".concat(n," but got pad ").concat(t,".")}))}))}))}}}var VZ=KG({reshape_:function(e,t){var n={x:WG(e,"x","reshape","string_or_numeric")},r={shape:t};return DG.runKernel(Oq,n,r)}});var WZ=KG({avgPool_:function(e,t,n,r,a){var i=WG(e,"x","avgPool","float32");JV(BZ(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")}));var o=i,s=!1;3===i.rank&&(s=!0,o=VZ(i,[1,i.shape[0],i.shape[1],i.shape[2]])),JV(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank ".concat(o.rank,".")})),UZ("avgPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=DG.runKernel(JW,u,c);return l=LH(l,i.dtype),s?VZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var zZ=KG({avgPool3d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=WG(e,"x","avgPool3d","float32"),s=o,u=!1;4===o.rank&&(u=!0,s=VZ(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),JV(5===s.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),JV("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),UZ("avgPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=DG.runKernel($W,c,l);return d=LH(d,s.dtype),u?VZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var qZ=KG({concat_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;JV(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=zG(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype ".concat(e.dtype,". "))})),1===n.length)return FH(n[0]);var r=n,a={axis:t};return DG.runKernel(cz,r,a)}});var KZ=KG({matMul_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"a","matMul"),i=WG(t,"b","matMul"),o=TG(a,i),s=(0,W.Z)(o,2),u={a:a=s[0],b:i=s[1]},c={transposeA:n,transposeB:r};return DG.runKernel(ez,u,c)}});var GZ=KG({mul_:function(e,t){var n=WG(e,"a","mul"),r=WG(t,"b","mul"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(hq,o)}});var HZ=KG({sigmoid_:function(e){var t={x:WG(e,"x","sigmoid","float32")};return DG.runKernel(Kq,t)}});var ZZ=KG({slice_:function(e,t,n){var r=WG(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return DG.runKernel(Vq,a,i)}});var YZ=KG({tanh_:function(e){var t={x:WG(e,"x","tanh","float32")};return DG.runKernel(dK,t)}});var XZ=KG({basicLSTMCell_:function(e,t,n,r,a,i){var o=WG(e,"forgetBias","basicLSTMCell"),s=WG(t,"lstmKernel","basicLSTMCell"),u=WG(n,"lstmBias","basicLSTMCell"),c=WG(r,"data","basicLSTMCell"),l=WG(a,"c","basicLSTMCell"),d=WG(i,"h","basicLSTMCell"),f=qZ([c,d],1),p=KZ(f,s),h=vZ(p,u),v=h.shape[0],m=h.shape[1]/4,y=[v,m],g=ZZ(h,[0,0],y),b=ZZ(h,[0,m],y),x=ZZ(h,[0,2*m],y),k=ZZ(h,[0,3*m],y),w=vZ(GZ(HZ(g),YZ(b)),GZ(l,HZ(vZ(o,x))));return[w,GZ(YZ(w),HZ(k))]}});var QZ=KG({batchToSpaceND_:function(e,t,n){var r=WG(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));JV(r.rank>=1+t.length,(function(){return"input rank is ".concat(r.rank," but should be > than blockShape.length ").concat(t.length)})),JV(n.length===t.length,(function(){return"crops.length is ".concat(n.length," but should be equal to blockShape.length  ").concat(t.length)})),JV(r.shape[0]%a===0,(function(){return"input tensor batch is ".concat(r.shape[0]," but is not divisible by the product of ")+"the elements of blockShape ".concat(t.join(" * ")," === ").concat(a)}));var i={x:r},o={blockShape:t,crops:n};return DG.runKernel(tz,i,o)}});var JZ=KG({batchNorm_:function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=WG(e,"x","batchNorm"),c=WG(t,"mean","batchNorm"),l=WG(n,"variance","batchNorm");null!=a&&(o=WG(a,"scale","batchNorm")),null!=r&&(s=WG(r,"offset","batchNorm")),JV(c.rank===l.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),JV(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),JV(null==o||c.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var d=function(e){return 0===e.rank||1===e.rank?VZ(e,[1,1,1,e.size]):2===e.rank?VZ(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?VZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),f={x:d,scale:o,offset:s,mean:c,variance:l},p={varianceEpsilon:i},h=DG.runKernel(Fz,f,p);return VZ(h,u.shape)}});var $Z=KG({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=WG(e,"x","batchNorm"),c=WG(t,"mean","batchNorm"),l=WG(n,"variance","batchNorm");return null!=a&&(o=WG(a,"scale","batchNorm")),null!=r&&(s=WG(r,"offset","batchNorm")),JV(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+"".concat(u.rank,".")})),JV(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but "+"got rank ".concat(c.rank,".")})),JV(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&JV(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&JV(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 "+"but got rank ".concat(s.rank,".")})),JZ(u,c,l,s,o,i)}});var eY=KG({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=WG(e,"x","batchNorm"),c=WG(t,"mean","batchNorm"),l=WG(n,"variance","batchNorm");return null!=a&&(o=WG(a,"scale","batchNorm")),null!=r&&(s=WG(r,"offset","batchNorm")),JV(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+"".concat(u.rank,".")})),JV(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but "+"got rank ".concat(c.rank,".")})),JV(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&JV(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&JV(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 "+"but got rank ".concat(s.rank,".")})),JZ(u,c,l,s,o,i)}});var tY=KG({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=WG(e,"x","batchNorm"),c=WG(t,"mean","batchNorm"),l=WG(n,"variance","batchNorm");return null!=a&&(o=WG(a,"scale","batchNorm")),null!=r&&(s=WG(r,"offset","batchNorm")),JV(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+"".concat(u.rank,".")})),JV(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but "+"got rank ".concat(c.rank,".")})),JV(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 "+"but got rank ".concat(l.rank,".")})),null!=o&&JV(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 "+"but got rank ".concat(o.rank,".")})),null!=s&&JV(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 "+"but got rank ".concat(s.rank,".")})),JZ(u,c,l,s,o,i)}});var nY=KG({bincount_:function(e,t,n){var r=WG(e,"x","bincount"),a=WG(t,"weights","bincount");JV("int32"===r.dtype,(function(){return"Error in bincount: input "+"dtype must be int32, but got ".concat(r.dtype)})),JV(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),JV(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or"+"0-length, but got input shape: ".concat(r.shape,", weights shape: ")+"".concat(a.shape,".")}));var i={x:r,weights:a},o={size:n};return DG.runKernel(nz,i,o)}});var rY=KG({broadcastArgs_:function(e,t){var n=WG(e,"s0","broadcastArgs","int32"),r=WG(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). "+"Has rank ".concat(n.rank));if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). "+"Has rank ".concat(r.rank));var a={s0:n,s1:r};return DG.runKernel(rz,a)}});var aY=KG({broadcastTo_:function(e,t){var n=WG(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!==0})))throw new Error("broadcastTo(): Invalid broadcast shape [".concat(t,"]."));if(t.length<n.rank)throw new Error("broadcastTo(): shape.length=".concat(t.length," < input.rank=").concat(n.rank,"."));if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=VZ(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): [".concat(r,"] cannot be broadcast to [").concat(t,"]."));var u=o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));if(0===u.length)return FH(n);var c={x:n},l={reps:o};return DG.runKernel(fK,c,l)}});var iY=KG({ceil_:function(e){var t={x:WG(e,"x","ceil","float32")};return DG.runKernel(iz,t)}});var oY=KG({clipByValue_:function(e,t,n){var r=WG(e,"x","clipByValue");JV(t<=n,(function(){return"Error in clip: min (".concat(t,") must be ")+"less than or equal to max (".concat(n,").")}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return DG.runKernel(oz,a,i)}});var sY=KG({concat1d_:function(e){return qZ(e,0)}});var uY=KG({concat2d_:function(e,t){return qZ(e,t)}});var cY=KG({concat3d_:function(e,t){return qZ(e,t)}});var lY=KG({concat4d_:function(e,t){return qZ(e,t)}});var dY=KG({conv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=WG(e,"x","conv2d","float32"),u=WG(t,"filter","conv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=VZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),JV(4===c.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank ".concat(c.rank,".")})),JV(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),UZ("conv2d",r,o);var d="NHWC"===a?c.shape[3]:c.shape[1];JV(d===u.shape[2],(function(){return"Error in conv2d: depth of input (".concat(d,") must match ")+"input depth for filter ".concat(u.shape[2],".")})),JV(BZ(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")}));var f={x:c,filter:u},p={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=DG.runKernel(lz,f,p);return l?VZ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var fY=KG({conv1d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=arguments.length>6?arguments[6]:void 0,s=WG(e,"x","conv1d"),u=WG(t,"filter","conv1d"),c=s,l=!1;2===s.rank&&(l=!0,c=VZ(s,[1,s.shape[0],s.shape[1]])),JV(3===c.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank ".concat(c.rank,".")})),JV(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+"".concat(u.rank,".")})),UZ("conv1d",r,o),JV(c.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input (".concat(c.shape[2],") must match ")+"input depth for filter ".concat(u.shape[1],".")})),JV(BZ(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. "+"Got stride ".concat(n," and dilation '").concat(i,"'")})),JV("NWC"===a,(function(){return"Error in conv1d: got dataFormat of ".concat(a," but only NWC is currently supported.")}));var d=VZ(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=VZ(c,[c.shape[0],1,c.shape[1],c.shape[2]]),p=[1,n],h=[1,i],v="NHWC",m=dY(f,d,p,r,v,h,o);return VZ(m,l?[m.shape[2],m.shape[3]]:[m.shape[0],m.shape[2],m.shape[3]])}});var pY=KG({conv2DBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0;JV(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var s=e,u=t,c=!1;3===t.rank&&(c=!0,u=VZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),JV(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+"".concat(s.length,".")})),JV(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got "+"rank ".concat(u.rank)})),JV(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got "+"rank ".concat(n.rank)}));var l="NHWC"===i?s[3]:s[1],d="NHWC"===i?u.shape[3]:u.shape[1];JV(l===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input (".concat(l,") must ")+"match input depth for filter ".concat(n.shape[2],".")})),JV(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output (".concat(d,") must ")+"match output depth for filter ".concat(n.shape[3],".")})),UZ("conv2dDerInput",a,o);var f={dy:u,filter:n},p={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},h=DG.runKernel(fz,f,p);return c?VZ(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});var hY=KG({conv2dTranspose_:function(e,t,n,r,a,i){var o=WG(e,"x","conv2dTranspose"),s=WG(t,"filter","conv2dTranspose");return pY(n,o,s,r,a,"NHWC",i)}});var vY=KG({conv3d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NDHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1,1],o=WG(e,"x","conv3d"),s=WG(t,"filter","conv3d"),u=o,c=!1;4===o.rank&&(c=!0,u=VZ(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),JV(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank ".concat(u.rank,".")})),JV(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+"".concat(s.rank,".")})),JV(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input (".concat(u.shape[4],") must match ")+"input depth for filter ".concat(s.shape[3],".")})),JV(BZ(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(i,"'")})),JV("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of ".concat(a," but only NDHWC is currently supported.")}));var l={x:u,filter:s},d={strides:n,pad:r,dataFormat:a,dilations:i},f=DG.runKernel(pz,l,d);return c?VZ(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var mY=KG({conv3DBackpropInput_:function(e,t,n,r,a){JV(e.length===t.rank,(function(){return"Length of inShape "+"(".concat(e.length,") and rank of dy (").concat(t.rank,") must match")}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=VZ(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],c=o.shape[4];JV(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+"".concat(i.length,".")})),JV(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got "+"rank ".concat(o.rank)})),JV(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got "+"rank ".concat(n.rank)})),JV(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input (".concat(u,") must ")+"match input depth for filter ".concat(n.shape[3],".")})),JV(c===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output (".concat(c,") must ")+"match output depth for filter ".concat(n.shape[4],".")}));var l={dy:o,filter:n},d={pad:a,strides:r,inputShape:i},f=DG.runKernel(hz,l,d);return s?VZ(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var yY=KG({conv3dTranspose_:function(e,t,n,r,a){var i=WG(e,"x","conv3dTranspose"),o=WG(t,"filter","conv3dTranspose");return mY(n,i,o,r,a)}});var gY=KG({cos_:function(e){var t={x:WG(e,"x","cos","float32")};return DG.runKernel(vz,t)}});var bY=KG({cosh_:function(e){var t={x:WG(e,"x","cosh","float32")};return DG.runKernel(mz,t)}});var xY=KG({cumsum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"x","cumsum"),i={x:a},o={axis:t,exclusive:n,reverse:r};return DG.runKernel(yz,i,o)}});var kY=KG({denseBincount_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"x","denseBincount"),i=WG(t,"weights","denseBincount");JV("int32"===a.dtype,(function(){return"Error in denseBincount: input "+"dtype must be int32, but got ".concat(a.dtype)})),JV(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got "+"rank ".concat(a.rank,".")})),JV(n>=0,(function(){return"size must be non-negative, but got ".concat(n,".")})),JV(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or "+"0-length, but got x shape: ".concat(a.shape,", weights shape: ")+"".concat(i.shape,".")}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return DG.runKernel(bz,o,s)}});var wY=KG({depthToSpace_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"NHWC",r=WG(e,"x","depthToSpace","float32"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];JV(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: ".concat(t)})),JV(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(a," and ").concat(t,"  for depthToSpace with input shape\n    ").concat(r.shape)})),JV(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    ".concat(i," and ").concat(t," for depthToSpace with input shape\n        ").concat(r.shape)})),JV(o%(t*t)===0,(function(){return"Dimension size must be evenly divisible by ".concat(t*t," but is ").concat(o," for depthToSpace with input shape ").concat(r.shape)}));var s={x:r},u={blockSize:t,dataFormat:n};return DG.runKernel(xz,s,u)}});var _Y=KG({depthwiseConv2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=WG(e,"x","depthwiseConv2d","float32"),u=WG(t,"filter","depthwiseConv2d","float32"),c=s,l=!1;3===s.rank&&(l=!0,c=VZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),JV(4===c.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(c.rank,".")})),JV(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+"".concat(u.rank,".")})),JV(c.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels "+"(".concat(c.shape[3],") must match the inChannels dimension in ")+"filter ".concat(u.shape[2],".")})),UZ("depthwiseConv2d",r,o);var d={x:c,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},p=DG.runKernel(kz,d,f);return l?VZ(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var TY=KG({diag_:function(e){var t={x:WG(e,"x","diag")};return DG.runKernel(Tz,t)}});var SY=KG({dilation2d_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[1,1],i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=WG(e,"x","dilation2d"),s=WG(t,"filter","dilation2d");JV(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+"".concat(o.rank,".")})),JV(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+"".concat(s.rank,".")})),JV("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, "+"but got dataFormat of ".concat(i)}));var u=o,c=!1;3===o.rank&&(u=VZ(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0);var l={x:u,filter:s},d={strides:n,pad:r,dilations:a},f=DG.runKernel(Sz,l,d);return c?VZ(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var EY=KG({floorDiv_:function(e,t){var n=WG(e,"a","floorDiv"),r=WG(t,"b","floorDiv"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(Lz,o)}});var IY=KG({div_:function(e,t){var n=WG(e,"a","div"),r=WG(t,"b","div"),a=TG(n,r),i=(0,W.Z)(a,2);if(n=i[0],r=i[1],"int32"===n.dtype&&"int32"===r.dtype)return EY(n,r);var o={a:n,b:r};return DG.runKernel(Ez,o,{})}});var CY=KG({equal_:function(e,t){var n=WG(e,"a","equal","string_or_numeric"),r=WG(t,"b","equal","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(Nz,o)}});var NY=KG({where_:function(e,t,n){var r=WG(t,"a","where"),a=WG(n,"b","where"),i=WG(e,"condition","where","bool"),o=JH(JH(i.shape,r.shape),a.shape),s={condition:aY(i,o),t:aY(r,o),e:aY(a,o)};return DG.runKernel(jq,s)}});var AY=KG({zerosLike_:function(e){var t={x:WG(e,"x","zerosLike")};return DG.runKernel(bK,t)}});var OY=KG({divNoNan_:function(e,t){var n=WG(e,"a","div"),r=WG(t,"b","div"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1];var o=IY(n,r),s=AY(o),u=CY(r,s);return NY(u,s,o)}});var PY=KG({dot_:function(e,t){var n=WG(e,"t1","dot"),r=WG(t,"t2","dot");JV((1===n.rank||2===n.rank)&&(1===r.rank||2===r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(JV(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+"".concat(a," and ").concat(i,".")})),1===n.rank&&1===r.rank){var o=VZ(n,[1,-1]),s=VZ(r,[-1,1]),u=KZ(o,s);return VZ(u,[])}if(1===n.rank&&2===r.rank){var c=VZ(n,[1,-1]),l=VZ(r,[r.shape[0],r.shape[1]]),d=KZ(c,l);return VZ(d,[d.size])}if(2===n.rank&&1===r.rank){var f=VZ(r,[-1,1]),p=KZ(n,f);return VZ(p,[p.size])}var h=VZ(r,[r.shape[0],r.shape[1]]);return KZ(n,h)}});var RY=KG({einsum_:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=n.map((function(e,t){return WG(e,"tensors".concat(t),"einsum")})),i={equation:e};return DG.runKernel(Iz,a,i)}});var DY=KG({elu_:function(e){var t={x:WG(e,"x","elu","float32")};return DG.runKernel(Cz,t)}});var MY=KG({erf_:function(e){var t=WG(e,"x","erf");JV("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=LH(t,"float32"));var n={x:t};return DG.runKernel("Erf",n)}});var LY=KG({exp_:function(e){var t={x:WG(e,"x","exp")};return DG.runKernel(Az,t)}});var FY=KG({expandDims_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","expandDims","string_or_numeric");JV(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return DG.runKernel(Oz,r,a)}});var BY=KG({expm1_:function(e){var t={x:WG(e,"x","expm1")};return DG.runKernel(Pz,t)}});var jY=KG({tile_:function(e,t){var n=WG(e,"x","tile","string_or_numeric");JV(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of reps ".concat(t,".")}));var r={x:n},a={reps:t};return DG.runKernel(fK,r,a)}});var UY=KG({eye_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";null==t&&(t=e);for(var a=MH([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=VZ(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return jY(FY(s,0),[n[0],1,1]);if(2===n.length)return jY(FY(FY(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return jY(FY(FY(FY(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D "+"batchShapes, but received ".concat(n.length,"D."))}});function VY(e,t,n){var r={shape:e,value:t,dtype:n};return DG.runKernel(Rz,{},r)}var WY=KG({floor_:function(e){var t={x:WG(e,"x","floor","float32")};return DG.runKernel(Mz,t)}});var zY=KG({gather_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=WG(e,"x","gather"),i=WG(t,"indices","gather","int32"),o={x:a,indices:i},s={axis:n,batchDims:r};return DG.runKernel(Bz,o,s)}});var qY=KG({greater_:function(e,t){var n=WG(e,"a","greater","string_or_numeric"),r=WG(t,"b","greater","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(Uz,o)}});var KY=KG({greaterEqual_:function(e,t){var n=WG(e,"a","greaterEqual","string_or_numeric"),r=WG(t,"b","greaterEqual","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(Vz,o)}});var GY=KG({imag_:function(e){var t={input:WG(e,"input","imag")};return DG.runKernel(qz,t)}});var HY=KG({isFinite_:function(e){var t={x:WG(e,"x","isFinite")};return DG.runKernel(Kz,t)}});var ZY=KG({isInf_:function(e){var t={x:WG(e,"x","isInf")};return DG.runKernel(Gz,t)}});var YY=KG({isNaN_:function(e){var t={x:WG(e,"x","isNaN")};return DG.runKernel(Hz,t)}});var XY=KG({leakyRelu_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=WG(e,"x","leakyRelu"),r={x:n},a={alpha:t};return DG.runKernel(Zz,r,a)}});var QY=KG({less_:function(e,t){var n=WG(e,"a","less","string_or_numeric"),r=WG(t,"b","less","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(Yz,o)}});var JY=KG({lessEqual_:function(e,t){var n=WG(e,"a","lessEqual","string_or_numeric"),r=WG(t,"b","lessEqual","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(Xz,o)}});function $Y(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return DG.runKernel(Qz,{},r)}var eX=KG({localResponseNormalization_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,i=WG(e,"x","localResponseNormalization");JV(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ".concat(i.rank,".")})),JV(aW(t),(function(){return"Error in localResponseNormalization: depthRadius must be an "+"integer but got depthRadius ".concat(t,".")}));var o=i,s=!1;3===i.rank&&(s=!0,o=VZ(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},c={depthRadius:t,bias:n,alpha:r,beta:a},l=DG.runKernel(rq,u,c);return s?VZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var tX=KG({log_:function(e){var t={x:WG(e,"x","log","float32")};return DG.runKernel(Jz,t)}});var nX=KG({log1p_:function(e){var t={x:WG(e,"x","log1p")};return DG.runKernel($z,t)}});function rX(e){return DG.customGrad(e)}var aX=KG({neg_:function(e){var t={x:WG(e,"x","neg")};return DG.runKernel(vq,t)}});var iX=KG({softplus_:function(e){var t={x:WG(e,"x","softplus")};return DG.runKernel(Gq,t)}});var oX=KG({logSigmoid_:function(e){var t=WG(e,"x","logSigmoid"),n=rX((function(e){return{value:aX(iX(aX(e))),gradFunc:function(t){return GZ(t,HZ(aX(e)))}}}));return n(t)}});var sX=KG({max_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","max"),a={x:r},i={reductionIndices:t,keepDims:n};return DG.runKernel(aq,a,i)}});var uX=KG({sub_:function(e,t){var n=WG(e,"a","sub"),r=WG(t,"b","sub"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(cK,o)}});var cX=KG({sum_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","sum");"bool"===r.dtype&&(r=LH(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return DG.runKernel(Zq,a,i)}});var lX=KG({logSoftmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=WG(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and axis was ").concat(t));var r=rX((function(e,n){var r=sX(e,t,!0),a=uX(e,r),i=uX(LH(a,"float32"),tX(cX(LY(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=(0,W.Z)(n,1)[0],a=LY(r);return uX(e,GZ(cX(e,t,!0),a))}}}));return r(n)}});function dX(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function fX(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function pX(e,t){return function(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}(e,t.map((function(e){return 1})),t)}function hX(e,t,n){JV(dX(t,n),(function(){return"".concat(e," supports only inner-most axes for now. ")+"Got axes ".concat(t," and rank-").concat(n," input.")}))}function vX(e,t){if(dX(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function mX(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function yX(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}var gX=KG({logSumExp_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","logSumExp"),a=cW(t,r.shape),i=sX(r,a,!0),o=uX(r,i),s=LY(o),u=cX(s,a),c=tX(u),l=vZ(VZ(i,c.shape),c);if(n){var d=pX(l.shape,a);return VZ(l,d)}return l}});var bX=KG({logicalAnd_:function(e,t){var n=WG(e,"a","logicalAnd","bool"),r=WG(t,"b","logicalAnd","bool");JH(n.shape,r.shape);var a={a:n,b:r};return DG.runKernel(eq,a)}});var xX=KG({logicalNot_:function(e){var t={x:WG(e,"x","logicalNot","bool")};return DG.runKernel(tq,t)}});var kX=KG({logicalOr_:function(e,t){var n=WG(e,"a","logicalOr","bool"),r=WG(t,"b","logicalOr","bool");JH(n.shape,r.shape);var a={a:n,b:r};return DG.runKernel(nq,a)}});var wX=KG({logicalXor_:function(e,t){var n=WG(e,"a","logicalXor","bool"),r=WG(t,"b","logicalXor","bool");return JH(n.shape,r.shape),bX(kX(e,t),xX(bX(e,t)))}});var _X=KG({maxPool_:function(e,t,n,r,a){var i=WG(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=VZ(i,[1,i.shape[0],i.shape[1],i.shape[2]])),JV(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(o.rank,".")})),JV(BZ(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(n," and dilations '").concat(1,"'")})),UZ("maxPool",r,a);var u={x:o},c={filterSize:t,strides:n,pad:r,dimRoundingMode:a},l=DG.runKernel(oq,u,c);return s?VZ(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});var TX=KG({maxPool3d_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1,1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NDHWC",o=WG(e,"x","maxPool3d"),s=o,u=!1;4===o.rank&&(u=!0,s=VZ(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),JV(5===s.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank ".concat(s.rank,".")})),JV("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, "+"but got dataFormat of ".concat(i)})),UZ("maxPool3d",r,a);var c={x:s},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i},d=DG.runKernel(sq,c,l);return u?VZ(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var SX=KG({maxPoolWithArgmax_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=WG(e,"x","maxPoolWithArgmax"),o={x:i},s={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},u=DG.runKernel(uq,o,s);return{result:u[0],indexes:u[1]}}});var EX=KG({maximum_:function(e,t){var n=WG(e,"a","maximum"),r=WG(t,"b","maximum"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=LH(n,"int32"),r=LH(r,"int32")),JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(iq,o)}});var IX=KG({mean_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","mean"),a={x:r},i={axis:t,keepDims:n};return DG.runKernel(cq,a,i)}});function CX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=CX(e,"float32"),r=CX(e,"float32");return GG(n,r)}var a=TW(nW(e),t);return DG.makeTensor(a,e,t)}function NX(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"float32";if("complex64"===t){var n=NX(e,"float32"),r=CX(e,"float32");return GG(n,r)}var a=_W(nW(e),t);return DG.makeTensor(a,e,t)}function AX(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.indexing,a=void 0===r?"xy":r;if("xy"!==a&&"ij"!==a)throw new TypeError("".concat(a," is not a valid third argument to meshgrid"));if(void 0===e)return[];var i=WG(e,"x","meshgrid",e instanceof hG?e.dtype:"float32");if(void 0===t)return[i];var o=WG(t,"y","meshgrid",t instanceof hG?t.dtype:"float32"),s=nW(i.shape),u=nW(o.shape);return"xy"===a?(i=VZ(i,[1,-1]),o=VZ(o,[-1,1]),[KZ(NX([u,1],i.dtype),i),KZ(o,NX([1,s],o.dtype))]):(i=VZ(i,[-1,1]),o=VZ(o,[1,-1]),[KZ(i,NX([1,u],i.dtype)),KZ(NX([s,1],o.dtype),o)])}var OX=KG({min_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","min"),a={x:r},i={axis:t,keepDims:n};return DG.runKernel(lq,a,i)}});var PX=KG({minimum_:function(e,t){var n=WG(e,"a","minimum"),r=WG(t,"b","minimum"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],"bool"===n.dtype&&(n=LH(n,"int32"),r=LH(r,"int32")),JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(dq,o)}});var RX=KG({mirrorPad_:function(e,t,n){JV("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. "+"Got ".concat(n,".")}));var r=WG(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");JV(t.length===r.rank,(function(){return"Padding doesn't match input. Must be ".concat(r.rank,". ")+"Got ".concat(t.length,".")}));for(var a="reflect"===n?1:0,i=function(e){JV(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),JV(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension ".concat(e," cannot be greater than or equal ")+"to ".concat(r.shape[e]-a," or less than 0 for input of ")+"shape ".concat(r.shape)}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return DG.runKernel(fq,u,s)}});var DX=KG({mod_:function(e,t){var n=WG(e,"a","mod"),r=WG(t,"b","mod"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel("Mod",o)}});var MX=KG({square_:function(e){var t=WG(e,"x","square");return DG.runKernel("Square",{x:t},{})}});var LX=KG({moments_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=cW(t,(e=WG(e,"x","moments")).shape),a=IX(e,r,n),i=a.shape;n||(i=pX(a.shape,r));var o=MX(uX(LH(e,"float32"),VZ(a,i))),s=IX(o,r,n);return{mean:a,variance:s}}});var FX=KG({multiRNNCell_:function(e,t,n,r){for(var a=WG(t,"data","multiRNNCell"),i=zG(n,"c","multiRNNCell"),o=zG(r,"h","multiRNNCell"),s=a,u=[],c=0;c<e.length;c++){var l=e[c](s,i[c],o[c]);u.push(l[0]),u.push(l[1]),s=l[1]}for(var d=[],f=[],p=0;p<u.length;p+=2)d.push(u[p]),f.push(u[p+1]);return[d,f]}});var BX=KG({multinomial_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+"".concat(i,"."));if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is ".concat(o));n=n||Math.random();var s=1===o?VZ(a,[1,-1]):a,u={logits:s},c={numSamples:t,seed:n,normalized:r},l=DG.runKernel(pq,u,c);return 1===o?VZ(l,[l.size]):l}});var jX=KG({notEqual_:function(e,t){var n=WG(e,"a","notEqual","string_or_numeric"),r=WG(t,"b","notEqual","string_or_numeric"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(mq,o)}});var UX=KG({oneHot_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is ".concat(t));var a=WG(e,"indices","oneHot","int32"),i={indices:a},o={depth:t,onValue:n,offValue:r};return DG.runKernel(kq,i,o)}});var VX=KG({onesLike_:function(e){var t={x:WG(e,"x","onesLike")};return DG.runKernel(xq,t)}});var WX=KG({outerProduct_:function(e,t){var n=WG(e,"v1","outerProduct"),r=WG(t,"v2","outerProduct");JV(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+"".concat(n.rank," and ").concat(r.rank,".")}));var a=VZ(n,[-1,1]),i=VZ(r,[1,-1]);return KZ(a,i)}});var zX=KG({pad_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=WG(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return DG.runKernel(_q,i,a)}});var qX=KG({pad1d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return JV(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),zX(e,[t],n)}});var KX=KG({pad2d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return JV(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zX(e,t,n)}});var GX=KG({pad3d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return JV(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zX(e,t,n)}});var HX=KG({pad4d_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return JV(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),zX(e,t,n)}});var ZX=KG({spaceToBatchND_:function(e,t,n){var r=WG(e,"x","spaceToBatchND");JV(r.rank>=1+t.length,(function(){return"input rank ".concat(r.rank," should be > than [blockShape] ").concat(t.length)})),JV(n.length===t.length,(function(){return"paddings.shape[0] ".concat(n.length," must be equal to [blockShape] ").concat(t.length)})),JV(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]===0:e}),!0),(function(){return"input spatial dimensions ".concat(r.shape.slice(1)," with paddings ").concat(n.toString()," must be divisible by blockShapes ").concat(t.toString())}));var a={x:r},i={blockShape:t,paddings:n};return DG.runKernel(Yq,a,i)}});var YX=KG({pool_:function(e,t,n,r,a,i,o){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var s=WG(e,"x","maxPool"),u=s,c=!1;3===s.rank&&(c=!0,u=VZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),JV(BZ(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. "+"Got strides ".concat(i," and dilations '").concat(a,"'")}));var l,d=EZ(u.shape,t,i,a,r),f=[d.dilationHeight,d.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([d.filterHeight,d.filterWidth],f):[[0,0],[0,0]];var p=1===f[0]&&1===f[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),c=t.map((function(e,t){return[0,o[t]]}));return[u,c]}([d.inHeight,d.inWidth],f,l),v=(0,W.Z)(h,2),m=v[0],y=v[1],g=p?r:"valid",b=p?u:ZX(u,f,m),x=("avg"===n?function(){return WZ(b,t,i,g,o)}:function(){return _X(b,t,i,g,o)})(),k=p?x:QZ(x,f,y);return c?VZ(k,[k.shape[1],k.shape[2],k.shape[3]]):k}});var XX=KG({pow_:function(e,t){var n=WG(e,"base","pow"),r=WG(t,"exp","pow"),a=TG(n,r),i=(0,W.Z)(a,2),o={a:n=i[0],b:r=i[1]};return DG.runKernel(Tq,o)}});var QX=KG({prelu_:function(e,t){var n={x:WG(e,"x","prelu"),alpha:WG(t,"alpha","prelu")};return DG.runKernel(Sq,n)}});var JX=KG({prod_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=WG(e,"x","prod");"bool"===r.dtype&&(r=LH(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return DG.runKernel(Eq,a,i)}});var $X=KG({rand_:function(e,t,n){var r=nW(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type ".concat(n));a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return DG.makeTensor(a,e,n)}}),eQ=n(6699),tQ=function(){function e(t,n,r,a,i){I(this,e),this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=eQ.alea(o.toString())}return N(e,[{key:"nextValue",value:function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)}},{key:"convertValue",value:function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}},{key:"isValidTruncated",value:function(e){return e<=this.upper&&e>=this.lower}}]),e}(),nQ=function(){function e(t,n,r,a){I(this,e),this.alpha=t,this.beta=1/n,this.dtype=r;var i=a||Math.random();this.randu=eQ.alea(i.toString()),this.randn=new tQ(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return N(e,[{key:"nextValue",value:function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)}},{key:"convertValue",value:function(e){return"float32"===this.dtype?e:Math.round(e)}}]),e}(),rQ=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(I(this,e),this.canReturnFloat=function(){return null==t.dtype||"float32"===t.dtype},this.min=n,this.range=r-n,this.dtype=a,null==i&&(i=Math.random()),"number"===typeof i&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between ".concat(n," - ").concat(r," <= 1 and dtype is not float"));this.random=eQ.alea(i)}return N(e,[{key:"convertValue",value:function(e){return this.canReturnFloat()?e:Math.round(e)}},{key:"nextValue",value:function(){return this.convertValue(this.min+this.range*this.random())}}]),e}();var aQ=KG({randomGamma_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0;if(null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type ".concat(r));for(var i=new nQ(t,n,r,a),o=MH(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var iQ=KG({randomNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type ".concat(r));for(var i=new tQ(t,n,r,!1,a),o=MH(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var oQ=KG({randomUniform_:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32",a=arguments.length>4?arguments[4]:void 0,i=MH(e,r),o=new rQ(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});function sQ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"float32";if(0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return DG.runKernel(Iq,{},a)}var uQ=KG({real_:function(e){var t={input:WG(e,"input","real")};return DG.runKernel(Cq,t)}});var cQ=KG({reciprocal_:function(e){var t={x:WG(e,"x","reciprocal")};return DG.runKernel(Nq,t)}});var lQ=KG({relu_:function(e){var t={x:WG(e,"x","relu")};return DG.runKernel(Aq,t)}});var dQ=KG({relu6_:function(e){var t={x:WG(e,"x","relu6")};return DG.runKernel(Dq,t)}});var fQ=KG({reverse_:function(e,t){var n={x:WG(e,"x","reverse")},r={dims:t};return DG.runKernel(Mq,n,r)}});var pQ=KG({reverse1d_:function(e){var t=WG(e,"x","reverse");return JV(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank ".concat(t.rank,".")})),fQ(t,0)}});var hQ=KG({reverse2d_:function(e,t){var n=WG(e,"x","reverse");return JV(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank ".concat(n.rank,".")})),fQ(n,t)}});var vQ=KG({reverse3d_:function(e,t){var n=WG(e,"x","reverse");return JV(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank ".concat(n.rank,".")})),fQ(n,t)}});var mQ=KG({reverse4d_:function(e,t){var n=WG(e,"x","reverse");return JV(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank ".concat(n.rank,".")})),fQ(n,t)}});var yQ=KG({round_:function(e){var t={x:WG(e,"x","round")};return DG.runKernel(Lq,t)}});var gQ=KG({rsqrt_:function(e){var t={x:WG(e,"x","rsqrt","float32")};return DG.runKernel(Fq,t)}});function bQ(e,t){if((hW(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&hW(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return HG(e,[],[],t)}var xQ=KG({selu_:function(e){var t={x:WG(e,"x","selu")};return DG.runKernel(Uq,t)}});var kQ=KG({separableConv2d_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"NHWC",s=WG(e,"x","separableConv2d"),u=WG(t,"depthwiseFilter","separableConv2d"),c=WG(n,"pointwiseFilter","separableConv2d"),l=s,d=!1;if(3===s.rank&&(d=!0,l=VZ(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");JV(4===l.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got "+"rank ".concat(l.rank,".")})),JV(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),JV(4===c.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but "+"got rank ".concat(u.rank,".")})),JV(1===c.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter "+" must be 1, but got ".concat(c.shape[0],".")})),JV(1===c.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise "+"filter must be 1, but got ".concat(c.shape[1],".")}));var f=u.shape[2],p=u.shape[3];JV(c.shape[2]===f*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter "+"must be ".concat(f*p,", ")+"but got ".concat(c.shape[2],".")}));var h=_Y(l,u,r,a,o,i),v=1,m=dY(h,c,v,"valid",o);return d?VZ(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function wQ(){return wQ=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WG(t,"x","setdiff1d"),a=WG(n,"y","setdiff1d"),JV(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x (".concat(r.dtype,") and y (").concat(a.dtype,").")})),JV(1===r.rank,(function(){return"x should be 1D tensor, but got x (".concat(r.shape,").")})),JV(1===a.rank,(function(){return"y should be 1D tensor, but got y (".concat(a.shape,").")})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,c=0;c<i.length;c++)s.has(i[c])||u++;for(l=new dG([u],r.dtype),d=new dG([u],"int32"),f=0,p=0;f<i.length;f++)s.has(i[f])||(l.values[p]=i[f],d.values[p]=f,p++);return e.abrupt("return",[l.toTensor(),d.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),wQ.apply(this,arguments)}var _Q=function(e,t){return wQ.apply(this,arguments)};var TQ=KG({sign_:function(e){var t={x:WG(e,"x","sign")};return DG.runKernel(qq,t)}});var SQ=KG({sin_:function(e){var t={x:WG(e,"x","sin","float32")};return DG.runKernel(Wq,t)}});var EQ=KG({sinh_:function(e){var t={x:WG(e,"x","sinh")};return DG.runKernel(zq,t)}});var IQ=KG({slice1d_:function(e,t,n){var r=WG(e,"x","slice1d");return JV(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-".concat(r.rank," tensor")})),ZZ(r,[t],[n])}});var CQ=KG({slice2d_:function(e,t,n){var r=WG(e,"x","slice2d");return JV(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-".concat(r.rank," tensor")})),ZZ(r,t,n)}});var NQ=KG({slice3d_:function(e,t,n){var r=WG(e,"x","slice3d");return JV(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-".concat(r.rank," tensor")})),ZZ(r,t,n)}});var AQ=KG({slice4d_:function(e,t,n){var r=WG(e,"x","slice4d");return JV(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-".concat(r.rank," tensor")})),ZZ(r,t,n)}});var OQ=KG({softmax_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=WG(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. "+"Logits was rank ".concat(n.rank," and dim was ").concat(t));var r={logits:n},a={dim:t};return DG.runKernel(Qq,r,a)}});var PQ=KG({fft_:function(e){JV("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return DG.runKernel("FFT",t)}});var RQ=KG({ifft_:function(e){JV("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 "+"but got ".concat(e.dtype,".")}));var t={input:e};return DG.runKernel(zz,t)}});var DQ=KG({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=VZ(e,[r,n]);t=RQ(a)}else{var i=[r,2*(n-1)],o=VZ(uQ(e),[r,n]),s=VZ(GY(e),[r,n]),u=fQ(ZZ(o,[0,1],[r,n-2]),1),c=GZ(fQ(ZZ(s,[0,1],[r,n-2]),1),bQ(-1)),l=qZ([o,u],1),d=qZ([s,c],1),f=VZ(GG(l,d),[i[0],i[1]]);t=RQ(f)}if(t=uQ(t),3===e.rank&&0!==e.shape[0]){var p=t,h=e.shape[0];t=VZ(t,[h,t.shape[0]/h,t.shape[1]]),p.dispose()}return t}});var MQ=KG({split_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=WG(e,"x","split"),a={x:r},i={numOrSizeSplits:t,axis:n};return DG.runKernel(Xq,a,i)}});var LQ=KG({rfft_:function(e,t){JV("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got ".concat(e.dtype)}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=ZZ(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=qZ([e,CX(s)],e.shape.length-1),r=t}else n=e;var u=AY(n),c=VZ(GG(n,u),[a,r]),l=PQ(c),d=Math.floor(r/2)+1,f=uQ(l),p=GY(l),h=MQ(f,[d,r-d],f.shape.length-1),v=MQ(p,[d,r-d],p.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=d,VZ(GG(h[0],v[0]),m)}});var FQ=KG({sqrt_:function(e){var t={x:WG(e,"x","sqrt","float32")};return DG.runKernel(Hq,t)}});var BQ=KG({squaredDifference_:function(e,t){var n=WG(e,"a","squaredDifference"),r=WG(t,"b","squaredDifference"),a=TG(n,r),i=(0,W.Z)(a,2);n=i[0],r=i[1],JH(n.shape,r.shape);var o={a:n,b:r};return DG.runKernel(rK,o,{})}});var jQ=KG({squeeze_:function(e,t){var n=WG(e,"x","squeeze");return VZ(n,lW(n.shape,t).newShape)}});var UQ=KG({stack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=zG(e,"tensors","stack","string_or_numeric");JV(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&JV(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return DG.runKernel(wq,r,a)}});var VQ=KG({step_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","step"),r={x:n},a={alpha:t};return DG.runKernel(xK,r,a)}});var WQ=KG({stridedSlice_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=WG(e,"x","stridedSlice","string_or_numeric"),l={x:c},d={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return DG.runKernel(iK,l,d)}});var zQ=KG({tan_:function(e){var t={x:WG(e,"x","tan","float32")};return DG.runKernel(lK,t)}});function qQ(e,t){eW(e);var n=jG(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return HG(e,null,n,t)}function KQ(e,t,n){if(eW(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=jG(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return HG(e,t,r,n)}function GQ(e,t,n){if(eW(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=jG(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return HG(e,t,r,n)}function HQ(e,t,n){if(eW(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=jG(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return HG(e,t,r,n)}function ZQ(e,t,n){if(eW(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=jG(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return HG(e,t=t||r,r,n)}var YQ=KG({topk_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=WG(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got ".concat(t));if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension (".concat(a,") ")+"but got ".concat(t));var i={x:r},o={k:t,sorted:n},s=DG.runKernel(pK,i,o),u=(0,W.Z)(s,2),c=u[0],l=u[1];return{values:c,indices:l}}});var XQ=KG({truncatedNormal_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new tQ(t,n,r,!0,a),o=MH(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});var QQ=KG({unique_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","unique","string_or_numeric");JV(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=DG.runKernel(mK,r,a),o=(0,W.Z)(i,2),s=o[0],u=o[1];return{values:s,indices:u}}});var JQ=KG({unsortedSegmentSum_:function(e,t,n){var r=WG(e,"x","unsortedSegmentSum"),a=WG(t,"segmentIds","unsortedSegmentSum","int32");JV(aW(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return DG.runKernel(gK,i,o)}});var $Q=KG({unstack_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=WG(e,"x","unstack","string_or_numeric");JV(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = ".concat(t," is not in [-").concat(n.shape.length,", ").concat(n.shape.length,")")}));var r={value:n},a={axis:t};return DG.runKernel(yK,r,a)}});function eJ(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return DG.makeVariable(e,t,n,r)}function tJ(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=MH(e,"int32"),i=MH([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function nJ(){return(nJ=j(G().mark((function e(t){var n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=WG(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=tJ(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rJ=function(e){return nJ.apply(this,arguments)};function aJ(){return aJ=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=WG(t,"tensor","boolMask"),i=WG(n,"mask","boolMask","bool"),o=null==r?0:r,s=i.rank,u=a.shape,JV(s>0,(function(){return"mask cannot be scalar"})),$V(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,l=o;l<o+s;l++)c*=u[l];return d=u.slice(0,o).concat([c],u.slice(o+s)),f=VZ(a,d),p=VZ(i,[-1]),e.next=14,rJ(p);case 14:return h=e.sent,v=jQ(h,[1]),m=zY(f,v,o),t!==a&&a.dispose(),n!==i&&i.dispose(),v.dispose(),f.dispose(),p.dispose(),h.dispose(),e.abrupt("return",m);case 24:case"end":return e.stop()}}),e)}))),aJ.apply(this,arguments)}var iJ=function(e,t,n){return aJ.apply(this,arguments)};var oJ=KG({transpose_:function(e,t){var n=WG(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),JV(n.rank===t.length,(function(){return"Error in transpose: rank of input ".concat(n.rank," ")+"must match length of perm ".concat(t,".")})),t.forEach((function(e){JV(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and ".concat(n.rank-1)+" but got ".concat(t)}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return DG.runKernel(vK,r,a)}});function sJ(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0===e.rank)return fZ(e);if(1!==e.rank&&null===n)return sJ(VZ(e,[-1]),t,n);if(1===e.rank||"number"===typeof n||Array.isArray(n)&&1===n.length){if(1===t)return cX(fZ(e),n);if(t===1/0)return sX(fZ(e),n);if(t===-1/0)return OX(fZ(e),n);if("euclidean"===t||2===t)return FQ(cX(XX(fZ(e),bQ(2,"int32")),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}if(Array.isArray(n)&&2===n.length){if(1===t)return sX(cX(fZ(e),n[0]),n[1]-1);if(t===1/0)return sX(cX(fZ(e),n[1]),n[0]);if(t===-1/0)return OX(cX(fZ(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return FQ(cX(MX(e),n));throw new Error("Error in norm: invalid ord value: ".concat(t))}throw new Error("Error in norm: invalid axis: ".concat(n))}var uJ=KG({norm_:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"euclidean",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=sJ(e=WG(e,"x","norm"),t,n),i=a.shape;if(r){var o=cW(n,e.shape);i=pX(a.shape,o)}return VZ(a,i)}});var cJ=KG({movingAverage_:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=WG(e,"v","movingAverage"),o=WG(t,"x","movingAverage"),s=WG(n,"decay","movingAverage");SG(i,o),JV(rW(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=bQ(1),c=uX(u,s),l=GZ(uX(o,i),c);if(a){JV(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=WG(r,"step","movingAverage");l=IY(l,uX(u,XX(s,d)))}return vZ(i,l)}});var lJ=KG({scatterND_:function(e,t,n){var r=WG(e,"indices","scatterND","int32"),a=WG(t,"updates","scatterND");rZ(a,r,n);var i={indices:r,updates:a},o={shape:n};return DG.runKernel(Bq,i,o)}});function dJ(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type,"+" but the dtype was ".concat(e.dtype,"."));if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix,"+" but got shape ".concat(e.shape,"."));var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:,"+" ".concat(n.length,", should be: ").concat(i,"."));var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+"".concat(t.shape,", should be [] or [").concat(a,"]"));if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var fJ=KG({sparseToDense_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=WG(e,"sparseIndices","sparseToDense","int32"),i=WG(t,"sparseValues","sparseToDense"),o=WG(r,"defaultValue","sparseToDense",i.dtype);dJ(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return DG.runKernel(nK,s,u)}});var pJ=KG({gatherND_:function(e,t){var n=WG(t,"indices","gatherND","int32"),r={params:WG(e,"x","gatherND","string_or_numeric"),indices:n};return DG.runKernel(jz,r)}});var hJ=KG({dropout_:function(e,t,n,r){var a=WG(e,"x","dropout");if(JV("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be "+"scaled, but got a ".concat(a.dtype," tensor instead.")})),JV(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got ".concat(t,".")})),0===t)return e instanceof hG?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(rW(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=IY(WY(vZ(oQ(i,0,1,"float32",r),o)),o);return GZ(a,s)}});function vJ(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function mJ(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return qQ(a,"float32")}function yJ(){return yJ=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l,d,f,p,h,v,m,y,g=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>2&&void 0!==g[2]?g[2]:1,a=WG(t,"predictions","inTopK"),i=WG(n,"targets","inTopK"),JV(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, "+"but got ".concat(a.rank)})),JV(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+"".concat(a.rank," and targets rank ").concat(i.rank)})),$V(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],JV(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last "+"dimension (".concat(o,"), but got ").concat(r)})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,c=s.length/o,l=o,d=dW("bool",c),f=0;case 17:if(!(f<c)){e.next=35;break}for(p=f*l,h=s.subarray(p,p+l),v=[],m=0;m<h.length;m++)v.push({value:h[m],index:m});v.sort((function(e,t){return t.value-e.value})),d[f]=0,y=0;case 25:if(!(y<r)){e.next=32;break}if(v[y].index!==u[f]){e.next=29;break}return d[f]=1,e.abrupt("break",32);case 29:y++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",ZG(d,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),yJ.apply(this,arguments)}var gJ=function(e,t){return yJ.apply(this,arguments)};var bJ=KG({conv2DBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"NHWC",o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=VZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=VZ(t,[1,t.shape[0],t.shape[1],t.shape[2]])),JV(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+"".concat(s.shape,".")})),JV(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+"".concat(u.shape,".")})),JV(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+"".concat(n,".")}));var c="NHWC"===i?s.shape[3]:s.shape[1],l="NHWC"===i?u.shape[3]:u.shape[1];JV(c===n[2],(function(){return"Error in conv2dDerFilter: depth of input ".concat(c,") must ")+"match input depth in filter (".concat(n[2],".")})),JV(l===n[3],(function(){return"Error in conv2dDerFilter: depth of dy (".concat(l,") must ")+"match output depth for filter (".concat(n[3],").")})),UZ("conv2dDerFilter",a,o);var d={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return DG.runKernel(dz,d,f)}});function xJ(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return GZ(e,VQ(t));throw new Error("Cannot compute gradient for fused activation ".concat(n,"."))}function kJ(e,t){var n=t,r=function(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}(e.shape,t.shape);return r.length>0&&(n=cX(n,r)),VZ(n,e.shape)}function wJ(e,t,n,r){if("linear"===t)return e;if("relu"===t)return lQ(e);if("elu"===t)return DY(e);if("relu6"===t)return dQ(e);if("prelu"===t)return QX(e,n);if("leakyrelu"===t)return XY(e,r);if("sigmoid"===t)return HZ(e);throw new Error("Unknown fused activation ".concat(t,"."))}var _J=function(e,t){return!(e>0)||"linear"===t};var TJ=KG({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(f=f||"linear",!1===_J(DG.state.gradientDepth,f)){var v=dY(t,n,r,a,o,u,c);return null!=l&&(v=vZ(v,l)),wJ(v,f,p,h)}var m=WG(t,"x","conv2d","float32"),y=WG(n,"filter","conv2d","float32"),g=m,b=!1;3===m.rank&&(b=!0,g=VZ(m,[1,m.shape[0],m.shape[1],m.shape[2]])),JV(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+"".concat(g.rank,".")})),JV(4===y.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+"".concat(y.rank,".")})),UZ("fused conv2d",a,c),JV(g.shape[3]===y.shape[2],(function(){return"Error in conv2d: depth of input (".concat(g.shape[3],") must match ")+"input depth for filter ".concat(y.shape[2],".")})),JV(BZ(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. "+"Got strides ".concat(r," and dilations '").concat(u,"'")})),JV("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of ".concat(o," but only NHWC is currently supported.")}));var x,k,w=CZ(g.shape,y.shape,r,u,a,c);if(null!=l){var _=TG(x=WG(l,"bias","fused conv2d"),m);x=(0,W.Z)(_,1)[0],JH(w.outShape,x.shape)}null!=p&&(k=WG(p,"prelu weights","fused conv2d"));var T=function(e,t){var n=(0,W.Z)(t,4),i=n[0],o=n[1],s=n[2],c=n[3],l=xJ(e,s,f);JV(FZ(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 "+"are not yet supported in gradients. Got dilations '".concat(u,"'")}));var d=[pY(o.shape,l,i,r,a),bJ(o,l,i.shape,r,a)];if(null!=c){var p=kJ(c,l);d.push(p)}return d},S={x:g,filter:y,bias:x,preluActivationWeights:k},E={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:h};if(null==l){var I=rX((function(e,t,n){var r=DG.runKernel(TK,S,E);return n([t,e,r]),b&&(r=VZ(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:T}}));return I(g,y)}var C=rX((function(e,t,n,r){var a=DG.runKernel(TK,S,E);return r([t,e,a,n]),b&&(a=VZ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:T}}));return C(g,y,x)}});var SJ=KG({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=e;3===e.rank&&(s=VZ(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=VZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={x:s,dy:u},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return DG.runKernel(wz,c,l)}});var EJ=KG({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[1,1],o=arguments.length>6?arguments[6]:void 0,s=t,u=!1;3===t.rank&&(u=!0,s=VZ(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var c={dy:s,filter:n},l={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},d=DG.runKernel(_z,c,l);return u?VZ(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var IJ=KG({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,c=e.dimRoundingMode,l=e.bias,d=e.activation,f=void 0===d?"linear":d,p=e.preluActivationWeights,h=e.leakyreluAlpha;if(!1===_J(DG.state.gradientDepth,f)){var v=_Y(t,n,r,a,o,u,c);return null!=l&&(v=vZ(v,l)),wJ(v,f,p,h)}var m=WG(t,"x","depthwiseConv2d","float32"),y=WG(n,"filter","depthwiseConv2d","float32"),g=m,b=!1;3===m.rank&&(b=!0,g=VZ(m,[1,m.shape[0],m.shape[1],m.shape[2]])),JV(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got "+"rank ".concat(g.rank,".")})),JV(4===y.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, "+"but got rank ".concat(y.rank,".")})),JV(g.shape[3]===y.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels "+"(".concat(g.shape[3],") must match the inChannels dimension in ")+"filter ".concat(y.shape[2],".")})),null==u&&(u=[1,1]),JV(BZ(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must "+"be 1. Got strides ".concat(r," and dilations '").concat(u,"'")})),UZ("fused depthwiseConv2d",a,c);var x,k,w=CZ(g.shape,y.shape,r,u,a,c,!0);if(null!=l){var _=TG(x=WG(l,"bias","fused conv2d"),m),T=(0,W.Z)(_,1);x=T[0],JH(w.outShape,x.shape)}null!=p&&(k=WG(p,"prelu weights","fused depthwiseConv2d"));var S=function(e,t){JV(FZ(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations "+"'".concat(u,"'")}));var n=(0,W.Z)(t,4),i=n[0],o=n[1],s=n[2],l=n[3],d=xJ(e,s,f),p=EJ(o.shape,d,i,r,a,u,c),h=SJ(o,d,i.shape,r,a,u,c);return null!=l?[p,h,kJ(x,d)]:[p,h]},E={x:g,filter:y,bias:x,preluActivationWeights:k},I={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:c,activation:f,leakyreluAlpha:h};if(null==l){var C=rX((function(e,t,n){var r=DG.runKernel(SK,E,I);return n([t,e,r]),b&&(r=VZ(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:S}}));return C(g,y)}var N=rX((function(e,t,n,r){var a=DG.runKernel(SK,E,I);return r([t,e,a,n]),b&&(a=VZ(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:S}}));return N(g,y,x)}});var CJ=KG({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,c=void 0===u?"linear":u,l=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===_J(DG.state.gradientDepth,c)){var f=KZ(t,n,a,o);return null!=s&&(f=vZ(f,s)),wJ(f,c,l,d)}var p=WG(t,"a","fused matMul"),h=WG(n,"b","fused matMul"),v=TG(p,h),m=(0,W.Z)(v,2);p=m[0],h=m[1];var y=a?p.shape[p.rank-2]:p.shape[p.rank-1],g=o?h.shape[h.rank-1]:h.shape[h.rank-2],b=a?p.shape[p.rank-1]:p.shape[p.rank-2],x=o?h.shape[h.rank-2]:h.shape[h.rank-1],k=p.shape.slice(0,-2),w=h.shape.slice(0,-2),_=nW(k),T=nW(w);JV(y===g,(function(){return"Error in fused matMul: inner shapes (".concat(y,") and (")+"".concat(g,") of Tensors with shapes ").concat(p.shape," and ")+"".concat(h.shape," and transposeA=").concat(a)+" and transposeB=".concat(o," must match.")}));var S,E,I=JH(p.shape.slice(0,-2),h.shape.slice(0,-2)).concat([b,x]),C=VZ(p,a?[_,y,b]:[_,b,y]),N=VZ(h,o?[T,x,g]:[T,g,x]);if(null!=s){var A=TG(S=WG(s,"bias","fused matMul"),p);S=(0,W.Z)(A,1)[0],JH(I,S.shape)}null!=l&&(E=WG(l,"prelu weights","fused matMul"));var O=function(e,t){var n,r,i=(0,W.Z)(t,4),u=i[0],l=i[1],d=i[2],f=i[3],p=xJ(VZ(e,d.shape),d,c);return a||o?!a&&o?(n=KZ(p,l,!1,!1),r=KZ(p,u,!0,!1)):a&&!o?(n=KZ(l,p,!1,!0),r=KZ(u,p,!1,!1)):(n=KZ(l,p,!0,!0),r=KZ(p,u,!0,!0)):(n=KZ(p,l,!1,!0),r=KZ(u,p,!0,!1)),null!=s?[n,r,kJ(f,p)]:[n,r]},P={a:C,b:N,bias:S,preluActivationWeights:E},R={transposeA:a,transposeB:o,activation:c,leakyreluAlpha:d};if(null==s){var D=rX((function(e,t,n){var r=DG.runKernel(_K,P,R);return n([e,t,r]),{value:VZ(r,I),gradFunc:O}}));return D(C,N)}var M=rX((function(e,t,n,r){var a=DG.runKernel(_K,P,R);return r([e,t,a,n]),{value:VZ(a,I),gradFunc:O}}));return M(C,N,S)}});var NJ=KG({hammingWindow_:function(e){return mJ(e,.54,.46)}});var AJ=KG({hannWindow_:function(e){return mJ(e,.5,.5)}});var OJ=KG({frame_:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=0,o=[];i+t<=e.size;)o.push(ZZ(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=qZ([ZZ(e,i,t-s),VY([s],a)]);o.push(u),i+=n}return 0===o.length?KQ([],[0,t]):VZ(qZ(o),[o.length,t])}});var PJ=KG({stft_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:AJ;null==r&&(r=vJ(t));var i=OJ(e,t,n),o=GZ(i,a(t));return LQ(o,r)}});var RJ=KG({cropAndResize_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"bilinear",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=WG(e,"image","cropAndResize"),s=WG(t,"boxes","cropAndResize","float32"),u=WG(n,"boxInd","cropAndResize","int32"),c=s.shape[0];JV(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),JV(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size [".concat(c,",4] ")+"but had shape ".concat(s.shape,".")})),JV(1===u.rank&&u.shape[0]===c,(function(){return"Error in cropAndResize: boxInd must be have size [".concat(c,"] ")+"but had shape ".concat(s.shape,".")})),JV(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got "+"length ".concat(r.length,".")})),JV(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was ".concat(r)})),JV("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was ".concat(a)}));var l={image:o,boxes:s,boxInd:u},d={method:a,extrapolationValue:i,cropSize:r},f=DG.runKernel(gz,l,d);return f}});var DJ=KG({flipLeftRight_:function(e){var t=WG(e,"image","flipLeftRight","float32");JV(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,"+"but got rank ".concat(t.rank,".")}));var n={image:t};return DG.runKernel(Dz,n,{})}});var MJ=KG({grayscaleToRGB_:function(e){var t=WG(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];JV(t.rank>=2,(function(){return"Error in grayscaleToRGB: images must be at least rank 2, "+"but got rank ".concat(t.rank,".")})),JV(1===r,(function(){return"Error in grayscaleToRGB: last dimension of a grayscale image "+"should be size 1, but got size ".concat(r,".")}));var a=new Array(t.rank);return a.fill(1,0,n),a[n]=3,jY(t,a)}});var LJ=KG({rotateWithOffset_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=WG(e,"image","rotateWithOffset","float32");JV(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,"+"but got rank ".concat(a.rank,".")}));var i={image:a},o={radians:t,fillValue:n,center:r},s=DG.runKernel(wK,i,o);return s}});function FJ(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),JV(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '".concat(r,"'")})),JV(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '".concat(e.rank,"'")})),JV(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was ".concat(e.shape[1])})),JV(1===t.rank,(function(){return"scores must be a 1D tensor"})),JV(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected ".concat(o,", ")+"but was ".concat(t.shape[0])})),JV(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '".concat(i,"'")})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}var BJ=KG({nonMaxSuppression_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=WG(e,"boxes","nonMaxSuppression","float32"),o=WG(t,"scores","nonMaxSuppression","float32"),s=FJ(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return DG.runKernel(yq,{boxes:i,scores:o},u)}});function jJ(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}(e,t,n||UJ)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function UJ(e,t){return e>t?1:e<t?-1:0}function VJ(e,t,n,r,a){return qJ(e,t,n,r,a,0)}function WJ(e,t,n,r,a,i){return qJ(e,t,n,r,a,0,!1,i,!0)}function zJ(e,t,n,r,a,i){return qJ(e,t,n,r,a,i,!0)}function qJ(e,t,n,r,a,i){for(var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],u=arguments.length>8&&void 0!==arguments[8]&&arguments[8],c=[],l=0;l<t.length;l++)t[l]>a&&c.push({score:t[l],boxIndex:l,suppressBeginIndex:0});c.sort(HJ);for(var d=i>0?-.5/i:0,f=[],p=[];f.length<n&&c.length>0;){var h=c.pop(),v=h.score,m=h.boxIndex,y=h.suppressBeginIndex;if(v<a)break;for(var g=!1,b=f.length-1;b>=y;--b){var x=KJ(e,m,f[b]);if(x>=r){g=!0;break}if(h.score=h.score*GJ(r,d,x),h.score<=a)break}h.suppressBeginIndex=f.length,g||(h.score===v?(f.push(m),p.push(h.score)):h.score>a&&jJ(c,h,HJ))}var k=f.length,w=n-k;s&&w>0&&(f.push.apply(f,(0,Ze.Z)(new Array(w).fill(0))),p.push.apply(p,(0,Ze.Z)(new Array(w).fill(0))));var _={selectedIndices:f};return o&&(_.selectedScores=p),u&&(_.validOutputs=k),_}function KJ(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(a[0],a[2]),l=Math.min(a[1],a[3]),d=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),p=(s-i)*(u-o),h=(d-c)*(f-l);if(p<=0||h<=0)return 0;var v=Math.max(i,c),m=Math.max(o,l),y=Math.min(s,d),g=Math.min(u,f),b=Math.max(y-v,0)*Math.max(g-m,0);return b/(p+h-b)}function GJ(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function HJ(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function ZJ(){return ZJ=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:.5,i=h.length>4&&void 0!==h[4]?h[4]:Number.NEGATIVE_INFINITY,o=WG(t,"boxes","nonMaxSuppressionAsync"),s=WG(n,"scores","nonMaxSuppressionAsync"),u=FJ(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return c=e.sent,l=c[0],d=c[1],f=VJ(l,d,r,a,i),p=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",qQ(p,"int32"));case 17:case"end":return e.stop()}}),e)}))),ZJ.apply(this,arguments)}var YJ=function(e,t,n){return ZJ.apply(this,arguments)};var XJ=KG({nonMaxSuppressionWithScore_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=WG(e,"boxes","nonMaxSuppression"),s=WG(t,"scores","nonMaxSuppression"),u=FJ(o,s,n,r,a,i),c={boxes:o,scores:s},l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},d=DG.runKernel(bq,c,l);return{selectedIndices:d[0],selectedScores:d[1]}}});function QJ(){return QJ=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=m.length>3&&void 0!==m[3]?m[3]:.5,i=m.length>4&&void 0!==m[4]?m[4]:Number.NEGATIVE_INFINITY,o=m.length>5&&void 0!==m[5]?m[5]:0,s=WG(t,"boxes","nonMaxSuppressionAsync"),u=WG(n,"scores","nonMaxSuppressionAsync"),c=FJ(s,u,r,a,i,o),r=c.maxOutputSize,a=c.iouThreshold,i=c.scoreThreshold,o=c.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return l=e.sent,d=l[0],f=l[1],p=zJ(d,f,r,a,i,o),h=p.selectedIndices,v=p.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:qQ(h,"int32"),selectedScores:qQ(v)});case 19:case"end":return e.stop()}}),e)}))),QJ.apply(this,arguments)}var JJ=function(e,t,n){return QJ.apply(this,arguments)};var $J=KG({nonMaxSuppressionPadded_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Number.NEGATIVE_INFINITY,i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=WG(e,"boxes","nonMaxSuppression"),s=WG(t,"scores","nonMaxSuppression"),u=FJ(o,s,n,r,a,null),c=u.maxOutputSize,l=u.iouThreshold,d=u.scoreThreshold,f={boxes:o,scores:s},p={maxOutputSize:c,iouThreshold:l,scoreThreshold:d,padToMaxOutputSize:i},h=DG.runKernel(gq,f,p);return{selectedIndices:h[0],validOutputs:h[1]}}});function e$(){return e$=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.length>3&&void 0!==x[3]?x[3]:.5,i=x.length>4&&void 0!==x[4]?x[4]:Number.NEGATIVE_INFINITY,o=x.length>5&&void 0!==x[5]&&x[5],s=WG(t,"boxes","nonMaxSuppressionAsync"),u=WG(n,"scores","nonMaxSuppressionAsync"),c=FJ(s,u,r,a,i,null),l=c.maxOutputSize,d=c.iouThreshold,f=c.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return p=e.sent,h=(0,W.Z)(p,2),v=h[0],m=h[1],y=WJ(v,m,l,d,f,o),g=y.selectedIndices,b=y.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:qQ(g,"int32"),validOutputs:bQ(b,"int32")});case 19:case"end":return e.stop()}}),e)}))),e$.apply(this,arguments)}var t$=function(e,t,n){return e$.apply(this,arguments)};var n$=KG({resizeBilinear_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"images","resizeBilinear");JV(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),JV(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+"".concat(t,".")})),JV(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=VZ(a,[1,a.shape[0],a.shape[1],a.shape[2]])),sn(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=DG.runKernel(Rq,s,u);return o?VZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var r$=KG({resizeNearestNeighbor_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=WG(e,"images","resizeNearestNeighbor");JV(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got "+"rank ".concat(a.rank,".")})),JV(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+"".concat(t,".")})),JV("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),JV(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=VZ(a,[1,a.shape[0],a.shape[1],a.shape[2]])),sn(t);var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},c=DG.runKernel(Pq,s,u);return o?VZ(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});function a$(e,t){for(var n,r,a,i,o,s,u=qQ([-1]),c=qQ([0]),l=qQ([0]),d=0;d<e.size-1;d++){n=ZZ(e,0,d+1),r=ZZ(e,d+1),o=IY(cX(n),t),s=IY(cX(r),t);var f=cX(GZ(n,sQ(0,n.size)));a=IY(f,cX(n));var p=VY(r.shape,n.size),h=vZ(sQ(0,r.size),p),v=GZ(r,h);i=IY(cX(v),cX(r));var m=uX(a,i),y=uX(a,i),g=GZ(o,s);l=GZ(GZ(g,m),y);var b=qY(l,c);c=NY(b,l,c),u=NY(b,qQ([d]),u)}return u}var i$=KG({threshold_:function(e){var t,n,r,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"binary",o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,u=WG(e,"image","threshold"),c=.2989,l=.587,d=.114,f=u.shape[0]*u.shape[1],p=GZ(qQ([s]),255);if(JV(3===u.rank,(function(){return"Error in threshold: image must be rank 3,"+"but got rank ".concat(u.rank,".")})),JV(3===u.shape[2]||1===u.shape[2],(function(){return"Error in threshold: image color channel must be equal to 3 or 1"+"but got ".concat(u.shape[2],".")})),JV("int32"===u.dtype||"float32"===u.dtype,(function(){return"Error in dtype: image dtype must be int32 or float32,"+"but got dtype ".concat(u.dtype,".")})),JV("otsu"===i||"binary"===i,(function(){return"Method must be binary or otsu, but was ".concat(i)})),3===u.shape[2]){var h=MQ(u,[1,1,1],-1),v=(0,W.Z)(h,3);t=v[0],n=v[1],r=v[2];var m=GZ(t,c),y=GZ(n,l),g=GZ(r,d);a=vZ(vZ(m,y),g)}else a=e;if("otsu"===i){var b=nY(LH(yQ(a),"int32"),ZG([]),256);p=a$(b,f)}var x=o?JY(a,p):qY(a,p),k=LH(GZ(x,255),"int32");return k}});var o$=KG({transform_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"constant",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5?arguments[5]:void 0,o=WG(e,"image","transform","float32"),s=WG(t,"transforms","transform","float32");JV(4===o.rank,(function(){return"Error in transform: image must be rank 4,"+"but got rank ".concat(o.rank,".")})),JV(2===s.rank&&(s.shape[0]===o.shape[0]||1===s.shape[0])&&8===s.shape[1],(function(){return"Error in transform: Input transform should be batch x 8 or 1 x 8"})),JV(null==i||2===i.length,(function(){return"Error in transform: outputShape must be [height, width] or null, "+"but got ".concat(i,".")}));var u={image:o,transforms:s},c={interpolation:n,fillMode:r,fillValue:a,outputShape:i};return DG.runKernel(hK,u,c)}});var s$=KG({bandPart_:function(e,t,n){JV(t%1===0,(function(){return"bandPart(): numLower must be an integer, got ".concat(t,".")})),JV(n%1===0,(function(){return"bandPart(): numUpper must be an integer, got ".concat(n,".")}));var r=WG(e,"a","bandPart");JV(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got ".concat(r.rank,".")}));var a=r.shape,i=r.shape.slice(-2),o=(0,W.Z)(i,2),s=o[0],u=o[1];if(!(t<=s))throw new Error("bandPart(): numLower (".concat(t,")")+" must not be greater than the number of rows (".concat(s,")."));if(!(n<=u))throw new Error("bandPart(): numUpper (".concat(n,")")+" must not be greater than the number of columns (".concat(u,")."));t<0&&(t=s),n<0&&(n=u);var c=VZ(sQ(0,s,1,"int32"),[-1,1]),l=sQ(0,u,1,"int32"),d=uX(c,l),f=bX(JY(d,bQ(+t,"int32")),KY(d,bQ(-n,"int32"))),p=CX([s,u],r.dtype);return VZ(UQ($Q(VZ(r,[-1,s,u])).map((function(e){return NY(f,e,p)}))),a)}});var u$=KG({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,JV(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){JV(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: "+"(".concat(e[t].shape[0]," vs. ").concat(n,")")}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=MQ(e,e.shape[0],0).map((function(e){return jQ(e,[0])}))),JV(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors (".concat(e.length,") exceeds ")+"number of dimensions (".concat(e[0].shape[0],").")}));for(var n=[],r=e,a=function(e){n.push(DG.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=GZ(cX(GZ(n[a],t)),n[a]);t=uX(t,i)}return IY(t,uJ(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?UQ(n,0):n}});function c$(){return DG}function l$(e,t){return DG.tidy(e,t)}function d$(e){EG(e).forEach((function(e){return e.dispose()}))}function f$(e){return DG.keep(e)}function p$(e){return DG.setBackend(e)}function h$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return DG.registerBackend(e,t,n)}function v$(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return DG.tidy((function(){JV(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a ".concat(e.shape.length,"D Tensor.")}));for(var n=e.shape[0],r=e.shape[1],a=UY(n),i=FH(e),o=KQ([[1]],[1,1]),s=FH(o),u=n>=r?r:n,c=function(e){var t=i,u=s,c=a,l=DG.tidy((function(){var t=ZZ(i,[e,e],[n-e,1]),u=uJ(t),c=ZZ(i,[e,e],[1,1]),l=NY(qY(c,0),KQ([[-1]]),KQ([[1]])),d=uX(c,GZ(l,u)),f=IY(t,d);s=1===f.shape[0]?FH(o):qZ([o,ZZ(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var p=aX(IY(KZ(l,d),u)),h=ZZ(i,[e,0],[n-e,r]),v=GZ(p,s),m=oJ(s);if(0===e)i=uX(h,KZ(v,KZ(m,h)));else{var y=uX(h,KZ(v,KZ(m,h)));i=qZ([ZZ(i,[0,0],[e,r]),y],0)}var g=oJ(v),b=ZZ(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=uX(b,KZ(KZ(b,s),g));else{var x=uX(b,KZ(KZ(b,s),g));a=qZ([ZZ(a,[0,0],[n,e]),x],1)}return[s,i,a]})),d=(0,W.Z)(l,3);s=d[0],i=d[1],a=d[2],d$([t,u,c])},l=0;l<u;++l)c(l);return!t&&n>r&&(a=ZZ(a,[0,0],[n,r]),i=ZZ(i,[0,0],[r,r])),[a,i]}))}!function(e){e}((function(e){RW().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}));var m$,y$=KG({qr_:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(JV(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank ".concat(e.rank)})),2===e.rank)return v$(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=$Q(VZ(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];r.forEach((function(e){var n=v$(e,t),r=(0,W.Z)(n,2),o=r[0],s=r[1];a.push(o),i.push(s)}));var o=VZ(UQ(a,0),e.shape),s=VZ(UQ(i,0),e.shape);return[o,s]}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(m$||(m$={}));var g$=KG({computeWeightedLoss_:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m$.SUM_BY_NONZERO_WEIGHTS,r=WG(e,"losses","computeWeightedLoss"),a=null;null!=t&&(a=WG(t,"weights","computeWeightedLoss"));var i=null==a?r:GZ(r,a);if(n===m$.NONE)return i;if(n===m$.SUM)return cX(i);if(n===m$.MEAN){if(null==a)return IX(i);var o=r.size/a.size,s=IY(cX(i),cX(a));return o>1?IY(s,bQ(o)):s}if(n===m$.SUM_BY_NONZERO_WEIGHTS){if(null==a)return IY(cX(i),bQ(r.size));var u=GZ(a,NX(r.shape)),c=LH(cX(jX(u,bQ(0))),"float32");return IY(cX(i),c)}throw Error("Unknown reduction: ".concat(n))}});var b$=KG({absoluteDifference_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m$.SUM_BY_NONZERO_WEIGHTS,a=WG(e,"labels","absoluteDifference"),i=WG(t,"predictions","absoluteDifference"),o=null;null!=n&&(o=WG(n,"weights","absoluteDifference")),$V(a.shape,i.shape,"Error in absoluteDifference: ");var s=fZ(uX(a,i));return g$(s,o,r)}});var x$=KG({cosineDistance_:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m$.SUM_BY_NONZERO_WEIGHTS,i=WG(e,"labels","cosineDistance"),o=WG(t,"predictions","cosineDistance"),s=null;null!=r&&(s=WG(r,"weights","cosineDistance")),$V(i.shape,o.shape,"Error in cosineDistance: ");var u=bQ(1),c=uX(u,cX(GZ(i,o),n,!0));return g$(c,s,a)}});var k$=KG({hingeLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m$.SUM_BY_NONZERO_WEIGHTS,a=WG(e,"labels","hingeLoss"),i=WG(t,"predictions","hingeLoss"),o=null;null!=n&&(o=WG(n,"weights","hingeLoss")),$V(a.shape,i.shape,"Error in hingeLoss: ");var s=bQ(1);a=uX(GZ(bQ(2),a),s);var u=lQ(uX(s,GZ(a,i)));return g$(u,o,r)}});var w$=KG({huberLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m$.SUM_BY_NONZERO_WEIGHTS,i=WG(e,"labels","huberLoss"),o=WG(t,"predictions","huberLoss"),s=null;null!=n&&(s=WG(n,"weights","huberLoss")),$V(i.shape,o.shape,"Error in huberLoss: ");var u=bQ(r),c=fZ(uX(o,i)),l=PX(c,u),d=uX(c,l),f=vZ(GZ(bQ(.5),MX(l)),GZ(u,d));return g$(f,s,a)}});var _$=KG({logLoss_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-7,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m$.SUM_BY_NONZERO_WEIGHTS,i=WG(e,"labels","logLoss"),o=WG(t,"predictions","logLoss"),s=null;null!=n&&(s=WG(n,"weights","logLoss")),$V(i.shape,o.shape,"Error in logLoss: ");var u=bQ(1),c=bQ(r),l=aX(GZ(i,tX(vZ(o,c)))),d=GZ(uX(u,i),tX(vZ(uX(u,o),c))),f=uX(l,d);return g$(f,s,a)}});var T$=KG({meanSquaredError_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:m$.SUM_BY_NONZERO_WEIGHTS,a=WG(e,"labels","meanSquaredError"),i=WG(t,"predictions","meanSquaredError"),o=null;null!=n&&(o=WG(n,"weights","meanSquaredError")),$V(a.shape,i.shape,"Error in meanSquaredError: ");var s=BQ(a,i);return g$(s,o,r)}});function S$(e,t){var n=WG(e,"labels","sigmoidCrossEntropyWithLogits"),r=WG(t,"logits","sigmoidCrossEntropyWithLogits");$V(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=lQ(r),i=GZ(r,n),o=nX(LY(aX(fZ(r))));return vZ(uX(a,i),o)}var E$=KG({sigmoidCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m$.SUM_BY_NONZERO_WEIGHTS,i=WG(e,"multiClassLabels","sigmoidCrossEntropy"),o=WG(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=WG(n,"weights","sigmoidCrossEntropy")),$V(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=bQ(r),c=bQ(1),l=bQ(.5);i=vZ(GZ(i,uX(c,u)),GZ(l,u))}var d=S$(i,o);return g$(d,s,a)}});function I$(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet "+"supported. Labels / logits was rank ".concat(t.rank," ")+"and dim was ".concat(n));var r=rX((function(e,t,r){var a=gX(t,[n],!0),i=uX(LH(t,"float32"),a);r([e,i]);var o=aX(GZ(i,e));return{value:cX(o,[n]),gradFunc:function(e,t){var r=(0,W.Z)(t,2),a=r[0],i=r[1],o=pX(e.shape,[n]);return[GZ(VZ(e,o),uX(LH(a,"float32"),LY(i))),GZ(VZ(e,o),uX(LY(i),LH(a,"float32")))]}}}));return r(e,t)}var C$=KG({softmaxCrossEntropy_:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:m$.SUM_BY_NONZERO_WEIGHTS,i=WG(e,"onehotLabels","softmaxCrossEntropy"),o=WG(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=WG(n,"weights","softmaxCrossEntropy")),$V(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=bQ(r),c=bQ(1),l=bQ(i.shape[1]);i=vZ(GZ(i,uX(c,u)),IY(u,l))}var d=I$(i,o);return g$(d,s,a)}});var N$=KG({sparseFillEmptyRows_:function(e,t,n,r){var a=WG(e,"indices","sparseFillEmptyRows","int32"),i=WG(t,"values","sparseFillEmptyRows"),o=WG(n,"denseShape","sparseFillEmptyRows","int32"),s=WG(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(2!==a.rank)throw new Error("Indices should be Tensor2D but received shape\n        ".concat(a.shape));if(1!==i.rank)throw new Error("Values should be Tensor1D but received shape ".concat(i.shape));if(1!==o.rank)throw new Error("Dense shape should be Tensor1D but received shape ".concat(o.shape));if(0!==s.rank)throw new Error("Default value should be a scalar but received shape ".concat(s.shape));var u={indices:a,values:i,denseShape:o,defaultValue:s},c=DG.runKernel(Jq,u);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}});var A$=KG({sparseReshape_:function(e,t,n){var r=WG(e,"inputIndices","sparseReshape","int32"),a=WG(t,"inputShape","sparseReshape","int32"),i=WG(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        ".concat(r.shape));if(1!==a.rank)throw new Error("Input shape should be Tensor1D but received shape ".concat(a.shape));if(1!==i.rank)throw new Error("New shape should be Tensor1D but received shape ".concat(i.shape));var o={inputIndices:r,inputShape:a,newShape:i},s=DG.runKernel($q,o);return{outputIndices:s[0],outputShape:s[1]}}});var O$=KG({sparseSegmentMean_:function(e,t,n){var r=WG(e,"data","sparseSegmentMean"),a=WG(t,"indices","sparseSegmentMean","int32"),i=WG(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n          ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return DG.runKernel(eK,o)}});var P$=KG({sparseSegmentSum_:function(e,t,n){var r=WG(e,"data","sparseSegmentSum"),a=WG(t,"indices","sparseSegmentSum","int32"),i=WG(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.rank)throw new Error("Indices should be Tensor1D but received shape\n         ".concat(a.shape));if(1!==i.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         ".concat(i.shape));var o={data:r,indices:a,segmentIds:i};return DG.runKernel(tK,o)}});var R$=KG({stringNGrams_:function(e,t,n,r,a,i,o,s){var u=WG(e,"data","stringNGrams","string");if("string"!==u.dtype)throw new Error("Data must be of datatype string");if(1!==u.shape.length)throw new Error("Data must be a vector, saw: ".concat(u.shape));var c=WG(t,"dataSplits","stringNGrams");if("int32"!==c.dtype)throw new Error("Data splits must be of datatype int32");var l={separator:n,nGramWidths:r,leftPad:a,rightPad:i,padWidth:o,preserveShortSequences:s},d={data:u,dataSplits:c},f=DG.runKernel(oK,d,l);return{nGrams:f[0],nGramsSplits:f[1]}}});var D$=KG({stringSplit_:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=WG(e,"input","stringSplit","string"),a=WG(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape ".concat(r.shape));if(0!==a.rank)throw new Error("Delimiter should be a scalar but received shape ".concat(a.shape));var i={skipEmpty:n},o={input:r,delimiter:a},s=DG.runKernel(sK,o,i);return{indices:s[0],values:s[1],shape:s[2]}}});var M$=KG({stringToHashBucketFast_:function(e,t){var n=WG(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");var a={input:n};return DG.runKernel(uK,a,r)}}),L$={fft:PQ,ifft:RQ,rfft:LQ,irfft:DQ},F$={hammingWindow:NJ,hannWindow:AJ,frame:OJ,stft:PJ},B$={flipLeftRight:DJ,grayscaleToRGB:MJ,resizeNearestNeighbor:r$,resizeBilinear:n$,rotateWithOffset:LJ,cropAndResize:RJ,nonMaxSuppression:BJ,nonMaxSuppressionAsync:YJ,nonMaxSuppressionWithScore:XJ,nonMaxSuppressionWithScoreAsync:JJ,nonMaxSuppressionPadded:$J,nonMaxSuppressionPaddedAsync:t$,threshold:i$,transform:o$},j$={bandPart:s$,gramSchmidt:u$,qr:y$},U$={absoluteDifference:b$,computeWeightedLoss:g$,cosineDistance:x$,hingeLoss:k$,huberLoss:w$,logLoss:_$,meanSquaredError:T$,sigmoidCrossEntropy:E$,softmaxCrossEntropy:C$},V$={sparseFillEmptyRows:N$,sparseReshape:A$,sparseSegmentMean:O$,sparseSegmentSum:P$},W$={stringNGrams:R$,stringSplit:D$,stringToHashBucketFast:M$};function z$(e,t){var n=e[0].length;e.forEach((function(e,t){JV(e.length===n,(function(){return"Error in concat".concat(n,"D: rank of tensors[").concat(t,"] must be the same ")+"as the rank of the rest (".concat(n,")")}))})),JV(t>=0&&t<n,(function(){return"Error in concat".concat(n,"D: axis must be between 0 and ").concat(n-1,".")}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)JV(i===t||e[i]===r[i],(function(){return"Error in concat".concat(n,"D: Shape of tensors[").concat(a,"] (").concat(e,") ")+"does not match the shape of the rest (".concat(r,") ")+"along the non-concatenated axis ".concat(a,".")}))}))}function q$(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function K$(e){return e<=30?e:bW(e,Math.floor(Math.sqrt(e)))}function G$(e,t,n){return[n*("number"===typeof e?e:e[0]),t*("number"===typeof e?e:e[1])]}function H$(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function Z$(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2===1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function Y$(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function X$(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Q$(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}function J$(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+"".concat(e.length,", imag: ").concat(t.length,"."));for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}var $$,e0,t0="->",n0=/->/g;function r0(e,t){var n=new Array(e);n.fill(-1);for(var r=0;r<t.length;++r)n[t[r]]=r;for(var a=[],i=0;i<e;++i)-1===n[i]&&a.push(i);return{permutationIndices:n=n.filter((function(e){return-1!==e})),expandDims:a}}function a0(e){return e.every((function(e,t){return e===t}))}function i0(e,t){for(var n=[],r=0;r<e.length;++r)0!==e[r].length&&-1===e[r].indexOf(t)&&-1!==t||n.push(r);return n}function o0(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];if("number"===typeof t)JV(e.shape[n]%t===0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);JV(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}JV(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}function s0(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ".concat(e)}function u0(e,t){return"indices(".concat(e,", 0) is invalid: ").concat(t," < 0")}function c0(e,t,n){return"indices(".concat(e,", 0) is invalid: ").concat(t," >= ").concat(n)}function l0(e,t){return"only one output dimension may be -1, not both ".concat(e," and ").concat(t)}function d0(e,t){return"size ".concat(e," must be non-negative, not ").concat(t)}function f0(e,t){var n=nW(e),r=nW(t);return"Input to reshape is a SparseTensor with ".concat(n,"\n  dense values, but the requested shape requires a multiple of ").concat(r,". inputShape=").concat(e," outputShape= ").concat(t)}function p0(e,t){var n=nW(e),r=nW(t);return"Input to reshape is a tensor with ".concat(n," dense values, but the requested shape has ").concat(r,". inputShape=").concat(e," outputShape=").concat(t)}function h0(e,t){return"Segment id ".concat(e," out of range [0, ").concat(t,"), possibly because segmentIds input is not sorted.")}function v0(e,t,n){return"Bad: indices[".concat(e,"] == ").concat(t," out of range [0, ").concat(n,")")}function m0(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-".concat(a,", ").concat(a,"], but got ").concat(r));if(r<0&&(r+=a),r>i)throw new Error("batchDims (".concat(r,") must be less than rank(x) (\n    ").concat(i,")."));if(n<r)throw new Error("batchDims (".concat(r,") must be less than or equal to axis (").concat(n,")."));for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape[".concat(o,"]: ").concat(e.shape[o]," should be equal to indices.shape[").concat(o,"]: ").concat(t.shape[o],"."));for(var s=e.shape[n],u=[],c=1,l=1,d=1,f=0;f<r;++f)u.push(e.shape[f]),c*=e.shape[f];for(var p=r;p<n;p++)u.push(e.shape[p]),l*=e.shape[p];for(var h=r;h<a;h++)u.push(t.shape[h]);for(var v=n+1;v<i;v++)u.push(e.shape[v]),d*=e.shape[v];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:u}}function y0(e){try{return e.map((function(e){return tG(e)}))}catch(Noe){throw new Error("Failed to decode encoded string bytes into utf-8, error: ".concat(Noe))}}function g0(e){return e.map((function(e){return eG(e)}))}RW().registerFlag("KEEP_INTERMEDIATE_TENSORS",(function(){return!1}),(function(e){e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}($$||($$={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(e0||(e0={}));var b0={};function x0(e){return b0[e]}function k0(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return w0(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return w0(e,n,r,a)}));var u=w0(t.inputNames.slice(o)[0],n,r,a),c=u.dataSync();return"number"===i.type?c[0]:wW(u.shape,c)}var l=t.attrParams[e];return l&&l.value}function w0(e,t,n,r){var a=S0(e),i=(0,W.Z)(a,2),o=i[0],s=i[1];if(null!=r){var u=r.getHashTableHandleByName(o);if(null!=u)return u}var c=n.currentContextIds.find((function(e){return!!t[T0(o,e)]}));return void 0!==c?t[T0(o,c)][s]:void 0}function _0(e,t){var n=S0(e),r=(0,W.Z)(n,3),a=r[0],i=r[1],o=r[2];return[T0(a,t&&t.currentContextId),i,o]}function T0(e,t){return t?"".concat(e,"-").concat(t):e}function S0(e){var t=e.split(":");if(1===t.length)return[e,0,void 0];var n=t[0],r=3===t.length?t[1]:void 0;return[n,Number(t[t.length-1]),r]}function E0(e,t,n){var r=k0("pad",e,t,n);if("explicit"===r){r=k0("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function I0(e){return e.kept?e:FH(e)}var C0=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],N0=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],A0=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}],O0=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],P0=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],R0=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],D0=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],M0=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],L0=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]}],F0=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],B0=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],j0=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]}],U0=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],V0=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],W0=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],z0=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],q0=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],K0=[{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],G0=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],H0=function(){function e(){var t;I(this,e);var n=[r,a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x,k],w=(t=[]).concat.apply(t,(0,Ze.Z)(n.map((function(e){return e.json}))));this.opMappers=w.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return N(e,[{key:"transformGraph",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,n){return e[n.name]=t.mapNode(n),n.op.startsWith("Placeholder")?a.push(e[n.name]):"Const"===n.op?i.push(e[n.name]):null!=n.input&&0!==n.input.length||o.push(e[n.name]),e}),{}),u=[],c=[],l={},d={};null!=n&&(l=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e,n){var r=_0(e),a=(0,W.Z)(r,3),i=a[0],o=a[2],u=s[i];if(null!=u.outputs){var c=u.outputs.indexOf(o);if(-1!==c){var l="".concat(i,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))})),0===Object.keys(d).length?f.forEach((function(e){var t=s[e];0===t.children.length&&c.push(t)})):Object.keys(d).forEach((function(e){var t=_0(e),n=(0,W.Z)(t,1)[0],r=s[n];null!=r&&(r.signatureKey=d[e],c.push(r))})),Object.keys(l).length>0?Object.keys(l).forEach((function(e){var t=_0(e),n=(0,W.Z)(t,1)[0],r=s[n];r&&(r.signatureKey=l[e],u.push(r))})):u=a;var p={};null!=e.library&&null!=e.library.function&&(p=e.library.function.reduce((function(e,n){return e[n.signature.name]=t.mapFunction(n),e}),{}));var h={nodes:s,inputs:u,outputs:c,weights:i,placeholders:a,signature:n,functions:p};return o.length>0&&(h.initNodes=o),h}},{key:"mapSignatureEntries",value:function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})}},{key:"mapNode",value:function(e){var t=x0(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=Y0(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=Y0(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=i1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=i1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=Q0(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=Q0(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=a1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=a1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=X0(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=X0(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=s1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=s1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=r1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=r1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=o1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=o1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=e1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=e1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=t1(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=t1(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=$0(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=$0(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: ".concat(n.type," for op: ").concat(e.op))}return t[n.name]={value:a,type:r},t}),{})),n}},{key:"mapFunction",value:function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=_0(e.name),n=(0,W.Z)(t,1)[0],r={name:n,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:J0(e.type),type:"dtype"}},children:[]};r.signatureKey=e.name,i.push(r),a[n]=r})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e,n){var r=_0(e),i=(0,W.Z)(r,3),o=i[0],s=i[2],u=a[o];if(null!=u.outputs){var c=u.outputs.indexOf(s);if(-1!==c){var l="".concat(o,":").concat(c);t.inputNames[n]=l}}t.inputs.push(u),u.children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=_0(s[e.name]),n=(0,W.Z)(t,2),r=n[0],i=n[1],u=a[r];null!=u&&(u.defaultOutput=i,o.push(u))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}}},{key:"mapArgsToSignature",value:function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}}},{key:"mapArgToTensorInfo",value:function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),e}();function Z0(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=RW().global;if("undefined"!==typeof t.atob)return t.atob(e);if("undefined"!==typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Y0(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return null!=a?Z0(a.s,r):n}function X0(e,t,n){var r=e[t];return r?r.b:n}function Q0(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"===typeof a?a:parseInt(a,10)}function J0(e){switch("string"===typeof e&&(e=$$[e]),e){case $$.DT_FLOAT:case $$.DT_HALF:return"float32";case $$.DT_INT32:case $$.DT_INT64:case $$.DT_INT8:case $$.DT_UINT8:return"int32";case $$.DT_BOOL:return"bool";case $$.DT_DOUBLE:return"float32";case $$.DT_STRING:return"string";default:return null}}function $0(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function e1(e,t,n){var r=e[t];return r&&r.type?J0(r.type):n}function t1(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return J0(e)})):n}function n1(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"===typeof e.size?e.size:parseInt(e.size,10)})):[]}function r1(e,t,n){var r=e[t];return r&&r.shape?n1(r.shape):n}function a1(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"===typeof e?e:parseInt(e,10)})):n}function i1(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return Z0(e,r)})):n}function o1(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return n1(e)})):n}function s1(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var u1=function(){function e(t,n,r){var a=this;I(this,e),this.node=t,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map((function(e){return a.getInput(e)})),null!=t.rawAttrs&&(this.attrs=Object.keys(t.rawAttrs).reduce((function(e,t){return e[t]=a.getAttr(t),e}),{}))}return N(e,[{key:"getInput",value:function(e){return w0(e,this.tensorMap,this.context)}},{key:"getAttr",value:function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return w0(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return Q0(this.node.rawAttrs,e,t);if(null!=n.s)return Y0(this.node.rawAttrs,e,t);if(null!=n.b)return X0(this.node.rawAttrs,e,t);if(null!=n.shape)return r1(this.node.rawAttrs,e,t);if(null!=n.type)return e1(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return a1(this.node.rawAttrs,e,t);if(null!=n.list.s)return i1(this.node.rawAttrs,e,t);if(null!=n.list.shape)return o1(this.node.rawAttrs,e,t);if(null!=n.list.b)return s1(this.node.rawAttrs,e,t);if(null!=n.list.type)return t1(this.node.rawAttrs,e,t)}return t}}]),e}();function c1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("number"!==typeof e&&"number"!==typeof t){JV(e.length===t.length,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}));for(var r=0;r<e.length;r++){var a=e[r],i=t[r];JV(a<0||i<0||a===i,(function(){return n+" Shapes ".concat(e," and ").concat(t," must match")}))}}}function l1(e){return"number"!==typeof e&&!e.some((function(e){return e<0}))}function d1(e,t,n){var r=f1(e,n),a=!l1(r);if(a&&0===t.length)throw new Error("Tried to calculate elements of an empty list"+" with non-fully-defined elementShape: ".concat(r));if(a&&t.forEach((function(e){r=f1(e.shape,r)})),!l1(r))throw new Error("Non-fully-defined elementShape: ".concat(r));return r}function f1(e,t){if("number"===typeof e)return t;if("number"===typeof t)return e;if(e.length!==t.length)throw new Error("Incompatible ranks during merge: ".concat(e," vs. ").concat(t));for(var n=[],r=0;r<e.length;++r){var a=e[r],i=t[r];if(a>=0&&i>=0&&a!==i)throw new Error("Incompatible shape during merge: ".concat(e," vs. ").concat(t));n[r]=a>=0?a:i}return n}var p1=function(){function e(t,n,r,a,i,o,s){I(this,e),this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=a,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.idTensor=bQ(0),f$(this.idTensor)}return N(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"read",value:function(e){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||e>=this.size())throw new Error("Tried to read from index ".concat(e,", but array size is: ").concat(this.size()));var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray ".concat(this.name,": Could not read index ").concat(e," twice because it was cleared after a previous read ")+"(perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}},{key:"readMany",value:function(e){var t=this;return e.map((function(e){return t.read(e)}))}},{key:"write",value:function(e,t){if(this.closed_)throw new Error("TensorArray ".concat(this.name," has already been closed."));if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index ".concat(e,", but array is not resizeable and size is: ").concat(this.maxSize));var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,",\n          because the value dtype is ").concat(t.dtype,", but TensorArray dtype is ").concat(this.dtype,"."));if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),c1(this.elementShape,t.shape,"TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,".")),n.read)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been read."));if(n.written)throw new Error("TensorArray ".concat(this.name,": Could not write to TensorArray index ").concat(e,", because it has already been written."));n.tensor=t,f$(t),n.written=!0,this.tensors[e]=n}},{key:"writeMany",value:function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray ".concat(this.name,": could not write multiple tensors,")+"because the index size: ".concat(e.length," is not the same as tensors size: ").concat(t.length,"."));e.forEach((function(e,r){return n.write(e,t[r])}))}},{key:"gather",value:function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but gather requested dtype ").concat(t));if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return ZG([],[0].concat(this.elementShape));var r=this.readMany(e);return c1(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),UQ(r,0)}},{key:"concat",value:function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but concat requested dtype ").concat(e));if(0===this.size())return ZG([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return c1(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape (".concat(this.elementShape,") vs first tensor shape (").concat(r[0].shape,")")),qZ(r,0)}},{key:"scatter",value:function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(e.length," vs. ").concat(t.shape[0]));var n=Math.max.apply(Math,(0,Ze.Z)(e));if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size (".concat(n,"  vs. ").concat(this.maxSize,")"));this.writeMany(e,$Q(t,0))}},{key:"split",value:function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is ".concat(this.dtype," but tensor has dtype ").concat(t.dtype));var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(t.shape));if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths (".concat(this.maxSize," vs. ").concat(e.length,"), ")+"and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];l$((function(){t=VZ(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,e[s],i];o[s]=VZ(ZZ(t,u,c),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)}}]),e}(),h1=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;I(this,e),this.tensors=t,this.elementShape=n,this.elementDtype=r,null!=t&&t.forEach((function(e){if(r!==e.dtype)throw new Error("Invalid data types; op elements ".concat(r,", but list elements ").concat(e.dtype));c1(n,e.shape,"TensorList shape mismatch: "),f$(e)})),this.idTensor=bQ(0),this.maxNumElements=a,f$(this.idTensor)}return N(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"copy",value:function(){return new e((0,Ze.Z)(this.tensors),this.elementShape,this.elementDtype)}},{key:"clearAndClose",value:function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()}},{key:"size",value:function(){return this.tensors.length}},{key:"stack",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(-1!==r&&this.tensors.length!==r)throw new Error("Operation expected a list with ".concat(r," elements but got a list with ").concat(this.tensors.length," elements."));c1(e,this.elementShape,"TensorList shape mismatch: ");var a=d1(this.elementShape,this.tensors,e);return l$((function(){var e=n.tensors.map((function(e){return VZ(e,a)}));return UQ(e,0)}))}},{key:"popBack",value:function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=d1(this.elementShape,this.tensors,e),r=this.tensors.pop();return c1(r.shape,e,"TensorList shape mismatch: "),VZ(r,n)}},{key:"pushBack",value:function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(this.elementDtype));if(c1(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");f$(e),this.tensors.push(e)}},{key:"resize",value:function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: ".concat(e));if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size ".concat(e," is greater maxNumElement ").concat(this.maxNumElements,"."));this.tensors.length=e}},{key:"getItem",value:function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(n,", but list elements ").concat(this.elementDtype));if(e<0||e>this.tensors.length)throw new Error("Trying to access element ".concat(e," in a list with ").concat(this.tensors.length," elements."));if(null==this.tensors[e])throw new Error("element at index ".concat(e," is null."));c1(this.tensors[e].shape,t,"TensorList shape mismatch: ");var r=d1(this.elementShape,this.tensors,t);return VZ(this.tensors[e],r)}},{key:"setItem",value:function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t.dtype,", but list elements ").concat(this.elementDtype));if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element ".concat(e," in a list with max ").concat(this.maxNumElements," elements."));c1(this.elementShape,t.shape,"TensorList shape mismatch: "),f$(t),this.tensors[e]=t}},{key:"gather",value:function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements ".concat(t,", but list elements ").concat(this.elementDtype));c1(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());var a=d1(this.elementShape,this.tensors,n);return 0===e.length?ZG([],[0].concat(a)):l$((function(){var t=e.map((function(e){return VZ(r.tensors[e],a)}));return UQ(t,0)}))}},{key:"concat",value:function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is ".concat(this.elementDtype," but concat requested dtype ").concat(e));c1(this.elementShape,t,"TensorList shape mismatch: ");var r=d1(this.elementShape,this.tensors,t);return 0===this.size()?ZG([],[0].concat(r)):l$((function(){var e=n.tensors.map((function(e){return VZ(e,r)}));return qZ(e,0)}))}}]),e}();function v1(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: ".concat(e.shape));if(e.dtype!==n)throw new Error("Invalid data types; op elements ".concat(e.dtype,", but list elements ").concat(n));c1(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=$Q(e);return new h1(a,t,r)}function m1(e,t,n){return new h1([],e,t,n)}function y1(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: ".concat(t.length," vs. ").concat(e.shape[0]));var a=Math.max.apply(Math,(0,Ze.Z)(t));if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size (".concat(a,"  vs. ").concat(r,")"));var i=new h1([],n,e.dtype,r),o=$Q(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function g1(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ".concat(r,", and tensor's shape is: ").concat(e.shape));for(var i=f1(e.shape.slice(1),n),o=0===r?0:e.size/r,s=l$((function(){var n=[];e=VZ(e,[1,r,o]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],c=[1,t[s],o];n[s]=VZ(ZZ(e,u,c),i)}return e.dispose(),n})),u=new h1([],n,e.dtype,t.length),c=0;c<s.length;c++)u.setItem(c,s[c]);return u}var b1=function(){var e=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x,k,w,_,T,S,E,I,C,N,A,O,P,R,D,M,L,F,B,j,U,V,W,z,q,K,H,Z,Y,X,Q,J,$,ee,te,ne,re,ae,ie,oe,se,ue,ce,le,de,fe,pe,he,ve,me,ye,ge,be,xe,ke,we,_e,Te,Se,Ee,Ie,Ce,Ne,Ae,Oe,Pe,Re,De,Me,Le,Fe,Be,je,Ue,Ve,We,ze,qe,Ke,Ge;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=k0("thenBranch",t,n,r),i=k0("elseBranch",t,n,r),o=k0("cond",t,n,r),s=k0("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(G().mark((function e(){var a,i,o,s,u,c,l,d;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k0("body",t,n,r),i=k0("cond",t,n,r),o=k0("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:c=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),l=o,d=G().mark((function e(){var t,n,o;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l,e.next=3,r.functionMap[a].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 3:return l=e.sent,n=l.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(l,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:c=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!c[0]){e.next=17;break}return e.delegateYield(d(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:l});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!==typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return c=k0("pred",t,n,r),e.abrupt("return",[I0(c)]);case 21:return l=k0("pred",t,n,r),(d=k0("data",t,n,r)).kept||(d=I0(d)),e.next=26,l.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,d],e.next=31;break;case 30:e.t2=[d,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==w0(e,n,r)})),!f){e.next=36;break}return p=w0(f,n,r),e.abrupt("return",[I0(p)]);case 36:return e.abrupt("return",void 0);case 37:return h=k0("frameName",t,n,r),v=k0("tensor",t,n,r),r.enterFrame(h),e.abrupt("return",[I0(v)]);case 41:return m=k0("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[I0(m)]);case 44:return y=k0("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[I0(y)]);case 47:return g=k0("size",t,n,r),b=k0("dtype",t,n,r),x=k0("elementShape",t,n,r),k=k0("dynamicSize",t,n,r),w=k0("clearAfterRead",t,n,r),_=k0("identicalElementShapes",t,n,r),T=k0("name",t,n,r),S=new p1(T,b,g,x,_,k,w),r.addTensorArray(S),e.abrupt("return",[S.idTensor,bQ(1)]);case 57:return E=k0("tensorArrayId",t,n,r),I=k0("index",t,n,r),C=k0("tensor",t,n,r),(N=r.getTensorArray(E.id)).write(I,C),e.abrupt("return",[N.idTensor]);case 63:return A=k0("tensorArrayId",t,n,r),O=k0("index",t,n,r),P=r.getTensorArray(A.id),e.abrupt("return",[P.read(O)]);case 67:return R=k0("tensorArrayId",t,n,r),D=k0("indices",t,n,r),M=k0("dtype",t,n,r),L=r.getTensorArray(R.id),e.abrupt("return",[L.gather(D,M)]);case 72:return F=k0("tensorArrayId",t,n,r),B=k0("indices",t,n,r),j=k0("tensor",t,n,r),(U=r.getTensorArray(F.id)).scatter(B,j),e.abrupt("return",[U.idTensor]);case 78:return V=k0("tensorArrayId",t,n,r),W=r.getTensorArray(V.id),z=k0("dtype",t,n,r),e.abrupt("return",[W.concat(z)]);case 82:return q=k0("tensorArrayId",t,n,r),K=k0("tensor",t,n,r),H=k0("lengths",t,n,r),(Z=r.getTensorArray(q.id)).split(H,K),e.abrupt("return",[Z.idTensor]);case 88:return Y=k0("tensorArrayId",t,n,r),X=r.getTensorArray(Y.id),e.abrupt("return",[bQ(X.size(),"int32")]);case 91:return Q=k0("tensorArrayId",t,n,r),(J=r.getTensorArray(Q.id)).clearAndClose(),e.abrupt("return",[J.idTensor]);case 95:return $=k0("tensorListId",t,n,r),ee=k0("index",t,n,r),te=k0("tensor",t,n,r),(ne=r.getTensorList($.id)).setItem(ee,te),e.abrupt("return",[ne.idTensor]);case 101:return re=k0("tensorListId",t,n,r),ae=k0("index",t,n,r),ie=k0("elementShape",t,n,r),oe=k0("elementDType",t,n,r),se=r.getTensorList(re.id),e.abrupt("return",[se.getItem(ae,ie,oe)]);case 107:return ue=k0("indices",t,n,r),ce=k0("tensor",t,n,r),le=k0("elementShape",t,n,r),de=k0("numElements",t,n,r),fe=y1(ce,ue,le,de),r.addTensorList(fe),e.abrupt("return",[fe.idTensor]);case 114:return pe=k0("elementShape",t,n,r),he=k0("elementDType",t,n,r),ve="TensorListReserve"===t.op?"numElements":"maxNumElements",me=k0(ve,t,n,r),ye=m1(pe,he,me),r.addTensorList(ye),e.abrupt("return",[ye.idTensor]);case 121:return ge=k0("tensorListId",t,n,r),be=k0("indices",t,n,r),xe=k0("elementShape",t,n,r),ke=k0("elementDType",t,n,r),we=r.getTensorList(ge.id),e.abrupt("return",[we.gather(be,ke,xe)]);case 127:return _e=k0("tensorListId",t,n,r),Te=k0("elementShape",t,n,r),Se=k0("elementDType",t,n,r),Ee=k0("numElements",t,n,r),Ie=r.getTensorList(_e.id),e.abrupt("return",[Ie.stack(Te,Se,Ee)]);case 133:return Ce=k0("tensor",t,n,r),Ne=k0("elementShape",t,n,r),Ae=k0("elementDType",t,n,r),Oe=v1(Ce,Ne,Ae),r.addTensorList(Oe),e.abrupt("return",[Oe.idTensor]);case 139:return Pe=k0("tensorListId",t,n,r),Re=r.getTensorList(Pe.id),De=k0("dtype",t,n,r),Me=k0("elementShape",t,n,r),e.abrupt("return",[Re.concat(De,Me)]);case 144:return Le=k0("tensorListId",t,n,r),Fe=k0("tensor",t,n,r),(Be=r.getTensorList(Le.id)).pushBack(Fe),e.abrupt("return",[Be.idTensor]);case 149:return je=k0("tensorListId",t,n,r),Ue=k0("elementShape",t,n,r),Ve=k0("elementDType",t,n,r),We=r.getTensorList(je.id),e.abrupt("return",[We.popBack(Ue,Ve)]);case 154:return ze=k0("tensor",t,n,r),qe=k0("elementShape",t,n,r),Ke=k0("lengths",t,n,r),Ge=g1(ze,Ke,qe),r.addTensorList(Ge),e.abrupt("return",[Ge.idTensor]);case 160:throw TypeError("Node type ".concat(t.op," is not implemented"));case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function x1(e,t,n){var r=k0("fusedOps",e,t,n),a=(0,W.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u=!s,c="prelu"===o,l="fusedbatchnorm"===i,d=k0("numArgs",e,t,n);if(s){if(c&&2!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!c&&s&&1!==d)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");var f=k0("strides",e,t,n),p=E0(e,t,n),h=k0("dataFormat",e,t,n).toUpperCase(),v=k0("dilations",e,t,n),m=k0("args",e,t,n),y=(0,W.Z)(m,2),g=y[0],b=y[1];return u&&(b=g,g=void 0),{stride:f,pad:p,dataFormat:h,dilations:v,biasArg:g,preluArg:b,activationFunc:o,leakyreluAlpha:k0("leakyreluAlpha",e,t,n)}}function k1(e,t,n){return{boxes:k0("boxes",e,t,n),scores:k0("scores",e,t,n),maxOutputSize:k0("maxOutputSize",e,t,n),iouThreshold:k0("iouThreshold",e,t,n),scoreThreshold:k0("scoreThreshold",e,t,n),softNmsSigma:k0("softNmsSigma",e,t,n)}}var w1=function(){var e=j(G().mark((function e(t,n,r){var a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x,k,w,_,T,S,E,I;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=k1(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,c=a.scoreThreshold,l=a.softNmsSigma,e.next=6,B$.nonMaxSuppressionWithScoreAsync(i,o,s,u,c,l);case 6:return d=e.sent,e.abrupt("return",[d.selectedIndices,d.selectedScores]);case 8:return f=k1(t,n,r),p=f.boxes,h=f.scores,v=f.maxOutputSize,m=f.iouThreshold,y=f.scoreThreshold,g=k0("padToMaxOutputSize",t,n,r),e.next=12,B$.nonMaxSuppressionPaddedAsync(p,h,v,m,y,g);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=k1(t,n,r),k=x.boxes,w=x.scores,_=x.maxOutputSize,T=x.iouThreshold,S=x.scoreThreshold,e.next=17,B$.nonMaxSuppressionAsync(k,w,_,T,S);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return E=LH(k0("condition",t,n,r),"bool"),e.next=22,rJ(E);case 22:return e.t2=e.sent,I=[e.t2],E.dispose(),e.abrupt("return",I);case 26:return e.abrupt("return",_Q(k0("x",t,n,r),k0("y",t,n,r)));case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_1=function(){function e(t,n){I(this,e),this.keyDType=t,this.valueDType=n,this.handle=bQ(0),this.tensorMap=new Map,f$(this.handle)}return N(e,[{key:"id",get:function(){return this.handle.id}},{key:"clearAndClose",value:function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()}},{key:"size",value:function(){return this.tensorMap.size}},{key:"tensorSize",value:function(){return bQ(this.size(),"int32")}},{key:"import",value:function(){var e=j(G().mark((function e(t,n){var r,a=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",l$((function(){var e=$Q(n),t=r.length,i=e.length;JV(t===i,(function(){return"The number of elements doesn't match, keys has "+"".concat(t," elements, the values has ").concat(i," ")+"elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];f$(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"find",value:function(){var e=j(G().mark((function e(t,n){var r,a=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",l$((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return UQ(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findWithDefault",value:function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t}},{key:"checkKeyAndValueTensor",value:function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype ".concat(this.keyDType,", but got ")+"".concat(e.dtype));if(t.dtype!==this.valueDType)throw new Error("Expect value dtype ".concat(this.valueDType,", but got ")+"".concat(t.dtype))}}]),e}(),T1=function(){var e=j(G().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,v,m,y;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:"LookupTableSize"===e.t0||"LookupTableSizeV2"===e.t0?24:27;break;case 3:return i=k0("keyDType",t,n,r),o=k0("valueDType",t,n,r),s=new _1(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=k0("tableHandle",t,n,r,a),c=k0("keys",t,n,r),l=k0("values",t,n,r),d=a.getHashTableById(u.id),e.next=14,d.import(c,l);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return f=k0("tableHandle",t,n,r,a),p=k0("keys",t,n,r),h=k0("defaultValue",t,n,r),v=a.getHashTableById(f.id),e.next=22,v.find(p,h);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:return m=k0("tableHandle",t,n,r,a),y=a.getHashTableById(m.id),e.abrupt("return",[y.tensorSize()]);case 27:throw TypeError("Node type ".concat(t.op," is not implemented"));case 28:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function S1(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return l$((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[vZ(k0("a",e,t,n),k0("b",e,t,n))];case"AddN":return[mZ(k0("tensors",e,t,n))];case"FloorMod":case"Mod":return[DX(k0("a",e,t,n),k0("b",e,t,n))];case"Mul":return[GZ(k0("a",e,t,n),k0("b",e,t,n))];case"RealDiv":case"Div":return[IY(k0("a",e,t,n),k0("b",e,t,n))];case"DivNoNan":return[OY(k0("a",e,t,n),k0("b",e,t,n))];case"FloorDiv":return[EY(k0("a",e,t,n),k0("b",e,t,n))];case"Sub":return[uX(k0("a",e,t,n),k0("b",e,t,n))];case"Minimum":return[PX(k0("a",e,t,n),k0("b",e,t,n))];case"Maximum":return[EX(k0("a",e,t,n),k0("b",e,t,n))];case"Pow":return[XX(k0("a",e,t,n),k0("b",e,t,n))];case"SquaredDifference":return[BQ(k0("a",e,t,n),k0("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"basic_math":return l$((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[fZ(k0("x",e,t,n))];case"Acos":return[pZ(k0("x",e,t,n))];case"Acosh":return[hZ(k0("x",e,t,n))];case"Asin":return[kZ(k0("x",e,t,n))];case"Asinh":return[wZ(k0("x",e,t,n))];case"Atan":return[_Z(k0("x",e,t,n))];case"Atan2":return[TZ(k0("x",e,t,n),k0("y",e,t,n))];case"Atanh":return[SZ(k0("x",e,t,n))];case"Ceil":return[iY(k0("x",e,t,n))];case"Complex":return[GG(k0("real",e,t,n),k0("imag",e,t,n))];case"Cos":return[gY(k0("x",e,t,n))];case"Cosh":return[bY(k0("x",e,t,n))];case"Elu":return[DY(k0("x",e,t,n))];case"Erf":return[MY(k0("x",e,t,n))];case"Exp":return[LY(k0("x",e,t,n))];case"Expm1":return[BY(k0("x",e,t,n))];case"Floor":return[WY(k0("x",e,t,n))];case"Log":return[tX(k0("x",e,t,n))];case"Log1p":return[nX(k0("x",e,t,n))];case"Imag":return[GY(k0("x",e,t,n))];case"Neg":return[aX(k0("x",e,t,n))];case"Reciprocal":return[cQ(k0("x",e,t,n))];case"Real":return[uQ(k0("x",e,t,n))];case"Relu":return[lQ(k0("x",e,t,n))];case"Round":return[yQ(k0("x",e,t,n))];case"Selu":return[xQ(k0("x",e,t,n))];case"Sigmoid":return[HZ(k0("x",e,t,n))];case"Sin":return[SQ(k0("x",e,t,n))];case"Sign":return[TQ(k0("x",e,t,n))];case"Sinh":return[EQ(k0("x",e,t,n))];case"Softplus":return[iX(k0("x",e,t,n))];case"Sqrt":return[FQ(k0("x",e,t,n))];case"Square":return[MX(k0("x",e,t,n))];case"Tanh":return[YZ(k0("x",e,t,n))];case"Tan":return[zQ(k0("x",e,t,n))];case"ClipByValue":return[oY(k0("x",e,t,n),k0("clipValueMin",e,t,n),k0("clipValueMax",e,t,n))];case"Relu6":return[dQ(k0("x",e,t,n))];case"Rsqrt":return[gQ(w0(e.inputNames[0],t,n))];case"Prod":return[JX(k0("x",e,t,n),k0("axes",e,t,n))];case"LeakyRelu":return[XY(k0("x",e,t,n),k0("alpha",e,t,n))];case"Prelu":return[QX(k0("x",e,t,n),k0("alpha",e,t,n))];case"IsNan":return[YY(w0(e.inputNames[0],t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"control":return b1(e,t,n);case"convolution":return l$((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=k0("stride",e,t,n),a=k0("pad",e,t,n),i=k0("dataFormat",e,t,n).toUpperCase(),o=k0("dilation",e,t,n);return[fY(k0("x",e,t,n),k0("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=k0("strides",e,t,n),u=E0(e,t,n),c=k0("dataFormat",e,t,n).toUpperCase(),l=k0("dilations",e,t,n);return[dY(k0("x",e,t,n),k0("filter",e,t,n),[s[1],s[2]],u,c,[l[1],l[2]])];case"_FusedConv2D":var d=x1(e,t,n),f=d.stride,p=d.pad,h=d.dataFormat,v=d.dilations,m=d.biasArg,y=d.preluArg,g=d.activationFunc,b=d.leakyreluAlpha;return[TJ({x:k0("x",e,t,n),filter:k0("filter",e,t,n),strides:[f[1],f[2]],pad:p,dataFormat:h,dilations:[v[1],v[2]],bias:m,activation:g,preluActivationWeights:y,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=x1(e,t,n),k=x.stride,w=x.pad,_=x.dataFormat,T=x.dilations,S=x.biasArg,E=x.preluArg,I=x.activationFunc,C=x.leakyreluAlpha;return[IJ({x:k0("x",e,t,n),filter:k0("filter",e,t,n),strides:[k[1],k[2]],pad:w,dataFormat:_,dilations:[T[1],T[2]],bias:S,activation:I,preluActivationWeights:E,leakyreluAlpha:C})];case"Conv2DBackpropInput":case"Conv2dTranspose":var N=k0("outputShape",e,t,n),A=k0("strides",e,t,n),O=E0(e,t,n);return[hY(k0("x",e,t,n),k0("filter",e,t,n),N,[A[1],A[2]],O)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var P=k0("strides",e,t,n),R=E0(e,t,n),D=k0("dilations",e,t,n),M=k0("dataFormat",e,t,n).toUpperCase();return[_Y(k0("input",e,t,n),k0("filter",e,t,n),[P[1],P[2]],R,M,[D[1],D[2]])];case"Conv3D":var L=k0("strides",e,t,n),F=k0("pad",e,t,n),B=k0("dataFormat",e,t,n).toUpperCase(),j=k0("dilations",e,t,n);return[vY(k0("x",e,t,n),k0("filter",e,t,n),[L[1],L[2],L[3]],F,B,[j[1],j[2],j[3]])];case"AvgPool":var U=k0("strides",e,t,n),V=k0("pad",e,t,n),W=k0("kernelSize",e,t,n);return[WZ(k0("x",e,t,n),[W[1],W[2]],[U[1],U[2]],V)];case"MaxPool":var z=k0("strides",e,t,n),q=k0("pad",e,t,n),K=k0("kernelSize",e,t,n);return[_X(k0("x",e,t,n),[K[1],K[2]],[z[1],z[2]],q)];case"MaxPoolWithArgmax":var G=k0("strides",e,t,n),H=k0("pad",e,t,n),Z=k0("kernelSize",e,t,n),Y=k0("includeBatchInIndex",e,t,n),X=SX(k0("x",e,t,n),[Z[1],Z[2]],[G[1],G[2]],H,Y);return[X.result,X.indexes];case"AvgPool3D":var Q=k0("strides",e,t,n),J=k0("pad",e,t,n),$=k0("kernelSize",e,t,n);return[zZ(k0("x",e,t,n),[$[1],$[2],$[3]],[Q[1],Q[2],Q[3]],J)];case"MaxPool3D":var ee=k0("strides",e,t,n),te=k0("pad",e,t,n),ne=k0("kernelSize",e,t,n);return[TX(k0("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=k0("strides",e,t,n),ae=k0("pad",e,t,n),ie=k0("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],ce=ie[2];return[SY(k0("x",e,t,n),k0("filter",e,t,n),[oe,se],ae,[ue,ce],"NHWC")];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"creation":return l$((function(){return function(e,t,n){switch(e.op){case"Fill":var r=k0("shape",e,t,n),a=k0("dtype",e,t,n);return[VY(r,k0("value",e,t,n),a)];case"LinSpace":return[$Y(k0("start",e,t,n),k0("stop",e,t,n),k0("num",e,t,n))];case"Multinomial":var i=k0("logits",e,t,n),o=k0("numSamples",e,t,n),s=k0("seed",e,t,n);return[BX(i,o,s)];case"OneHot":var u=k0("indices",e,t,n),c=k0("depth",e,t,n),l=k0("onValue",e,t,n),d=k0("offValue",e,t,n);return[UX(u,c,l,d)];case"Ones":return[NX(k0("shape",e,t,n),k0("dtype",e,t,n))];case"OnesLike":return[VX(k0("x",e,t,n))];case"RandomUniform":return[oQ(k0("shape",e,t,n),k0("minval",e,t,n),k0("maxval",e,t,n),k0("dtype",e,t,n))];case"Range":return[sQ(k0("start",e,t,n),k0("stop",e,t,n),k0("step",e,t,n),k0("dtype",e,t,n))];case"TruncatedNormal":var f=k0("shape",e,t,n),p=k0("mean",e,t,n),h=k0("stdDev",e,t,n),v=k0("seed",e,t,n);return[XQ(f,p,h,k0("dtype",e,t,n),v)];case"Zeros":return[CX(k0("shape",e,t,n),k0("dtype",e,t,n))];case"ZerosLike":return[AY(k0("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"dynamic":return w1(e,t,n);case"evaluation":return l$((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=k0("x",e,t,n),a=k0("k",e,t,n),i=k0("sorted",e,t,n),o=YQ(r,a,i);return[o.values,o.indices];case"Unique":var s=k0("x",e,t,n),u=QQ(s);return[u.values,u.indices];case"UniqueV2":var c=k0("x",e,t,n),l=k0("axis",e,t,n),d=QQ(c,l);return[d.values,d.indices];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"image":return l$((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=k0("images",e,t,n),a=k0("size",e,t,n),i=k0("alignCorners",e,t,n),o=k0("halfPixelCenters",e,t,n);return[B$.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=k0("images",e,t,n),u=k0("size",e,t,n),c=k0("alignCorners",e,t,n),l=k0("halfPixelCenters",e,t,n);return[B$.resizeNearestNeighbor(s,[u[0],u[1]],c,l)];case"CropAndResize":var d=k0("image",e,t,n),f=k0("boxes",e,t,n),p=k0("boxInd",e,t,n),h=k0("cropSize",e,t,n),v=k0("method",e,t,n),m=k0("extrapolationValue",e,t,n);return[B$.cropAndResize(d,f,p,h,v,m)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"graph":return l$((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=k0("default",e,t,n);return[w0(e.name,t,n)||r];case"Placeholder":return[w0(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[I0(k0("x",e,t,n))];case"IdentityN":return k0("x",e,t,n).map((function(e){return I0(e)}));case"Shape":return[qQ(k0("x",e,t,n).shape,"int32")];case"ShapeN":return k0("x",e,t,n).map((function(e){return qQ(e.shape)}));case"Size":return[bQ(k0("x",e,t,n).size,"int32")];case"Rank":return[bQ(k0("x",e,t,n).rank,"int32")];case"NoOp":return[bQ(1)];case"Print":var a=k0("x",e,t,n),i=k0("data",e,t,n),o=k0("message",e,t,n),s=k0("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"logical":return l$((function(){return function(e,t,n){switch(e.op){case"Equal":return[CY(k0("a",e,t,n),k0("b",e,t,n))];case"NotEqual":return[jX(k0("a",e,t,n),k0("b",e,t,n))];case"Greater":return[qY(k0("a",e,t,n),k0("b",e,t,n))];case"GreaterEqual":return[KY(k0("a",e,t,n),k0("b",e,t,n))];case"Less":return[QY(k0("a",e,t,n),k0("b",e,t,n))];case"LessEqual":return[JY(k0("a",e,t,n),k0("b",e,t,n))];case"LogicalAnd":return[bX(k0("a",e,t,n),k0("b",e,t,n))];case"LogicalNot":return[xX(k0("a",e,t,n))];case"LogicalOr":return[kX(k0("a",e,t,n),k0("b",e,t,n))];case"Select":case"SelectV2":return[NY(k0("condition",e,t,n),k0("a",e,t,n),k0("b",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"matrices":return l$((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[KZ(k0("a",e,t,n),k0("b",e,t,n),k0("transposeA",e,t,n),k0("transposeB",e,t,n))];case"Einsum":return[RY.apply(w,[k0("equation",e,t,n)].concat((0,Ze.Z)(k0("tensors",e,t,n))))];case"Transpose":return[oJ(k0("x",e,t,n),k0("perm",e,t,n))];case"_FusedMatMul":var r=k0("fusedOps",e,t,n),a=(0,W.Z)(r,2),i=a[0],o=a[1],s="biasadd"===i,u="prelu"===o,c=k0("numArgs",e,t,n),l=k0("leakyreluAlpha",e,t,n);if(s){if(u&&2!==c)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!u&&1!==c)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var d=k0("args",e,t,n),f=(0,W.Z)(d,2),p=f[0],h=f[1];return[CJ({a:k0("a",e,t,n),b:k0("b",e,t,n),transposeA:k0("transposeA",e,t,n),transposeB:k0("transposeB",e,t,n),bias:p,activation:o,preluActivationWeights:h,leakyreluAlpha:l})];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"normalization":return l$((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[JZ(k0("x",e,t,n),k0("mean",e,t,n),k0("variance",e,t,n),k0("offset",e,t,n),k0("scale",e,t,n),k0("epsilon",e,t,n))];case"LRN":return[eX(k0("x",e,t,n),k0("radius",e,t,n),k0("bias",e,t,n),k0("alpha",e,t,n),k0("beta",e,t,n))];case"Softmax":return[OQ(k0("x",e,t,n))];case"LogSoftmax":return[lX(k0("x",e,t,n))];case"SparseToDense":return[fJ(k0("sparseIndices",e,t,n),k0("outputShape",e,t,n),k0("sparseValues",e,t,n),k0("defaultValue",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"reduction":return l$((function(){return function(e,t,n){switch(e.op){case"Max":var r=k0("axis",e,t,n),a=k0("keepDims",e,t,n);return[sX(k0("x",e,t,n),r,a)];case"Mean":var i=k0("axis",e,t,n),o=k0("keepDims",e,t,n);return[IX(k0("x",e,t,n),i,o)];case"Min":var s=k0("axis",e,t,n),u=k0("keepDims",e,t,n);return[OX(k0("x",e,t,n),s,u)];case"Sum":var c=k0("axis",e,t,n),l=k0("keepDims",e,t,n);return[cX(k0("x",e,t,n),c,l)];case"All":var d=k0("axis",e,t,n),f=k0("keepDims",e,t,n);return[yZ(k0("x",e,t,n),d,f)];case"Any":var p=k0("axis",e,t,n),h=k0("keepDims",e,t,n);return[gZ(k0("x",e,t,n),p,h)];case"ArgMax":var v=k0("axis",e,t,n);return[bZ(k0("x",e,t,n),v)];case"ArgMin":var m=k0("axis",e,t,n);return[xZ(k0("x",e,t,n),m)];case"Prod":var y=k0("axis",e,t,n),g=k0("keepDims",e,t,n);return[JX(k0("x",e,t,n),y,g)];case"Cumsum":var b=k0("axis",e,t,n),x=k0("exclusive",e,t,n),k=k0("reverse",e,t,n);return[xY(k0("x",e,t,n),b,x,k)];case"Bincount":var w=k0("x",e,t,n),_=k0("weights",e,t,n),T=k0("size",e,t,n);return[nY(w,_,T)];case"DenseBincount":var S=k0("x",e,t,n),E=k0("weights",e,t,n),I=k0("size",e,t,n),C=k0("binaryOutput",e,t,n);return[kY(S,E,I,C)];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"slice_join":return l$((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=k0("n",e,t,n),a=k0("axis",e,t,n),i=k0("tensors",e,t,n);return i=i.slice(0,r),[qZ(i,a)];case"Gather":var o=k0("x",e,t,n),s=k0("indices",e,t,n);return[zY(o,LH(s,"int32"),0)];case"GatherV2":var u=k0("axis",e,t,n),c=k0("batchDims",e,t,n),l=k0("x",e,t,n),d=k0("indices",e,t,n);return[zY(l,LH(d,"int32"),u,c)];case"Reverse":for(var f=k0("dims",e,t,n),p=[],h=0;h<f.length;h++)f[h]&&p.push(h);var v=k0("x",e,t,n);return[fQ(v,p)];case"ReverseV2":var m=k0("axis",e,t,n),y=k0("x",e,t,n);return[fQ(y,m)];case"Slice":var g=k0("begin",e,t,n),b=k0("size",e,t,n);return[ZZ(k0("x",e,t,n),g,b)];case"StridedSlice":var x=k0("begin",e,t,n),k=k0("end",e,t,n),w=k0("strides",e,t,n),_=k0("beginMask",e,t,n),T=k0("endMask",e,t,n),S=k0("ellipsisMask",e,t,n),E=k0("newAxisMask",e,t,n),I=k0("shrinkAxisMask",e,t,n),C=k0("x",e,t,n);return[WQ(C,x,k,w,_,T,S,E,I)];case"Pack":return l$((function(){var r=k0("axis",e,t,n),a=k0("tensors",e,t,n),i=a[0].shape,o=jQ(a[0]).shape,s=a.map((function(e){var t=rW(e.shape,i);if(!t&&!rW(jQ(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:VZ(e,i)}));return[UQ(s,r)]}));case"Unpack":var N=k0("axis",e,t,n),A=k0("tensor",e,t,n);return $Q(A,N);case"Tile":var O=k0("reps",e,t,n);return[jY(k0("x",e,t,n),O)];case"Split":case"SplitV":var P=k0("axis",e,t,n),R=k0("numOrSizeSplits",e,t,n),D=k0("x",e,t,n);return MQ(D,R,P);case"ScatterNd":var M=k0("indices",e,t,n),L=k0("values",e,t,n),F=k0("shape",e,t,n);return[lJ(M,L,F)];case"GatherNd":var B=k0("x",e,t,n),j=k0("indices",e,t,n);return[pJ(B,j)];case"SparseToDense":var U=k0("sparseIndices",e,t,n),V=k0("outputShape",e,t,n),W=k0("sparseValues",e,t,n),z=k0("defaultValue",e,t,n);return[fJ(U,W,V,W.dtype===z.dtype?z:LH(z,W.dtype))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"sparse":return l$((function(){return function(e,t,n){switch(e.op){case"SparseFillEmptyRows":var r=V$.sparseFillEmptyRows(k0("indices",e,t,n),k0("values",e,t,n),k0("denseShape",e,t,n),k0("defaultValue",e,t,n));return[r.outputIndices,r.outputValues,r.emptyRowIndicator,r.reverseIndexMap];case"SparseReshape":var a=V$.sparseReshape(k0("inputIndices",e,t,n),k0("inputShape",e,t,n),k0("newShape",e,t,n));return[a.outputIndices,a.outputShape];case"SparseSegmentMean":return[V$.sparseSegmentMean(k0("data",e,t,n),k0("indices",e,t,n),k0("segmentIds",e,t,n))];case"SparseSegmentSum":return[V$.sparseSegmentSum(k0("data",e,t,n),k0("indices",e,t,n),k0("segmentIds",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"spectral":return l$((function(){return function(e,t,n){switch(e.op){case"FFT":return[PQ(k0("x",e,t,n))];case"IFFT":return[RQ(k0("x",e,t,n))];case"RFFT":return[LQ(k0("x",e,t,n))];case"IRFFT":return[DQ(k0("x",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"string":return l$((function(){return function(e,t,n){switch(e.op){case"StringNGrams":var r=W$.stringNGrams(k0("data",e,t,n),k0("dataSplits",e,t,n),k0("separator",e,t,n),k0("nGramWidths",e,t,n),k0("leftPad",e,t,n),k0("rightPad",e,t,n),k0("padWidth",e,t,n),k0("preserveShortSequences",e,t,n));return[r.nGrams,r.nGramsSplits];case"StringSplit":var a=W$.stringSplit(k0("input",e,t,n),k0("delimiter",e,t,n),k0("skipEmpty",e,t,n));return[a.indices,a.values,a.shape];case"StringToHashBucketFast":return[W$.stringToHashBucketFast(k0("input",e,t,n),k0("numBuckets",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"transformation":return l$((function(){return function(e,t,n){switch(e.op){case"Cast":return[LH(k0("x",e,t,n),k0("dtype",e,t,n))];case"ExpandDims":var r=k0("axis",e,t,n);return[FY(k0("x",e,t,n),r)];case"Squeeze":var a=k0("axis",e,t,n);return[jQ(k0("x",e,t,n),a)];case"Reshape":return[VZ(k0("x",e,t,n),k0("shape",e,t,n))];case"MirrorPad":return[RX(k0("x",e,t,n),k0("padding",e,t,n),k0("mode",e,t,n))];case"PadV2":case"Pad":return[zX(k0("x",e,t,n),k0("padding",e,t,n),k0("constantValue",e,t,n))];case"SpaceToBatchND":var i=k0("blockShape",e,t,n),o=k0("paddings",e,t,n);return[ZX(k0("x",e,t,n),i,o)];case"BatchToSpaceND":var s=k0("blockShape",e,t,n),u=k0("crops",e,t,n);return[QZ(k0("x",e,t,n),s,u)];case"DepthToSpace":var c=k0("blockSize",e,t,n),l=k0("dataFormat",e,t,n).toUpperCase();return[wY(k0("x",e,t,n),c,l)];case"BroadcastTo":return[aY(k0("x",e,t,n),k0("shape",e,t,n))];case"BroadcastArgs":return[rY(k0("s0",e,t,n),k0("s1",e,t,n))];default:throw TypeError("Node type ".concat(e.op," is not implemented"))}}(e,t,n)}));case"hash_table":return T1(e,t,n,r);case"custom":var a=x0(e.op);if(a&&a.customExecutor)return a.customExecutor(new u1(e,t,n));throw TypeError("Custom op ".concat(e.op," is not registered."));default:throw TypeError("Unknown op '".concat(e.op,"'. File an issue at ")+"https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return CW(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var E1=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};I(this,e),this.weightMap=t,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=a,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return N(e,[{key:"newFrame",value:function(e,t){return{id:e,frameName:t,iterationId:0}}},{key:"currentContext",get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}},{key:"generateCurrentContextIds",value:function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}},{key:"contextIdforContexts",value:function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":"".concat(e.frameName,"-").concat(e.iterationId)})).join("/"):""}},{key:"enterFrame",value:function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}},{key:"exitFrame",value:function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}},{key:"nextIteration",value:function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}},{key:"getWeight",value:function(e){return this.weightMap[e]}},{key:"addTensorArray",value:function(e){this.tensorArrayMap[e.id]=e}},{key:"getTensorArray",value:function(e){return this.tensorArrayMap[e]}},{key:"addTensorList",value:function(e){this.tensorListMap[e.id]=e}},{key:"getTensorList",value:function(e){return this.tensorListMap[e]}},{key:"dispose",value:function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}]),e}();function I1(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,c=Object.keys(e).map((function(e){return S0(e)[0]})),l=[];null!=r&&(l=r.map((function(e){return S0(e.name)[0]})));for(var d=(0,Ze.Z)(t);d.length>0;){var f=d.pop();(O1(f)||P1(f)||R1(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===c.indexOf(f.name)&&-1===l.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),d.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var C1=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],N1=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],A1=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"];function O1(e){return C1.indexOf(e.op)>=0}function P1(e){return N1.indexOf(e.op)>=0}function R1(e){return A1.indexOf(e.op)>=0}var D1=function(){function e(t,n){var r=this;I(this,e),this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this.intermediateTensors={},this.keepTensorForDebug=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}return N(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,(0,Ze.Z)(n)),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?"".concat(t,":").concat(e.defaultOutput):t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}},{key:"getCompilationKey",value:function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)}},{key:"compile",value:function(e,t){var n=I1(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '".concat(a.name,"', which has ")+"the dynamic op '".concat(a.op,"'. Please use ")+"model.executeAsync() instead. Alternatively, to avoid the "+"dynamic ops, specify the inputs [".concat(i,"]"));if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs [".concat(o,"] from the provided inputs ")+"[".concat(s,"]. Missing the following inputs: [").concat(r,"]"))}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return S0(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,c=[];i.length>0;){var l=i.pop();u.add(l.name),t[l.name]||c.push(l),l.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return c}(this.graph,this.weightMap,n)}},{key:"execute",value:function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[S0(e)[0]]})),i=t.map((function(e){return S0(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));this.resetIntermediateTensors(),0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var c={},l={};return l$((function(){var r=new E1(n.weightMap,c,l,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=S0(t),r=(0,W.Z)(n,2),i=r[0],o=[];o[r[1]]=e[t],a[i]=o}));for(var o=n.getFrozenTensorIds(a),s={},d=0;d<u.length;d++){var f=u[d];if(!a[f.name]){var p=S1(f,a,r,n._resourceManager);if(CW(p))throw new Error("The execution of the op '".concat(f.op,"' returned a promise. ")+"Please use model.executeAsync() instead.");a[f.name]=p,n.checkTensorForDisposal(f.name,f,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return w0(e,a,r)}))}))}},{key:"getFrozenTensorIds",value:function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)}},{key:"checkTensorForDisposal",value:function(e,t,n,r,a,i,o){var s=this;"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var i=function(e,t,n){return t[T0(e,n.currentContextId)]}(e.name,n,r);null!=i&&i.forEach((function(e){if(e&&!e.kept&&!a.has(e.id)){var n=o[e.id];if(1===n){if(s.keepTensorForDebug){var i=_0(t.name,r),u=(0,W.Z)(i,2),c=u[0],l=u[1];s.intermediateTensors[c]||(s.intermediateTensors[c]=[]),s.intermediateTensors[c][l]=e}else e.dispose();delete o[e.id]}else null!=n&&o[e.id]--}}))}})))}},{key:"executeAsync",value:function(){var e=j(G().mark((function e(t,n){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"disposeIntermediateTensors",value:function(){var e=this;this.intermediateTensors&&(Object.keys(this.intermediateTensors).forEach((function(t){return e.intermediateTensors[t].forEach((function(e){return e.dispose()}))})),this.disposeTensorsMap())}},{key:"disposeTensorsMap",value:function(){var e=this;this.tensorsMap&&Object.keys(this.tensorsMap).forEach((function(t){e.tensorsMap[t].forEach((function(t){!t||t.kept||t.isDisposed||e.keepIds.has(t.id)||t.dispose()}))}))}},{key:"getIntermediateTensors",value:function(){return this.tensorsMap}},{key:"resetIntermediateTensors",value:function(){for(var e in this.intermediateTensors)this.intermediateTensors[e].forEach((function(e){return e.dispose()})),delete this.intermediateTensors[e]}},{key:"_executeAsync",value:function(){var e=j(G().mark((function e(t,n){var r,a,i,o,s,u,c,l=this,d=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>2&&void 0!==d[2]&&d[2],a=d.length>3&&void 0!==d[3]?d[3]:{},i=d.length>4&&void 0!==d[4]?d[4]:{},r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepTensorForDebug=RW().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(f){console.warn(f.message)}return this.resetIntermediateTensors(),o=new E1(this.weightMap,a,i,this.functionExecutorMap),e.next=9,this.executeWithControlFlow(t,o,n,r);case 9:return this.tensorsMap=e.sent,s=n.map((function(e){return w0(e,l.tensorsMap,o)})),u=s.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),this.keepIds=new Set([].concat((0,Ze.Z)(u),(0,Ze.Z)(c),(0,Ze.Z)(this.weightIds))),this.keepTensorForDebug||this.disposeTensorsMap(),null==this.parent&&o.dispose(this.keepIds),e.abrupt("return",s);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"executeFunctionAsync",value:function(){var e=j(G().mark((function e(t,n,r){var a,i=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executeWithControlFlow",value:function(){var e=j(G().mark((function e(t,n,r,a){var i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x,k,w=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return w.graph.nodes[S0(e)[0]]})),s=r.map((function(e){return S0(e)[0]})),0===(u=s.map((function(e){return w.graph.nodes[e]}))).length&&(u=this._outputs),c=I1(t,u,this.weightMap,this._initNodes),l=c.usedNodes,d=c.missingInputs,f=c.dynamicNode,p=c.syncInputs,h=[].concat((0,Ze.Z)(o),(0,Ze.Z)(this.graph.weights),(0,Ze.Z)(this._initNodes||[])).map((function(e){return{node:e,contexts:n.currentContext}})),v=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=S0(e),r=(0,W.Z)(n,2),a=r[0],i=[];i[r[1]]=t[e],v[a]=i})),m={},y=this.getFrozenTensorIds(v),g={};case 12:if(!(h.length>0)){e.next=18;break}return b=this.processStack(o,h,n,v,g,y,s,m,l),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),!((x=u.filter((function(e){return!O1(e)&&!w0(e.name,v,n)})).map((function(e){return e.name}))).length>0)){e.next=24;break}throw k="",null!=f&&(k="Alternatively, to avoid the dynamic ops, use model.execute() "+"and specify the inputs [".concat(p,"]")),new Error("Cannot compute the outputs [".concat(x,"] from the provided ")+"inputs [".concat(i,"]. Consider providing the following inputs: ")+"[".concat(d,"]. ").concat(k));case 24:return e.abrupt("return",v);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"processStack",value:function(e,t,n,r,a,i,o,s,u){for(var c=this,l=[],d=function(){var e=t.pop();n.currentContext=e.contexts;var d="";if("Enter"===e.node.op&&k0("isConstant",e.node,r,n)){var f=_0(e.node.name,n),p=(0,W.Z)(f,1);d=p[0]}if(null==r[e.node.name]){var h=S1(e.node,r,n,c._resourceManager);if(!d){var v=_0(e.node.name,n),m=(0,W.Z)(v,1);d=m[0]}var y=n.currentContext;CW(h)?l.push(h.then((function(l){return r[d]=l,n.currentContext=y,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u),l}))):(r[d]=h,c.checkTensorForDisposal(d,e.node,r,n,i,o,s),c.processChildNodes(e.node,t,n,r,a,u))}else c.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)d();return l}},{key:"processChildNodes",value:function(e,t,n,r,a,i){e.children.forEach((function(e){var o=_0(e.name,n),s=(0,W.Z)(o,1)[0];!a[s]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!w0(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!w0(e,r,n)}))&&(a[s]=!0,t.push({contexts:n.currentContext,node:e})))}))}},{key:"dispose",value:function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))}},{key:"checkInputShapeAndType",value:function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=S0(n),i=(0,W.Z)(a,1)[0],o=t.graph.nodes[i];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value;JV(s.length===r.shape.length&&r.shape.every((function(e,t){return-1===s[t]||s[t]===e})),(function(){return"The shape of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be [".concat(s,"], but was ")+"[".concat(r.shape,"]")}))}o.attrParams.dtype&&o.attrParams.dtype.value&&JV(r.dtype===o.attrParams.dtype.value,(function(){return"The dtype of dict['".concat(o.name,"'] provided in ")+"model.execute(dict) must be "+"".concat(o.attrParams.dtype.value,", but was ").concat(r.dtype)}))}))}},{key:"mapInputs",value:function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t}},{key:"checkInputs",value:function(e){var t=this,n=Object.keys(e).filter((function(e){var n=S0(e),r=(0,W.Z)(n,1)[0];return null==t.graph.nodes[r]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has "+"keys: [".concat(n,"] that are not part of graph"))}},{key:"mapOutputs",value:function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})}},{key:"checkOutputs",value:function(e){var t=this;e.forEach((function(e){var n=S0(e),r=(0,W.Z)(n,1)[0];if(!t.graph.nodes[r])throw new Error("The output '".concat(e,"' is not found in the graph"))}))}}]),e}(),M1=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(this,e),this.hashTableNameToHandle=t,this.hashTableMap=n}return N(e,[{key:"addHashTable",value:function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}},{key:"getHashTableHandleByName",value:function(e){return this.hashTableNameToHandle[e]}},{key:"getHashTableById",value:function(e){return this.hashTableMap[e]}},{key:"dispose",value:function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}]),e}(),L1="?tfjs-format=file",F1="model.json",B1=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(this,e),this.modelUrl=t,this.loadOptions=n,this.version="n/a",null==n&&(this.loadOptions={}),this.resourceManager=new M1}return N(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}},{key:"findIOHandler",value:function(){var e,t,n=this.modelUrl;if(null!=n.load)this.handler=n;else if(null!=this.loadOptions.requestInit)this.handler=YH(n,this.loadOptions);else{var r=(e=n,t=this.loadOptions,sH.getLoadHandlers(e,t));if(0===r.length)r.push(YH(n,this.loadOptions));else if(r.length>1)throw new Error("Found more than one (".concat(r.length,") load handlers for ")+"URL '".concat([n],"'"));this.handler=r[0]}}},{key:"load",value:function(){var e=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSync",value:function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version="".concat(n.versions.producer,".").concat(n.versions.minConsumer);var r=XG(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new D1(H0.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=H0.Instance.transformGraph(e.modelInitializer);this.initializer=new D1(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0}},{key:"save",value:function(){var e=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!==typeof t){e.next=9;break}if(n=t,0!==(r=sH.getSaveHandlers(n)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '".concat(t,"'"));case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one (".concat(r.length,") save handlers for ")+"URL '".concat(t,"'"));case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}var n}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(e,t){return this.execute(e,this.outputNodes)}},{key:"normalizeInputs",value:function(e){if(!(e instanceof hG)&&!Array.isArray(e))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,"+"the graph model has ".concat(this.inputNodes.length," placeholders, ")+"while there are ".concat(e.length," input tensors."));return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})}},{key:"normalizeOutputs",value:function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}},{key:"execute",value:function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]}},{key:"executeAsync",value:function(){var e=j(G().mark((function e(t,n){var r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIntermediateTensors",value:function(){return this.executor.getIntermediateTensors()}},{key:"disposeIntermediateTensors",value:function(){this.executor.disposeIntermediateTensors()}},{key:"convertTensorMapToTensorsMap",value:function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})}},{key:"dispose",value:function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()}}]),e}();function j1(e){return U1.apply(this,arguments)}function U1(){return U1=j(G().mark((function e(t){var n,r,a=arguments;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>1&&void 0!==a[1]?a[1]:{},null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t="".concat(t).concat(F1).concat(L1)),r=new B1(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),U1.apply(this,arguments)}var V1=function(){return(V1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function W1(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function z1(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function q1(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}u((r=r.apply(e,t||[])).next())}))}function K1(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var G1=function(e){return{startEndTensor:e,startPoint:ZZ(e,[0,0],[-1,2]),endPoint:ZZ(e,[0,2],[-1,2])}},H1={strides:[8,16],anchors:[2,6]};function Z1(e,t){var n,r,a;if(e.topLeft instanceof hG&&e.bottomRight instanceof hG){var i=l$((function(){return[qZ([ZZ(uX(t-1,e.topLeft),0,1),ZZ(e.topLeft,1,1)]),qZ([uX(t-1,ZZ(e.bottomRight,0,1)),ZZ(e.bottomRight,1,1)])]}));n=i[0],r=i[1],null!=e.landmarks&&(a=l$((function(){var n=uX(qQ([t-1,0]),e.landmarks),r=qQ([1,-1]);return GZ(n,r)})))}else{var o=e.topLeft,s=o[0],u=o[1],c=e.bottomRight,l=c[0],d=c[1];n=[t-1-s,u],r=[t-1-l,d],null!=e.landmarks&&(a=e.landmarks.map((function(e){return[t-1-e[0],e[1]]})))}var f={topLeft:n,bottomRight:r};return null!=a&&(f.landmarks=a),null!=e.probability&&(f.probability=e.probability instanceof hG?e.probability.clone():e.probability),f}function Y1(e,t){return l$((function(){var n;return n=e.hasOwnProperty("box")?e.box:e,jQ(function(e,t){var n=GZ(e.startPoint,t),r=GZ(e.endPoint,t),a=uY([n,r],1);return G1(a)}(n,t).startEndTensor)}))}var X1=function(){function e(e,t,n,r,a,i){this.blazeFaceModel=e,this.width=t,this.height=n,this.maxFaces=r,this.anchorsData=function(e,t,n){for(var r=[],a=0;a<n.strides.length;a++)for(var i=n.strides[a],o=Math.floor((t+i-1)/i),s=Math.floor((e+i-1)/i),u=n.anchors[a],c=0;c<o;c++)for(var l=i*(c+.5),d=0;d<s;d++)for(var f=i*(d+.5),p=0;p<u;p++)r.push([f,l]);return r}(t,n,H1),this.anchors=KQ(this.anchorsData),this.inputSizeData=[t,n],this.inputSize=qQ([t,n]),this.iouThreshold=a,this.scoreThreshold=i}return e.prototype.getBoundingBoxes=function(e,t,n){return void 0===n&&(n=!0),q1(this,void 0,void 0,(function(){var r,a,i,o,s,u,c,l,d,f,p,h,v,m,y=this;return K1(this,(function(g){switch(g.label){case 0:return r=l$((function(){var t=B$.resizeBilinear(e,[y.width,y.height]),n=GZ(uX(IY(t,255),.5),2),r=y.blazeFaceModel.predict(n),a=jQ(r),i=function(e,t,n){var r=ZZ(e,[0,1],[-1,2]),a=vZ(r,t),i=ZZ(e,[0,3],[-1,2]),o=IY(i,n),s=IY(a,n),u=IY(o,2),c=uX(s,u),l=vZ(s,u),d=GZ(c,n),f=GZ(l,n);return uY([d,f],1)}(a,y.anchors,y.inputSize),o=ZZ(a,[0,0],[-1,1]);return[a,i,jQ(HZ(o))]})),a=r[0],i=r[1],o=r[2],s=console.warn,console.warn=function(){},u=B$.nonMaxSuppression(i,o,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=s,[4,u.array()];case 1:return c=g.sent(),u.dispose(),l=c.map((function(e){return ZZ(i,[e,0],[1,-1])})),t?[3,3]:[4,Promise.all(l.map((function(e){return q1(y,void 0,void 0,(function(){var t;return K1(this,(function(n){switch(n.label){case 0:return[4,e.array()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 2:l=g.sent(),g.label=3;case 3:for(d=e.shape[1],f=e.shape[2],p=t?IY([f,d],this.inputSize):[f/this.inputSizeData[0],d/this.inputSizeData[1]],h=[],v=function(e){var r=l[e],i=l$((function(){var i=G1(r instanceof hG?r:KQ(r));if(!n)return i;var s,u=c[e];return s=t?ZZ(y.anchors,[u,0],[1,2]):y.anchorsData[u],{box:i,landmarks:VZ(jQ(ZZ(a,[u,5],[1,-1])),[6,-1]),probability:ZZ(o,[u],[1]),anchor:s}}));h.push(i)},m=0;m<l.length;m++)v(m);return i.dispose(),o.dispose(),a.dispose(),[2,{boxes:h,scaleFactor:p}]}}))}))},e.prototype.estimateFaces=function(e,t,n,r){return void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),q1(this,void 0,void 0,(function(){var a,i,o,s,u,c,l=this;return K1(this,(function(d){switch(d.label){case 0:return a=function(e){return e instanceof hG?[e.shape[0],e.shape[1]]:[e.height,e.width]}(e),i=a[1],o=l$((function(){return e instanceof hG||(e=tZ(e)),FY(LH(e,"float32"),0)})),[4,this.getBoundingBoxes(o,t,r)];case 1:return s=d.sent(),u=s.boxes,c=s.scaleFactor,o.dispose(),t?[2,u.map((function(e){var t=Y1(e,c),a={topLeft:ZZ(t,[0],[2]),bottomRight:ZZ(t,[2],[2])};if(r){var o=e,s=o.landmarks,u=o.probability,l=o.anchor,d=GZ(vZ(s,l),c);a.landmarks=d,a.probability=u}return n&&(a=Z1(a,i)),a}))]:[2,Promise.all(u.map((function(e){return q1(l,void 0,void 0,(function(){var t,a,o,s,u,l,d,f,p,h,v,m=this;return K1(this,(function(y){switch(y.label){case 0:return t=Y1(e,c),r?[3,2]:[4,t.array()];case 1:return u=y.sent(),a={topLeft:u.slice(0,2),bottomRight:u.slice(2)},[3,4];case 2:return[4,Promise.all([e.landmarks,t,e.probability].map((function(e){return q1(m,void 0,void 0,(function(){return K1(this,(function(t){return[2,e.array()]}))}))})))];case 3:o=y.sent(),s=o[0],u=o[1],l=o[2],d=e.anchor,p=(f=c)[0],h=f[1],v=s.map((function(e){return[(e[0]+d[0])*p,(e[1]+d[1])*h]})),a={topLeft:u.slice(0,2),bottomRight:u.slice(2),landmarks:v,probability:l},function(e){e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose()}(e.box),e.landmarks.dispose(),e.probability.dispose(),y.label=4;case 4:return t.dispose(),n&&(a=Z1(a,i)),[2,a]}}))}))})))]}}))}))},e}();function Q1(e){var t=void 0===e?{}:e,n=t.maxFaces,r=void 0===n?10:n,a=t.inputWidth,i=void 0===a?128:a,o=t.inputHeight,s=void 0===o?128:o,u=t.iouThreshold,c=void 0===u?.3:u,l=t.scoreThreshold,d=void 0===l?.75:l,f=t.modelUrl;return q1(this,void 0,void 0,(function(){var e;return K1(this,(function(t){switch(t.label){case 0:return null==f?[3,2]:[4,j1(f)];case 1:return e=t.sent(),[3,4];case 2:return[4,j1("https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1",{fromTFHub:!0})];case 3:e=t.sent(),t.label=4;case 4:return[2,new X1(e,i,s,r,c,d)]}}))}))}var J1={silhouette:[10,338,297,332,284,251,389,356,454,323,361,288,397,365,379,378,400,377,152,148,176,149,150,136,172,58,132,93,234,127,162,21,54,103,67,109],lipsUpperOuter:[61,185,40,39,37,0,267,269,270,409,291],lipsLowerOuter:[146,91,181,84,17,314,405,321,375,291],lipsUpperInner:[78,191,80,81,82,13,312,311,310,415,308],lipsLowerInner:[78,95,88,178,87,14,317,402,318,324,308],rightEyeUpper0:[246,161,160,159,158,157,173],rightEyeLower0:[33,7,163,144,145,153,154,155,133],rightEyeUpper1:[247,30,29,27,28,56,190],rightEyeLower1:[130,25,110,24,23,22,26,112,243],rightEyeUpper2:[113,225,224,223,222,221,189],rightEyeLower2:[226,31,228,229,230,231,232,233,244],rightEyeLower3:[143,111,117,118,119,120,121,128,245],rightEyebrowUpper:[156,70,63,105,66,107,55,193],rightEyebrowLower:[35,124,46,53,52,65],rightEyeIris:[473,474,475,476,477],leftEyeUpper0:[466,388,387,386,385,384,398],leftEyeLower0:[263,249,390,373,374,380,381,382,362],leftEyeUpper1:[467,260,259,257,258,286,414],leftEyeLower1:[359,255,339,254,253,252,256,341,463],leftEyeUpper2:[342,445,444,443,442,441,413],leftEyeLower2:[446,261,448,449,450,451,452,453,464],leftEyeLower3:[372,340,346,347,348,349,350,357,465],leftEyebrowUpper:[383,300,293,334,296,336,285,417],leftEyebrowLower:[265,353,276,283,282,295],leftEyeIris:[468,469,470,471,472],midwayBetweenEyes:[168],noseTip:[1],noseBottom:[2],noseRightCorner:[98],noseLeftCorner:[327],rightCheek:[205],leftCheek:[425]};function $1(e){return[Math.abs(e.endPoint[0]-e.startPoint[0]),Math.abs(e.endPoint[1]-e.startPoint[1])]}function e2(e){return[e.startPoint[0]+(e.endPoint[0]-e.startPoint[0])/2,e.startPoint[1]+(e.endPoint[1]-e.startPoint[1])/2]}function t2(e,t){void 0===t&&(t=1.5);var n=e2(e),r=$1(e),a=[t*r[0]/2,t*r[1]/2];return{startPoint:[n[0]-a[0],n[1]-a[1]],endPoint:[n[0]+a[0],n[1]+a[1]],landmarks:e.landmarks}}function n2(e){var t=e2(e),n=$1(e),r=Math.max.apply(Math,n)/2;return{startPoint:[t[0]-r,t[1]-r],endPoint:[t[0]+r,t[1]+r],landmarks:e.landmarks}}var r2=[[1,0,0],[0,1,0],[0,0,1]];function a2(e,t){return[[1,0,e],[0,1,t],[0,0,1]]}function i2(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function o2(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e[r][t]);return n}function s2(e,t){for(var n=[],r=e.length,a=0;a<r;a++){n.push([]);for(var i=0;i<r;i++)n[a].push(i2(e[a],o2(t,i)))}return n}function u2(e,t){var n=Math.cos(e),r=Math.sin(e),a=[[n,-r,0],[r,n,0],[0,0,1]],i=s2(a2(t[0],t[1]),a);return s2(i,a2(-t[0],-t[1]))}var c2=[13,J1.midwayBetweenEyes[0]],l2=[3,2],d2=J1.leftEyeLower0,f2=[d2[0],d2[d2.length-1]],p2=J1.rightEyeLower0,h2=[p2[0],p2[p2.length-1]],v2=[{key:"EyeUpper0",indices:[9,10,11,12,13,14,15]},{key:"EyeUpper1",indices:[25,26,27,28,29,30,31]},{key:"EyeUpper2",indices:[41,42,43,44,45,46,47]},{key:"EyeLower0",indices:[0,1,2,3,4,5,6,7,8]},{key:"EyeLower1",indices:[16,17,18,19,20,21,22,23,24]},{key:"EyeLower2",indices:[32,33,34,35,36,37,38,39,40]},{key:"EyeLower3",indices:[54,55,56,57,58,59,60,61,62]},{key:"EyebrowUpper",indices:[63,64,65,66,67,68,69,70]},{key:"EyebrowLower",indices:[48,49,50,51,52,53]}];function m2(e,t,n,r){for(var a=0;a<v2.length;a++){var i=v2[a],o=i.key,s=i.indices,u=J1[""+n+o];if(null==r||r.includes(o))for(var c=0;c<s.length;c++){var l=s[c];e[u[c]]=[t[l][0],t[l][1],(t[l][2]+e[u[c]][2])/2]}}}var y2=function(){function e(e,t,n,r,a,i,o){this.regionsOfInterest=[],this.runsWithoutFaceDetector=0,this.boundingBoxDetector=e,this.meshDetector=t,this.irisModel=o,this.meshWidth=n,this.meshHeight=r,this.maxContinuousChecks=a,this.maxFaces=i}return e.prototype.transformRawCoords=function(e,t,n,r){var a,i,o,s,u=this,c=$1({startPoint:t.startPoint,endPoint:t.endPoint}),l=[c[0]/this.meshWidth,c[1]/this.meshHeight],d=e.map((function(e){return[l[0]*(e[0]-u.meshWidth/2),l[1]*(e[1]-u.meshHeight/2),e[2]]})),f=u2(n,[0,0]),p=d.map((function(e){return function(e,t){return[i2(e,t[0]),i2(e,t[1])]}(e,f).concat([e[2]])})),h=(i=[[(a=r)[0][0],a[1][0]],[a[0][1],a[1][1]]],o=[a[0][2],a[1][2]],s=[-i2(i[0],o),-i2(i[1],o)],[i[0].concat(s[0]),i[1].concat(s[1]),[0,0,1]]),v=e2({startPoint:t.startPoint,endPoint:t.endPoint}).concat([1]),m=[i2(v,h[0]),i2(v,h[1])];return p.map((function(e){return[e[0]+m[0],e[1]+m[1],e[2]]}))},e.prototype.getLeftToRightEyeDepthDifference=function(e){return e[f2[0]][2]-e[h2[0]][2]},e.prototype.getEyeBox=function(e,t,n,r,a){void 0===a&&(a=!1);var i=n2(t2(this.calculateLandmarksBoundingBox([e[n],e[r]]),2.3)),o=$1(i),s=B$.cropAndResize(t,[[i.startPoint[1]/this.meshHeight,i.startPoint[0]/this.meshWidth,i.endPoint[1]/this.meshHeight,i.endPoint[0]/this.meshWidth]],[0],[64,64]);return a&&(s=B$.flipLeftRight(s)),{box:i,boxSize:o,crop:s}},e.prototype.getEyeCoords=function(e,t,n,r){void 0===r&&(r=!1);for(var a=[],i=0;i<76;i++){var o=e[3*i],s=e[3*i+1],u=e[3*i+2];a.push([(r?1-o/64:o/64)*n[0]+t.startPoint[0],s/64*n[1]+t.startPoint[1],u])}return{rawCoords:a,iris:a.slice(71)}},e.prototype.getAdjustedIrisCoords=function(e,t,n){var r=e[J1[n+"EyeUpper0"][3]][2],a=e[J1[n+"EyeLower0"][4]][2],i=(r+a)/2;return t.map((function(e,t){var n=i;return 2===t?n=r:4===t&&(n=a),[e[0],e[1],n]}))},e.prototype.predict=function(e,t){return W1(this,void 0,void 0,(function(){var n,r,a,i,o=this;return z1(this,(function(s){switch(s.label){case 0:return this.shouldUpdateRegionsOfInterest()?[4,this.boundingBoxDetector.getBoundingBoxes(e,!1,!0)]:[3,2];case 1:return n=s.sent(),r=n.boxes,a=n.scaleFactor,0===r.length?(this.regionsOfInterest=[],[2,null]):(i=r.map((function(e){var t,n,r={startPoint:jQ(e.box.startPoint).arraySync(),endPoint:jQ(e.box.endPoint).arraySync()},i=n2(t2((n=a,{startPoint:[(t=r).startPoint[0]*n[0],t.startPoint[1]*n[1]],endPoint:[t.endPoint[0]*n[0],t.endPoint[1]*n[1]]})));return V1({},i,{landmarks:e.landmarks.arraySync()})})),r.forEach((function(e){null!=e&&null!=e.startPoint&&(e.startEndTensor.dispose(),e.startPoint.dispose(),e.endPoint.dispose())})),this.updateRegionsOfInterest(i),this.runsWithoutFaceDetector=0,[3,3]);case 2:this.runsWithoutFaceDetector++,s.label=3;case 3:return[2,l$((function(){return o.regionsOfInterest.map((function(n,r){var a,i=n.landmarks.length>=468,s=c2[0],u=c2[1];!1===i&&(s=l2[0],u=l2[1]),a=function(e,t){var n;return(n=Math.PI/2-Math.atan2(-(t[1]-e[1]),t[0]-e[0]))-2*Math.PI*Math.floor((n+Math.PI)/(2*Math.PI))}(n.landmarks[s],n.landmarks[u]);var c=e2({startPoint:n.startPoint,endPoint:n.endPoint}),l=[c[0]/e.shape[2],c[1]/e.shape[1]],d=e,f=r2;0!==a&&(d=B$.rotateWithOffset(e,a,0,l),f=u2(-a,c));var p={startPoint:n.startPoint,endPoint:n.endPoint},h=IY(function(e,t,n){var r=t.shape[1],a=t.shape[2],i=[[e.startPoint[1]/r,e.startPoint[0]/a,e.endPoint[1]/r,e.endPoint[0]/a]];return B$.cropAndResize(t,i,[0],n,"bilinear",0)}(p,d,[o.meshHeight,o.meshWidth]),255),v=o.meshDetector.predict(h),m=v[1],y=v[2],g=VZ(y,[-1,3]).arraySync();if(t){var b=o.getEyeBox(g,h,f2[0],f2[1],!0),x=b.box,k=b.boxSize,w=b.crop,_=o.getEyeBox(g,h,h2[0],h2[1]),T=_.box,S=_.boxSize,E=_.crop,I=o.irisModel.predict(qZ([w,E])).dataSync(),C=I.slice(0,228),N=o.getEyeCoords(C,x,k,!0),A=N.rawCoords,O=N.iris,P=I.slice(228),R=o.getEyeCoords(P,T,S),D=R.rawCoords,M=R.iris,L=o.getLeftToRightEyeDepthDifference(g);Math.abs(L)<30?(m2(g,A,"left"),m2(g,D,"right")):L<1?m2(g,A,"left",["EyeUpper0","EyeLower0"]):m2(g,D,"right",["EyeUpper0","EyeLower0"]);var F=o.getAdjustedIrisCoords(g,O,"left"),B=o.getAdjustedIrisCoords(g,M,"right");g=g.concat(F).concat(B)}var j=o.transformRawCoords(g,n,a,f),U=KQ(j),V=t2(o.calculateLandmarksBoundingBox(j)),W=n2(V);return o.regionsOfInterest[r]=V1({},W,{landmarks:U.arraySync()}),{coords:KQ(g,[g.length,3]),scaledCoords:U,box:V,flag:jQ(m)}}))}))]}}))}))},e.prototype.updateRegionsOfInterest=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.regionsOfInterest[t],a=0;if(r&&r.startPoint){var i=n.startPoint,o=i[0],s=i[1],u=n.endPoint,c=u[0],l=u[1],d=r.startPoint,f=d[0],p=d[1],h=r.endPoint,v=h[0],m=h[1],y=Math.max(o,f),g=Math.max(s,p),b=(Math.min(c,v)-y)*(Math.min(l,m)-g);a=b/((c-o)*(l-s)+(v-f)*(m-s)-b)}a<.25&&(this.regionsOfInterest[t]=n)}this.regionsOfInterest=this.regionsOfInterest.slice(0,e.length)},e.prototype.clearRegionOfInterest=function(e){null!=this.regionsOfInterest[e]&&(this.regionsOfInterest=this.regionsOfInterest.slice(0,e).concat(this.regionsOfInterest.slice(e+1)))},e.prototype.shouldUpdateRegionsOfInterest=function(){var e=this.regionsOfInterest.length,t=0===e;return 1===this.maxFaces||t?t:e!==this.maxFaces&&this.runsWithoutFaceDetector>=this.maxContinuousChecks},e.prototype.calculateLandmarksBoundingBox=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{startPoint:[Math.min.apply(Math,t),Math.min.apply(Math,n)],endPoint:[Math.max.apply(Math,t),Math.max.apply(Math,n)]}},e}(),g2=[[.499976992607117,.652534008026123],[.500025987625122,.547487020492554],[.499974012374878,.602371990680695],[.482113003730774,.471979022026062],[.500150978565216,.527155995368958],[.499909996986389,.498252987861633],[.499523013830185,.40106201171875],[.289712011814117,.380764007568359],[.499954998493195,.312398016452789],[.499987006187439,.269918978214264],[.500023007392883,.107050001621246],[.500023007392883,.666234016418457],[.5000159740448,.679224014282227],[.500023007392883,.692348003387451],[.499976992607117,.695277988910675],[.499976992607117,.70593398809433],[.499976992607117,.719385027885437],[.499976992607117,.737019002437592],[.499967992305756,.781370997428894],[.499816000461578,.562981009483337],[.473773002624512,.573909997940063],[.104906998574734,.254140973091125],[.365929991006851,.409575998783112],[.338757991790771,.41302502155304],[.311120003461838,.409460008144379],[.274657994508743,.389131009578705],[.393361985683441,.403706014156342],[.345234006643295,.344011008739471],[.370094001293182,.346076011657715],[.319321990013123,.347265005111694],[.297903001308441,.353591024875641],[.24779200553894,.410809993743896],[.396889001131058,.842755019664764],[.280097991228104,.375599980354309],[.106310002505779,.399955987930298],[.2099249958992,.391353011131287],[.355807989835739,.534406006336212],[.471751004457474,.65040397644043],[.474155008792877,.680191993713379],[.439785003662109,.657229006290436],[.414617002010345,.66654098033905],[.450374007225037,.680860996246338],[.428770989179611,.682690978050232],[.374971002340317,.727805018424988],[.486716985702515,.547628998756409],[.485300987958908,.527395009994507],[.257764995098114,.314490020275116],[.401223003864288,.455172002315521],[.429818987846375,.548614978790283],[.421351999044418,.533740997314453],[.276895999908447,.532056987285614],[.483370006084442,.499586999416351],[.33721199631691,.282882988452911],[.296391993761063,.293242990970612],[.169294998049736,.193813979625702],[.447580009698868,.302609980106354],[.392390012741089,.353887975215912],[.354490011930466,.696784019470215],[.067304998636246,.730105042457581],[.442739009857178,.572826027870178],[.457098007202148,.584792017936707],[.381974011659622,.694710969924927],[.392388999462128,.694203019142151],[.277076005935669,.271932005882263],[.422551989555359,.563233017921448],[.385919004678726,.281364023685455],[.383103013038635,.255840003490448],[.331431001424789,.119714021682739],[.229923993349075,.232002973556519],[.364500999450684,.189113974571228],[.229622006416321,.299540996551514],[.173287004232407,.278747975826263],[.472878992557526,.666198015213013],[.446828007698059,.668527007102966],[.422762006521225,.673889994621277],[.445307999849319,.580065965652466],[.388103008270264,.693961024284363],[.403039008378983,.706539988517761],[.403629004955292,.693953037261963],[.460041999816895,.557139039039612],[.431158006191254,.692366003990173],[.452181994915009,.692366003990173],[.475387006998062,.692366003990173],[.465828001499176,.779190003871918],[.472328990697861,.736225962638855],[.473087012767792,.717857003211975],[.473122000694275,.704625964164734],[.473033010959625,.695277988910675],[.427942007780075,.695277988910675],[.426479011774063,.703539967536926],[.423162013292313,.711845993995667],[.4183090031147,.720062971115112],[.390094995498657,.639572978019714],[.013953999616206,.560034036636353],[.499913990497589,.58014702796936],[.413199990987778,.69539999961853],[.409626007080078,.701822996139526],[.468080013990402,.601534962654114],[.422728985548019,.585985004901886],[.463079988956451,.593783974647522],[.37211999297142,.47341400384903],[.334562003612518,.496073007583618],[.411671012639999,.546965003013611],[.242175996303558,.14767599105835],[.290776997804642,.201445996761322],[.327338010072708,.256527006626129],[.399509996175766,.748921036720276],[.441727995872498,.261676013469696],[.429764986038208,.187834024429321],[.412198007106781,.108901023864746],[.288955003023148,.398952007293701],[.218936994671822,.435410976409912],[.41278201341629,.398970007896423],[.257135003805161,.355440020561218],[.427684992551804,.437960982322693],[.448339998722076,.536936044692993],[.178560003638268,.45755398273468],[.247308000922203,.457193970680237],[.286267012357712,.467674970626831],[.332827985286713,.460712015628815],[.368755996227264,.447206974029541],[.398963987827301,.432654976844788],[.476410001516342,.405806005001068],[.189241006970406,.523923993110657],[.228962004184723,.348950982093811],[.490725994110107,.562400996685028],[.404670000076294,.485132992267609],[.019469000399113,.401564002037048],[.426243007183075,.420431017875671],[.396993011236191,.548797011375427],[.266469985246658,.376977026462555],[.439121007919312,.51895797252655],[.032313998788595,.644356966018677],[.419054001569748,.387154996395111],[.462783008813858,.505746960639954],[.238978996872902,.779744982719421],[.198220998048782,.831938028335571],[.107550002634525,.540755033493042],[.183610007166862,.740257024765015],[.134409993886948,.333683013916016],[.385764002799988,.883153975009918],[.490967005491257,.579378008842468],[.382384985685349,.508572995662689],[.174399003386497,.397670984268188],[.318785011768341,.39623498916626],[.343364000320435,.400596976280212],[.396100014448166,.710216999053955],[.187885001301765,.588537991046906],[.430987000465393,.944064974784851],[.318993002176285,.898285031318665],[.266247987747192,.869701027870178],[.500023007392883,.190576016902924],[.499976992607117,.954452991485596],[.366169989109039,.398822009563446],[.393207013607025,.39553701877594],[.410373002290726,.391080021858215],[.194993004202843,.342101991176605],[.388664990663528,.362284004688263],[.365961998701096,.355970978736877],[.343364000320435,.355356991291046],[.318785011768341,.35834002494812],[.301414996385574,.363156020641327],[.058132998645306,.319076001644135],[.301414996385574,.387449026107788],[.499987989664078,.618434011936188],[.415838003158569,.624195992946625],[.445681989192963,.566076993942261],[.465844005346298,.620640993118286],[.49992299079895,.351523995399475],[.288718998432159,.819945991039276],[.335278987884521,.852819979190826],[.440512001514435,.902418971061707],[.128294005990028,.791940987110138],[.408771991729736,.373893976211548],[.455606997013092,.451801002025604],[.499877005815506,.908990025520325],[.375436991453171,.924192011356354],[.11421000212431,.615022003650665],[.448662012815475,.695277988910675],[.4480200111866,.704632043838501],[.447111994028091,.715808033943176],[.444831997156143,.730794012546539],[.430011987686157,.766808986663818],[.406787008047104,.685672998428345],[.400738000869751,.681069016456604],[.392399996519089,.677703022956848],[.367855995893478,.663918972015381],[.247923001646996,.601333022117615],[.452769994735718,.420849978923798],[.43639200925827,.359887003898621],[.416164010763168,.368713974952698],[.413385987281799,.692366003990173],[.228018000721931,.683571994304657],[.468268007040024,.352671027183533],[.411361992359161,.804327011108398],[.499989002943039,.469825029373169],[.479153990745544,.442654013633728],[.499974012374878,.439637005329132],[.432112008333206,.493588984012604],[.499886006116867,.866917014122009],[.49991300702095,.821729004383087],[.456548988819122,.819200992584229],[.344549000263214,.745438992977142],[.37890899181366,.574010014533997],[.374292999505997,.780184984207153],[.319687992334366,.570737957954407],[.357154995203018,.604269981384277],[.295284003019333,.621580958366394],[.447750002145767,.862477004528046],[.410986006259918,.508723020553589],[.31395098567009,.775308012962341],[.354128003120422,.812552988529205],[.324548006057739,.703992962837219],[.189096003770828,.646299958229065],[.279776990413666,.71465802192688],[.1338230073452,.682700991630554],[.336768001317978,.644733011722565],[.429883986711502,.466521978378296],[.455527991056442,.548622965812683],[.437114000320435,.558896005153656],[.467287987470627,.529924988746643],[.414712011814117,.335219979286194],[.37704598903656,.322777986526489],[.344107985496521,.320150971412659],[.312875986099243,.32233202457428],[.283526003360748,.333190023899078],[.241245999932289,.382785975933075],[.102986000478268,.468762993812561],[.267612010240555,.424560010433197],[.297879010438919,.433175981044769],[.333433985710144,.433878004550934],[.366427004337311,.426115989685059],[.396012008190155,.416696012020111],[.420121014118195,.41022801399231],[.007561000064015,.480777025222778],[.432949006557465,.569517970085144],[.458638995885849,.479089021682739],[.473466008901596,.545744001865387],[.476087987422943,.563830018043518],[.468472003936768,.555056989192963],[.433990985155106,.582361996173859],[.483518004417419,.562983989715576],[.482482999563217,.57784903049469],[.42645001411438,.389798998832703],[.438998997211456,.39649498462677],[.450067013502121,.400434017181396],[.289712011814117,.368252992630005],[.276670008897781,.363372981548309],[.517862021923065,.471948027610779],[.710287988185883,.380764007568359],[.526226997375488,.573909997940063],[.895093023777008,.254140973091125],[.634069979190826,.409575998783112],[.661242008209229,.41302502155304],[.688880026340485,.409460008144379],[.725341975688934,.389131009578705],[.606630027294159,.40370500087738],[.654766023159027,.344011008739471],[.629905998706818,.346076011657715],[.680678009986877,.347265005111694],[.702096998691559,.353591024875641],[.75221198797226,.410804986953735],[.602918028831482,.842862963676453],[.719901978969574,.375599980354309],[.893692970275879,.399959981441498],[.790081977844238,.391354024410248],[.643998026847839,.534487962722778],[.528249025344849,.65040397644043],[.525849997997284,.680191040039062],[.560214996337891,.657229006290436],[.585384011268616,.66654098033905],[.549625992774963,.680860996246338],[.57122802734375,.682691991329193],[.624852001667023,.72809898853302],[.513050019741058,.547281980514526],[.51509702205658,.527251958847046],[.742246985435486,.314507007598877],[.598631024360657,.454979002475739],[.570338010787964,.548575043678284],[.578631997108459,.533622980117798],[.723087012767792,.532054007053375],[.516445994377136,.499638974666595],[.662801027297974,.282917976379395],[.70362401008606,.293271005153656],[.830704987049103,.193813979625702],[.552385985851288,.302568018436432],[.607609987258911,.353887975215912],[.645429015159607,.696707010269165],[.932694971561432,.730105042457581],[.557260990142822,.572826027870178],[.542901992797852,.584792017936707],[.6180260181427,.694710969924927],[.607590973377228,.694203019142151],[.722943007946014,.271963000297546],[.577413976192474,.563166975975037],[.614082992076874,.281386971473694],[.616907000541687,.255886018276215],[.668509006500244,.119913995265961],[.770092010498047,.232020974159241],[.635536015033722,.189248979091644],[.77039098739624,.299556016921997],[.826722025871277,.278755009174347],[.527121007442474,.666198015213013],[.553171992301941,.668527007102966],[.577238023281097,.673889994621277],[.554691970348358,.580065965652466],[.611896991729736,.693961024284363],[.59696102142334,.706539988517761],[.596370995044708,.693953037261963],[.539958000183105,.557139039039612],[.568841993808746,.692366003990173],[.547818005084991,.692366003990173],[.52461302280426,.692366003990173],[.534089982509613,.779141008853912],[.527670979499817,.736225962638855],[.526912987232208,.717857003211975],[.526877999305725,.704625964164734],[.526966989040375,.695277988910675],[.572058022022247,.695277988910675],[.573521018028259,.703539967536926],[.57683801651001,.711845993995667],[.581691026687622,.720062971115112],[.609944999217987,.639909982681274],[.986046016216278,.560034036636353],[.5867999792099,.69539999961853],[.590372025966644,.701822996139526],[.531915009021759,.601536989212036],[.577268004417419,.585934996604919],[.536915004253387,.593786001205444],[.627542972564697,.473352015018463],[.665585994720459,.495950996875763],[.588353991508484,.546862006187439],[.757824003696442,.14767599105835],[.709249973297119,.201507985591888],[.672684013843536,.256581008434296],[.600408971309662,.74900496006012],[.55826598405838,.261672019958496],[.570303976535797,.187870979309082],[.588165998458862,.109044015407562],[.711045026779175,.398952007293701],[.781069993972778,.435405015945435],[.587247014045715,.398931980133057],[.742869973182678,.355445981025696],[.572156012058258,.437651991844177],[.55186802148819,.536570012569427],[.821442008018494,.457556009292603],[.752701997756958,.457181990146637],[.71375697851181,.467626988887787],[.66711300611496,.460672974586487],[.631101012229919,.447153985500336],[.6008620262146,.432473003864288],[.523481011390686,.405627012252808],[.810747981071472,.523926019668579],[.771045982837677,.348959028720856],[.509127020835876,.562718033790588],[.595292985439301,.485023975372314],[.980530977249146,.401564002037048],[.573499977588654,.420000016689301],[.602994978427887,.548687994480133],[.733529984951019,.376977026462555],[.560611009597778,.519016981124878],[.967685997486115,.644356966018677],[.580985009670258,.387160003185272],[.537728011608124,.505385041236877],[.760966002941132,.779752969741821],[.801778972148895,.831938028335571],[.892440974712372,.54076099395752],[.816350996494293,.740260004997253],[.865594983100891,.333687007427216],[.614073991775513,.883246004581451],[.508952975273132,.579437971115112],[.617941975593567,.508316040039062],[.825608015060425,.397674977779388],[.681214988231659,.39623498916626],[.656635999679565,.400596976280212],[.603900015354156,.710216999053955],[.81208598613739,.588539004325867],[.56801301240921,.944564998149872],[.681007981300354,.898285031318665],[.733752012252808,.869701027870178],[.633830010890961,.398822009563446],[.606792986392975,.39553701877594],[.589659988880157,.391062021255493],[.805015981197357,.342108011245728],[.611334979534149,.362284004688263],[.634037971496582,.355970978736877],[.656635999679565,.355356991291046],[.681214988231659,.35834002494812],[.698584973812103,.363156020641327],[.941866993904114,.319076001644135],[.698584973812103,.387449026107788],[.584177017211914,.624107003211975],[.554318010807037,.566076993942261],[.534153997898102,.62064003944397],[.711217999458313,.819975018501282],[.664629995822906,.852871000766754],[.559099972248077,.902631998062134],[.871706008911133,.791940987110138],[.591234028339386,.373893976211548],[.544341027736664,.451583981513977],[.624562978744507,.924192011356354],[.88577002286911,.615028977394104],[.551338016986847,.695277988910675],[.551980018615723,.704632043838501],[.552887976169586,.715808033943176],[.555167973041534,.730794012546539],[.569944024085999,.767035007476807],[.593203008174896,.685675978660583],[.599261999130249,.681069016456604],[.607599973678589,.677703022956848],[.631937980651855,.663500010967255],[.752032995223999,.601315021514893],[.547226011753082,.420395016670227],[.563543975353241,.359827995300293],[.583841025829315,.368713974952698],[.586614012718201,.692366003990173],[.771915018558502,.683578014373779],[.531597018241882,.352482974529266],[.588370978832245,.804440975189209],[.52079701423645,.442565023899078],[.567984998226166,.493479013442993],[.543282985687256,.819254994392395],[.655317008495331,.745514988899231],[.621008992195129,.574018001556396],[.625559985637665,.78031200170517],[.680198013782501,.570719003677368],[.64276397228241,.604337990283966],[.704662978649139,.621529996395111],[.552012026309967,.862591981887817],[.589071989059448,.508637011051178],[.685944974422455,.775357007980347],[.645735025405884,.812640011310577],[.675342977046967,.703978002071381],[.810858011245728,.646304965019226],[.72012197971344,.714666962623596],[.866151988506317,.682704985141754],[.663187026977539,.644596993923187],[.570082008838654,.466325998306274],[.544561982154846,.548375964164734],[.562758982181549,.558784961700439],[.531987011432648,.530140042304993],[.585271000862122,.335177004337311],[.622952997684479,.32277899980545],[.655896008014679,.320163011550903],[.687132000923157,.322345972061157],[.716481983661652,.333200991153717],[.758756995201111,.382786989212036],[.897013008594513,.468769013881683],[.732392013072968,.424547016620636],[.70211398601532,.433162987232208],[.66652500629425,.433866024017334],[.633504986763,.426087975502014],[.603875994682312,.416586995124817],[.579657971858978,.409945011138916],[.992439985275269,.480777025222778],[.567192018032074,.569419980049133],[.54136598110199,.478899002075195],[.526564002037048,.546118021011353],[.523913025856018,.563830018043518],[.531529009342194,.555056989192963],[.566035985946655,.582329034805298],[.51631098985672,.563053965568542],[.5174720287323,.577877044677734],[.573594987392426,.389806985855103],[.560697972774506,.395331978797913],[.549755990505219,.399751007556915],[.710287988185883,.368252992630005],[.723330020904541,.363372981548309]];function b2(e){return W1(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l,d,f,p,h,v,m;return z1(this,(function(y){switch(y.label){case 0:return t=e.maxContinuousChecks,n=void 0===t?5:t,r=e.detectionConfidence,a=void 0===r?.9:r,i=e.maxFaces,o=void 0===i?10:i,s=e.iouThreshold,u=void 0===s?.3:s,c=e.scoreThreshold,l=void 0===c?.75:c,d=e.shouldLoadIrisModel,f=void 0===d||d,p=e.modelUrl,h=e.detectorModelUrl,v=e.irisModelUrl,f?[4,Promise.all([x2(h,o,u,l),k2(p),w2(v)])]:[3,2];case 1:return m=y.sent(),[3,4];case 2:return[4,Promise.all([x2(h,o,u,l),k2(p)])];case 3:m=y.sent(),y.label=4;case 4:return[2,new S2(m[0],m[1],n,a,o,f?m[2]:null)]}}))}))}function x2(e,t,n,r){return W1(this,void 0,void 0,(function(){return z1(this,(function(a){return[2,Q1({modelUrl:e,maxFaces:t,iouThreshold:n,scoreThreshold:r})]}))}))}function k2(e){return W1(this,void 0,void 0,(function(){return z1(this,(function(t){return null!=e?[2,j1(e)]:[2,j1("https://tfhub.dev/mediapipe/tfjs-model/facemesh/1/default/1",{fromTFHub:!0})]}))}))}function w2(e){return W1(this,void 0,void 0,(function(){return z1(this,(function(t){return null!=e?[2,j1(e)]:[2,j1("https://tfhub.dev/mediapipe/tfjs-model/iris/1/default/2",{fromTFHub:!0})]}))}))}function _2(e,t){if(e.mesh instanceof hG){var n=l$((function(){var n=qQ([t-1,0,0]),r=qQ([1,-1,1]);return l$((function(){return[qZ([uX(t-1,ZZ(e.boundingBox.topLeft,0,1)),ZZ(e.boundingBox.topLeft,1,1)]),qZ([uX(t-1,ZZ(e.boundingBox.bottomRight,0,1)),ZZ(e.boundingBox.bottomRight,1,1)]),GZ(uX(n,e.mesh),r),GZ(uX(n,e.scaledMesh),r)]}))})),r=n[0],a=n[1],i=n[2],o=n[3];return Object.assign({},e,{boundingBox:{topLeft:r,bottomRight:a},mesh:i,scaledMesh:o})}return Object.assign({},e,{boundingBox:{topLeft:[t-1-e.boundingBox.topLeft[0],e.boundingBox.topLeft[1]],bottomRight:[t-1-e.boundingBox.bottomRight[0],e.boundingBox.bottomRight[1]]},mesh:e.mesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n})),scaledMesh:e.scaledMesh.map((function(e){var n=e.slice(0);return n[0]=t-1-e[0],n}))})}var T2,S2=function(){function e(e,t,n,r,a,i){this.kind="MediaPipeFaceMesh",this.pipeline=new y2(e,t,192,192,n,a,i),this.detectionConfidence=r}return e.getAnnotations=function(){return J1},e.getUVCoords=function(){return g2},e.prototype.estimateFaces=function(e){return W1(this,void 0,void 0,(function(){var t,n,r,a,i,o,s,u,c,l,d,f,p=this;return z1(this,(function(h){switch(h.label){case 0:if(t=e.returnTensors,n=void 0!==t&&t,r=e.flipHorizontal,a=void 0!==r&&r,i=e.predictIrises,o=void 0===i||i,s=e.input,o&&null==this.pipeline.irisModel)throw new Error("The iris model was not loaded as part of facemesh. Please initialize the model with facemesh.load({shouldLoadIrisModel: true}).");return u=function(e){return e instanceof hG?[e.shape[0],e.shape[1]]:[e.height,e.width]}(s),c=u[1],l=l$((function(){return s instanceof hG||(s=tZ(s)),FY(LH(s,"float32"),0)})),"webgl"!==DG.backendName?[3,2]:(f=RW().get("WEBGL_PACK_DEPTHWISECONV"),RW().set("WEBGL_PACK_DEPTHWISECONV",!0),[4,this.pipeline.predict(l,o)]);case 1:return d=h.sent(),RW().set("WEBGL_PACK_DEPTHWISECONV",f),[3,4];case 2:return[4,this.pipeline.predict(l,o)];case 3:d=h.sent(),h.label=4;case 4:return l.dispose(),null!=d&&d.length>0?[2,Promise.all(d.map((function(e,t){return W1(p,void 0,void 0,(function(){var r,i,s,u,l,d,f,p,h,v,m,y,g,b,x=this;return z1(this,(function(k){switch(k.label){case 0:return r=e.coords,i=e.scaledCoords,s=e.box,u=e.flag,l=[u],n||(l=l.concat([r,i])),[4,Promise.all(l.map((function(e){return W1(x,void 0,void 0,(function(){return z1(this,(function(t){return[2,e.array()]}))}))})))];case 1:if(d=k.sent(),f=d[0],u.dispose(),f<this.detectionConfidence&&this.pipeline.clearRegionOfInterest(t),n)return p={kind:"MediaPipePredictionTensors",faceInViewConfidence:f,mesh:r,scaledMesh:i,boundingBox:{topLeft:qQ(s.startPoint),bottomRight:qQ(s.endPoint)}},a?[2,_2(p,c)]:[2,p];for(b in h=d.slice(1),v=h[0],m=h[1],i.dispose(),r.dispose(),y={kind:"MediaPipePredictionValues",faceInViewConfidence:f,boundingBox:{topLeft:s.startPoint,bottomRight:s.endPoint},mesh:v,scaledMesh:m},a&&(y=_2(y,c)),g={},J1)(o||!1===b.includes("Iris"))&&(g[b]=J1[b].map((function(e){return y.scaledMesh[e]})));return y.annotations=g,[2,y]}}))}))})))]:[2,[]]}}))}))},e}();function E2(e,t){return void 0===e&&(e=T2.mediapipeFacemesh),void 0===t&&(t={}),W1(this,void 0,void 0,(function(){return z1(this,(function(n){if(e===T2.mediapipeFacemesh)return[2,b2(t)];throw new Error(e+" is not a valid package name.")}))}))}!function(e){e.mediapipeFacemesh="mediapipe-facemesh"}(T2||(T2={}));var I2,C2,N2,A2={},O2={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function P2(e,t){if(!(e in A2)||null!=t){var n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=null==t?function(e){if("undefined"!==typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!==typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;if(n.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete A2[e]}),!1),1===e)return n.getContext("webgl",O2)||n.getContext("experimental-webgl",O2);return n.getContext("webgl2",O2)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;A2[e]=n}var r=A2[e];return null==r||r.isContextLost()?(delete A2[e],P2(e)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),A2[e])}function R2(e,t){return[t,e]}function D2(e){var t=nW(e);return iW(Math.ceil(t/4))}function M2(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function L2(e,t){var n,r,a,i,o,s,u,c,l,d,f=e;return 2===RW().getNumber("WEBGL_VERSION")?(n=f.R32F,r=f.R16F,a=f.RGBA16F,i=f.RGBA32F,o=f.RED,u=4,c=1,l=f.HALF_FLOAT,d=f.FLOAT,s=f.RGBA8):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=f.RGBA,o=e.RGBA,u=4,c=4,l=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:s,downloadUnpackNumChannels:u,defaultNumChannels:c,textureTypeHalfFloat:l,textureTypeFloat:d}}function F2(e,t){var n=t();return RW().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code ".concat(t)}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(I2||(I2={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(C2||(C2={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(N2||(N2={}));function B2(e){return!!(RW().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function j2(e,t){return J2(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function U2(e,t){var n=J2(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(F2(e,(function(){return e.shaderSource(n,t)})),F2(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=z2.exec(t);if(null==n)return console.log("Couldn't parse line number in error: ".concat(t)),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return oW((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var c=o.slice(0,r-1),l=o.slice(r-1,r),d=o.slice(r);console.log(c.join("\n")),console.log(t.split("\n")[0]),console.log("%c ".concat(oW(l[0],s)),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var V2,W2,z2=/ERROR: [0-9]+:([0-9]+):/g;function q2(e,t){if(F2(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function K2(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(F2(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),F2(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),F2(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function G2(e,t,n){return J2(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}function H2(e,t,n){return e.getUniformLocation(t,n)}function Z2(e,t,n,r){F2(e,(function(){return function(e,t,n){$2(e,n),F2(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),F2(e,(function(){return e.uniform1i(n,r)}))}function Y2(e,t,n){F2(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),F2(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function X2(e,t){F2(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),F2(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Q2(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error ".concat(t)}}(e,t))}function J2(e,t,n){var r=F2(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function $2(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){var a="[gl.TEXTURE0, gl.TEXTURE".concat(n,"]");throw new Error("textureUnit must be in ".concat(a,"."))}}function e3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return nW(e.slice(0,e.length-t))}function t3(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function n3(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[e3(e)].concat((0,Ze.Z)(t3(e)))),t}function r3(e){return e%2===0}function a3(e,t){if(rW(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(r3(n)&&r3(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&r3(e[0])&&r3(t[0])}function i3(e,t){return null!=e.getExtension(t)}function o3(e){try{if(null!=P2(e))return!0}catch(t){return console.log("Error when getting WebGL context: ",t),!1}return!1}function s3(e){if(0===e)return!1;var t=P2(e);if(1!==e){if(i3(t,"EXT_color_buffer_float"))return u3(t);var n="EXT_color_buffer_half_float";if(i3(t,n)){var r=t.getExtension(n);return function(e,t){var n=L2(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!i3(t,"OES_texture_float")&&(!!i3(t,"WEBGL_color_buffer_float")&&u3(t))}function u3(e){var t=L2(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function c3(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&JV("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors ")+"in the WebGL backend."}))}))}var l3=RW();function d3(){var e,t,n,r,a,i,o,s,u,c;return 2===RW().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function f3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=xW(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / ").concat(t),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * ").concat(t):"index -= ".concat(e[a]," * ").concat(t);return"".concat(i,"; ").concat(o,";")})).join("")}function p3(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=xW(t);return r.map((function(t,a){var i="int ".concat(e[a]," = ").concat(n," / outShapeStrides[").concat(a,"]"),o=a===r.length-1?"int ".concat(e[a+1]," = ").concat(n," - ").concat(e[a]," * outShapeStrides[").concat(a,"]"):"index -= ".concat(e[a]," * outShapeStrides[").concat(a,"]");return"".concat(i,"; ").concat(o,";")})).join("")}function h3(e,t){var n=e.length,r=e.map((function(e){return"".concat(t,"[").concat(e,"]")})),a=new Array(n-1);a[n-2]=r[n-1];for(var i=n-3;i>=0;--i)a[i]="(".concat(a[i+1]," * ").concat(r[i+1],")");return a}function v3(e){var t=xW(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ".concat(t[0]," + coords.y * ").concat(t[1]," + coords.z;\n  }\n")}l3.registerFlag("HAS_WEBGL",(function(){return l3.getNumber("WEBGL_VERSION")>0})),l3.registerFlag("WEBGL_VERSION",(function(){return o3(2)?2:o3(1)?1:0})),l3.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),l3.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===l3.get("WEBGL_VERSION")})),l3.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),l3.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),l3.registerFlag("WEBGL_PACK",(function(){return l3.getBool("HAS_WEBGL")})),l3.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_CLIP",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_PACK_REDUCE",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_CONV_IM2COL",(function(){return l3.getBool("WEBGL_PACK")})),l3.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==V2){var t=P2(e);V2=t.getParameter(t.MAX_TEXTURE_SIZE)}return V2}(l3.getNumber("WEBGL_VERSION"))})),l3.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==W2){var t=P2(e);W2=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,W2)}(l3.getNumber("WEBGL_VERSION"))})),l3.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=l3.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=P2(e);return i3(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:i3(t,"EXT_disjoint_timer_query")?1:0}(e)})),l3.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return l3.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!LG()})),l3.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=P2(e);if(1===e){if(!i3(t,"OES_texture_float"))return!1}else if(!i3(t,"EXT_color_buffer_float"))return!1;return u3(t)}(l3.getNumber("WEBGL_VERSION"))})),l3.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!l3.getBool("WEBGL_FORCE_F16_TEXTURES")&&l3.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),l3.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return s3(l3.getNumber("WEBGL_VERSION"))})),l3.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=l3.getNumber("WEBGL_VERSION"))&&null!=P2(e).fenceSync;var e})),l3.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return l3.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),l3.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never "+"delete) or at least 0, but got ".concat(e,"."))})),l3.registerFlag("WEBGL_FLUSH_THRESHOLD",(function(){return LG()?1:-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_FLUSH_THRESHOLD must be -1 (indicating never "+"manual flush) or at least 0, but got ".concat(e,"."))})),l3.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 128})),l3.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",(function(){return!1})),l3.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",(function(){return 1e5})),l3.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",(function(){return 128}));var m3="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",y3=QH;function g3(e,t,n){var r=[];if(e.forEach((function(e){var t=nW(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push("uniform float ".concat(e.name).concat(t>1?"[".concat(t,"]"):"",";")):(r.push("uniform sampler2D ".concat(e.name,";")),r.push("uniform int offset".concat(e.name,";"))),n.enableShapeUniforms){switch(F3(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape).uniformShape.length){case 1:r.push("uniform int ".concat(e.name,"Shape;"));break;case 2:r.push("uniform ivec2 ".concat(e.name,"Shape;"));break;case 3:r.push("uniform ivec3 ".concat(e.name,"Shape;"));break;case 4:r.push("uniform ivec4 ".concat(e.name,"Shape;"))}r.push("uniform ivec2 ".concat(e.name,"TexShape;"))}})),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach((function(e){r.push("uniform ".concat(e.type," ").concat(e.name).concat(e.arrayIndex?"[".concat(e.arrayIndex,"]"):"",";"))}));var a,i,o=r.join("\n"),s=e.map((function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,a="";a+=n?x3(e,r):b3(e,r);var i=e.shapeInfo.logicalShape,o=t.logicalShape;i.length<=o.length&&(a+=n?D3(e,t):M3(e,t));return a}(e,t,n.packedInputs,n.enableShapeUniforms)})).join("\n"),u=t.texShape,c=d3(),l=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ".concat(e.texture2D,"(textureSampler, uv).r;\n    }\n  ")}(c),d=function(e){return"".concat(e.version,"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ").concat(e.varyingFs," vec2 resultUV;\n    ").concat(e.defineOutput,"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ").concat(e.defineSpecialNaN,"\n    ").concat(e.defineSpecialInf,"\n    ").concat(e.defineRound,"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ").concat(k3,"\n    ").concat(w3,"\n    ").concat(_3,"\n  ")}(c);return t.isPacked?(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===r[0])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ".concat(r[1],".0);\n      }\n    ");if(1===r[1])return n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ".concat(r[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      return 2 * (resTexRC.x * ").concat(r[1]," + resTexRC.y);\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(rW(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(".concat(r[0],", ").concat(r[1],"));\n      }\n    ");var a=Math.ceil(e[1]/2);if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[2]/2),i=a*Math.ceil(e[1]/2);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ")}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";for(var r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],a=Math.ceil(e[e.length-1]/2),i=a*Math.ceil(e[e.length-2]/2),o=i,s="",u="b, r, c",c=2;c<e.length-1;c++)o*=e[e.length-c-1],s="\n      int b".concat(c," = index / ").concat(o,";\n      index -= b").concat(c," * ").concat(o,";\n    ")+s,u="b".concat(c,", ")+u;return"\n    ivec".concat(e.length," getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(").concat(r[0],", ").concat(r[1],"));\n      int index = resTexRC.x * ").concat(r[1]," + resTexRC.y;\n\n      ").concat(s,"\n\n      int b = index / ").concat(i,";\n      index -= b * ").concat(i,";\n\n      int r = 2 * (index / ").concat(a,");\n      int c = imod(index, ").concat(a,") * 2;\n\n      return ivec").concat(e.length,"(").concat(u,");\n    }\n  ")}(e,t,n)}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(vec4 val) {\n      ".concat(e.output," = val;\n    }\n  ")}(c)):(a=function(e,t,n){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t,n){if(1===t[0])return n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.x * ".concat(t[1],".0);\n      }\n    ");if(1===t[1])return n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":"\n      int getOutputCoords() {\n        return int(resultUV.y * ".concat(t[0],".0);\n      }\n    ");if(n)return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      return resTexRC.x * ").concat(t[1]," + resTexRC.y;\n    }\n  ")}(0,t,n);case 2:return function(e,t,n){if(rW(e,t))return n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(".concat(t[0],", ").concat(t[1],"));\n      }\n    ");if(1===e[1])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ");if(1===e[0])return n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(".concat(t[0],", ").concat(t[1],"));\n        int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ");if(n)return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      int r = index / ").concat(e[1],";\n      int c = index - r * ").concat(e[1],";\n      return ivec2(r, c);\n    }\n  ")}(e,t,n);case 3:return function(e,t,n){if(n){var r=p3(["r","c","d"],e);return"\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ".concat(r,"\n    return ivec3(r, c, d);\n  }\n")}var a=f3(["r","c","d"],e);return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec3(r, c, d);\n    }\n  ")}(e,t,n);case 4:return function(e,t,n){if(n){var r=p3(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ".concat(r,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}var a=f3(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n      ").concat(a,"\n      return ivec4(r, c, d, d2);\n    }\n  ")}(e,t,n);case 5:return function(e,t){var n=f3(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(".concat(t[0],",\n                             ").concat(t[1],"));\n\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  ")}(e,t);case 6:return function(e,t){var n=f3(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(".concat(t[0],", ").concat(t[1],"));\n      int index = resTexRC.x * ").concat(t[1]," + resTexRC.y;\n\n      ").concat(n,"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  ")}(e,t);default:throw new Error("".concat(e.length,"-D output sampling is not yet supported"))}}(t.logicalShape,u,n.enableShapeUniforms),i=function(e){return"\n    void setOutput(float val) {\n      ".concat(e.output," = vec4(val, 0, 0, 0);\n    }\n  ")}(c)),n.packedInputs&&(d+=T3),[d,l,i,o,a,s,n.userCode].join("\n")}function b3(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.shapeInfo.logicalShape;switch(n.length){case 0:return E3(e,t);case 1:return I3(e,t);case 2:return C3(e,t);case 3:return N3(e,t);case 4:return A3(e,t);case 5:return O3(e);case 6:return P3(e);default:throw new Error("".concat(n.length,"-D input sampling")+" is not yet supported")}}function x3(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=d3();return"\n    vec4 ".concat(n,"() {\n      return ").concat(r.texture2D,"(").concat(t,", halfCR);\n    }\n  ")}(e);case 1:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=d3();if(t)return"\n    vec4 ".concat(r,"(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ");var o=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];return"\n    vec4 ".concat(r,"(int index) {\n      vec2 uv = packedUVfrom1D(\n        ").concat(o[0],", ").concat(o[1],", index);\n      return ").concat(i.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t);case 2:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=i[0],s=i[1],u=d3();if(null!=i&&rW(n,i))return t?"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    "):"\n      vec4 ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n\n        return ").concat(u.texture2D,"(").concat(r,", uv);\n      }\n    ");if(t)return"\n    vec4 ".concat(a,"(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ");var c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],l=Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int row, int col) {\n      vec2 uv = packedUVfrom2D(").concat(l,", ").concat(c[0],", ").concat(c[1],", row, col);\n      return ").concat(u.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);case 3:return function(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===n[0]){var s=[1,2],u=B3(e,n.slice(1)),c=["b","row","col"];return"\n        ".concat(x3(u,t),"\n        vec4 ").concat(a,"(int b, int row, int col) {\n          return ").concat(a,"(").concat(j3(c,s),");\n        }\n      ")}var l=d3();if(t)return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(r,"TexShape[0]) / 2.0), ceil(float(").concat(r,"TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(").concat(r,"Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(r,"Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ");var d=o[0],f=o[1],p=Math.ceil(n[2]/2),h=p*Math.ceil(n[1]/2);return"\n    vec4 ".concat(a,"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ").concat(d,", ").concat(f,", ").concat(h,", ").concat(p,", b, row, col);\n      return ").concat(l.texture2D,"(").concat(r,", uv);\n    }\n  ")}(e,t);default:return function(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=d3();if(t)return"\n    vec4 ".concat(r,"(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(").concat(n,"Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(").concat(n,"Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ").concat(n,"Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(").concat(n,"TexShape[0]) / 2.0), ceil(float(").concat(n,"TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ");for(var i=e.shapeInfo.logicalShape,o=i.length,s=e.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=u[0],l=u[1],d=Math.ceil(i[o-1]/2),f=d*Math.ceil(i[o-2]/2),p="int b, int row, int col",h="b * ".concat(f," + (row / 2) * ").concat(d," + (col / 2)"),v=2;v<o-1;v++)p="int b".concat(v,", ")+p,f*=i[o-v-1],h="b".concat(v," * ").concat(f," + ")+h;return"\n    vec4 ".concat(r,"(").concat(p,") {\n      int index = ").concat(h,";\n      int texR = index / ").concat(l,";\n      int texC = index - texR * ").concat(l,";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(l,", ").concat(c,");\n      return ").concat(a.texture2D,"(").concat(n,", uv);\n    }\n  ")}(e,t)}}var k3="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",w3="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",_3="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",T3="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function S3(e){return"offset".concat(e)}function E3(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"float ".concat(r,"() {return ").concat(n,";}");var a=(0,W.Z)(e.shapeInfo.texShape,2),i=a[0],o=a[1];if(1===i&&1===o)return"\n      float ".concat(r,"() {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=S3(n);if(t)return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ");var u=(0,W.Z)(e.shapeInfo.texShape,2),c=u[0],l=u[1];return"\n    float ".concat(r,"() {\n      vec2 uv = uvFromFlat(").concat(c,", ").concat(l,", ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function I3(e,t){var n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int index) {\n        ").concat(R3(e),"\n      }\n    ");var a=e.shapeInfo.texShape,i=a[0],o=a[1];if(1===o&&1===i)return"\n      float ".concat(r,"(int index) {\n        return sampleTexture(").concat(n,", halfCR);\n      }\n    ");var s=S3(n);return 1===o?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[0]));\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2(0.5, (float(index + ").concat(s,") + 0.5) / ").concat(i,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):1===i?t?"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / float(").concat(n,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):"\n      float ".concat(r,"(int index) {\n        vec2 uv = vec2((float(index + ").concat(s,") + 0.5) / ").concat(o,".0, 0.5);\n        return sampleTexture(").concat(n,", uv);\n      }\n    "):t?"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(n,"TexShape[0], ").concat(n,"TexShape[1], index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  "):"\n    float ".concat(r,"(int index) {\n      vec2 uv = uvFromFlat(").concat(i,", ").concat(o,", index + ").concat(s,");\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function C3(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape;if(null!=i&&rW(n,i)){if(t)return"\n      float ".concat(a,"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var o=i[0],s=i[1];return"\n    float ".concat(a,"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(").concat(s,".0, ").concat(o,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}var u=lW(n),c=u.newShape,l=u.keptDims,d=c;if(d.length<n.length){var f=B3(e,d);return"\n      ".concat(b3(f,t),"\n      float ").concat(a,"(int row, int col) {\n        return ").concat(a,"(").concat(j3(["row","col"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(").concat(n[1],", 1)));\n        ").concat(R3(e),"\n      }\n    ");var p=i[0],h=i[1],v=S3(r);return 1===h?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(").concat(r,"TexShape[0]));\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):1===p?t?"\n      float ".concat(a,"(int row, int col) {\n        float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(r,"Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(").concat(r,"TexShape[1]), 0.5);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col) {\n      float index = dot(vec3(row, col, ").concat(v,"), vec3(").concat(n[1],", 1, 1));\n      vec2 uv = vec2((index + 0.5) / ").concat(h,".0, 0.5);\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):t?"\n      float ".concat(a,"(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(r,"Shape[1] + col + ").concat(v,";\n        vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n  float ".concat(a,"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ").concat(n[1]," + col + ").concat(v,";\n    vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n    return sampleTexture(").concat(r,", uv);\n  }\n")}function N3(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],s=lW(n),u=s.newShape,c=s.keptDims,l=u;if(l.length<n.length){var d=B3(e,l);return"\n        ".concat(b3(d,t),"\n        float ").concat(a,"(int row, int col, int depth) {\n          return ").concat(a,"(").concat(j3(["row","col","depth"],c),");\n        }\n      ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(").concat(i,", ").concat(o,", 1)));\n        ").concat(R3(e),"\n      }\n    ");var f=e.shapeInfo.texShape,p=f[0],h=f[1],v=e.shapeInfo.flatOffset;if(h===i&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        int stride1 = ").concat(r,"Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n        float ".concat(a,"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(").concat(o,", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(").concat(h,".0, ").concat(p,".0);\n          return sampleTexture(").concat(r,", uv);\n        }\n      ");if(h===o&&null==v)return t?"\n      float ".concat(a,"(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(").concat(r,"Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n    float ".concat(a,"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(").concat(n[1],", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(").concat(h,".0, ").concat(p,".0);\n      return sampleTexture(").concat(r,", uv);\n    }\n  ");var m=S3(r);return t?"\n    float ".concat(a,"(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ").concat(r,"Shape[1] * ").concat(r,"Shape[2];\n      int stride1 = ").concat(r,"Shape[2];\n      int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index);\n      return sampleTexture(").concat(r,", uv);\n    }\n    "):"\n      float ".concat(a,"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ").concat(i," + col * ").concat(o," + depth + ").concat(m,";\n        vec2 uv = uvFromFlat(").concat(p,", ").concat(h,", index);\n        return sampleTexture(").concat(r,", uv);\n      }\n  ")}function A3(e,t){var n=e.shapeInfo.logicalShape,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,s=n[1]*o,u=lW(n),c=u.newShape,l=u.keptDims;if(c.length<n.length){var d=B3(e,c);return"\n      ".concat(b3(d,t),"\n      float ").concat(a,"(int row, int col, int depth, int depth2) {\n        return ").concat(a,"(").concat(j3(["row","col","depth","depth2"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(").concat(s,", ").concat(o,", ").concat(i,", 1)));\n        ").concat(R3(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],v=p[1],m="int stride2 = ".concat(r,"Shape[3];"),y="int stride1 = ".concat(r,"Shape[2] * stride2;"),g="int stride0 = ".concat(r,"Shape[1] * stride1;");if(v===s&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        ").concat(m,"\n        ").concat(y,"\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(").concat(o,", ").concat(i,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");if(v===i&&null==f)return t?"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(r,"Shape[1] * ").concat(r,"Shape[2], ").concat(r,"Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(r,"TexShape[1], ").concat(r,"TexShape[0]);\n        return sampleTexture(").concat(r,", uv);\n      }\n    "):"\n      float ".concat(a,"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(").concat(n[1]*n[2],", ").concat(n[2],", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(r,", uv);\n      }\n    ");var b=S3(r);return t?"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ").concat(m,"\n      ").concat(y,"\n      ").concat(g,"\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(").concat(r,"TexShape[0], ").concat(r,"TexShape[1], index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  "):"\n    float ".concat(a,"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," +\n          depth * ").concat(i," + depth2;\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(v,", index + ").concat(b,");\n      return sampleTexture(").concat(r,", uv);\n    }\n  ")}function O3(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=lW(t),c=u.newShape,l=u.keptDims;if(c.length<t.length){var d=B3(e,c);return"\n      ".concat(b3(d),"\n      float ").concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        return ").concat(r,"(").concat(j3(["row","col","depth","depth2","depth3"],l),");\n      }\n    ")}if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(s,", ").concat(o,", ").concat(i,", ").concat(a,")) +\n          depth3;\n        ").concat(R3(e),"\n      }\n    ");var f=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,h=p[0],v=p[1];if(v===s&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(").concat(o,", ").concat(i,", ").concat(a,", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(v===a&&null==f)return"\n      float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3],",\n               ").concat(t[2]*t[3],", ").concat(t[3],", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(v,".0, ").concat(h,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var m=S3(n);return"\n    float ".concat(r,"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(s," + col * ").concat(o," + depth * ").concat(i," +\n          depth2 * ").concat(a," + depth3 + ").concat(m,";\n      vec2 uv = uvFromFlat(").concat(h,", ").concat(v,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function P3(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=lW(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=B3(e,i);return"\n      ".concat(b3(s),"\n      float ").concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ").concat(r,"(").concat(j3(["row","col","depth","depth2","depth3","depth4"],o),");\n      }\n    ")}var u=t[5],c=t[4]*u,l=t[3]*c,d=t[2]*l,f=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(").concat(f,", ").concat(d,", ").concat(l,", ").concat(c,")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(").concat(u,", 1)));\n        ").concat(R3(e),"\n      }\n    ");var p=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,v=h[0],m=h[1];if(m===f&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(").concat(d,", ").concat(l,", ").concat(c,", ").concat(u,")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");if(m===u&&null==p)return"\n      float ".concat(r,"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(").concat(t[1]*t[2]*t[3]*t[4],",\n               ").concat(t[2]*t[3]*t[4],",\n               ").concat(t[3]*t[4],",\n               ").concat(t[4],")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(").concat(m,".0, ").concat(v,".0);\n        return sampleTexture(").concat(n,", uv);\n      }\n    ");var y=S3(n);return"\n    float ".concat(r,"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ").concat(f," + col * ").concat(d," + depth * ").concat(l," +\n          depth2 * ").concat(c," + depth3 * ").concat(u," + depth4 + ").concat(y,";\n      vec2 uv = uvFromFlat(").concat(v,", ").concat(m,", index);\n      return sampleTexture(").concat(n,", uv);\n    }\n  ")}function R3(e){var t=e.name,n=nW(e.shapeInfo.logicalShape);return n<2?"return ".concat(t,";"):"\n    for (int i = 0; i < ".concat(n,"; i++) {\n      if (i == index) {\n        return ").concat(t,"[i];\n      }\n    }\n  ")}function D3(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=y3(e.shapeInfo.logicalShape,t.logicalShape),c=L3(s),l=s-o,d=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords.".concat(d[e+l]," = 0;")})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(d[t+l])})).join(", ");var p="return outputValue;",h=1===nW(e.shapeInfo.logicalShape),v=1===nW(t.logicalShape);if(1!==o||h||v){if(h&&!v)p=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=o-2,y=o-1;u.indexOf(m)>-1&&u.indexOf(y)>-1?p="return vec4(outputValue.x);":u.indexOf(m)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 ".concat(i,"() {\n      ").concat(c," coords = getOutputCoords();\n      ").concat(n,"\n      vec4 outputValue = get").concat(a,"(").concat(f,");\n      ").concat(p,"\n    }\n  ")}function M3(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&rW(o,i))return"\n      float ".concat(a,"() {\n        return sampleTexture(").concat(n,", resultUV);\n      }\n    ");var c,l=L3(u),d=y3(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,p=["x","y","z","w","u","v"];c=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords.".concat(p[e+f]," = 0;")})).join("\n");var h="";return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords.".concat(p[t+f])})).join(", "),"\n    float ".concat(a,"() {\n      ").concat(l," coords = getOutputCoords();\n      ").concat(c,"\n      return get").concat(r,"(").concat(h,");\n    }\n  ")}function L3(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank ".concat(e," is not yet supported"))}function F3(e,t,n){var r=lW(t),a=r.newShape,i=r.keptDims,o=t.length,s=e&&3===o&&1===t[0],u=s?t.slice(1):a,c=!e&&o>1&&!rW(t,n)&&a.length<o||s;return{useSqueezeShape:c,uniformShape:c?u:t,keptDims:i}}function B3(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function j3(e,t){return t.map((function(t){return e[t]})).join(", ")}function U3(e,t,n,r){var a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=g3(a,o,t),u=U2(e.gl,s),c=e.createProgram(u),l=null,d=e.getUniformLocation(c,"NAN",!1);1===RW().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(c,"INFINITY",!1));for(var f,p,h,v=!1,m={},y={},g={},b=0;b<t.variableNames.length;b++){var x=t.variableNames[b];m[x]=e.getUniformLocation(c,x,v),m["offset".concat(x)]=e.getUniformLocation(c,"offset".concat(x),v),t.enableShapeUniforms&&(y["".concat(x,"Shape")]=e.getUniformLocation(c,"".concat(x,"Shape"),v),g["".concat(x,"TexShape")]=e.getUniformLocation(c,"".concat(x,"TexShape"),v))}t.enableShapeUniforms&&(f=e.getUniformLocation(c,"outShape",v),h=e.getUniformLocation(c,"outShapeStrides",v),p=e.getUniformLocation(c,"outTexShape",v));var k=[];return t.customUniforms&&t.customUniforms.forEach((function(t,n){k[n]=e.getUniformLocation(c,t.name,v)})),{program:t,fragmentShader:u,source:s,webGLProgram:c,uniformLocations:m,customUniformLocations:k,inShapeInfos:i,outShapeInfo:o,infLoc:l,nanLoc:d,inShapesLocations:y,inTexShapesLocations:g,outShapeLocation:f,outShapeStridesLocation:h,outTexShapeLocation:p}}function V3(e,t){if(e.length!==t.length)throw Error("Binary was compiled with ".concat(e.length," inputs, but ")+"was executed with ".concat(t.length," inputs"));e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!rW(r,i))throw Error("Binary was compiled with different shapes than "+"the current args. Shapes ".concat(r," and ").concat(i," must match"));if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!rW(o,s))throw Error("Binary was compiled with different texture shapes than the"+" current args. Shape ".concat(o," and ").concat(s," must match"))}}))}function W3(e,t,n,r,a){t.program.enableShapeUniforms||(V3(t.inShapeInfos,n),V3([t.outShapeInfo],[r]));var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):e.setOutputMatrixTexture(i.texture,o[0],o[1]),e.setProgram(t.webGLProgram),1===RW().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset".concat(a)],s=t.inShapesLocations["".concat(a,"Shape")],u=t.inTexShapesLocations["".concat(a,"TexShape")];if(s){var c=F3(t.program.packedInputs,n.shape,n.texData.texShape).uniformShape;switch(c.length){case 1:e.gl.uniform1iv(s,new Int32Array(c));break;case 2:e.gl.uniform2iv(s,new Int32Array(c));break;case 3:e.gl.uniform3iv(s,new Int32Array(c));break;case 4:e.gl.uniform4iv(s,new Int32Array(c))}}if(u&&e.gl.uniform2i(u,n.texData.texShape[0],n.texData.texShape[1]),null!=i)if(n.isUniform)if(nW(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var l=n.uniformValues;l instanceof Float32Array||(l=new Float32Array(l)),e.gl.uniform1fv(i,l)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture.texture,i,r)}));var s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){var u=xW(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(u));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(u));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(u))}}t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&a&&t.program.customUniforms.forEach((function(n,r){var i=t.customUniformLocations[r],o=a[r];if("float"===n.type)e.gl.uniform1fv(i,o);else if("vec2"===n.type)e.gl.uniform2fv(i,o);else if("vec3"===n.type)e.gl.uniform3fv(i,o);else if("vec4"===n.type)e.gl.uniform4fv(i,o);else if("int"===n.type)e.gl.uniform1iv(i,o);else if("ivec2"===n.type)e.gl.uniform2iv(i,o);else if("ivec3"===n.type)e.gl.uniform3iv(i,o);else{if("ivec4"!==n.type)throw Error("uniform type ".concat(n.type," is not supported yet."));e.gl.uniform4iv(i,o)}})),e.executeProgram()}function z3(e,t,n){var r="";t.concat(n).forEach((function(t){var a=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){var i=t.texData.texShape,o=F3(e.packedInputs,t.shape,i),s=o.useSqueezeShape,u=o.uniformShape,c=o.keptDims,l="",d="",f="";if(1===u.length&&e.packedInputs){var p=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];l="".concat(p[0]>1,"_").concat(p[1]>1)}else if(2!==u.length||e.packedInputs){if(u.length>2&&!e.packedInputs){var h=xW(u);f="".concat(h[0]===i[1],"_").concat(h[h.length-1]===i[1])}}else d="".concat(u[0]>1,"_").concat(u[1]>1);var v=t.shape.length,m=2===u.length&&rW(t.shape,i),y=1===nW(t.shape),g=QH(t.shape,n.shape),b=!e.packedInputs&&v===n.shape.length&&rW(i,n.texData.texShape),x=e.packedInputs||u.length>2?"":"".concat(i[0]>1,"_").concat(i[1]>1);r+="".concat(v,"_").concat(b,"_").concat(s?c:"","_").concat(u.length,"_").concat(y,"_").concat(g,"_").concat(m,"_").concat(l,"_").concat(d,"_").concat(f,"_").concat(x,"_").concat(a)}else{var k=t.isUniform?"uniform":t.texData.texShape;r+="".concat(t.shape,"_").concat(k,"_").concat(a)}}));var a=e.userCode,i=e.constructor.name;return i+="_"+r+"_"+a+"".concat(RW().getNumber("WEBGL_VERSION"))}function q3(e){return RW().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var K3=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=I2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=d3();this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?p3(["r","c","d"],t):f3(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),G3=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=I2.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];var n=d3();this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length),this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ".concat(this.enableShapeUniforms?p3(["r","c","d"],t):f3(["r","c","d"],t),"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),H3=N((function e(t){I(this,e),this.variableNames=["A"],this.outTexUsage=C2.DOWNLOAD;var n=d3();this.outputShape=t,this.userCode="\n      ".concat(m3,"\n\n      void main() {\n        float x = getAAtOutCoords();\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Z3=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=C2.DOWNLOAD;var n=d3();this.outputShape=t,this.userCode="\n      ".concat(m3,"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ").concat(n.output," = encode_float(x);\n      }\n    ")})),Y3=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I(this,e),this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=d3();this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length);var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v3(t),"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / texShape[1];\n        int c = imod(flatIndex, texShape[1]);\n        vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n        vec4 values = ").concat(r.texture2D,"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        ").concat(r.output," = vec4(").concat(a,", 0., 0., 0.);\n      }\n    ")})),X3=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];var r=d3();this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length);var a="",i="result";n&&(i="floor(result * 255. + 0.5)");for(var o=0;o<=1;o++)for(var s=0;s<=1;s++){var u=2*o+s;a+="\n          localCoords = coords;\n          if(localCoords[2] + ".concat(s," < ").concat(this.enableShapeUniforms?"outShape[2]":"".concat(t[2]),") {\n          localCoords[2] += ").concat(s,";\n          if (localCoords[1] + ").concat(o," < ").concat(this.enableShapeUniforms?"outShape[1]":"".concat(t[1]),") {\n            localCoords[1] += ").concat(o,";\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ").concat(r.texture2D,"(A, uv);\n\n            if (offset == 0) {\n              result[").concat(u,"] = values[0];\n            } else if (offset == 1) {\n              result[").concat(u,"] = values[1];\n            } else if (offset == 2) {\n              result[").concat(u,"] = values[2];\n            } else {\n              result[").concat(u,"] = values[3];\n            }\n          }\n        }\n        ")}this.userCode="\n        ".concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v3(t),"\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ").concat(a,"\n\n          ").concat(r.output," = ").concat(i,";\n        }\n    ")}));function Q3(e){var t=d3();return function(e,t){var n=J2(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(F2(e,(function(){return e.shaderSource(n,t)})),F2(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,"".concat(t.version,"\n    precision highp float;\n    ").concat(t.attribute," vec3 clipSpacePos;\n    ").concat(t.attribute," vec2 uv;\n    ").concat(t.varyingVs," vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }"))}function J3(e){return function(e,t){var n=J2(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return F2(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),F2(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function $3(e){return function(e,t){var n=J2(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return F2(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),F2(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function e4(e,t,n,r,a,i){!function(e,t){var n=RW().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="[".concat(e,"x").concat(t,"]");throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n){var a="[".concat(e,"x").concat(t,"]"),i="[".concat(n,"x").concat(n,"]");throw new Error("Requested texture size "+a+" greater than WebGL maximum on this browser / GPU "+i+".")}}(t,n);var o=function(e){return J2(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return F2(e,(function(){return e.bindTexture(s,o)})),F2(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),F2(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),F2(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),F2(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),1===RW().getNumber("WEBGL_VERSION")?F2(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})):F2(e,(function(){return e.texStorage2D(s,1,r,t,n)})),F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),{texture:o,texShape:[n,t]}}function t4(e){return e.internalFormatFloat}function n4(e){return e.internalFormatHalfFloat}function r4(e){return e.downloadTextureFormat}function a4(e){return e.internalFormatPackedFloat}function i4(e){return e.internalFormatPackedHalfFloat}function o4(e,t,n,r,a,i,o,s){var u=e,c=new Float32Array(function(e,t){var n=M2(e,t),r=(0,W.Z)(n,2);return r[0]*r[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}var s4=function(){function e(t){I(this,e),this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=RW().getNumber("WEBGL_VERSION");null!=t?(this.gl=t,function(e,t){A2[e]=t}(n,t)):this.gl=P2(n);var r="WEBGL_color_buffer_float",a="EXT_color_buffer_half_float";if(1===RW().getNumber("WEBGL_VERSION")){var i="OES_texture_half_float";if(this.textureFloatExtension=j2(this.gl,"OES_texture_float"),i3(this.gl,i))this.textureHalfFloatExtension=j2(this.gl,i);else if(RW().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),i3(this.gl,a))this.colorBufferHalfFloatExtension=j2(this.gl,a);else if(RW().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",i3(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!i3(this.gl,a))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(a)}this.vertexBuffer=J3(this.gl),this.indexBuffer=$3(this.gl),this.framebuffer=function(e){return J2(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=L2(this.gl,this.textureHalfFloatExtension)}return N(e,[{key:"debug",get:function(){return RW().getBool("DEBUG")}},{key:"dispose",value:function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;F2(t,(function(){return t.finish()})),F2(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),F2(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),F2(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),F2(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),F2(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}}},{key:"createFloat32MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=R2(t,n),i=(0,W.Z)(a,2);return e4(e,i[0],i[1],t4(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"createFloat16MatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=R2(t,n),i=(0,W.Z)(a,2);return e4(e,i[0],i[1],n4(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createUnsignedBytesMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=R2(t,n),i=(0,W.Z)(a,2);return e4(e,i[0],i[1],r4(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)}},{key:"uploadPixelDataToTexture",value:function(e,t){this.throwIfDisposed(),function(e,t,n){F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?2===RW().getNumber("WEBGL_VERSION")?F2(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)})):F2(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):2===RW().getNumber("WEBGL_VERSION")?F2(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)})):F2(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)}},{key:"uploadDenseMatrixToTexture",value:function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),2===RW().getNumber("WEBGL_VERSION")?F2(e,(function(){return e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,o)})):F2(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),F2(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)}},{key:"createFloat16PackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=M2(t,n),i=(0,W.Z)(a,2);return e4(e,i[0],i[1],i4(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)}},{key:"createPackedMatrixTexture",value:function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=M2(t,n),i=(0,W.Z)(a,2);return e4(e,i[0],i[1],a4(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)}},{key:"deleteMatrixTexture",value:function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(X2(this.gl,this.framebuffer),this.outputTexture=null),F2(this.gl,(function(){return t.gl.deleteTexture(e)}))}},{key:"downloadByteEncodedFloatMatrixFromOutputTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=R2(t,n),i=(0,W.Z)(a,2),o=i[0],s=i[1],u=new Uint8Array(t*n*4);return F2(e,(function(){return e.readPixels(0,0,o,s,r.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}(r.gl,t,n,r.textureConfig)}))}},{key:"downloadPackedMatrixFromBuffer",value:function(e,t,n,r,a,i){return o4(this.gl,e,0,0,0,a,i,this.textureConfig)}},{key:"downloadFloat32MatrixFromBuffer",value:function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)}},{key:"createBufferFromTexture",value:function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();F2(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return F2(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),F2(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),F2(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}},{key:"createAndWaitForFence",value:function(){var e=this.createFence(this.gl);return this.pollFence(e)}},{key:"createFence",value:function(e){var t,n,r=this;if(RW().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}}},{key:"downloadMatrixFromPackedTexture",value:function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return F2(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))}},{key:"createProgram",value:function(e){var t=this;this.throwIfDisposed();var n=this.gl;null==this.vertexShader&&(this.vertexShader=Q3(n));var r=function(e){return J2(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(n);return F2(n,(function(){return n.attachShader(r,t.vertexShader)})),F2(n,(function(){return n.attachShader(r,e)})),function(e,t){if(F2(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(n,r),this.debug&&q2(n,r),this.vertexAttrsAreBound||(this.setProgram(r),this.vertexAttrsAreBound=function(e,t,n){return F2(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),K2(e,t,"clipSpacePos",n,3,20,0)&&K2(e,t,"uv",n,2,20,12)}(n,this.program,this.vertexBuffer)),r}},{key:"deleteProgram",value:function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&F2(this.gl,(function(){return t.gl.deleteProgram(e)}))}},{key:"setProgram",value:function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&q2(this.gl,this.program),F2(this.gl,(function(){return t.gl.useProgram(e)}))}},{key:"getUniformLocation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.throwIfDisposed(),n?G2(this.gl,e,t):H2(this.gl,e,t)}},{key:"getAttributeLocation",value:function(e,t){var n=this;return this.throwIfDisposed(),F2(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))}},{key:"getUniformLocationNoThrow",value:function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}},{key:"setInputMatrixTexture",value:function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Z2(this.gl,e,t,n)}},{key:"setOutputMatrixTexture",value:function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}},{key:"setOutputPackedMatrixTexture",value:function(e,t,n){this.throwIfDisposed();var r=M2(t,n),a=(0,W.Z)(r,2),i=a[0],o=a[1];this.setOutputMatrixTextureDriver(e,i,o)}},{key:"setOutputMatrixWriteRegion",value:function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}},{key:"setOutputPackedMatrixWriteRegion",value:function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}},{key:"debugValidate",value:function(){null!=this.program&&q2(this.gl,this.program),Q2(this.gl)}},{key:"executeProgram",value:function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),F2(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))}},{key:"blockUntilAllProgramsCompleted",value:function(){var e=this;this.throwIfDisposed(),F2(this.gl,(function(){return e.gl.finish()}))}},{key:"getQueryTimerExtension",value:function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=j2(this.gl,2===RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}},{key:"getQueryTimerExtensionWebGL2",value:function(){return this.getQueryTimerExtension()}},{key:"getQueryTimerExtensionWebGL1",value:function(){return this.getQueryTimerExtension()}},{key:"beginQuery",value:function(){if(2===RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a}},{key:"endQuery",value:function(){if(2!==RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}}},{key:"waitForQueryAndGetTime",value:function(){var e=j(G().mark((function e(t){var n=this;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sW((function(){return n.disposed||n.isQueryAvailable(t,RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getQueryTime",value:function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}},{key:"isQueryAvailable",value:function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}},{key:"pollFence",value:function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))}},{key:"pollItems",value:function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}},{key:"addItemToPoll",value:function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||sW((function(){return n.pollItems(),0===n.itemsToPoll.length}))}},{key:"bindTextureToFrameBuffer",value:function(e){this.throwIfDisposed(),Y2(this.gl,e,this.framebuffer),this.debug&&Q2(this.gl)}},{key:"unbindTextureToFrameBuffer",value:function(){null!=this.outputTexture?(Y2(this.gl,this.outputTexture,this.framebuffer),this.debug&&Q2(this.gl)):X2(this.gl,this.framebuffer)}},{key:"downloadMatrixDriver",value:function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n}},{key:"setOutputMatrixTextureDriver",value:function(e,t,n){this.throwIfDisposed();var r=this.gl;Y2(r,e,this.framebuffer),this.debug&&Q2(r),this.outputTexture=e,F2(r,(function(){return r.viewport(0,0,t,n)})),F2(r,(function(){return r.scissor(0,0,t,n)}))}},{key:"setOutputMatrixWriteRegionDriver",value:function(e,t,n,r){var a=this;this.throwIfDisposed(),F2(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))}},{key:"throwIfDisposed",value:function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}},{key:"throwIfNoProgram",value:function(){if(null==this.program)throw new Error("No GPU program is currently set.")}}]),e}();function u4(e){return function(t,n,r,a,i){var o=JH(t,n),s=o.length,u=xW(o),c=dW(i,nW(o)),l=t.length,d=n.length,f=xW(t),p=xW(n),h=QH(t,o),v=QH(n,o);if(h.length+v.length===0)for(var m=0;m<c.length;++m)c[m]=e(r[m%r.length],a[m%a.length]);else for(var y=function(t){var n=IW(t,s,u),i=n.slice(-l);h.forEach((function(e){return i[e]=0}));var o=EW(i,l,f),m=n.slice(-d);v.forEach((function(e){return m[e]=0}));var y=EW(m,d,p);c[t]=e(r[o],a[y])},g=0;g<c.length;++g)y(g);return[c,o]}}function c4(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&JV("complex64"!==e.dtype,(function(){return"".concat(t," does not support complex64 tensors in the CPU backend.")}))}))}function l4(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}function d4(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"float32";if("complex64"===n){var r=d4(e,t,"float32"),a=d4(e,t,"float32");return l4({inputs:{real:r,imag:a},backend:e})}var i=TW(nW(t),n);return e.makeTensorInfo(t,n,i)}function f4(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}function p4(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}function h4(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return f4({inputs:{x:a},backend:n});var o=d4(n,a.shape,a.dtype),s=h4({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=l4({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var c=p4({inputs:{input:a},backend:n}),l=h4({inputs:{x:c},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(c),l}if(!pW(a.dtype,i)){var d=f4({inputs:{x:a},backend:n});return{dataId:d.dataId,shape:d.shape,dtype:i}}if("int32"===i){var f=n.data.get(a.dataId).values,p=Int32Array.from(f);return n.makeTensorInfo(a.shape,"int32",p)}if("bool"===i){var h=n.data.get(a.dataId).values,v=JK([0],a.dtype),m=u4((function(e,t){return e!==t?1:0}))(a.shape,[],h,v,"bool"),y=(0,W.Z)(m,2),g=y[0],b=y[1];return n.makeTensorInfo(b,"bool",g)}throw new Error("Error in Cast: failed to cast ".concat(a.dtype," to ").concat(i))}function v4(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;c4([o,s],e);var c=u.data.get(o.dataId).values,l=u.data.get(s.dataId).values,d="string"===o.dtype?y0(c):c,f="string"===o.dtype?y0(l):l,p=r||o.dtype,h=t(o.shape,s.shape,d,f,p),v=(0,W.Z)(h,2),m=v[0],y=v[1];return u.makeTensorInfo(y,p,m)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var c=h4({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),l=u.data.get(c.dataId),d=l.complexTensorInfos.real,f=l.complexTensorInfos.imag,p=u.data.get(d.dataId).values,h=u.data.get(f.dataId).values,v=h4({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),m=u.data.get(v.dataId),y=m.complexTensorInfos.real,g=m.complexTensorInfos.imag,b=u.data.get(y.dataId).values,x=u.data.get(g.dataId).values,k=n(o.shape,s.shape,p,h,b,x),w=(0,W.Z)(k,3),_=w[0],T=w[1],S=w[2],E=u.makeTensorInfo(S,"float32",_),I=u.makeTensorInfo(S,"float32",T),C=l4({inputs:{real:E,imag:I},backend:u});return u.disposeIntermediateTensorInfo(c),u.disposeIntermediateTensorInfo(v),u.disposeIntermediateTensorInfo(E),u.disposeIntermediateTensorInfo(I),C}var N=u.data.get(o.dataId).values,A=u.data.get(s.dataId).values,O=r||o.dtype,P=t(o.shape,s.shape,N,A,O),R=(0,W.Z)(P,2),D=R[0],M=R[1];return u.makeTensorInfo(M,O,D)}}function m4(e){return function(t,n,r,a,i,o){var s=JH(t,n),u=nW(s),c=s.length,l=xW(s),d=dW("float32",u),f=dW("float32",u),p=QH(t,s),h=QH(n,s),v=J$(r,a),m=J$(i,o),y=t.length,g=xW(t),b=n.length,x=xW(n);if(p.length+h.length===0)for(var k=0;k<d.length;k++){var w=k%v.length,_=k%m.length,T=e(v[2*w],v[2*w+1],m[2*_],m[2*_+1]);d[k]=T.real,f[k]=T.imag}else for(var S=function(t){var n=IW(t,c,l),r=n.slice(-y);p.forEach((function(e){return r[e]=0}));var a=EW(r,y,g),i=n.slice(-b);h.forEach((function(e){return i[e]=0}));var o=EW(i,b,x),s=e(v[2*a],v[2*a+1],m[2*o],m[2*o+1]);d[t]=s.real,f[t]=s.imag},E=0;E<d.length;E++)S(E);return[d,f,s]}}var y4=u4((function(e,t){return e+t})),g4=m4((function(e,t,n,r){return{real:e+n,imag:t+r}}));v4(VW,y4,g4);function b4(e){return function(t,n,r){for(var a=dW(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}function x4(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(c4(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,c=u.data.get(s.dataId).values,l=nW(s.shape),d=n||s.dtype,f=fW(d,l),p=0;p<l;++p)f[p]=t(c[p],i);return u.makeTensorInfo(s.shape,d,f)}}function k4(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(c4(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,c=u.data.get(s.dataId).values,l=n||s.dtype,d=t(c,l,i);return u.makeTensorInfo(s.shape,l,d)}}var w4=b4((function(e){return Math.ceil(e)}));k4(iz,w4);function _4(e,t,n,r){var a=fW(n,nW(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=nW(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?y0(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,c=0;c<e.shape[1];++c)a[u+c]=r[i++];o+=e.shape[1]}))}return a}var T4=u4((function(e,t){return e===t?1:0})),S4=(v4(Nz,T4,null,"bool"),b4((function(e){return Math.exp(e)}))),E4=(k4(Az,S4,"float32"),b4((function(e){return Math.expm1(e)}))),I4=(k4(Pz,E4),b4((function(e){return Math.floor(e)})));k4(Mz,I4);var C4=u4((function(e,t){return e>t?1:0})),N4=(v4(Uz,C4,null,"bool"),u4((function(e,t){return e>=t?1:0}))),A4=(v4(Vz,N4,null,"bool"),u4((function(e,t){return e<t?1:0}))),O4=(v4(Yz,A4,null,"bool"),u4((function(e,t){return e<=t?1:0})));v4(Xz,O4,null,"bool");var P4=b4((function(e){return Math.log(e)}));k4(Jz,P4);var R4=u4((function(e,t){return Math.max(e,t)})),D4=(v4(iq,R4),u4((function(e,t){return Math.min(e,t)}))),M4=(v4(dq,D4),u4((function(e,t){return e*t}))),L4=m4((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}}));v4(hq,M4,L4);function F4(e,t,n){var r=QK(-1,n);return M4([],t,r,e,n)}var B4=u4((function(e,t){return e!==t?1:0}));v4(mq,B4,null,"bool");function j4(e,t,n,r,a){for(var i=t.length,o=nW(t),s=xW(t),u=xW(a),c=dW(n,nW(a)),l=0;l<o;++l){for(var d=IW(l,i,s),f=new Array(d.length),p=0;p<f.length;p++)f[p]=d[r[p]];c[EW(f,i,u)]=e[l]}return c}function U4(e,t,n,r){for(var a=fX(e,r),i=(0,W.Z)(a,2),o=i[0],s=i[1],u=wG(t,"int32"),c=TW(nW(o),u),l=nW(s),d=0;d<c.length;++d){for(var f=d*l,p=1,h=0;h<l;++h)p*=n[f+h];c[d]=p}return{outVals:c,outShape:o,outDtype:u}}function V4(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return TW(0,r);var a=TW(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}var W4=b4((function(e){return 1/Math.sqrt(e)})),z4=(k4(Fq,W4),b4((function(e){return 1/(1+Math.exp(-e))})));x4(Kq,(function(e){return 1/(1+Math.exp(-e))}));function q4(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}function K4(e,t,n,r,a){var i=sZ(r,t,n),o=nW(n),s=xW(r);if(i){var u=uZ(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var c=MH(r,a,"string"===a?y0(e):e),l=MH(n,a),d=0;d<l.size;++d){var f=l.indexToLoc(d),p=f.map((function(e,n){return e+t[n]}));l.set.apply(l,[c.get.apply(c,(0,Ze.Z)(p))].concat((0,Ze.Z)(f)))}return"string"===a?g0(l.values):l.values}var G4=b4((function(e){return Math.sqrt(e)}));x4(Hq,(function(e){return Math.sqrt(e)}));var H4=function(){function e(t,n,r,a,i,o){I(this,e),this.separator=eG(t),this.nGramWidths=n,this.leftPad=eG(r),this.rightPad=eG(a),this.padWidth=i,this.preserveShort=o}return N(e,[{key:"getPadWidth",value:function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}},{key:"getNumNGrams",value:function(e,t){var n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}},{key:"createNGrams",value:function(e,t,n,r,a,i){for(var o=this,s=function(s){var u=o.getPadWidth(i),c=Math.max(0,u-s),l=Math.max(0,u-(a-(s+1))),d=i-(c+l),f=t+(c>0?0:s-u),p=0;p+=c*o.leftPad.length;for(var h=0;h<d;++h)p+=e[f+h].length;p+=l*o.rightPad.length,p+=(c+l+d-1)*o.separator.length,n[r+s]=new Uint8Array(p);for(var v=n[r+s],m=0,y=function(e){return e.forEach((function(e){return v[m++]=e}))},g=0;g<c;++g)y(o.leftPad),y(o.separator);for(var b=0;b<d-1;++b)y(e[f+b]),y(o.separator);if(d>0){y(e[f+d-1]);for(var x=0;x<l;++x)y(o.separator),y(o.rightPad)}else{for(var k=0;k<l-1;++k)y(o.rightPad),y(o.separator);y(o.rightPad)}},u=0;u<a;++u)s(u)}},{key:"compute",value:function(e,t){var n=this,r=e.length,a=t.length;if(a>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var o=1;o<a;++o){var s=t[o]>=i;if(!(s=s&&t[o]<=r))throw new Error("Invalid split value ".concat(t[o],", must be in [").concat(i,", ").concat(r,"]"));i=t[o]}if(i!==r)throw new Error("Last split value must be data size. Expected ".concat(r,", got ").concat(i))}var u=a-1,c=fW("int32",a);if(0===r||0===a){for(var l=new Array(r),d=0;d<=u;++d)c[d]=0;return[l,c]}c[0]=0;for(var f=function(e){var r=t[e]-t[e-1],a=0;n.nGramWidths.forEach((function(e){a+=n.getNumNGrams(r,e)})),n.preserveShort&&r>0&&0===a&&(a=1),c[e]=c[e-1]+a},p=1;p<=u;++p)f(p);for(var h=new Array(c[u]),v=function(r){var a=t[r],i=c[r];if(n.nGramWidths.forEach((function(o){var s=t[r+1]-t[r],u=n.getNumNGrams(s,o);n.createNGrams(e,a,h,i,u,o),i+=u})),n.preserveShort&&i===c[r]){var o=t[r+1]-t[r];if(0===o)return"continue";var s=o+2*n.padWidth;n.createNGrams(e,a,h,i,1,s)}},m=0;m<u;++m)v(m);return[h,c]}}]),e}();function Z4(e,t,n,r){if(e.length)if(0!==t.length)if(1!==t.length){for(var a=0,i=0;i<e.length+1;i++)if(i===e.length||-1!==t.indexOf(e[i])){var o=e.subarray(a,i);n&&0===o.length||r.push(o),a=i+1}}else{for(var s=t[0],u=e.indexOf(s);-1!==u;){var c=e.subarray(0,u);n&&0===c.length||r.push(c),u=(e=e.subarray(u+1)).indexOf(s)}n&&0===e.length||r.push(e)}else for(var l=0;l<e.length;++l)r.push(e.subarray(l,l+1))}var Y4=u4((function(e,t){return e-t})),X4=m4((function(e,t,n,r){return{real:e-n,imag:t-r}}));v4(cK,Y4,X4);var Q4=function(e,t){var n=t.value-e.value;return 0===n?e.index-t.index:n};function J4(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a)*Math.sign(i-a/2),c=Math.max(n,Math.floor(t-i*s/a+u)),l=Math.min(r,Math.floor(t+(a-i)*s/a+u));J4(e,t,c,l)}var d=e[t],f=n,p=r;for(XV(e,n,t),Q4(e[r],d)>0&&XV(e,n,r);f<p;){for(XV(e,f,p),f++,p--;Q4(e[f],d)<0;)f+=1;for(;Q4(e[p],d)>0;)p-=1}0===Q4(e[n],d)?XV(e,n,p):XV(e,p+=1,r),p<=t&&(n=p+1),t<=p&&(r=p-1)}}var $4=y4,e6=function(e,t,n,r,a){for(var i=nW(r),o=TW(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o},t6=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=e.shape[0],i=e.shape[1],o=MH([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var c=e.get(s,u);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,s,c):t.size>0?o.set(o.get(s,c)+t.get(s,u),s,c):o.set(o.get(s,c)+1,s,c))}return o},n6=w4,r6=_4,a6=T4,i6=S4,o6=E4,s6=I4,u6=function(e,t,n,r,a,i,o,s,u){for(var c=MH([r,i],n),l=0;l<r;l++){for(var d=[],f=0,p=0;p<a;p++){var h=e[l*a+p];f+=h*o[p],d.push(h)}if(f<0||f>=u/i)throw new Error("Invalid indices: ".concat(d," does not index into ").concat(s));for(var v=0;v<i;v++)c.values[l*i+v]=t.get.apply(t,(0,Ze.Z)(t.indexToLoc(f*i+v)))}return c},c6=function(e,t,n){for(var r=MH(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var c=e.locToIndex(i);0<=c&&c<e.values.length&&(r.values[a]=e.values[c])}return r},l6=C4,d6=N4,f6=A4,p6=O4,h6=function(e,t,n){var r=(t-e)/(n-1),a=TW(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a},v6=P4,m6=function(e,t,n,r){for(var a=dW(r,nW(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var c=e[o+u];(Number.isNaN(c)||c>s)&&(s=c)}a[i]=s}return a},y6=R4,g6=D4,b6=M4,x6=F4,k6=B4,w6=U4,_6=V4,T6=W4,S6=z4,E6=q4,I6=K4,C6=function(e,t,n,r,a,i,o){var s=t[0],u=i[0],c=new Array(u),l=new Array(s),d=t[1];if(0===u){if(0!==s)throw new Error(s0(s));return[fW(n,0),[0,d],fW(a,0),c,l]}for(var f=!0,p=0,h=new Array(u).fill(0),v=0;v<s;++v){var m=e[v*d];if(m<0)throw new Error(u0(v,m));if(m>=u)throw new Error(c0(v,m,u));++h[m],f=f&&m>=p,p=m}for(var y=!0,g=0;g<u;++g){var b=0===h[g];c[g]=b,y=y&&!b,h[g]=Math.max(h[g],1),g>0&&(h[g]+=h[g-1])}if(y&&f){for(var x=e,k=r,w=0;w<s;++w)l[w]=w;return[x,[s,d],k,c,l]}for(var _=h[u-1],T=fW(n,_*d),S=fW(a,_),E=new Array(u).fill(0),I=0;I<s;++I){var C=e[I*d],N=E[C],A=(0===C?0:h[C-1])+N;E[C]++;for(var O=0;O<d;++O)T[A*d+O]=e[I*d+O];S[A]=r[I],l[I]=A}for(var P=0;P<u;++P){if(0===E[P]){var R=0===P?0:h[P-1];T[R*d+0]=P;for(var D=1;D<d;++D)T[R*d+D]=0;S[R]=o}}return[T,[_,d],S,c,l]},N6=function(e,t,n,r,a){for(var i=nW(r),o=t[0],s=a.length,u=[],c=1,l=-1,d=0;d<s;++d){var f=a[d];if(-1===f){if(-1!==l)throw new Error(l0(l,d));l=d,u.push(1)}else{if(f<0)throw new Error(d0(d,f));c*=f,u.push(f)}}if(-1!==l){if(c<=0)throw new Error("reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero");var p=Math.trunc(i/c);if(c*p!==i)throw new Error(f0(r,u));u[l]=p}if(nW(u)!==i)throw new Error(p0(r,u));var h=r.length,v=[];if(h>0){v[h-1]=1;for(var m=h-2;m>=0;--m)v[m]=v[m+1]*r[m+1]}var y=[];if(s>0){y[s-1]=1;for(var g=s-2;g>=0;--g)y[g]=y[g+1]*u[g+1]}for(var b=fW(n,o*s),x=0;x<o;++x){for(var k=0,w=0;w<h;++w)k+=e[x*h+w]*v[w];for(var _=0;_<s;++_)b[x*s+_]=Math.trunc(k/y[_]),k%=y[_]}return[b,[o,s],u]},A6=function(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=r.length,u=[t[0],e.length/t[0]],c=u[1],l=s>0?a[s-1]+1:0,d=l;if(d<0)throw new Error("segment ids must be >= 0");var f=t.slice();f[0]=d;var p=f.reduce((function(e,t){return e*t}),1),h=fW(n,p);if(0===s)return d>0&&h.fill(o),[h,f];if(d<=0)throw new Error("segment ids must be >= 0");for(var v=0,m=1,y=0,g=a[v];;){var b=0;if(m<s){if(g===(b=a[m])){++m;continue}if(g>=b)throw new Error("segment ids are not increasing")}if(g<0||g>=d)throw new Error(h0(g,d));g>y&&h.fill(o,y*c,g*c);for(var x=v;x<m;++x){var k=r[x];if(k<0||k>=u[0])throw new Error(v0(x,r[x],u[0]));for(var w=0;w<c;w++)h[g*c+w]+=e[k*c+w]}if(i)for(var _=0;_<c;_++)h[g*c+_]/=m-v;if(v=m,y=g+1,g=b,++m>s)break}return y<d&&h.fill(o,y*c,d*c),[h,f]},O6=G4,P6=function(e,t,n,r){for(var a=MH(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat((0,Ze.Z)(o)))}return a},R6=function(e,t,n,r,a,i,o,s){return new H4(n,r,a,i,o,s).compute(e,t)},D6=function(e,t,n){for(var r=e.length,a=[],i=0,o=0,s=new Array(r),u=0;u<r;++u){var c=a.length;Z4(e[u],t,n,a);var l=a.length-c;s[u]=l,i+=l,o=Math.max(o,l)}for(var d=fW("int32",2*i),f=new Array(i),p=[r,o],h=0,v=0;v<r;++v)for(var m=0;m<s[v];++m)d[2*h]=v,d[2*h+1]=m,f[h]=a[h],++h;return[d,f,p]},M6=function(e,t){for(var n=fW("int32",e.length),r=0;r<e.length;++r)n[r]=XK(e[r]).modulo(t).getLowBitsUnsigned();return n},L6=Y4,F6=function(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=MH(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var c=e.locToIndex(s);a.values[i]=e.values[c]}return a},B6=function(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=dW(n,o*r),c=dW("int32",o*r),l=function(t){var n=t*s,i=e.subarray(n,n+s),o=new Array(i.length);i.forEach((function(e,t){return o[t]={value:e,index:t}})),r<o.length&&(J4(o,r),o=o.slice(0,r)),a&&o.sort(Q4);for(var l=t*r,d=u.subarray(l,l+r),f=c.subarray(l,l+r),p=0;p<r;p++)d[p]=o[p].value,f[p]=o[p].index},d=0;d<o;d++)l(d);var f=t.slice();return f[f.length-1]=r,[MH(f,n,u),MH(f,"int32",c)]},j6=j4,U6=function(e,t,n,r){for(var a=cW(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},c=new Int32Array(n[a]),l=new dG(i,r,e),d=[],f=1===i[0]&&1===i[2],p=0;p<n[a];p++){var h=void 0;if(f)h=e[p].toString();else{for(var v=[],m=0;m<i[0];m++)for(var y=0;y<i[2];y++)v.push(l.get(m,p,y));h=v.join(",")}if(void 0!==u[h])c[p]=u[h];else{var g=Object.keys(u).length;u[h]=g,c[p]=g,d.push(p)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new dG(b,r);d.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(l.get(n,e,r),n,t,r)}));var k=n.slice();return k[a]=b[1],{outputValues:x.values,outputShape:k,indices:c}};function V6(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return"".concat(e,".").concat(t)}))}function W6(e,t){return 1===t?[e]:V6(e,t)}var z6=function(){function e(t){if(I(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.enableShapeUniforms=q3(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=W6("rc",this.rank),r=L3(this.rank),a=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode="\n        void main() {\n          ".concat(r," rc = getOutputCoords();\n\n          if(").concat(a,") {\n            setOutput(vec4(0));\n          } else {\n            ").concat(i,"\n\n            setOutput(vec4(").concat(o,"));\n          }\n        }\n      ")}}return N(e,[{key:"getSourceCoordsArr",value:function(e){for(var t=[],n=0;n<=1;n++)for(var r=0;r<=1;r++){for(var a="".concat(0===n?"r":"rp1",", ").concat(0===r?"c":"cp1"),i=2;i<this.rank;i++)a="".concat(e[e.length-1-i],",")+a;t.push(a)}return t}},{key:"getOutOfBoundsCondition",value:function(e){if(1===this.rank)return"rc > ".concat(this.enableShapeUniforms?"outShape":this.outputShape[0]);for(var t="",n=this.rank-2;n<this.rank;n++)t+="".concat(e[n]," >= ").concat(this.enableShapeUniforms?"outShape[".concat(n,"]"):this.outputShape[n]),n<this.rank-1&&(t+="||");return t}},{key:"getSetup",value:function(e){if(1===this.rank)return"";var t=e.slice(-2),n=this.enableShapeUniforms?"outShape[".concat(this.rank," - 1]"):this.outputShape[this.rank-1],r=this.enableShapeUniforms?"outShape[".concat(this.rank," - 2]"):this.outputShape[this.rank-2];return"\n      int r = ".concat(t[0],";\n      int c = ").concat(t[1],";\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ").concat(n,";\n      bool rEdge = rp1 >= ").concat(r,";\n    ")}},{key:"getOutput",value:function(e){var t=this.getSourceCoordsArr(e);if(1===this.rank){var n=this.enableShapeUniforms?"outShape":this.outputShape[0];return"getA(rc), (rc + 1 >= ".concat(n," ? 0. : getA(rc + 1)), 0, 0")}return"getA(".concat(t[0],"),\n            cEdge ? 0. : getA(").concat(t[1],"),\n            rEdge ? 0. : getA(").concat(t[2],"),\n            rEdge || cEdge ? 0. : getA(").concat(t[3],")")}}]),e}(),q6=N((function e(t,n){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length);for(var r="",a=0;a<4;a++){var i="thisRC = rc;";a%2===1&&(i+="thisRC.z += 1;"),a>1&&(i+="thisRC.y += 1;"),r+="\n        ".concat(i,"\n        ").concat(a>0?"if(thisRC.y < rows && thisRC.z < cols){":"","\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[").concat(a,"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ").concat(a>0?"}":"","\n      ")}this.userCode="\n      ".concat(function(e,t){var n=t?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"index",r=e.map((function(e,t){return t})),a=h3(r,t);return a.map((function(t,r){var i="int ".concat(e[r]," = ").concat(n," / ").concat(a[r]),o=r===a.length-1?"int ".concat(e[r+1]," = ").concat(n," - ").concat(e[r]," * ").concat(a[r]):"index -= ".concat(e[r]," * ").concat(a[r]);return"".concat(i,"; ").concat(o,";")})).join("")}(["r","c","d"],"inputShape"):f3(["r","c","d"],e);return"\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ".concat(n,"\n      return ivec3(r, c, d);\n    }\n  ")}(n,this.enableShapeUniforms),"\n      ").concat(this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":v3(t),"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ").concat(this.enableShapeUniforms?"outShape[1]":t[1],";\n        int cols = ").concat(this.enableShapeUniforms?"outShape[2]":t[2],";\n\n        ").concat(r,"\n\n        setOutput(result);\n      }\n    ")}));var K6=function(){function e(t){I(this,e),this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return N(e,[{key:"acquireTexture",value:function(e,t,n){var r=H6(t,n),a=Z6(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=G6(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===N2.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===N2.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===N2.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===N2.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===N2.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i}},{key:"releaseTexture",value:function(e,t,n,r){if(null!=this.freeTextures){var a=H6(n,r),i=Z6(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=G6(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=RW().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],c=u.indexOf(e);if(c<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(c,1),this.log()}}},{key:"log",value:function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used","".concat(this.numFreeTextures," / ").concat(this.numUsedTextures),"(".concat(e,")"));var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: ".concat(this._numBytesAllocated)),console.log("Bytes unused: ".concat(this._numBytesFree," (").concat(Math.round(100*t),"%)"))}}},{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}},{key:"getNumUsedTextures",value:function(){return this.numUsedTextures}},{key:"getNumFreeTextures",value:function(){return this.numFreeTextures}},{key:"dispose",value:function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t.texture)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}]),e}();function G6(e,t,n,r,a){var i,o=function(e,t){switch(e){case N2.PACKED_2X2_FLOAT32:return a4(t);case N2.PACKED_2X2_FLOAT16:return i4(t);case N2.UNPACKED_FLOAT32:return t4(t);case N2.UNPACKED_FLOAT16:return n4(t);case N2.PACKED_4X1_UNSIGNED_BYTE:return r4(t);default:throw new Error("Unknown physical texture type ".concat(e))}}(t,r);if(a){var s=M2(e[0],e[1]),u=(0,W.Z)(s,2);i=u[0]*u[1]}else{var c=R2(e[0],e[1]),l=(0,W.Z)(c,2);i=l[0]*l[1]}var d=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format ".concat(t))}(n,o);return i*d}function H6(e,t){if(e===C2.UPLOAD)return N2.PACKED_2X2_FLOAT32;if(e===C2.RENDER||null==e)return function(e){return RW().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?N2.PACKED_2X2_FLOAT32:N2.UNPACKED_FLOAT32:e?N2.PACKED_2X2_FLOAT16:N2.UNPACKED_FLOAT16}(t);if(e===C2.DOWNLOAD||e===C2.PIXELS)return N2.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type ".concat(e))}function Z6(e,t,n){return"".concat(e[0],"_").concat(e[1],"_").concat(t,"_").concat(n)}var Y6=N((function e(t,n){I(this,e),this.variableNames=["A"],this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length),this.userCode="\n      float unaryOperation(float x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),X6="if (isnan(x)) return x;",Q6="return x;",J6="return abs(x);";var $6="return (x >= 0.0) ? x : (exp(x) - 1.0);",e5=X6+"\n  return (x < 0.0) ? 0.0 : x;\n",t5=X6+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",n5="return x;",r5="return 1.0 / (1.0 + exp(-1.0 * x));",a5="return x;",i5="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",o5="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",s5="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",u5="return 1.0 / (1.0 + exp(-1.0 * x));",c5=N((function e(t,n){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length),this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        ".concat(n,"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    ")})),l5=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length);var n=t.length,r=W6("rc",n),a=L3(n),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(n,r),o=r.slice(-2),s=n<=1?"rc":"vec2(".concat(o.join(","),")");this.userCode="\n      void main() {\n        ".concat(a," rc = getOutputCoords();\n        vec4 packedInput = getA(").concat(i,");\n\n        setOutput(getChannel(packedInput, ").concat(s,"));\n      }\n    ")})),d5=tJ,f5={};var p5=RW().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var h5=function(e){P(n,e);var t=F(n);function n(e){var r,a,i;if(I(this,n),(r=t.call(this)).pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.lastGlFlushTime=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!RW().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null!=e){if(e instanceof s4)a=e;else{var o=P2(RW().getNumber("WEBGL_VERSION"),e);a=new s4(o)}r.binaryCache={},r.gpgpuCreatedLocally=!1}else{var s=P2(RW().getNumber("WEBGL_VERSION"));a=new s4(s),r.binaryCache=((i=RW().getNumber("WEBGL_VERSION"))in f5||(f5[i]={}),f5[i]),r.gpgpuCreatedLocally=!0}return r.gpgpu=a,r.canvas=r.gpgpu.gl.canvas,r.textureManager=new K6(r.gpgpu),r.numMBBeforeWarning=null==RW().global.screen?1024:RW().global.screen.height*RW().global.screen.width*window.devicePixelRatio*600/1024/1024,r.texData=new GV(A(r),c$()),r}return N(n,[{key:"nextDataId",value:function(){return n.nextDataId++}},{key:"numDataIds",value:function(){return this.texData.numDataIds()-this.pendingDeletes}},{key:"write",value:function(e,t,n){if((RW().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||RW().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:C2.UPLOAD,refCount:1}),r}},{key:"refCount",value:function(e){return this.texData.has(e)?this.texData.get(e).refCount:0}},{key:"incRef",value:function(e){this.texData.get(e).refCount++}},{key:"decRef",value:function(e){this.texData.has(e)&&this.texData.get(e).refCount--}},{key:"move",value:function(e,t,n,r,a){if(RW().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:C2.UPLOAD,refCount:a})}},{key:"disposeIntermediateTensorInfo",value:function(e){this.disposeData(e.dataId)}},{key:"readSync",value:function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new c5(o,n5):new Y6(o,n5);var c=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),l=this.readSync(c.dataId);return this.disposeIntermediateTensorInfo(c),l}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,f,p=null!=this.activeTimers;(p&&(d=$K()),"complex64"===r)?f=J$(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return p&&(this.downloadWaitMs+=$K()-d),this.convertAndCacheOnCPU(e,f)}},{key:"read",value:function(){var e=j(G().mark((function e(t){var n,r,a,i,o,s,u,c,l,d,f,p,h,v,m,y,g,b,x,k,w,_,T;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,c=r.isPacked,null==o){e.next=11;break}return l=c?new c5(i,n5):new Y6(i,n5),d=this.runWebGLProgram(l,[{dataId:t,shape:i,dtype:s}],s),f=this.read(d.dataId),this.disposeIntermediateTensorInfo(d),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(!RW().getBool("DEBUG")){e.next=16;break}if(RW().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==RW().getNumber("WEBGL_VERSION")){e.next=16;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 16:if(p=null,"complex64"!==s&&RW().get("WEBGL_BUFFER_SUPPORTED")&&(h=this.decode(t),m=this.texData.get(h.dataId),p=(v=this.gpgpu).createBufferFromTexture.apply(v,[m.texture.texture].concat((0,Ze.Z)(D2(i))))),this.pendingRead.set(t,[]),"complex64"===s){e.next=22;break}return e.next=22,this.gpgpu.createAndWaitForFence();case 22:if("complex64"!==s){e.next=31;break}return e.next=25,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 25:g=e.sent,b=g[0],x=g[1],y=J$(b,x),e.next=32;break;case 31:null==p?y=this.getValuesFromTexture(t):(k=nW(i),y=this.gpgpu.downloadFloat32MatrixFromBuffer(p,k));case 32:return null!=h&&this.disposeIntermediateTensorInfo(h),null!=p&&F2(w=this.gpgpu.gl,(function(){return w.deleteBuffer(p)})),_=this.convertAndCacheOnCPU(t,y),T=this.pendingRead.get(t),this.pendingRead.delete(t),T.forEach((function(e){return e(_)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)&&c$().removeDataId(t,this),this.pendingDeletes--),e.abrupt("return",_);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readToGPU",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.texData.get(e),r=n.values,a=n.shape,i=n.slice,o=n.dtype,s=n.isPacked,u=n.texture;if("complex64"===o)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=i){var c;c=s?new c5(a,n5):new Y6(a,n5);var l=this.runWebGLProgram(c,[{dataId:e,shape:a,dtype:o}],o),d=this.readToGPU(l,t);return this.disposeIntermediateTensorInfo(l),d}if(null==u)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");var f=this.decode(e,t.customTexShape),p=c$().makeTensorFromDataId(f.dataId,f.shape,f.dtype),h=this.texData.get(f.dataId);return Object.assign({tensorRef:p},h.texture)}},{key:"bufferSync",value:function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return tG(e)}))}catch(lA){throw new Error("Failed to decode encoded string bytes into utf-8")}return MH(e.shape,e.dtype,n)}},{key:"checkNumericalProblems",value:function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!B2(n)){if(RW().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value ".concat(n," cannot be represented with your ")+"current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value ".concat(n," cannot be represented on this device."))}}}},{key:"getValuesFromTexture",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=nW(n);if(RW().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),c=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture.texture].concat((0,Ze.Z)(D2(n)))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),c}var l=RW().getBool("WEBGL_PACK")&&!0===a,d=l?n3(n):n,f=l?new Z3(d):new H3(d),p=this.runWebGLProgram(f,[{shape:d,dtype:r,dataId:e}],"float32"),h=this.texData.get(p.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(h.texture.texture,h.texShape[0],h.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(p),v}},{key:"timerAvailable",value:function(){return RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}},{key:"time",value:function(e){var t=this,n=this.activeTimers,r=[],a=!1;null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,e();var i=tW(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=tW(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e}));this.activeTimers=n,a&&(this.programTimersStack=null);var s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return j(G().mark((function e(){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=8;break}return e.next=3,Promise.all(i);case 3:n=e.sent,s.kernelMs=QV(n),s.getExtraProfileInfo=function(){return n.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return"".concat(e.name,": ").concat(e.ms)})).join(", ")},e.next=9;break;case 8:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 9:return t.uploadWaitMs=0,t.downloadWaitMs=0,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))()}},{key:"memory",value:function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}},{key:"startTimer",value:function(){return RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:$K(),endMs:null}}},{key:"endTimer",value:function(e){return RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=$K(),e)}},{key:"getQueryTime",value:function(){var e=j(G().mark((function e(t){var n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(RW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);var n=this.texData.get(e),r=n.complexTensorInfos;return null!=r&&(this.disposeData(r.real.dataId,t),this.disposeData(r.imag.dataId,t)),this.texData.delete(e),!0}},{key:"releaseGPUData",value:function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,c=this.dataRefCount.get(u);c>1?this.dataRefCount.set(u,c-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var l=this.texData.get(e);l.texture=null,l.texShape=null,l.isPacked=!1,l.slice=null}},{key:"getTexture",value:function(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}},{key:"getDataInfo",value:function(e){return this.texData.get(e)}},{key:"shouldExecuteOnCPU",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p5;return RW().getBool("WEBGL_CPU_FORWARD")&&e.every((function(e){return null==t.texData.get(e.dataId).texture&&nW(e.shape)<n}))}},{key:"getGPGPUContext",value:function(){return this.gpgpu}},{key:"where",value:function(e){EK("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return d5(e.shape,t)}},{key:"packedUnaryOp",value:function(e,t,n){var r=new c5(e.shape,t),a=this.compileAndRun(r,[e],n);return c$().makeTensorFromDataId(a.dataId,a.shape,a.dtype)}},{key:"abs",value:function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=E6(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(RW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,J6,e.dtype);var n=new Y6(e.shape,J6),r=this.compileAndRun(n,[e]);return c$().makeTensorFromDataId(r.dataId,r.shape,r.dtype)}},{key:"makeTensorInfo",value:function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&mW(n[0])){var a=n.map((function(e){return eG(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}},{key:"makeOutput",value:function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return c$().makeTensorFromDataId(r,e,t,this)}},{key:"unpackTensor",value:function(e){var t=new l5(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}},{key:"packTensor",value:function(e){var t=new z6(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}},{key:"packedReshape",value:function(e,t){var n=[e3(e.shape)].concat((0,Ze.Z)(t3(e.shape))),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[e3(t)].concat((0,Ze.Z)(t3(t))),i=new q6(a,n),o=[n],s=this.runWebGLProgram(i,[r],e.dtype,o,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}},{key:"decode",value:function(e,t){var n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype;null!=t&&JV(nW(a)<=t[0]*t[1]*4,(function(){return"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data."}));var o,s=n3(a);o=r?new G3(s):new K3(s);var u=[null!=t?t:D2(s)];return{dtype:i,shape:a,dataId:this.runWebGLProgram(o,[{shape:s,dtype:i,dataId:e}],i,u,!0,t).dataId}}},{key:"runWebGLProgram",value:function(e,t,n,r){var a=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=this.makeTensorInfo(e.outputShape,n),u=this.texData.get(s.dataId);if(e.packedOutput&&(u.isPacked=!0),e.outPackingScheme===I2.DENSE){var c=null!=o?o:D2(e.outputShape);u.texShape=c.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(u.usage=e.outTexUsage),0===nW(s.shape))return u.values=dW(s.dtype,0),s;var l=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&nW(t.shape)<=RW().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(a.uploadToGPU(t.dataId),!!n.isPacked!==!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),l.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!a3(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=a.packedReshape(t,i),l.push(t),n=a.texData.get(t.dataId),r.shape=i}return{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(s.dataId);var f,p={shape:s.shape,texData:u,isUniform:!1},h=z3(e,d,p),v=this.getAndSaveBinary(h,(function(){return U3(a.gpgpu,e,d,p)})),m=null!=this.activeTimers;m&&(f=this.startTimer()),W3(this.gpgpu,v,d,p,r),l.forEach((function(e){return a.disposeIntermediateTensorInfo(e)})),m&&(f=this.endTimer(f),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(f)}));var y=RW().get("WEBGL_FLUSH_THRESHOLD");if(y>0){var g=$K();g-this.lastGlFlushTime>y&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=g)}if(!RW().getBool("WEBGL_LAZILY_UNPACK")&&u.isPacked&&!1===i){var b=this.unpackTensor(s);return this.disposeIntermediateTensorInfo(s),b}return s}},{key:"compileAndRun",value:function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return i}},{key:"getAndSaveBinary",value:function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}},{key:"getTextureManager",value:function(){return this.textureManager}},{key:"dispose",value:function(){var e=this;if(!this.disposed){if(!RW().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!==typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}}},{key:"floatPrecision",value:function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=l$((function(){if(!RW().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=RW().getBool("DEBUG");RW().set("DEBUG",!1);var n=e.abs(bQ(1e-8)).dataSync()[0];if(RW().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue}},{key:"epsilon",value:function(){return 32===this.floatPrecision()?1e-7:1e-4}},{key:"uploadToGPU",value:function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,c=null!=this.activeTimers;c&&(u=$K());var l=t.texShape;if(null==l&&(l=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=RW().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,e=e.map((function(t,n){return n>=e.length-2?YV(e[n]):e[n]})),1===e.length&&(e=[2,e[0]])),2!==e.length){var r=lW(e);e=r.newShape}var a=nW(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=e3(e),o=2,s=2;if(e.length){var u=t3(e),c=(0,W.Z)(u,2);o=c[0],s=c[1]}return iW(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return iW(a)}(n,s),t.texShape=l),null!=a){var d,f=n3(n),p=l[1],h=l[0],v=a instanceof Uint8Array||a instanceof Uint8ClampedArray;if(s||!v){var m=M2(l[0],l[1]),y=(0,W.Z)(m,2);p=y[0],h=y[1]}d=s?new X3(f,v):new Y3(f,v);var g=v?[h,p]:l,b=this.makeTensorInfo(g,r),x=this.texData.get(b.dataId);x.usage=v?C2.PIXELS:C2.UPLOAD,x.texShape=g,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,h,a);var k=[[h,p]],w=this.runWebGLProgram(d,[b],r,k,!0),_=this.texData.get(w.dataId);t.texture=_.texture,t.texShape=_.texShape,t.isPacked=_.isPacked,t.usage=_.usage,this.disposeIntermediateTensorInfo(b),this.texData.delete(w.dataId),t.values=null,c&&(this.uploadWaitMs+=$K()-u)}else{var T=this.acquireTexture(l,o,r,s);t.texture=T}}}},{key:"convertAndCacheOnCPU",value:function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype ".concat(t))}(t,r)),n.values}},{key:"acquireTexture",value:function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: ".concat(a," MB, ")+"most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)}},{key:"computeBytes",value:function(e,t){return e[0]*e[1]*vW(t)}}]),n}(HV);h5.nextDataId=0,FG()&&h$("webgl",(function(){return new h5}),2);var v5=N((function e(t,n,r){I(this,e),this.variableNames=["A","B"],this.outputShape=JH(n,r),this.enableShapeUniforms=q3(this.outputShape.length),this.userCode="\n      float binaryOperation(float a, float b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    ")})),m5=N((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];I(this,e),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=JH(n,r);var i=this.outputShape.length;this.enableShapeUniforms=q3(i);var o="";if(a)if(0===i||1===nW(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else{var s=L3(i);if(o="\n          ".concat(s," coords = getOutputCoords();\n        "),1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+="\n            result.y = (coords + 1) >= ".concat(this.outputShape[0]," ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ");else{var u=W6("coords",i);this.enableShapeUniforms?o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= outShape[").concat(i," - 2];\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= outShape[").concat(i," - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "):o+="\n            bool nextRowOutOfBounds =\n              (".concat(u[i-2]," + 1) >= ").concat(this.outputShape[i-2],";\n            bool nextColOutOfBounds =\n              (").concat(u[i-1]," + 1) >= ").concat(this.outputShape[i-1],";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          ")}}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ".concat(t,"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ").concat(o,"\n\n        setOutput(result);\n      }\n    ")}));function y5(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var g5={kernelName:Wz,backendName:"webgl",kernelFunc:y5};function b5(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=y5({inputs:{x:r},backend:n}),u=y5({inputs:{x:a},backend:n});return o.complexTensorInfos={real:s,imag:u},i}var x5={kernelName:sz,backendName:"webgl",kernelFunc:b5},k5="return (a < 0.) ? b * a : a;",w5="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var _5={kernelName:Zz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",QK(i,"float32")),s=RW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new m5(w5,a.shape,o.shape):new v5(k5,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],"float32");return n.disposeIntermediateTensorInfo(o),u}},T5="return (a < 0.) ? b * a : a;",S5="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var E5={kernelName:Sq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=RW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new m5(S5,r.shape,a.shape):new v5(T5,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],"float32")}};function I5(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,c=s,l=a||u.dtype;if(c.shouldExecuteOnCPU([u])&&null!=r){var d=c.texData.get(u.dataId),f=r(d.values,l);return c.makeTensorInfo(u.shape,l,f)}return i=RW().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new c5(u.shape,n):new Y6(u.shape,t),c.runWebGLProgram(i,[u],l)}}function C5(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,c=r.a,l=r.b,d=i;if(o&&"complex64"===c.dtype){var f=d.texData.get(c.dataId),p=d.texData.get(l.dataId),h=[[f.complexTensorInfos.real,p.complexTensorInfos.real],[f.complexTensorInfos.imag,p.complexTensorInfos.imag]].map((function(e){var n=(0,W.Z)(e,2),r=n[0],a=n[1],i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o={dataId:a.dataId,dtype:a.dtype,shape:l.shape},s=new v5(t,c.shape,l.shape);return d.runWebGLProgram(s,[i,o],wG(r.dtype,a.dtype))})),v=(0,W.Z)(h,2),m=v[0],y=v[1],g=b5({inputs:{real:m,imag:y},backend:d});return d.disposeIntermediateTensorInfo(m),d.disposeIntermediateTensorInfo(y),g}var b,x=u||wG(c.dtype,l.dtype);if(("string"===c.dtype||"string"===l.dtype||d.shouldExecuteOnCPU([c,l]))&&null!=s){var k=d.texData.get(c.dataId).values,w=d.texData.get(l.dataId).values,_="string"===c.dtype?y0(k):k,T="string"===c.dtype?y0(w):w,S=s(c.shape,l.shape,_,T,x),E=(0,W.Z)(S,2),I=E[0],C=E[1],N=d.makeTensorInfo(C,x);return d.texData.get(N.dataId).values=I,N}return b=RW().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new m5(n,c.shape,l.shape,a):new v5(t,c.shape,l.shape),d.runWebGLProgram(b,[c,l],x)}}function N5(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("linear"===e)return t?a5:Q6;if("relu"===e)return t?o5:e5;if("elu"===e)return t?i5:$6;if("relu6"===e)return t?s5:t5;if("prelu"===e)return t?S5:T5;if("leakyrelu"===e)return t?w5:k5;if("sigmoid"===e)return t?u5:r5;throw new Error("Activation ".concat(e," has not been implemented for the WebGL backend."))}var A5=N((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=arguments.length>8&&void 0!==arguments[8]&&arguments[8];I(this,e),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=q3(this.outputShape.length);var l=a?t[1]:t[2],d=Math.ceil(l/2),f=a?"i * 2, rc.y":"rc.y, i * 2",p=i?"rc.z, i * 2":"i * 2, rc.z",h=a?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],v=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",y="";s&&(m=u?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(s,"\n        }"):c?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(s,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(s,"\n        }"),y="result = activation(result);");var g=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");var b="rc.x",x="rc.x";t[0]<n[0]?b="int(min(float(rc.x), ".concat(t[0]-1,".))"):n[0]<t[0]&&(x="int(min(float(rc.x), ".concat(n[0]-1,".))")),this.userCode="\n      ".concat(m,"\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ").concat(d,".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < ").concat(d,"; i++) {\n          int batchA = ").concat(b,";\n          int batchB = ").concat(x,";\n          vec4 a = getMatrixA(batchA, ").concat(f,");\n          vec4 b = getMatrixB(batchB, ").concat(p,");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (").concat(h[0]," * ").concat(v[0],");\n          result += (").concat(h[1]," * ").concat(v[1],");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ").concat(g,"\n\n        ").concat(y,"\n\n        setOutput(result);\n      }\n    ")})),O5="return areal * breal - aimag * bimag;",P5="return areal * bimag + aimag * breal;",R5=N((function e(t,n,r){I(this,e),this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=JH(n,r),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ".concat(t,"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    ")})),D5="return a * b;";function M5(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=wG(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),c=new R5(O5,a.shape,i.shape),l=new R5(P5,a.shape,i.shape),d=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(c,d,"float32"),p=r.runWebGLProgram(l,d,"float32"),h=b5({inputs:{real:f,imag:p},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(p),h}if(r.shouldExecuteOnCPU([a,i])){var v=r.texData.get(a.dataId),m=r.texData.get(i.dataId),y=b6(a.shape,i.shape,v.values,m.values,o),g=(0,W.Z)(y,2),b=g[0],x=g[1],k=r.makeTensorInfo(x,o);return r.texData.get(k.dataId).values=b,k}return t=RW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new m5(D5,a.shape,i.shape):new v5(D5,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var L5={kernelName:hq,backendName:"webgl",kernelFunc:M5};function F5(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=nW(a.shape),u=uW(i,s),c=nW(u);JV(s===c,(function(){return"The new shape (".concat(u,") has ").concat(c," elements and the old ")+"shape (".concat(a.shape,") has ").concat(s," elements. The new shape and old ")+"shape must have the same number of elements."}));var l=o.texData.get(a.dataId);return!l.isPacked||a3(a.shape,u)||null!==l.texture&&a3(l.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[e3(e.shape)].concat((0,Ze.Z)(t3(e.shape))),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[e3(t)].concat((0,Ze.Z)(t3(t))),o=new q6(i,r),s=[r],u=n.runWebGLProgram(o,[a],e.dtype,s,!0);return{dataId:u.dataId,shape:t,dtype:u.dtype}}(a,u,o)}var B5={kernelName:Oq,backendName:"webgl",kernelFunc:F5},j5=N((function e(t,n){I(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s=4*Math.floor(r/4),u=r%4,c="sumValue += dot(values, ones);";if(null!=n){var l=1/n;c="sumValue += dot(values * ".concat(aW(l)?l.toPrecision(2):l,", ones);")}var d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return 0.0;\n        }\n      ")),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ".concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(s,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(c,"\n        }\n\n        int inIdx = inOffset + ").concat(s,";\n        if (").concat(1===u,") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(2===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ").concat(c,"\n        } else if (").concat(3===u,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ").concat(c,"\n        }\n        setOutput(sumValue);\n      }\n    ")})),U5=N((function e(t,n){I(this,e),this.variableNames=["x"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.outSize;this.outputShape=[a,o];var s="0.0",u="";"prod"===n?s="1.0":"min"===n?(s="1.0 / 1e-20",u="min"):"max"===n&&(s="-1.0 / 1e-20",u="max");var c="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===n?c="sumValue":"prod"===n?c="prodValue":"all"===n?c="allValue":"any"===n&&(c="anyValue");var l=4*Math.floor(r/4),d=r%4,f="\n      if (".concat("sum"===n,") {\n        sumValue += dot(values, ones);\n      } else if (").concat("prod"===n,") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ").concat(u,"(values, minMaxValue);\n        if (").concat("min"===n," || ").concat("max"===n,") {\n          minMaxValue = ").concat(u,"(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    "),p="vec4";"all"===n?(s="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===n&&(s="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var h="";i%r>0&&(h="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat(s,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ").concat(h,"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ").concat(r,";\n\n        vec4 minMaxValue = vec4(").concat(s,");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ").concat(l,"; i += 4) {\n          int inIdx = inOffset + i;\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ").concat(f,"\n        }\n\n        int inIdx = inOffset + ").concat(l,";\n        if (").concat(1===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(2===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ").concat(f,"\n        } else if (").concat(3===d,") {\n          ").concat(p," values = ").concat(p,"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ").concat(f,"\n        }\n        setOutput(").concat(c,");\n      }\n    ")}));function V5(e,t,n,r){for(var a=function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=K$(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],c=u.inSize,l=u.windowSize,d=u.outSize,f=void 0;f="mean"===n?0===o?new j5({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},c):new j5({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d}):new U5({windowSize:l,inSize:c,batchSize:e.shape[0],outSize:d},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}var W5=N((function e(t,n){I(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];this.outputShape=r,this.rank=r.length;var i=L3(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank ".concat(t," is not yet supported"));for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}(n);this.userCode="\n    void main() {\n      ".concat(i," resRC = getOutputCoords();\n      setOutput(getA(").concat(o,"));\n    }\n    ")}));var z5=N((function e(t,n){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[n[a]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank ".concat(this.rank," is not yet supported."));for(var i=L3(this.rank),o=V6("rc",this.rank),s=new Array(this.rank),u=0;u<n.length;u++)s[n[u]]=o[u];var c="vec2(".concat(s.slice(-2).join(),")"),l="++".concat(o[this.rank-1]," < ").concat(r[this.rank-1]),d="getChannel(getA(".concat(s.join(),"), ").concat(c,")");this.userCode="\n    void main() {\n      ".concat(i," rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ").concat(d,";\n      if(").concat(l,") {\n        result[1] = ").concat(d,";\n      }\n      --").concat(o[this.rank-1],";\n      if(++").concat(o[this.rank-2]," < ").concat(r[this.rank-2],") {\n        result[2] = ").concat(d,";\n        if(").concat(l,") {\n          result[3] = ").concat(d,";\n        }\n      }\n      setOutput(result);\n    }\n    ")}));function q5(e,t,n){var r=RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new z5(e.shape,t):new W5(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function K5(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=cW(a,e.shape),s=o,u=vX(s,i),c=null!=u,l=e;c&&(l=q5(e,u,r),s=yX(s.length,i)),hX("sum",s,i);var d=fX(l.shape,s),f=(0,W.Z)(d,2),p=f[0],h=f[1],v=p;n&&(v=pX(p,o));var m=nW(h),y=F5({inputs:{x:l},attrs:{shape:[nW(e.shape)/m,m]},backend:r}),g=V5(y,_G(e.dtype),"sum",r),b=F5({inputs:{x:g},attrs:{shape:v},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(g),c&&r.disposeIntermediateTensorInfo(l),b}(t.x,r.axis,r.keepDims,n)}var G5={kernelName:Zq,backendName:"webgl",kernelFunc:K5};function H5(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,c=new Array(u),l=0;l<c.length;l++)c[l]=i.shape[o[l]];if(s.shouldExecuteOnCPU([i])){var d=s.texData.get(i.dataId).values,f=j6(d,i.shape,i.dtype,o,c);t=s.makeTensorInfo(c,i.dtype),s.texData.get(t.dataId).values=f}else t=q5(i,o,s);return t}var Z5={kernelName:vK,backendName:"webgl",kernelFunc:H5};function Y5(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=t.shape.length,v=n.shape.length,m=r?t.shape[h-2]:t.shape[h-1],y=a?n.shape[v-1]:n.shape[v-2],g=r?t.shape[h-1]:t.shape[h-2],b=a?n.shape[v-2]:n.shape[v-1],x=t.shape.slice(0,-2),k=n.shape.slice(0,-2),w=nW(x),_=nW(k),T=JH(t.shape.slice(0,-2),n.shape.slice(0,-2)).concat([g,b]);JV(m===y,(function(){return"Error in matMul: inner shapes (".concat(m,") and (")+"".concat(y,") of Tensors with shapes ").concat(t.shape," and ")+"".concat(n.shape," and transposeA=").concat(r)+" and transposeB=".concat(a," must match.")}));var S,E=r?[w,m,g]:[w,g,m],I=a?[_,b,y]:[_,y,b],C=F5({inputs:{x:t},backend:i,attrs:{shape:E}}),N=F5({inputs:{x:n},backend:i,attrs:{shape:I}}),A=[C,N],O=Math.max(w,_),P=r?C.shape[1]:C.shape[2],R=null!=s,D=null!=c,M="leakyrelu"===p,L=null!=p?N5(p,!0):null;if((1===g||1===b)&&P>1e3&&!1===(R||D||M||null!=L)){var F=C,B=N;r&&(F=H5({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),A.push(F)),a&&(B=H5({inputs:{x:N},backend:i,attrs:{perm:[0,2,1]}}),A.push(B));var j=1===b,U=F;1!==b&&(U=F5({inputs:{x:F},backend:i,attrs:{shape:[O,P,1]}}),A.push(U));var V=1===b?2:1,W=B;j&&(W=F5({inputs:{x:B},backend:i,attrs:{shape:[O,1,P]}}),A.push(W));var z=M5({inputs:{a:U,b:W},backend:i});S=K5({inputs:{x:z},backend:i,attrs:{axis:V,keepDims:!0}}),A.push(z)}else{var q=wG(t.dtype,n.dtype),K=new A5(E,I,[O,g,b],r,a,R,L,D,M),G=[C,N];if(null!=s&&G.push(s),D&&G.push(c),M){var H=i.makeTensorInfo([],"float32",QK(d,"float32"));G.push(H),A.push(H)}S=i.runWebGLProgram(K,G,q)}var Z=F5({inputs:{x:S},backend:i,attrs:{shape:T}});A.push(S);for(var Y=0,X=A;Y<X.length;Y++){var Q=X[Y];i.disposeIntermediateTensorInfo(Q)}return Z}var X5={kernelName:_K,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,c=r.transposeB,l=r.activation;return Y5({a:a,b:i,transposeA:u,transposeB:c,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:l})}},Q5="return abs(x);";var J5={kernelName:BW,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=E6(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=RW().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new c5(a.shape,Q5):new Y6(a.shape,Q5),r.runWebGLProgram(t,[a],a.dtype)}},$5=I5({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),e9={kernelName:jW,backendName:"webgl",kernelFunc:$5},t9=I5({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),n9={kernelName:UW,backendName:"webgl",kernelFunc:t9},r9="return a + b;",a9=C5({opSnippet:r9,packedOpSnippet:r9,supportsComplex:!0,cpuKernelImpl:$4}),i9={kernelName:VW,backendName:"webgl",kernelFunc:a9},o9=N((function e(t,n){I(this,e),this.outputShape=[],this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("float v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        float result = ").concat(a,";\n        setOutput(result);\n      }\n    ")})),s9=N((function e(t,n){I(this,e),this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.variableNames=n.map((function(e,t){return"T".concat(t)}));var r=[];this.variableNames.forEach((function(e){r.push("vec4 v".concat(e," = get").concat(e,"AtOutCoords();"))}));var a=this.variableNames.map((function(e){return"v".concat(e)})).join(" + ");this.userCode="\n      void main() {\n        ".concat(r.join("\n        "),"\n\n        vec4 result = ").concat(a,";\n        setOutput(result);\n      }\n    ")}));var u9={kernelName:WW,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return y5({inputs:{x:a[0]},backend:r});if(a.length>RW().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return wG(e,t)})),c=a.map((function(e){return e.shape})),l=RW().getBool("WEBGL_PACK")?new s9(a[0].shape,c):new o9(a[0].shape,c);return r.runWebGLProgram(l,a,u)}};var c9={kernelName:zW,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=cW(i,a.shape),c=u,l=vX(c,s),d=a;null!=l&&(d=H5({inputs:{x:a},backend:n,attrs:{perm:l}}),c=yX(c.length,s)),hX("all",c,s);var f,p=fX(d.shape,c),h=(0,W.Z)(p,2),v=h[0],m=F5({inputs:{x:d},backend:n,attrs:{shape:[-1,nW(h[1])]}}),y=V5(m,m.dtype,"all",n);return f=F5(o?{inputs:{x:y},backend:n,attrs:{shape:pX(v,u)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}};var l9={kernelName:qW,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=cW(i,a.shape),c=u,l=vX(c,s),d=a;null!=l&&(d=H5({inputs:{x:a},backend:n,attrs:{perm:l}}),c=yX(c.length,s)),hX("any",c,s);var f,p=fX(d.shape,c),h=(0,W.Z)(p,2),v=h[0],m=F5({inputs:{x:d},backend:n,attrs:{shape:[-1,nW(h[1])]}}),y=V5(m,m.dtype,"any",n);return f=F5(o?{inputs:{x:y},backend:n,attrs:{shape:pX(v,u)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}},d9=N((function e(t,n,r){I(this,e),this.variableNames=["A"];var a=t.windowSize,i=t.batchSize,o=t.outSize;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===n?">":"<",u=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ".concat(a,";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          int inIdx = ").concat(u,";\n          float candidate = getA(batch, inIdx);\n          if (candidate ").concat(s," bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    ")})),f9=N((function e(t,n,r,a){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,JV(t.length>2,(function(){return"Packed arg".concat(r.charAt(0).toUpperCase()+r.slice(1)," supports only inputs with rank above 2.")}));var i=t[t.length-1],o=Math.ceil(i/n);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),a||this.variableNames.push("bestIndicesA");var s,u,c=this.outputShape,l=c.length,d=L3(l),f=W6("coords",l);if(1===o){var p=L3(u=l+1);s="\n        ".concat(p," sourceLocR = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-1],";\n        ").concat(p," sourceLocG = ").concat(p,"(").concat(f.join(),", 0);\n        ++").concat(f[l-2],";\n        ").concat(p," sourceLocA = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-1],";\n        ").concat(p," sourceLocB = ").concat(p,"(").concat(f.join(),", 0);\n        --").concat(f[l-2],";")}else u=l,s="\n        ".concat(d," sourceLocR = coords;\n        ++").concat(f[l-1],";\n        ").concat(d," sourceLocG = coords;\n        ++").concat(f[l-2],";\n        ").concat(d," sourceLocA = coords;\n        --").concat(f[l-1],";\n        ").concat(d," sourceLocB = coords;\n        --").concat(f[l-2],";");var h=["x","y","z","w","u","v"].slice(0,u),v="."+h[u-1],m=h.map((function(e){return"int "+e})),y=W6("sourceLocR",u-1).concat("inIdx.r"),g=W6("sourceLocG",u-1).concat("inIdx.g"),b=W6("sourceLocB",u-1).concat("inIdx.b"),x=W6("sourceLocA",u-1).concat("inIdx.a"),k="max"===r?"greaterThan":"lessThan",w=a?"":"\n          inIdx = round(vec4(getBestIndicesAChannel(".concat(y.join(),"),\n                             getBestIndicesAChannel(").concat(g.join(),"),\n                             getBestIndicesAChannel(").concat(b.join(),"),\n                             getBestIndicesAChannel(").concat(x.join(),")));"),_="vec4(\n            getAChannel(".concat(y.join(),"),\n            hasNextCol ? getAChannel(").concat(g.join(),") : 0.,\n            hasNextRow ? getAChannel(").concat(b.join(),") : 0.,\n            hasNextRow && hasNextCol ? getAChannel(").concat(x.join(),") : 0.)"),T=a?"":"\n      float getBestIndicesAChannel(".concat(m.join(),") {\n        return getChannel(getBestIndicesA(").concat(h.join(),"),\n                                          vec2(").concat(h.slice(-2).join(),"));\n      }");this.userCode="\n      float getAChannel(".concat(m.join(),") {\n        return getChannel(getA(").concat(h.join(),"),\n                               vec2(").concat(h.slice(-2).join(),"));\n      }\n      ").concat(T,"\n      void main() {\n        ").concat(d," coords = getOutputCoords();\n        bool hasNextCol = ").concat(f[l-1]," < ").concat(c[l-1]-1,";\n        bool hasNextRow = ").concat(f[l-2]," < ").concat(c[l-2]-1,";\n        ").concat(s,"\n        ivec4 srcIdx = ivec4(sourceLocR").concat(v,", sourceLocG").concat(v,",\n          sourceLocB").concat(v,", sourceLocA").concat(v,") * ").concat(n,";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ").concat(_,";\n\n        for (int i = 0; i < ").concat(n,"; i++) {\n          inIdx = srcIdx;\n          ").concat(w,"\n          vec4 candidate = ").concat(_,";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(").concat(k,"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    ")}));function p9(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=K$(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new d9(s,n,null==r),c=[t];null!=r&&c.push(r);var l=e.runWebGLProgram(u,c,"int32");if(1===l.shape[1])return l;var d=p9(e,t,n,l);return e.disposeIntermediateTensorInfo(l),d}function h9(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=null!=r?r.shape:t.shape,i=a[a.length-1],o=K$(i),s=new f9(a,o,n,null==r),u=null==r?[t]:[t,r],c=e.runWebGLProgram(s,u,"int32");if(c.shape.length===t.shape.length){var l=h9(e,t,n,c);return e.disposeIntermediateTensorInfo(c),l}return c}function v9(e,t,n,r){var a=[n];if(hX("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!RW().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=e.texData.get(t.dataId),s=t;null!==o&&o.isPacked&&(s=e.unpackTensor(t),i.push(s));var u=fX(s.shape,a),c=(0,W.Z)(u,2),l=c[0],d=nW(c[1]),f=F5({inputs:{x:s},backend:e,attrs:{shape:[-1,d]}});i.push(f);var p=p9(e,f,r);i.push(p);var h=F5({inputs:{x:p},backend:e,attrs:{shape:l}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),h}return h9(e,t,r)}var m9={kernelName:KW,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=cW(r.axis,a.shape),o=vX(i,a.shape.length),s=a,u=[];null!=o&&(s=H5({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=yX(i.length,s.shape.length)),hX("argMax",[i[0]],s.shape.length);var c=v9(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}};var y9={kernelName:GW,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=cW(r.axis,a.shape),o=vX(i,a.shape.length),s=a,u=[];null!=o&&(s=H5({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=yX(i.length,s.shape.length)),hX("argMin",[i[0]],s.shape.length);var c=v9(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),c}},g9=I5({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),b9={kernelName:HW,backendName:"webgl",kernelFunc:g9},x9=I5({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),k9={kernelName:ZW,backendName:"webgl",kernelFunc:x9},w9=I5({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),_9={kernelName:YW,backendName:"webgl",kernelFunc:w9},T9=C5({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),S9={kernelName:QW,backendName:"webgl",kernelFunc:T9},E9=I5({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),I9={kernelName:XW,backendName:"webgl",kernelFunc:E9},C9=N((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(I(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideHeight,u=t.strideWidth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterHeight,f=t.effectiveFilterWidth,p=t.padInfo.top,h=t.padInfo.left;this.outputShape=t.outShape;var v="avg"===n,m="((batch  * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),y="(xR * ".concat(t.inWidth," + xC) * ").concat(t.inChannels," + d"),g="0.0";if(v||(g="-1.0 / 1e-20"),r){var b=">=";this.userCode="\n        const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n        const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ").concat(d,";\n              wR += ").concat(c,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(f,";\n                wC += ").concat(l,") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ").concat(b," currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ").concat(a?i?m:y:"wR * ".concat(f," + wC"),";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var x="max",k="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(k="avgValue / count");var w=4*Math.floor(o/4),_=o%4,T="\n      if (".concat(v,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(x,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec2 strides = ivec2(".concat(s,", ").concat(u,");\n      const ivec2 pads = ivec2(").concat(p,", ").concat(h,");\n      const float initializationValue = ").concat(g,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(g,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ").concat(d,";\n            wR += ").concat(c,") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(w,"; wC += 4) {\n            int xC = xCCorner + wC * ").concat(l,";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              getValue(batch, xR, xC + 3 * ").concat(l,", d)\n            );\n\n            ").concat(T,"\n          }\n\n          int xC = xCCorner + ").concat(w,";\n          if (").concat(1===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(T,"\n          } else if (").concat(2===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              initializationValue,\n              initializationValue\n            );\n\n            ").concat(T,"\n          } else if (").concat(3===_,") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ").concat(l,", d),\n              getValue(batch, xR, xC + 2 * ").concat(l,", d),\n              initializationValue\n            );\n\n            ").concat(T,"\n          }\n        }\n        setOutput(").concat(k,");\n      }\n    ")}})),N9=N((function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(I(this,e),this.variableNames=["x"],"avg"===n&&r)throw new Error("Cannot compute positions for average pool.");var o=t.filterWidth,s=t.strideDepth,u=t.strideHeight,c=t.strideWidth,l=t.dilationDepth,d=t.dilationHeight,f=t.dilationWidth,p=t.effectiveFilterDepth,h=t.effectiveFilterHeight,v=t.effectiveFilterWidth,m=t.padInfo.front,y=t.padInfo.top,g=t.padInfo.left;this.outputShape=t.outShape;var b="avg"===n,x="0.0";if(b||(x="-1.0 / 1e-20"),r){var k=">=";this.userCode="\n        const ivec3 strides =\n            ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n        const ivec3 pads = ivec3(").concat(m,", ").concat(y,", ").concat(g,");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ").concat(p,";\n              wD += ").concat(l,") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int wR = 0; wR < ").concat(h,";\n                wR += ").concat(d,") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int wC = 0; wC < ").concat(v,";\n                  wC += ").concat(f,") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ").concat(k," currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ").concat(a?i?"(((batch * ".concat(t.inDepth," + xD) * ").concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"((xD * ".concat(t.inHeight," + xR) * ").concat(t.inWidth," + xC) * ").concat(t.inChannels," + ch"):"wD * ".concat(h," * ").concat(v," +\n                      wR * ").concat(v," + wC"),";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ")}else{var w="max",_="".concat(n,"(").concat(n,"(").concat(n,"(")+"minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===n&&(_="avgValue / count");var T=4*Math.floor(o/4),S=o%4,E="\n      if (".concat(b,") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = ").concat(w,"(values, minMaxValue);\n      }\n    ");this.userCode="\n      const ivec3 strides =\n        ivec3(".concat(s,", ").concat(u,", ").concat(c,");\n      const ivec3 pads = ivec3(").concat(m,", ").concat(y,", ").concat(g,");\n      const float initializationValue = ").concat(x,";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ").concat(t.inWidth,") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(").concat(x,");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ").concat(p,";\n            wD += ").concat(l,") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(h,";\n            wR += ").concat(d,") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(T,"; wC += 4) {\n              int xC = xCCorner + wC * ").concat(f,";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 3 * ").concat(f,", ch)\n              );\n\n              ").concat(E,"\n            }\n\n            int xC = xCCorner + ").concat(T,";\n            if (").concat(1===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(2===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ").concat(E,"\n            } else if (").concat(3===S,") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ").concat(f,", ch),\n                getValue(batch, xD, xR, xC + 2 * ").concat(f,", ch),\n                initializationValue\n              );\n\n              ").concat(E,"\n            }\n          }\n          setOutput(").concat(_,");\n        }\n      }\n    ")}}));var A9={kernelName:JW,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;c3(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;JV(BZ(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=EZ(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&rW(c.inShape,c.outShape))return y5({inputs:{x:a},backend:n});var l=new C9(c,"avg",!1);return n.runWebGLProgram(l,[a],"float32")}};var O9={kernelName:$W,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,c=r.dataFormat,l=IZ(a.shape,i,o,[1,1,1],s,u,c),d=new N9(l,"avg",!1);return n.runWebGLProgram(d,[a],"float32")}},P9=N((function e(t){I(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterHeight,c=t.effectiveFilterWidth,l=u-1-t.padInfo.top,d=c-1-t.padInfo.left,f=1/(n*r);this.userCode="\n      const ivec2 pads = ivec2(".concat(l,", ").concat(d,");\n      const float avgMultiplier = float(").concat(f,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(u,";\n            wR += ").concat(o,") {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(c,";\n            wC+= ").concat(s,") {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),R9=N((function e(t){I(this,e),this.variableNames=["dy"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.effectiveFilterDepth,f=t.effectiveFilterHeight,p=t.effectiveFilterWidth,h=d-1-t.padInfo.front,v=f-1-t.padInfo.top,m=p-1-t.padInfo.left,y=1/(n*r*a);this.userCode="\n      const ivec3 pads = ivec3(".concat(h,", ").concat(v,", ").concat(m,");\n      const float avgMultiplier = float(").concat(y,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(d,";\n            wD += ").concat(u,") {\n          float dyD = float(dyDCorner + wD) / ").concat(i,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(f,";\n              wR += ").concat(c,") {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(p,";\n                wC += ").concat(l,") {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var D9={kernelName:"AvgPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=IZ(i.shape,o,s,[1,1,1],u,c),d=new R9(l);return n.runWebGLProgram(d,[a],i.dtype)}};var M9={kernelName:"AvgPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;c3([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=EZ(o.shape,s,u,1,c),d=new P9(l);return n.runWebGLProgram(d,[a],o.dtype)}};var L9={kernelName:ez,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return Y5({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},F9=N((function e(t,n,r,a,i,o){I(this,e),this.outputShape=[],this.variableNames=["x","mean","variance"],JH(t,n),JH(t,r);var s="0.0";null!=a&&(JH(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="1.0";null!=i&&(JH(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ".concat(s,";\n        float scale = ").concat(u,";\n        float inv = scale * inversesqrt(variance + float(").concat(o,"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    ")})),B9=N((function e(t,n,r,a,i,o){I(this,e),this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],JH(t,n),JH(t,r);var s="vec4(0.0)";null!=a&&(JH(t,a),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var u="vec4(1.0)";null!=i&&(JH(t,i),this.variableNames.push("scale"),u="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = ".concat(s,";\n        vec4 scale = ").concat(u,";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(").concat(o,"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    ")})),j9={kernelName:Fz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;JV(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),JV(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),JV(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var c=r.varianceEpsilon;null==c&&(c=.001);var l=[a,i,o],d=null;null!=s&&(d=s.shape,l.push(s));var f=null;null!=u&&(f=u.shape,l.push(u));var p=RW().getBool("WEBGL_PACK_NORMALIZATION")?new B9(a.shape,i.shape,o.shape,d,f,c):new F9(a.shape,i.shape,o.shape,d,f,c);return n.runWebGLProgram(p,l,l[0].dtype)}},U9=N((function e(t){I(this,e),this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n=L3(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var r,a=function(e){if(1===e)return"sourceLoc";if(e<=6)return V9.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank ".concat(e," is not yet supported"))}(this.rank),i=t.map((function(e,t){return"sourceLoc.".concat(V9[t]," = start[").concat(t,"] + coords.").concat(V9[t],";")}));r="\n        ".concat(n," sourceLoc;\n        ").concat(n," coords = getOutputCoords();\n        ").concat(i.join("\n"),"\n      "),this.userCode="\n      void main() {\n        ".concat(r,"\n        setOutput(getSource(").concat(a,"));\n      }\n    ")})),V9=["x","y","z","w","u","v"];var W9=N((function e(t){I(this,e),this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];var n=L3(this.rank),r=W6("coords",this.rank),a=W6("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2(".concat(a.slice(-2).join(),")"),o="getChannel(getSource(".concat(a.join(),"), ").concat(i,")"),s="\n      result.x = ".concat(o,";\n      if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n        ++").concat(a[this.rank-1],";\n        result.y = ").concat(o,";\n        --").concat(a[this.rank-1],";\n      }\n    "),u=1===this.rank?"":"\n      --".concat(r[this.rank-1],";\n      if (++").concat(r[this.rank-2]," < ").concat(t[this.rank-2],") {\n        ++").concat(a[this.rank-2],";\n        result.z = ").concat(o,";\n        if (++").concat(r[this.rank-1]," < ").concat(t[this.rank-1],") {\n          ++").concat(a[this.rank-1],";\n          result.w = ").concat(o,";\n        }\n      }\n    "),c=this.rank<=4?"sourceLoc = coords +\n            ".concat(n,"(").concat(t.map((function(e,t){return"start[".concat(t,"]")})).join(),");"):t.map((function(e,t){return"".concat(a[t]," = ").concat(r[t]," + start[").concat(t,"];")})).join("\n");this.userCode="\n      void main() {\n        ".concat(n," coords = getOutputCoords();\n        ").concat(n," sourceLoc;\n        ").concat(c,"\n        vec4 result = vec4(0.);\n        ").concat(s,"\n        ").concat(u,"\n        setOutput(result);\n      }\n    ")}));function z9(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=cZ(a,r.begin,r.size),o=(0,W.Z)(i,2),s=o[0],u=o[1];if(iZ(a,s,u),0===nW(u))return n.makeTensorInfo(u,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var c=n.texData.get(a.dataId),l=I6(c.values,s,u,a.shape,a.dtype);return n.makeTensorInfo(u,a.dtype,l)}var d=n.texData.get(a.dataId).isPacked,f=sZ(a.shape,s,u);if(d||!f){var p=RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new W9(u):new U9(u),h=[s];return n.runWebGLProgram(p,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.refCount=1,o.shape=n,o.dtype=e.dtype;var s=uZ(t,xW(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,s,u,n)}var q9={kernelName:Vq,backendName:"webgl",kernelFunc:z9},K9={kernelName:tz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;JV(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=H$(a.shape,i,s),c=Z$(u.length,i.length),l=Y$(a.shape,i,s),d=X$(o,i.length),f=Q$(l,o,i.length),p=[],h=F5({inputs:{x:a},backend:n,attrs:{shape:u}}),v=H5({inputs:{x:h},backend:n,attrs:{perm:c}}),m=F5({inputs:{x:v},backend:n,attrs:{shape:l}}),y=z9({inputs:{x:m},backend:n,attrs:{begin:d,size:f}});return p.push(h),p.push(v),p.push(m),p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var G9={kernelName:nz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=e6(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}};var H9={kernelName:rz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.s0,a=t.s1,i=n.readSync(r.dataId),o=n.readSync(a.dataId),s=JH(Array.from(i),Array.from(o));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},Z9=C5({opSnippet:"return float(a != b);",cpuKernelImpl:k6,dtype:"bool"}),Y9={kernelName:mq,backendName:"webgl",kernelFunc:Z9};function X9(e){var t=e.inputs,n=e.backend,r=t.input;return y5({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var Q9={kernelName:Cq,backendName:"webgl",kernelFunc:X9};var J9={kernelName:az,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return y5({inputs:{x:i},backend:r});var s=CX(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),c=b5({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),c}if("complex64"===i.dtype){var l=X9({inputs:{input:i},backend:r}),d=e({inputs:{x:l},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(l),d}if(!pW(i.dtype,o)){var f=y5({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new Y6(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var p=r.makeTensorInfo([],"bool",dW("bool",1)),h=Z9({inputs:{a:i,b:p},backend:r});return r.disposeIntermediateTensorInfo(p),h}throw new Error("Error in Cast: failed to cast ".concat(i.dtype," to ").concat(o))}},$9="return ceil(x);",e8=I5({opSnippet:$9,packedOpSnippet:$9,cpuKernelImpl:n6}),t8={kernelName:iz,backendName:"webgl",kernelFunc:e8},n8=N((function e(t){I(this,e),this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "})),r8=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=t,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}));var a8={kernelName:oz,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax;t=RW().getBool("WEBGL_PACK_CLIP")?new r8(i.shape):new n8(i.shape);var u=[[o],[s]];return r.runWebGLProgram(t,[i],i.dtype,u)}},i8=N((function e(t){I(this,e),this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}));function o8(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var s8={kernelName:uz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new i8(r.shape),o=[o8(r,a.complexTensorInfos.real),o8(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},u8=N((function e(t){I(this,e),this.outputShape=[],this.outputShape=q$(t,1),this.variableNames=t.map((function(e,t){return"T".concat(t)}));var n=new Array(t.length-1);n[0]=t[0][1];for(var r=1;r<n.length;r++)n[r]=n[r-1]+t[r][1];for(var a=["if (yC < ".concat(n[0],") setOutput(getT0(yR, yC));")],i=1;i<n.length;i++){var o=n[i-1];a.push("else if (yC < ".concat(n[i],") ")+"setOutput(getT".concat(i,"(yR, yC-").concat(o,"));"))}var s=n.length,u=n[n.length-1];a.push("else setOutput(getT".concat(s,"(yR, yC-").concat(u,"));")),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ".concat(a.join("\n        "),"\n      }\n    ")})),c8=N((function e(t,n){I(this,e),this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=q$(t,n);var r=this.outputShape,a=r.length,i=L3(a),o=W6("coords",a),s=["x","y","z","w","u","v"].slice(0,a);this.variableNames=t.map((function(e,t){return"T".concat(t)}));var u=new Array(t.length-1);u[0]=t[0][n];for(var c=1;c<u.length;c++)u[c]=u[c-1]+t[c][n];for(var l=s[n],d=s.slice(-2),f=s.join(),p="if (".concat(l," < ").concat(u[0],") {\n        return getChannel(\n            getT0(").concat(f,"), vec2(").concat(d.join(),"));\n        }"),h=1;h<u.length;h++){var v=u[h-1];p+="\n        if (".concat(l," < ").concat(u[h],"  && ").concat(l," >= ").concat(u[h-1],") {\n          return getChannel(\n            getT").concat(h,"(").concat(l8(s,l,v),"),\n            vec2(").concat(l8(d,l,v),"));\n        }")}var m=u.length,y=u[u.length-1];p+="\n        return getChannel(\n          getT".concat(m,"(").concat(l8(s,l,y),"),\n          vec2(").concat(l8(d,l,y),"));"),this.userCode="\n      float getValue(".concat(s.map((function(e){return"int "+e})),") {\n        ").concat(p,"\n      }\n\n      void main() {\n        ").concat(i," coords = getOutputCoords();\n        vec4 result = vec4(getValue(").concat(o,"), 0., 0., 0.);\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," + 1;\n        if (").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.g = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-2]," = ").concat(o[a-2]," + 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2],") {\n          result.a = getValue(").concat(o,");\n        }\n\n        ").concat(o[a-1]," = ").concat(o[a-1]," - 1;\n        if (").concat(o[a-2]," < ").concat(r[a-2]," &&\n            ").concat(o[a-1]," < ").concat(r[a-1],") {\n          result.b = getValue(").concat(o,");\n        }\n        setOutput(result);\n      }\n    ")}));function l8(e,t,n){var r=e.indexOf(t),a=e.map((function(e,t){return t===r?"".concat(e," - ").concat(n):e}));return a.join()}function d8(e){var t=e.inputs,n=e.backend,r=t.input;return y5({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var f8={kernelName:qz,backendName:"webgl",kernelFunc:d8};function p8(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return X9({inputs:{input:e},backend:n})})),i=e.map((function(e){return d8({inputs:{input:e},backend:n})})),o=p8(a,t,n),s=p8(i,t,n),u=b5({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}var c=n.shouldExecuteOnCPU(e);if("string"===r&&(c=!0),c){var l=e.map((function(e){var r=nW(e.shape.slice(t));return F5({inputs:{x:e},backend:n,attrs:{shape:[-1,r]}})})),d=l.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),f=q$(l.map((function(e){return e.shape})),1),p=1===l[0].shape[0],h=r6(d,f,r,p),v=q$(e.map((function(e){return e.shape})),t),m=n.makeTensorInfo(v,r,h);return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}if(e.length>RW().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var y=Math.floor(e.length/2),g=p8(e.slice(0,y),t,n),b=p8(e.slice(y),t,n),x=p8([g,b],t,n);return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(b),x}if(RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var k=new c8(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(k,e,r)}var w=function(e,t,n){var r=q$(e.map((function(e){return e.shape})),t),a=e.map((function(e){return F5({inputs:{x:e},attrs:{shape:[-1,nW(e.shape.slice(t))]},backend:n})}));return{tensors2D:a,outShape:r}}(e,t,n),_=w.tensors2D,T=w.outShape,S=new u8(_.map((function(e){return e.shape}))),E=n.runWebGLProgram(S,_,r);_.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var I=F5({inputs:{x:E},attrs:{shape:T},backend:n});return n.disposeIntermediateTensorInfo(E),I}function h8(e){var t=e.inputs,n=e.backend,r=cW(e.attrs.axis,t[0].shape)[0],a=q$(t.map((function(e){return e.shape})),r);if(0===nW(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return nW(e.shape)>0}));if(1===i.length)return y5({inputs:{x:i[0]},backend:n});var o=i.map((function(e){return e.shape}));return z$(o,r),p8(i,r,n)}var v8={kernelName:cz,backendName:"webgl",kernelFunc:h8},m8=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var o=t.padInfo.top,s=t.padInfo.left,u=t.strideHeight,c=t.strideWidth,l=t.dilationHeight,d=t.dilationWidth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),v=t.inChannels%4,m="channelsLast"===t.dataFormat,y=m?1:2,g=m?2:3,b=m?3:1,x="",k="";r&&(x=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),k="result = activation(result);");var w=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(x,"\n\n      const ivec2 strides = ivec2(").concat(u,", ").concat(c,");\n      const ivec2 pads = ivec2(").concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[").concat(b,"];\n\n        ivec2 xRCCorner =\n            ivec2(coords[").concat(y,"], coords[").concat(g,"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(f,"; wR++) {\n          int xR = xRCorner + wR * ").concat(l,";\n\n          if (xR < 0 || xR >= ").concat(t.inHeight,") {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(p,"; wC++) {\n            int xC = xCCorner + wC * ").concat(d,";\n\n            if (xC < 0 || xC >= ").concat(t.inWidth,") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (").concat(m,") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (").concat(1===v,") {\n\n              if (").concat(m,") {\n                dotProd +=\n                    getX(batch, xR, xC, ").concat(h,") *\n                    getW(wR, wC, ").concat(h,", d2);\n              } else {\n                dotProd +=\n                    getX(batch, ").concat(h,", xR, xC) *\n                    getW(wR, wC, ").concat(h,", d2);\n              }\n\n            } else if (").concat(2===v,") {\n              vec2 wValues = vec2(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2)\n              );\n\n              if (").concat(m,") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (").concat(3===v,") {\n              vec3 wValues = vec3(\n                getW(wR, wC, ").concat(h,", d2),\n                getW(wR, wC, ").concat(h," + 1, d2),\n                getW(wR, wC, ").concat(h," + 2, d2)\n              );\n\n              if (").concat(m,") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ").concat(h,"),\n                  getX(batch, xR, xC, ").concat(h," + 1),\n                  getX(batch, xR, xC, ").concat(h," + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ").concat(h,", xR, xC),\n                  getX(batch, ").concat(h," + 1, xR, xC),\n                  getX(batch, ").concat(h," + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ").concat(w,"\n        ").concat(k,"\n        setOutput(result);\n      }\n    ")})),y8=N((function e(t){I(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.padInfo.front,r=t.padInfo.top,a=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=t.dilationDepth,c=t.dilationHeight,l=t.dilationWidth,d=t.filterDepth,f=t.filterHeight,p=t.filterWidth,h=4*Math.floor(t.inChannels/4),v=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3(".concat(i,", ").concat(o,", ").concat(s,");\n      const ivec3 pads = ivec3(").concat(n,", ").concat(r,", ").concat(a,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(d,"; wF++) {\n          int xF = xFCorner + wF * ").concat(u,";\n\n          if (xF < 0 || xF >= ").concat(t.inDepth,") {\n            continue;\n          }\n\n          for (int wR = 0; wR < ").concat(f,"; wR++) {\n            int xR = xRCorner + wR * ").concat(c,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int wC = 0; wC < ").concat(p,"; wC++) {\n              int xC = xCCorner + wC * ").concat(l,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ").concat(h,"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (").concat(1===v,") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ").concat(h,") *\n                  getW(wF, wR, wC, ").concat(h,", d2);\n              } else if (").concat(2===v,") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (").concat(3===v,") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ").concat(h,"),\n                  getX(batch, xF, xR, xC, ").concat(h," + 1),\n                  getX(batch, xF, xR, xC, ").concat(h," + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ").concat(h,", d2),\n                  getW(wF, wR, wC, ").concat(h," + 1, d2),\n                  getW(wF, wR, wC, ").concat(h," + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),g8=N((function e(t,n){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=t,this.enableShapeUniforms=q3(this.outputShape.length);for(var r=n.dataFormat,a=d3(),i="channelsLast"===r,o=i?0:1,s=i?1:2,u=this.enableShapeUniforms?"if(blockIndex < outShape[1] && pos < outShape[0]) {":"if(blockIndex < ".concat(t[1]," && pos < ").concat(t[0],") {"),c="",l=0;l<=1;l++)for(var d=0;d<=1;d++)c+="\n          blockIndex = rc.y + ".concat(d,";\n          pos = rc.x + ").concat(l,";\n\n          ").concat(u,"\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[").concat(o,"] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[").concat(s,"] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (").concat(i,") {\n                  innerDims = vec2(d1, ch);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[").concat(2*l+d,"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ");this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ".concat(c,"\n\n        ").concat(a.output," = result;\n      }\n    ")}));function b8(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,c=void 0===u?null:u,l=e.leakyreluAlpha,d=void 0===l?0:l,f=e.activation,p=void 0===f?null:f,h=n.shape,v=i.texData.get(n.dataId),m=a.inChannels,y=h[0]*h[1]*h[2],g=a.outChannels,b="channelsLast"===a.dataFormat,x=[];if(!((1===y||1===g)&&m>1e3)&&v.isPacked&&b&&null!=v.texture&&h[2]%2!==0&&rW(v.shape.slice(-3),h.slice(-3))){var k=h[0]*h[1]*(h[2]+1),w={dataId:n.dataId,shape:[1,k,a.inChannels],dtype:n.dtype},_=v.shape;v.shape=v.shape.slice(),v.shape[v.shape.length-2]++,JV(a3(v.shape,w.shape),(function(){return"packed reshape ".concat(v.shape," to ").concat(w.shape," isn't free")}));var T=F5({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var S=Y5({a:w,b:T,backend:i,transposeA:false,transposeB:false,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d}),E=i.texData.get(S.dataId);JV(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),v.shape=_,E.shape=a.outShape,(t=y5({inputs:{x:S},backend:i})).shape=a.outShape,x.push(S)}else{var I=F5({inputs:{x:n},backend:i,attrs:{shape:[1,b?h[0]*h[1]*h[2]:h[0]*h[2]*h[3],a.inChannels]}}),C=F5({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),N=Y5({a:I,b:C,transposeA:false,transposeB:false,backend:i,bias:s,activation:p,preluActivationWeights:c,leakyreluAlpha:d});t=F5({inputs:{x:N},backend:i,attrs:{shape:a.outShape}}),x.push(I),x.push(C),x.push(N)}for(var A=0,O=x;A<O.length;A++){var P=O[A];i.disposeIntermediateTensorInfo(P)}return t}function x8(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,c=e.leakyreluAlpha,l=void 0===c?0:c,d=e.activation,f=void 0===d?null:d,p=r.filterWidth,h=r.filterHeight,v=r.inChannels,m=r.outWidth,y=r.outHeight,g="channelsLast"===r.dataFormat,b=p*h*v,x=y*m,k=[b,x],w=[],_=F5({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),T=F5({inputs:{x:n},backend:a,attrs:{shape:[1,b,nW(n.shape)/b]}});w.push(_),w.push(T);var S=new g8(k,r),E=[_.shape,[r.padInfo.top,r.padInfo.left],[r.strideHeight,r.strideWidth],[r.dilationHeight,r.dilationWidth],[r.inChannels],[r.filterWidth*r.inChannels],[r.outWidth]],I=a.runWebGLProgram(S,[_],"float32",E),C=F5({inputs:{x:I},backend:a,attrs:{shape:[1,k[0],k[1]]}});w.push(I),w.push(C);var N=null!=o,A=null!=u,O="leakyrelu"===f,P=f?N5(f,!0):null,R=new A5(C.shape,T.shape,[1,x,r.outChannels],!0,!1,N,P,A,O),D=[C,T];if(o&&D.push(o),A&&D.push(u),O){var M=a.makeTensorInfo([],"float32",QK(l,"float32"));D.push(M),w.push(M)}var L=a.runWebGLProgram(R,D,"float32"),F=F5({inputs:{x:L},backend:a,attrs:{shape:g?[1,y,m,r.outChannels]:[1,r.outChannels,y,m]}});w.push(L);for(var B=0,j=w;B<j.length;B++){var U=j[B];a.disposeIntermediateTensorInfo(U)}return F}var k8={kernelName:lz,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dataFormat,l=a.dilations,d=a.dimRoundingMode,f=jZ(c),p=CZ(i.shape,o.shape,s,l,u,d,!1,f);if(1!==p.filterHeight||1!==p.filterWidth||1!==p.dilationHeight||1!==p.dilationWidth||1!==p.strideHeight||1!==p.strideWidth||"SAME"!==p.padInfo.type&&"VALID"!==p.padInfo.type)if(RW().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=x8({x:i,filter:o,convInfo:p,backend:r});else{var h=new m8(p);t=r.runWebGLProgram(h,[i,o],"float32")}else t=b8({x:i,filter:o,convInfo:p,backend:r});var v=F5({inputs:{x:t},backend:r,attrs:{shape:p.outShape}});return r.disposeIntermediateTensorInfo(t),v}},w8=N((function e(t){I(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o="channelsLast"===t.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              if (").concat(o,") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),_8=N((function e(t){I(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o="channelsLast"===t.dataFormat,s=n-1-t.padInfo.top,u=r-1-t.padInfo.left,c=o?1:2,l=o?2:3,d=o?3:1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[").concat(d,"];\n\n        ivec2 dyCorner = ivec2(coords[").concat(c,"], coords[").concat(l,"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n\n              if (").concat(o,") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),T8=N((function e(t){I(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ".concat(t.batchSize,"; b++) {\n          for (int yF = 0; yF < ").concat(t.outDepth,"; yF++) {\n            int xF = wF + yF * ").concat(n," - ").concat(i,";\n\n            if (xF < 0 || xF >= ").concat(t.inDepth,") {\n              continue;\n            }\n\n            for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n              int xR = wR + yR * ").concat(r," - ").concat(o,";\n\n              if (xR < 0 || xR >= ").concat(t.inHeight,") {\n                continue;\n              }\n\n              for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n                int xC = wC + yC * ").concat(a," - ").concat(s,";\n\n                if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),S8=N((function e(t){I(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterDepth,r=t.filterHeight,a=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,u=n-1-t.padInfo.front,c=r-1-t.padInfo.top,l=a-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3(".concat(u,", ").concat(c,", ").concat(l,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ").concat(n,"; wF++) {\n          float dyF = float(dyFCorner + wF) / ").concat(i,".0;\n\n          if (dyF < 0.0 || dyF >= ").concat(t.outDepth,".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ").concat(n," - 1 - wF;\n\n          for (int wR = 0; wR < ").concat(r,"; wR++) {\n            float dyR = float(dyRCorner + wR) / ").concat(o,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ").concat(r," - 1 - wR;\n\n            for (int wC = 0; wC < ").concat(a,"; wC++) {\n              float dyC = float(dyCCorner + wC) / ").concat(s,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ").concat(a," - 1 - wC;\n\n              for (int d2 = 0; d2 < ").concat(t.outChannels,"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var E8={kernelName:dz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.filterShape,d=jZ(u),f=CZ(a.shape,l,o,1,s,c,!1,d),p=new w8(f);return n.runWebGLProgram(p,[a,i],"float32")}};var I8={kernelName:fz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,c=r.dataFormat,l=r.dimRoundingMode,d=jZ(c),f=CZ(o,i.shape,s,1,u,l,!1,d),p=new _8(f);return n.runWebGLProgram(p,[a,i],"float32")}};var C8={kernelName:pz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=NZ(a.shape,i.shape,o,u,s),l=new y8(c);return n.runWebGLProgram(l,[a,i],"float32")}};var N8={kernelName:"Conv3DBackpropFilterV2",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,c=NZ(a.shape,u,o,1,s),l=new T8(c);return n.runWebGLProgram(l,[a,i],"float32")}};var A8={kernelName:hz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=NZ(r.inputShape,i.shape,s,1,o),c=new S8(u);return n.runWebGLProgram(c,[a,i],"float32")}},O8=I5({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n"}),P8={kernelName:vz,backendName:"webgl",kernelFunc:O8},R8=I5({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),D8={kernelName:mz,backendName:"webgl",kernelFunc:R8},M8=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=(0,W.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3],d=(0,W.Z)(n,1)[0],f=(0,W.Z)(r,2),p=f[0],h=f[1];this.outputShape=[d,p,h,l];var v="bilinear"===a?1:0,m="".concat(u-1,".0"),y="".concat(c-1,".0"),g=p>1?["".concat((u-1)/(p-1)),"(y2-y1) * height_ratio","y1*".concat(m," + float(y)*(height_scale)")]:["0.0","0.0","0.5 * (y1+y2) * ".concat(m)],b=(0,W.Z)(g,3),x=b[0],k=b[1],w=b[2],_=h>1?["".concat((c-1)/(h-1)),"(x2-x1) * width_ratio","x1*".concat(y," + float(x)*(width_scale)")]:["0.0","0.0","0.5 * (x1+x2) * ".concat(y)],T=(0,W.Z)(_,3),S=T[0],E=T[1],C=T[2];this.userCode="\n      const float height_ratio = float(".concat(x,");\n      const float width_ratio = float(").concat(S,");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ").concat(s,") {\n          return;\n        }\n\n        float height_scale = ").concat(k,";\n        float width_scale = ").concat(E,";\n\n        float in_y = ").concat(w,";\n        if( in_y < 0.0 || in_y > ").concat(m," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n        float in_x = ").concat(C,";\n        if( in_x < 0.0 || in_x > ").concat(y," ) {\n          setOutput(float(").concat(i,"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(").concat(v," == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    ")})),L8={kernelName:gz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,c=r.extrapolationValue,l=new M8(a.shape,i.shape,s,u,c);return n.runWebGLProgram(l,[a,i,o],"float32")}},F8=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}],this.outputShape=t;var a=t.length,i=n?"0.0":"getX(".concat(B8(a,"coords"),")"),o=t[t.length-1],s="",u="";n?(s=r?"end != ".concat(o-1):"end != 0",u=r?"end + 1":"end - 1"):(s=r?"end + pow2 < ".concat(o):"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode="\n      void main() {\n        ".concat(L3(a)," coords = getOutputCoords();\n        int end = ").concat(j8(a,"coords"),";\n        float val = ").concat(i,";\n        int pow2 = int(pow(2.0, index));\n        if (").concat(s,") {\n          int idx = ").concat(u,";\n          ").concat(j8(a,"coords")," = idx;\n          val += getX(").concat(B8(a,"coords"),");\n        }\n        setOutput(val);\n      }\n    ")}));function B8(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".x, ").concat(t,".y");if(3===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z");if(4===e)return"".concat(t,".x, ").concat(t,".y, ").concat(t,".z, ").concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}function j8(e,t){if(1===e)return"".concat(t);if(2===e)return"".concat(t,".y");if(3===e)return"".concat(t,".z");if(4===e)return"".concat(t,".w");throw Error("Cumulative sum for rank ".concat(e," is not yet supported"))}var U8={kernelName:yz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length,c=vX([i],u),l=a;null!=c&&(l=H5({inputs:{x:a},backend:n,attrs:{perm:c}}));var d=yX(1,u)[0];if(d!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis=".concat(a.shape.length-1," ")+"but got axis=".concat(i));for(var f=l.shape[d],p=y5({inputs:{x:l},backend:n}),h=0;h<=Math.ceil(Math.log2(f))-1;h++){var v=new F8(l.shape,!1,s),m=[[h]],y=p;p=n.runWebGLProgram(v,[p],p.dtype,m),n.disposeIntermediateTensorInfo(y)}if(o){var g=new F8(l.shape,o,s),b=p;p=n.runWebGLProgram(g,[p],p.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=c){var x=H5({inputs:{x:p},backend:n,attrs:{perm:mX(c)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),x}return p}};var V8={kernelName:bz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=e6(u,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}if(2===a.shape.length){var d=n.bufferSync(a),f=n.bufferSync(i),p=t6(d,f,o,s);return n.makeTensorInfo(p.shape,i.dtype,p.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+"".concat(a.shape.length,"."))}},W8=function(){function e(t,n,r){I(this,e),this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ".concat(this.getHeightCoordString(),";\n      int w = ").concat(this.getWidthCoordString(),";\n      int d = ").concat(this.getDepthCoordString(),";\n\n      int in_h = h / ").concat(n,";\n      int offset_h = imod(h, ").concat(n,");\n      int in_w = w / ").concat(n,";\n      int offset_w = imod(w, ").concat(n,");\n      int offset_d = (offset_h * ").concat(n," + offset_w) *\n        ").concat(this.getOutputDepthSize(),";\n      int in_d = d + offset_d;\n\n      float result = ").concat(this.getInputSamplingString(),";\n      setOutput(result);\n    }\n  ")}return N(e,[{key:"getHeightCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}},{key:"getWidthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}},{key:"getDepthCoordString",value:function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}},{key:"getOutputDepthSize",value:function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}},{key:"getInputSamplingString",value:function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}]),e}();var z8={kernelName:xz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d=new W8("NHWC"===o?[s,u,c,l]:[s,l,u,c],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},q8=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=q3(this.outputShape.length);var o=t.filterHeight,s=t.filterWidth,u=t.outChannels/t.inChannels,c="",l="";r&&(c=a?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"\n          float activation(float x) {\n            ".concat(r,"\n          }\n        "),l="result = activation(result);");var d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(c,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(u,";\n        int q = d2 - d1 * ").concat(u,";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ").concat(o,"; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ").concat(s,"; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ").concat(d,"\n        ").concat(l,"\n        setOutput(result);\n      }\n    ")})),K8=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];I(this,e),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=t.outShape,this.enableShapeUniforms=q3(this.outputShape.length);for(var o=t.outChannels/t.inChannels,s=t.padInfo.left,u=t.strideWidth,c=t.dilationWidth,l=t.filterHeight,d=t.filterWidth,f=d,p="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;",h=0;h<d;h++)p+="\n          vec4 xTexelC".concat(2*h,";\n          int xTexelC").concat(2*h,"Ready;\n          vec4 xTexelC").concat(2*h+1,";\n          int xTexelC").concat(2*h+1,"Ready;\n          vec4 xC").concat(h,";");p+="\n    for (int r = 0; r < ".concat(l,"; r++) {\n      ");for(var v=0;v<d;v++)p+="\n          xTexelC".concat(2*v," = vec4(0.0);\n          xTexelC").concat(2*v,"Ready = 0;\n          xTexelC").concat(2*v+1," = vec4(0.0);\n          xTexelC").concat(2*v+1,"Ready = 0;\n          xC").concat(v," = vec4(0.0);");p+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(var m=0;m<(f+1)/2;m++){var y=2*m;if(p+="\n          xC = xCCorner + ".concat(y*c,";\n          "),1===u){if(y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n              "),p+=1===c&&y>0?"\n                xC".concat(y," = vec4(xTexelC").concat(y-2,".zw, xTexelC").concat(y,".xy);\n                "):"\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC".concat(y," = vec4(previous.zw, xTexelC").concat(y,".xy);\n                  } else {\n                    xC").concat(y," = vec4(0.0, 0.0, xTexelC").concat(y,".xy);\n                  }\n                  ")):p+="\n                if (xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xC").concat(y," = xTexelC").concat(y,";\n                "),y+1<d)){var g=s%2===0?YV(c):c;c%2===0&&s%2===1||c%2!==0&&s%2!==1?(p+="\n                  xCOffset = xC + imod(pads[1], 2) + ".concat(g,";\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                    xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC").concat(y+1,".zw = vec2(0.0);\n                    }\n                    xTexelC").concat(y+1,"Ready = 1;\n                  }\n                  "),c>1&&(p+="\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                      xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                      xTexelC").concat(y,"Ready = 1;\n                    }\n                    ")),p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".xy);\n                  ")):p+=1===g?"\n                    xC".concat(y+1," = xTexelC").concat(y,";\n                    "):"\n                    xCOffset = xC + ".concat(g,";\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                      xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC").concat(y+1,".zw = vec2(0.0);\n                      }\n                      xTexelC").concat(y+1,"Ready = 1;\n                    }\n\n                    xC").concat(y+1," = xTexelC").concat(y+1,";\n                    ")}}else y<d&&(s%2===1?(p+="\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n              "),y+1<d&&(p+="\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC".concat(y+1," = vec4(xTexelC").concat(y+1,".xy, final.xy);\n                "))):(p+="\n                if(xC >= 0 && xC < inDims[1] && xTexelC".concat(y,"Ready == 0) {\n                  xTexelC").concat(y," = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC").concat(y,".zw = vec2(0.0);\n                  }\n                  xTexelC").concat(y,"Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC").concat(y+1,"Ready == 0) {\n                  xTexelC").concat(y+1," = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC").concat(y+1,".zw = vec2(0.);\n                  }\n                  xTexelC").concat(y+1,"Ready = 1;\n                }\n\n                xC").concat(y," = vec4(\n                  xTexelC").concat(y,".xy, xTexelC").concat(y+1,".xy);\n              "),y+1<d&&(p+="\n                  xC".concat(y+1," = vec4(xTexelC").concat(y,".zw, xTexelC").concat(y+1,".zw);\n                "))));y<d&&(p+="\n            wTexel = getW(r, ".concat(y,", d1, q);\n            dotProd += xC").concat(y," * vec4(wTexel.xz, wTexel.xz);\n          "),y+1<d&&(p+="\n              wTexel = getW(r, ".concat(y+1,", d1, q);\n              dotProd += xC").concat(y+1," * vec4(wTexel.xz, wTexel.xz);\n            ")))}p+="\n    }\n  ",p+="\n      }\n    ";var b="",x="";r&&(b=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ".concat(r,"\n        }"):i?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ".concat(r,"\n        }"):"vec4 activation(vec4 x) {\n          ".concat(r,"\n        }"),x="result = activation(result);");var k=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      ".concat(b,"\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ").concat(o,";\n        int q = d2 - d1 * ").concat(o,";\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ").concat(p,"\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ").concat(k,"\n        ").concat(x,"\n        setOutput(result);\n      }\n    ")}));var G8={kernelName:kz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,c=r.dimRoundingMode,l=u;null==l&&(l=[1,1]),JV(BZ(o,l),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(o," and dilations '").concat(l,"'")}));var d,f=CZ(a.shape,i.shape,o,l,s,c,!0);d=RW().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels===1?new K8(f):new q8(f);var p=[[f.padInfo.top,f.padInfo.left],[f.strideHeight,f.strideWidth],[f.dilationHeight,f.dilationWidth],[f.inHeight,f.inWidth]];return n.runWebGLProgram(d,[a,i],"float32",p)}},H8=N((function e(t){I(this,e),this.variableNames=["x","dy"],this.outputShape=t.filterShape;var n=t.strideHeight,r=t.strideWidth,a=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ".concat(o," + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ").concat(t.batchSize,"; b++) {\n          for (int yR = 0; yR < ").concat(t.outHeight,"; yR++) {\n            int xR = wR + yR * ").concat(n," - ").concat(a,";\n\n            if (xR < 0 || xR >= ").concat(t.inHeight,") {\n              continue;\n            }\n\n            for (int yC = 0; yC < ").concat(t.outWidth,"; yC++) {\n              int xC = wC + yC * ").concat(r," - ").concat(i,";\n\n              if (xC < 0 || xC >= ").concat(t.inWidth,") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),Z8=N((function e(t){I(this,e),this.variableNames=["dy","W"],this.outputShape=t.inShape;var n=t.filterHeight,r=t.filterWidth,a=t.strideHeight,i=t.strideWidth,o=n-1-t.padInfo.top,s=r-1-t.padInfo.left,u=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2(".concat(o,", ").concat(s,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ").concat(n,"; wR++) {\n          float dyR = float(dyRCorner + wR) / ").concat(a,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ").concat(n," - 1 - wR;\n\n          for (int wC = 0; wC < ").concat(r,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(i,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ").concat(r," - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ").concat(u,"; dm++) {\n              int d2 = d1 * ").concat(u," + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Y8={kernelName:wz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=r.filterShape,d=CZ(a.shape,l,o,s,u,c,!0),f=new H8(d);return n.runWebGLProgram(f,[a,i],"float32")}};var X8={kernelName:_z,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,c=r.dimRoundingMode,l=CZ(r.inputShape,i.shape,o,s,u,c,!0),d=new Z8(l);return n.runWebGLProgram(d,[a,i],"float32")}},Q8=N((function e(t){I(this,e),this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}));var J8={kernelName:Tz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat((0,Ze.Z)(r.shape),(0,Ze.Z)(r.shape)),i=nW(r.shape),o=F5({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new Q8(i),u=n.runWebGLProgram(s,[o],o.dtype),c=F5({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),c}},$8=N((function e(t){I(this,e),this.variableNames=["x","W"],this.outputShape=t.outShape;var n=t.inHeight,r=t.inWidth,a=t.padInfo,i=t.strideHeight,o=t.strideWidth,s=t.filterHeight,u=t.filterWidth,c=t.dilationHeight,l=t.dilationWidth,d=a.top,f=a.left;this.userCode="\n      const ivec2 strides = ivec2(".concat(i,", ").concat(o,");\n      const ivec2 pads = ivec2(").concat(d,", ").concat(f,");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ").concat(s,"; h++) {\n          int hIn = hBeg + h * ").concat(c,";\n\n          if (hIn >= 0 && hIn < ").concat(n,") {\n            for (int w = 0; w < ").concat(u,"; w++) {\n              int wIn = wBeg + w * ").concat(l,";\n\n              if (wIn >= 0 && wIn < ").concat(r,") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    ")}));var e7={kernelName:Sz,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,c=a.dilations,l=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"NHWC",i=arguments.length>5?arguments[5]:void 0,o=e[3],s=[].concat((0,Ze.Z)(t),[o]),u=jZ(a);return CZ(e,s,n,i,r,null,null,u)}(i.shape,o.shape,s,u,"NHWC",c),d=new $8(l),f=F5({inputs:{x:t=r.runWebGLProgram(d,[i,o],"float32")},backend:r,attrs:{shape:l.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var t7={kernelName:Iz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,a=function(e,t){var n=((e=e.replace(/\s/g,"")).length-e.replace(n0,"").length)/t0.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("'.concat(t0,'").'));var r=e.split(t0),a=(0,W.Z)(r,2),i=a[0],o=a[1];JV(-1===i.indexOf("..."),(function(){return'The ellipsis notation ("'.concat("...",'") is not supported yet.')}));var s=i.split(","),u=s.length;if(t!==u)throw new Error("Expected ".concat(u," input tensors, received ").concat(t));if(u>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");for(var c=[],l=function(e){var t=o[e];if(!s.some((function(e){return-1!==e.indexOf(t)})))throw new Error("Output subscripts contain the label ".concat(t," ")+"not present in the input subscripts.");-1===c.indexOf(t)&&c.push(t)},d=0;d<o.length;++d)l(d);for(var f=0;f<i.length;++f){var p=i[f];-1===c.indexOf(p)&&","!==p&&c.push(p)}for(var h=new Array(s.length),v=0;v<u;++v){if(new Set(s[v].split("")).size!==s[v].length)throw new Error("Found duplicate axes in input component ".concat(s[v],". ")+"Support for duplicate axes in input is not implemented yet.");h[v]=[];for(var m=0;m<s[v].length;++m)h[v].push(c.indexOf(s[v][m]))}for(var y=c.length,g=[],b=o.length;b<y;++b)g.push(b);return{allDims:c,summedDims:g,idDims:h}}(e.attrs.equation,r.length),i=a.allDims,o=a.summedDims,s=a.idDims;!function(e,t,n){for(var r=new Array(e),a=function(e){for(var a=n[e].shape,i=function(n){void 0===r[t[e][n]]?r[t[e][n]]=a[n]:JV(r[t[e][n]]===a[n],(function(){return"Expected dimension ".concat(r[t[e][n]]," at axis ").concat(n," ")+"of input shaped ".concat(JSON.stringify(a),", ")+"but got dimension ".concat(a[n])}))},o=0;o<t[e].length;++o)i(o)},i=0;i<n.length;++i)a(i)}(i.length,s,r);for(var u=function(e,t){var n,r=e,a=[];0===e.length&&r.push(-1),n=e.length+1;for(var i=0;i<n;++i)a.push([]);for(var o=[],s=0;s<r.length;++s){var u,c=V(i0(t,r[s]));try{for(c.s();!(u=c.n()).done;){var l=u.value;-1===o.indexOf(l)&&(a[s].push(l),o.push(l))}}catch(Noe){c.e(Noe)}finally{c.f()}}return{path:r,steps:a}}(o,s),c=u.path,l=u.steps,d=l.length,f=null,p=i.length,h=[],v=0;v<d;++v){var m,y=V(l[v]);try{for(y.s();!(m=y.n()).done;){var g=m.value,b=r0(p,s[g]),x=b.permutationIndices,k=b.expandDims,w=void 0;a0(x)?w=r[g]:(w=H5({inputs:{x:r[g]},backend:n,attrs:{perm:x}}),h.push(w));for(var _=w.shape.slice(),T=0;T<k.length;++T)_.splice(k[T],0,1);rW(w.shape,_)||(w=F5({inputs:{x:w},backend:n,attrs:{shape:_}}),h.push(w)),null===f?f=w:(f=M5({inputs:{a:w,b:f},backend:n}),h.push(f))}}catch(Noe){y.e(Noe)}finally{y.f()}v<d-1&&(c[v]>=0&&(f=K5({inputs:{x:f},backend:n,attrs:{axis:c[v]-(i.length-p),keepDims:!1}}),h.push(f)),p--)}for(var S=0,E=h;S<E.length;S++){var I=E[S];I!==f&&n.disposeIntermediateTensorInfo(I)}return f}},n7=I5({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),r7={kernelName:Cz,backendName:"webgl",kernelFunc:n7},a7={kernelName:"EluGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=RW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new m5("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new v5("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},i7=C5({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:a6}),o7={kernelName:Nz,backendName:"webgl",kernelFunc:i7},s7={kernelName:"Erf",backendName:"webgl",kernelFunc:I5({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '.concat(.3275911,";\n  float a1 = ").concat(.254829592,";\n  float a2 = ").concat(-.284496736,";\n  float a3 = ").concat(1.421413741,";\n  float a4 = ").concat(-1.453152027,";\n  float a5 = ").concat(1.061405429,";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n")})},u7=I5({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:i6,dtype:"float32"}),c7={kernelName:Az,backendName:"webgl",kernelFunc:u7};function l7(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(JV(-(o+1)<=a,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+a+1),s.splice(u,0,1),F5({inputs:{x:i},backend:r,attrs:{shape:s}})}var d7={kernelName:Oz,backendName:"webgl",kernelFunc:l7},f7="return exp(x) - 1.0;",p7=I5({opSnippet:f7,packedOpSnippet:f7,cpuKernelImpl:o6}),h7={kernelName:Pz,backendName:"webgl",kernelFunc:p7},v7=N((function e(t,n,r){I(this,e),this.variableNames=["real","imag"];var a=n[1];this.outputShape=n;var i,o=r?"2.0 * ".concat(Math.PI):"-2.0 * ".concat(Math.PI),s=r?"".concat(a,".0"):"1.0";if("real"===t)i="return real * expR - imag * expI;";else{if("imag"!==t)throw new Error('FFT component must be either "real" or "imag", got '.concat(t,"."));i="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = ".concat(o,";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ").concat(i,"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(").concat(a,");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ").concat(a,"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ").concat(s,";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    ")}));function m7(e,t,n){var r=n.texData.get(e.dataId),a=nW(e.shape),i=e.shape[e.shape.length-1],o=F5({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}),s=o.shape,u=new v7("real",s,t),c=new v7("imag",s,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],d=n.runWebGLProgram(u,l,"float32"),f=n.runWebGLProgram(c,l,"float32"),p=b5({inputs:{real:d,imag:f},backend:n});n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f);var h=F5({inputs:{x:p},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(p),h}var y7={kernelName:"FFT",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return m7(t.input,!1,n)}},g7=N((function e(t,n){I(this,e),this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=t,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}));function b7(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||yW(a))){var o=fW(i,nW(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new g7(r,a),u=[[a]];return t.runWebGLProgram(s,[],i,u)}var x7,k7={kernelName:Rz,backendName:"webgl",kernelFunc:b7},w7=N((function e(t){I(this,e),this.variableNames=["Image"],this.outputShape=[];var n=t[2];this.outputShape=t,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ".concat(n," - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ").concat(n,") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),_7={kernelName:Dz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new w7(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},T7="return floor(x);",S7=I5({opSnippet:T7,packedOpSnippet:T7,cpuKernelImpl:s6}),E7={kernelName:Mz,backendName:"webgl",kernelFunc:S7},I7=C5({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),C7={kernelName:Lz,backendName:"webgl",kernelFunc:I7},N7=N((function e(t){I(this,e),this.variableNames=["A"];var n=d3(),r=(0,W.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(".concat(i,".0, ").concat(a,".0);\n\n        vec4 values = ").concat(n.texture2D,"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    ")})),A7=N((function e(t){I(this,e),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=d3(),r=(0,W.Z)(t,2),a=r[0],i=r[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(".concat(i,".0, ").concat(a,".0);\n            vec4 values = ").concat(n.texture2D,"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ").concat(n.output," = result;\n      }\n    ")})),O7={kernelName:kK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!==typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!==typeof HTMLImageElement&&a instanceof HTMLImageElement,u=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=(0,W.Z)(u,2),l=c[0],d=c[1],f=[d,l],p=[d,l,i];(s||o)&&(null==x7&&(x7=document.createElement("canvas").getContext("2d")),x7.canvas.width=l,x7.canvas.height=d,x7.drawImage(a,0,0,l,d),a=x7.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=C2.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),a);var v=RW().getBool("WEBGL_PACK")?new A7(p):new N7(p),m=n.runWebGLProgram(v,[h],"int32");return n.disposeData(h.dataId),m}};var P7={kernelName:TK,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,c=a.strides,l=a.pad,d=a.dataFormat,f=a.dilations,p=a.dimRoundingMode,h=a.activation,v=a.leakyreluAlpha,m=jZ(d),y=CZ(i.shape,o.shape,c,f,l,p,!1,m),g=[];if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(RW().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=x8({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:v});else{var b=null!=s,x=null!=u,k="leakyrelu"===h,w=h?N5(h,!1):null,_=new m8(y,b,w,x,k),T=[i,o];if(s&&T.push(s),u&&T.push(u),k){var S=r.makeTensorInfo([],"float32",QK(v,"float32"));T.push(S),g.push(S)}t=r.runWebGLProgram(_,T,"float32")}else t=b8({x:i,filter:o,convInfo:y,backend:r,bias:s,activation:h,preluActivationWeights:u,leakyreluAlpha:v});var E=F5({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return g.push(t),g.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),E}};var R7={kernelName:SK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,c=r.pad,l=r.dilations,d=r.dimRoundingMode,f=r.activation,p=r.leakyreluAlpha,h=[],v=l;null==v&&(v=[1,1]),JV(BZ(u,v),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be "+"1. Got strides ".concat(u," and dilations '").concat(v,"'")}));var m,y=CZ(a.shape,i.shape,u,v,c,d,!0),g=RW().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels===1,b=f?N5(f,g):null,x=[a,i],k=null!=o,w=null!=s,_="leakyrelu"===f;if(k&&x.push(o),w&&x.push(s),_){var T=n.makeTensorInfo([],"float32",QK(p,"float32"));x.push(T),h.push(T)}m=g?new K8(y,k,b,w,_):new q8(y,k,b,w,_);var S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],E=n.runWebGLProgram(m,x,"float32",S);return h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),E}},D7=N((function e(t,n,r){I(this,e),this.sliceDim=t,this.strides=n,this.variableNames=["x","indices"],this.outputShape=r;var a=L3(n.length),i=L3(r.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        ".concat(a," strides = ").concat(a,"(").concat(this.strides,");\n         void main() {\n          ").concat(i," coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < ").concat(this.sliceDim,"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * ").concat(o,";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      ")}));var M7={kernelName:jz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=nW(r.shape),u=nZ(r,a),c=(0,W.Z)(u,4),l=c[0],d=c[1],f=c[2],p=c[3],h=F5({inputs:{x:a},backend:n,attrs:{shape:[d,o]}}),v=F5({inputs:{x:r},backend:n,attrs:{shape:[nW(r.shape)/f,f]}});if(n.shouldExecuteOnCPU([r,a])||"string"===r.dtype){var m=n.readSync(a.dataId),y=n.bufferSync(r),g=u6(m,y,r.dtype,d,o,f,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,g.values)}var b=new D7(o,p,[d,f]),x=n.runWebGLProgram(b,[v,h],v.dtype),k=F5({inputs:{x:x},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(x),k}},L7=N((function e(t,n){I(this,e),this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;var r=L3(this.rank),a=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("index"):r.push("".concat(n[a]));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(r," resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ").concat(t[2],") ? 1.0 : 0.0;\n        setOutput(inBounds * getA(").concat(a,"));\n      }\n    ")}));function F7(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=cW(o,a.shape)[0];RW().get("DEBUG")&&function(){for(var e=n.readSync(i.dataId),t=a.shape[u],r=function(n){var r=e[n];JV(r<=t-1&&r>=0,(function(){return"GatherV2: the index value ".concat(r," is not in [0, ").concat(t-1,"]")}))},o=0;o<e.length;++o)r(o)}();var c=m0(a,i,u,s),l=nW(i.shape),d=[],f=F5({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),p=F5({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}});d.push(f),d.push(p);var h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var v=n.bufferSync(p),m=n.bufferSync(f),y=c6(m,v,h);return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(c.outputShape,y.dtype,y.values)}var g=new L7(f.shape,h),b=n.runWebGLProgram(g,[f,p],f.dtype);d.push(b);var x=F5({inputs:{x:b},backend:n,attrs:{shape:c.outputShape}});return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}var B7={kernelName:Bz,backendName:"webgl",kernelFunc:F7},j7=C5({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:l6,dtype:"bool"}),U7={kernelName:Uz,backendName:"webgl",kernelFunc:j7},V7=C5({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:d6}),W7={kernelName:Vz,backendName:"webgl",kernelFunc:V7};var z7={kernelName:zz,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return m7(t.input,!0,n)}},q7=I5({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),K7={kernelName:Kz,backendName:"webgl",kernelFunc:q7},G7=I5({opSnippet:"return float(isinf(x));",dtype:"bool"}),H7={kernelName:Gz,backendName:"webgl",kernelFunc:G7},Z7=I5({opSnippet:"return float(isnan(x));",dtype:"bool"}),Y7={kernelName:Hz,backendName:"webgl",kernelFunc:Z7},X7=C5({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:f6,dtype:"bool"}),Q7={kernelName:Yz,backendName:"webgl",kernelFunc:X7},J7=C5({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:p6,dtype:"bool"}),$7={kernelName:Xz,backendName:"webgl",kernelFunc:J7};var eee={kernelName:Qz,backendName:"webgl",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=h6(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},tee=I5({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:v6}),nee={kernelName:Jz,backendName:"webgl",kernelFunc:tee},ree=I5({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),aee={kernelName:$z,backendName:"webgl",kernelFunc:ree},iee=C5({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),oee={kernelName:eq,backendName:"webgl",kernelFunc:iee},see=I5({opSnippet:"return float(!(x >= 1.0));"}),uee={kernelName:tq,backendName:"webgl",kernelFunc:see},cee=C5({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),lee={kernelName:nq,backendName:"webgl",kernelFunc:cee},dee=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["x"],this.outputShape=[];var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -".concat(s,"; j <= ").concat(s,"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ").concat(u,") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ").concat(o,";\n        setOutput(val);\n      }\n    ")})),fee=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,s=n,u=t[3]-1;this.outputShape=t;var c="float(".concat(r,") + float(").concat(a,") * sum");o=.5===i?"inversesqrt(".concat(c,")"):1===i?"1.0/(".concat(c,")"):"exp(log(".concat(c,") * float(-").concat(i,"));"),this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ".concat(this.outputShape[3],";\n        bool hasNextRow = c < ").concat(this.outputShape[2],";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ").concat(s,";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ").concat(s,"; j <= ").concat(s,"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(").concat(u,"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ").concat(o,";\n        setOutput(result);\n      }\n    ")})),pee={kernelName:rq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,c=RW().getBool("WEBGL_PACK_NORMALIZATION")?new fee(a.shape,i,o,s,u):new dee(a.shape,i,o,s,u);return n.runWebGLProgram(c,[a],a.dtype)}},hee=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=n,this.bias=r,this.alpha=a,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ".concat(this.depth,"; ++d) {\n          int depthBegin = int(max(0.0, float(d - ").concat(n,")));\n          int depthEnd = int(min(float(").concat(this.depth,"),\n              float(d + ").concat(n," + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ").concat(this.depth,";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(").concat(a,") * norm + float(").concat(r,");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(").concat(a,")\n                * float(").concat(i,")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ").concat(i,");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    ")})),vee={kernelName:"LRNGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,c=r.alpha,l=r.beta,d=new hee(a.shape,s,u,c,l);return n.runWebGLProgram(d,[a,i,o],a.dtype)}};function mee(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=cW(i,a.shape),c=u,l=vX(c,s),d=null!=l,f=n.shouldExecuteOnCPU([a]),p=a;if(d){if(f){for(var h=n.texData.get(p.dataId).values,v=new Array(s),m=0;m<v.length;m++)v[m]=a.shape[l[m]];var y=j6(h,a.shape,a.dtype,l,v);p=n.makeTensorInfo(v,a.dtype),n.texData.get(p.dataId).values=y}else p=q5(a,l,n);c=yX(c.length,s)}hX("max",c,s);var g,b=fX(p.shape,c),x=(0,W.Z)(b,2),k=x[0],w=x[1],_=k;if(o&&(_=pX(k,u)),f){var T=n.texData.get(p.dataId).values,S=m6(T,nW(w),_,a.dtype);g=n.makeTensorInfo(_,a.dtype),n.texData.get(g.dataId).values=S}else g=function(e,t,n,r){var a=nW(t),i=F5({inputs:{x:e},attrs:{shape:[nW(e.shape)/a,a]},backend:r}),o=V5(i,e.dtype,"max",r),s=F5({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(p,w,_,n);return d&&n.disposeIntermediateTensorInfo(p),g}var yee={kernelName:aq,backendName:"webgl",kernelFunc:mee},gee=C5({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:y6}),bee={kernelName:iq,backendName:"webgl",kernelFunc:gee};var xee={kernelName:oq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;c3(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;JV(BZ(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(1,"'")}));var c=EZ(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&rW(c.inShape,c.outShape))return y5({inputs:{x:a},backend:n});var l=new C9(c,"max",!1);return n.runWebGLProgram(l,[a],a.dtype)}};var kee={kernelName:sq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=IZ(a.shape,i,o,[1,1,1],s,c,u),d=new N9(l,"max",!1);return n.runWebGLProgram(d,[a],a.dtype)}},wee=N((function e(t){I(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideHeight,r=t.strideWidth,a=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,u=o-1-t.padInfo.left,c=i*o-1;this.userCode="\n      const ivec2 pads = ivec2(".concat(s,", ").concat(u,");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ").concat(i,";\n          wR += ").concat(a,") {\n          float dyR = float(dyRCorner + wR) / ").concat(n,".0;\n\n          if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ").concat(o,"; wC++) {\n            float dyC = float(dyCCorner + wC) / ").concat(r,".0;\n\n            if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ").concat(c," - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ").concat(o," + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")})),_ee=N((function e(t){I(this,e),this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var n=t.strideDepth,r=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,l=t.effectiveFilterWidth,d=u-1-t.padInfo.front,f=c-1-t.padInfo.top,p=l-1-t.padInfo.left,h=u*c*l-1;this.userCode="\n      const ivec3 pads = ivec3(".concat(d,", ").concat(f,", ").concat(p,");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ").concat(u,";\n           wD += ").concat(i,") {\n          float dyD = float(dyDCorner + wD) / ").concat(n,".0;\n\n          if (dyD < 0.0 || dyD >= ").concat(t.outDepth,".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ").concat(c,";\n              wR += ").concat(o,") {\n            float dyR = float(dyRCorner + wR) / ").concat(r,".0;\n\n            if (dyR < 0.0 || dyR >= ").concat(t.outHeight,".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ").concat(l,";\n                wC += ").concat(s,") {\n              float dyC = float(dyCCorner + wC) / ").concat(a,".0;\n\n              if (dyC < 0.0 || dyC >= ").concat(t.outWidth,".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ").concat(h," -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ").concat(c," * ").concat(l," +\n                  wR * ").concat(l," + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    ")}));var Tee={kernelName:"MaxPool3DGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,c=r.dimRoundingMode,l=IZ(i.shape,o,s,[1,1,1],u,c),d=new N9(l,"max",!0),f=n.runWebGLProgram(d,[i],i.dtype),p=new _ee(l),h=n.runWebGLProgram(p,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),h}};var See={kernelName:"MaxPoolGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;c3([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,c=r.pad,l=r.dimRoundingMode,d=EZ(o.shape,s,u,1,c,l),f=new C9(d,"max",!0),p=n.runWebGLProgram(f,[o],o.dtype),h=new wee(d),v=n.runWebGLProgram(h,[a,p],o.dtype);return n.disposeIntermediateTensorInfo(p),v}};var Eee={kernelName:uq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,c=r;JV(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(a.shape.length,".")}));var l=[1,1];JV(BZ(o,l),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(o," and dilations '").concat(l,"'")}));var d=EZ(a.shape,i,o,l,s),f=function(e,t,n,r){var a=new C9(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new C9(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,d,c),p=(0,W.Z)(f,2);return[p[0],p[1]]}};var Iee={kernelName:cq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,c=cW(o,a.shape),l=c,d=vX(l,u),f=null!=d,p=s.shouldExecuteOnCPU([a]),h=[],v=a;if(f){if(p){for(var m=s.texData.get(v.dataId).values,y=new Array(u),g=0;g<y.length;g++)y[g]=a.shape[d[g]];var b=j6(m,a.shape,a.dtype,d,y);v=s.makeTensorInfo(y,a.dtype),s.texData.get(v.dataId).values=b}else v=q5(a,d,s);h.push(v),l=yX(l.length,u)}hX("sum",l,u);var x=fX(v.shape,l),k=(0,W.Z)(x,2),w=k[0],_=k[1],T=w;i&&(T=pX(w,c));for(var S=function(e,t,n,r){var a=nW(t),i=F5({inputs:{x:e},attrs:{shape:[nW(e.shape)/a,a]},backend:r}),o=V5(i,"float32","mean",r),s=F5({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(v,_,T,s),E=0,I=h;E<I.length;E++){var C=I[E];s.disposeIntermediateTensorInfo(C)}return S}};var Cee={kernelName:lq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=cW(i,a.shape),c=u,l=vX(c,s),d=a;null!=l&&(d=H5({inputs:{x:a},backend:n,attrs:{perm:l}}),c=yX(c.length,a.shape.length)),hX("min",c,s);var f,p=fX(d.shape,c),h=(0,W.Z)(p,2),v=h[0],m=F5({inputs:{x:d},backend:n,attrs:{shape:[-1,nW(h[1])]}}),y=V5(m,m.dtype,"min",n);return f=F5(o?{inputs:{x:y},backend:n,attrs:{shape:pX(v,u)}}:{inputs:{x:y},backend:n,attrs:{shape:v}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),null!=l&&n.disposeIntermediateTensorInfo(d),f}},Nee=C5({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:g6}),Aee={kernelName:dq,backendName:"webgl",kernelFunc:Nee},Oee=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=L3(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a),c="reflect"===r?0:1;this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        for (int i = 0; i < ").concat(a,"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ").concat(c,";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ").concat(c,";\n          }\n        }\n        ").concat(i," coords = outC - start;\n        setOutput(getX(").concat(u,"));\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ").concat(c,";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ").concat(c,";\n          }\n          setOutput(getX(outC - start));\n        }\n      ")})),Pee=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=L3(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=W6("rc",a),c=W6("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f="reflect"===r?0:1,p="";if(1===a){var h="\n        ".concat(i," source = rc;\n        if (source < start) {\n          source = start * 2 - source - ").concat(f,";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ").concat(f,";\n        }\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(h,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(h,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ")}else{var v="\n        ".concat(i," source = rc;\n        ").concat(i," lt = ").concat(i,"(lessThan(source, start));\n        ").concat(i," gte = ").concat(i,"(greaterThanEqual(source, end));\n        ").concat(i," orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ").concat(f,") +\n                gte * ((end - 1) * 2 - source + ").concat(f,");\n        source -= start;\n      ");p="\n        ".concat(i," rc = outputLoc;\n        ").concat(v,"\n        result[0] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        ").concat(u[a-1]," += 1;\n        if(").concat(l,") {\n          ").concat(v,"\n          result[1] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n        rc = outputLoc;\n        ").concat(u[a-2]," += 1;\n        if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {\n          ").concat(v,"\n          result[2] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          ").concat(u[a-1]," += 1;\n          if(").concat(l,") {\n            ").concat(v,"\n            result[3] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n          }\n        }\n      ")}this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(p,"\n        setOutput(result);\n      }\n    ")})),Ree={kernelName:fq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Pee(a.shape,i,o):new Oee(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},Dee={kernelName:"Mod",backendName:"webgl",kernelFunc:C5({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"})},Mee=N((function e(t,n,r){I(this,e),this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[t,r],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ".concat(n-1,"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(").concat(n-1,"));\n      }\n    ")})),Lee=C5({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Fee={kernelName:Ez,backendName:"webgl",kernelFunc:Lee},Bee="return a - b;",jee=C5({opSnippet:Bee,packedOpSnippet:Bee,supportsComplex:!0,cpuKernelImpl:L6}),Uee={kernelName:cK,backendName:"webgl",kernelFunc:jee};function Vee(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=cW([r.dim],a.shape),o=mee({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=pX(o.shape,i),u=F5({inputs:{x:o},backend:n,attrs:{shape:s}}),c=jee({inputs:{a:a,b:u},backend:n}),l=u7({inputs:{x:c},backend:n}),d=K5({inputs:{x:l},backend:n,attrs:{axis:i,keepDims:!1}}),f=F5({inputs:{x:d},backend:n,attrs:{shape:s}}),p=Lee({inputs:{a:l,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(f),p}var Wee={kernelName:Qq,backendName:"webgl",kernelFunc:Vee};var zee={kernelName:pq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:Vee({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),c=u.shape[0],l=u.shape[1],d=new Mee(c,l,i),f=[[o]],p=n.runWebGLProgram(d,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),p}};var qee={kernelName:vq,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=x6(i.values,a.shape,a.dtype),s=(0,W.Z)(o,2),u=s[0],c=s[1];return r.makeTensorInfo(c,a.dtype,u)}return t=RW().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new c5(a.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new Y6(a.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[a],a.dtype)}},Kee=VJ;var Gee={kernelName:yq,backendName:"webgl",kernelFunc:function(e){EK("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=n.readSync(a.dataId),l=n.readSync(i.dataId),d=Kee(c,l,o,s,u).selectedIndices;return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}},Hee=WJ;var Zee={kernelName:gq,backendName:"webgl",kernelFunc:function(e){EK("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.padToMaxOutputSize,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Hee(l,d,o,s,u,c),p=f.selectedIndices,h=f.validOutputs;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},Yee=zJ;var Xee={kernelName:bq,backendName:"webgl",kernelFunc:function(e){EK("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,c=r.softNmsSigma,l=n.readSync(a.dataId),d=n.readSync(i.dataId),f=Yee(l,d,o,s,u,c),p=f.selectedIndices,h=f.selectedScores;return[n.makeTensorInfo([p.length],"int32",new Int32Array(p)),n.makeTensorInfo([h.length],"float32",new Float32Array(h))]}},Qee=N((function e(t,n,r,a){I(this,e),this.variableNames=["indices"],this.outputShape=[t,n],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(".concat(a,"), float(").concat(r,"),\n                      float(index == coords.y)));\n      }\n    ")})),Jee={kernelName:kq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=nW(a.shape),c=new Qee(u,i,o,s),l=F5({inputs:{x:a},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[l],a.dtype);n.disposeIntermediateTensorInfo(l);var f=F5({inputs:{x:d},backend:n,attrs:{shape:[].concat((0,Ze.Z)(a.shape),[i])}});return n.disposeIntermediateTensorInfo(d),f}};function $ee(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=X9({inputs:{input:r},backend:n}),i=$ee({inputs:{x:a},backend:n}),o=d8({inputs:{input:r},backend:n}),s=$ee({inputs:{x:o},backend:n}),u=b5({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return b7({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var ete={kernelName:bK,backendName:"webgl",kernelFunc:$ee};var tte={kernelName:xq,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=X9({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=d8({inputs:{input:a},backend:r}),u=$ee({inputs:{x:s},backend:r}),c=b5({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),c}return b7({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};var nte={kernelName:wq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return l7({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){$V(a,e.shape,"All tensors passed to stack must have matching shapes"),JV(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=l7({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=h8({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),u}},rte=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));var a=t.length,i=L3(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,a);this.userCode=1!==a?"\n      ".concat(i," start = ").concat(i,"(").concat(o,");\n      ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ").concat(i," coords = outC - start;\n          setOutput(getX(").concat(u,"));\n        }\n      }\n    "):"\n        int start = ".concat(o,";\n        int end = ").concat(s,";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      ")})),ate=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((function(e,n){return e[0]+t[n]+e[1]}));for(var a=t.length,i=L3(a),o=n.map((function(e){return e[0]})).join(","),s=n.map((function(e,n){return e[0]+t[n]})).join(","),u=W6("rc",a),c=W6("source",a),l="".concat(u[a-1]," < ").concat(this.outputShape[a-1]),d=1===a?"source":"vec2(".concat(c.slice(-2).join(),")"),f=["".concat(i," rc = outputLoc;"),"".concat(u[a-1]," += 1;\n       if(").concat(l,") {\n      "),1===a?"":"}\n       rc = outputLoc;\n       ".concat(u[a-2]," += 1;\n       if(").concat(u[a-2]," < ").concat(this.outputShape[a-2],") {"),1===a?"":"  ".concat(u[a-1]," += 1;\n         if(").concat(l,") {")],p=1===a?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",v=0,m=1===a?2:4;v<m;v++)h+="\n        ".concat(f[v],"\n        if (").concat(p,") {\n          result[").concat(v,"] = float(value);\n        } else {\n          ").concat(i," source = rc - start;\n          result[").concat(v,"] = getChannel(getX(").concat(c.join(),"), ").concat(d,");\n        }\n      ");h+=1===a?"} ":"}}",this.userCode="\n      const ".concat(i," start = ").concat(i,"(").concat(o,");\n      const ").concat(i," end = ").concat(i,"(").concat(s,");\n\n      void main() {\n        ").concat(i," outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ").concat(h,"\n        setOutput(result);\n      }\n    ")})),ite=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;if(0===nW(a.shape)){var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]}));return b7({backend:n,attrs:{shape:s,value:o,dtype:a.dtype}})}var u=RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ate(a.shape,i,o):new rte(a.shape,i,o),c=[[o]];return n.runWebGLProgram(u,[a],a.dtype,c)},ote={kernelName:_q,backendName:"webgl",kernelFunc:ite},ste=C5({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),ute={kernelName:Tq,backendName:"webgl",kernelFunc:ste};var cte={kernelName:Eq,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,c=[],l=cW(o,i.shape),d=l,f=vX(d,u),p=i;if(null!=f&&(p=H5({inputs:{x:i},backend:r,attrs:{perm:f}}),d=yX(d.length,u),c.push(p)),hX("prod",d,u),r.shouldExecuteOnCPU([p])){var h=r.texData.get(p.dataId).values,v=w6(p.shape,p.dtype,h,d),m=v.outVals,y=v.outShape,g=v.outDtype;t=r.makeTensorInfo(y,g,m)}else{var b=fX(p.shape,d),x=(0,W.Z)(b,2),k=x[0],w=nW(x[1]),_=F5({inputs:{x:p},backend:r,attrs:{shape:[-1,w]}}),T=V5(_,_G(i.dtype),"prod",r);t=F5({inputs:{x:T},backend:r,attrs:{shape:k}}),c.push(_),c.push(T)}if(s){c.push(t);var S=pX(t.shape,l);t=F5({inputs:{x:t},backend:r,attrs:{shape:S}})}return c.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},lte=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=_6(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},dte={kernelName:Iq,backendName:"webgl",kernelFunc:lte},fte=I5({opSnippet:"return 1.0 / x;"}),pte={kernelName:Nq,backendName:"webgl",kernelFunc:fte},hte=I5({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),vte={kernelName:Aq,backendName:"webgl",kernelFunc:hte},mte=I5({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),yte={kernelName:Dq,backendName:"webgl",kernelFunc:mte},gte=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,W.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    ")})),bte=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,W.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r];d=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    ")}));var xte={kernelName:Rq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,W.Z)(s,2),c=u[0],l=u[1],d=RW().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new bte(a.shape,c,l,i,o):new gte(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],"float32")}},kte=N((function e(t,n,r){I(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,W.Z)(n,3),i=a[1],o=a[2],s=(0,W.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,v=1/p,m=2*Math.ceil(h)+2,y=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ").concat(i-1,".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ").concat(o-1,".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var wte={kernelName:"ResizeBilinearGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new kte(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},_te=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["A"],this.outputShape=[];var o=(0,W.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],");\n      const vec2 inputShapeRC = vec2(").concat(u,".0, ").concat(c,".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    ")})),Tte=N((function e(t,n,r,a,i){I(this,e),this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=(0,W.Z)(t,4),s=o[0],u=o[1],c=o[2],l=o[3];this.outputShape=[s,n,r,l];var d,f=[a&&n>1?u-1:u,a&&r>1?c-1:c],p=[a&&n>1?n-1:n,a&&r>1?r-1:r],h=a?"0.5":"0.0";d=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ".concat(f[0]/p[0],",\n          ").concat(f[1]/p[1],",\n          ").concat(f[1]/p[1],");\n      const vec3 inputShapeRC = vec3(").concat(u,".0, ").concat(c,".0,\n                                     ").concat(c,".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ").concat(d,";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ").concat(h,")));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ").concat(l-1,";\n        bool hasNextRow = coords.z < ").concat(r-1,";\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    ")}));var Ste={kernelName:Pq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=(0,W.Z)(s,2),c=u[0],l=u[1],d=RW().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Tte(a.shape,c,l,i,o):new _te(a.shape,c,l,i,o);return n.runWebGLProgram(d,[a],a.dtype)}},Ete=N((function e(t,n,r){I(this,e),this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;var a=(0,W.Z)(n,3),i=a[1],o=a[2],s=(0,W.Z)(t,3),u=s[1],c=s[2],l=[r&&u>1?i-1:i,r&&c>1?o-1:o],d=[r&&u>1?u-1:u,r&&c>1?c-1:c],f=l[0]/d[0],p=l[1]/d[1],h=1/f,v=1/p,m=2*Math.ceil(h)+2,y=2*Math.ceil(v)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(".concat(f,");\n        const float widthScale = float(").concat(p,");\n\n        const float invHeightScale = float(").concat(h,");\n        const float invWidthScale = float(").concat(v,");\n\n        const int winHeight = int(").concat(m,");\n        const int winWidth = int(").concat(y,");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ").concat(u,") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ").concat(c,") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(").concat(l[0],") *\n                (float(dyR) / float(").concat(d[0],"));\n\n            float sourceFracCol =\n                float(").concat(l[1],") *\n                  (float(dyC) / float(").concat(d[1],"));\n\n            int sourceNearestRow = int(min(\n                float(int(").concat(i,") - 1),\n                ").concat(r," ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(").concat(o,") - 1),\n                ").concat(r," ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    ")}));var Ite={kernelName:"ResizeNearestNeighborGrad",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new Ete(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},Cte=N((function e(t,n){I(this,e),this.variableNames=["x"];var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));if(this.outputShape=t,1!==r){var a=t.map((function(e,r){return function(e){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - coords[").concat(e,"] - 1"):"coords[".concat(e,"]")}(r)})).join(","),i=L3(r);this.userCode="\n      void main() {\n        ".concat(i," coords = getOutputCoords();\n        setOutput(getX(").concat(a,"));\n      }\n    ")}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(".concat(t[0]," - coord - 1));\n        }\n      ")})),Nte=N((function e(t,n){I(this,e),this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=t.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-".concat(r," tensor is not yet supported"));this.outputShape=t;var a=W6("rc",r),i="".concat(a[r-1]," + 1 < ").concat(this.outputShape[r-1]),o="".concat(a[r-2]," + 1 < ").concat(this.outputShape[r-2]),s=L3(r);function u(e){var r=t.map((function(r,a){return function(e,r){return-1!==n.indexOf(e)&&1!==t[e]?"".concat(t[e]," - ").concat(r[e]," - 1"):"".concat(r[e])}(a,e)})),a=r.join(","),i=r.slice(-2).join(",");return"getChannel(getX(".concat(a,"), vec2(").concat(i,"))")}this.userCode=1===r?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(".concat(t[0]," - rc - 1),\n            ").concat(t[0]," - rc - 1);\n          if(").concat(i,"){\n              result.g = getChannel(getX(").concat(t[0]," - (rc  + 1) - 1),\n                ").concat(t[0]," - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      "):"\n        void main() {\n          ".concat(s," rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ").concat(function(e){return u(e)}(a.slice()),";\n          if(").concat(i,"){\n            result.g = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",u(e)}(a.slice()),";\n          }\n          if(").concat(o,") {\n            result.b = ").concat(function(e){return e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            if(").concat(i,") {\n              result.a = ").concat(function(e){return e[r-1]="("+e[r-1]+" + 1)",e[r-2]="("+e[r-2]+" + 1)",u(e)}(a.slice()),";\n            }\n          }\n          setOutput(result);\n        }\n    ")}));var Ate={kernelName:Mq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=cW(i,a.shape);if(0===o)return y5({inputs:{x:a},backend:n});var u=RW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Nte(a.shape,s):new Cte(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},Ote=N((function e(t,n){I(this,e),this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];var r=t[1],a=t[2];this.outputShape=t;var i="";i="number"===typeof n?"float outputValue = ".concat(n.toFixed(2),";"):"\n        vec3 fill = vec3(".concat(n.join(","),");\n        float outputValue = fill[coords[3]];"),this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ".concat(i,"\n          if(coordX >= 0 && coordX < ").concat(a," && coordY >= 0 && coordY < ").concat(r,") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    ")})),Pte={kernelName:wK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,c=new Ote(a.shape,o),l=G$(s,a.shape[1],a.shape[2]),d=(0,W.Z)(l,2),f=[[d[0],d[1],Math.sin(i),Math.cos(i)]];return u.runWebGLProgram(c,[a],a.dtype,f)}},Rte=I5({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),Dte={kernelName:Lq,backendName:"webgl",kernelFunc:Rte},Mte=I5({opSnippet:"return inversesqrt(x);",cpuKernelImpl:T6}),Lte={kernelName:Fq,backendName:"webgl",kernelFunc:Mte},Fte=N((function e(t,n,r,a,i,o){I(this,e),this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=L3(i.length),u=L3(o.length),c="";1===r?c="i":2===r&&(c="i, j");var l="getIndices(".concat(c,")"),d="";1===a?d="i":2===a&&(d="i, coords[1]");var f="getUpdates(".concat(d,")"),p=n>1?"strides[j]":"strides";this.userCode="\n        ".concat(s," strides = ").concat(s,"(").concat(i,");\n\n        void main() {\n          ").concat(u," coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ").concat(t,"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ").concat(n,"; j++) {\n              int index = round(").concat(l,");\n              flattenedIndex += index * ").concat(p,";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ").concat(f,";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      ")}));var Bte={kernelName:Bq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=aZ(0,a,o),u=s.sliceRank,c=s.numUpdates,l=s.sliceSize,d=s.strides,f=s.outputSize,p=[f/l,l];if(0===f)return n.makeTensorInfo(o,a.dtype);var h=F5({inputs:{x:a},backend:n,attrs:{shape:[c,u]}}),v=F5({inputs:{x:i},backend:n,attrs:{shape:[c,l]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0])),y=new Fte(c,u,h.shape.length,v.shape.length,d,p),g=n.runWebGLProgram(y,[v,h,m],v.dtype),b=F5({inputs:{x:g},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(v),n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(m),b}},jte=N((function e(t,n,r){var a,i;if(I(this,e),this.variableNames=["c","a","b"],this.outputShape=n,r>4)throw Error("Where for rank ".concat(r," is not yet supported"));if(1===r)i="resRC",a="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],u=[],c=0;c<n.length;c++)u.push("".concat(o[c])),c<t&&s.push("".concat(o[c]));a=s.join(),i=u.join()}var l=L3(r);this.userCode="\n      void main() {\n        ".concat(l," resRC = getOutputCoords();\n        float cVal = getC(").concat(a,");\n        if (cVal >= 1.0) {\n          setOutput(getA(").concat(i,"));\n        } else {\n          setOutput(getB(").concat(i,"));\n        }\n      }\n    ")}));var Ute={kernelName:jq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new jte(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],wG(a.dtype,i.dtype))}},Vte=I5({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ".concat(1.7580993408473768,";\n  float scale = ").concat(1.0507009873554805,";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n")}),Wte={kernelName:Uq,backendName:"webgl",kernelFunc:Vte},zte=I5({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:S6}),qte={kernelName:Kq,backendName:"webgl",kernelFunc:zte},Kte=I5({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),Gte={kernelName:qq,backendName:"webgl",kernelFunc:Kte},Hte=I5({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n"}),Zte={kernelName:Wq,backendName:"webgl",kernelFunc:Hte},Yte=I5({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),Xte={kernelName:zq,backendName:"webgl",kernelFunc:Yte},Qte=I5({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),Jte={kernelName:Gq,backendName:"webgl",kernelFunc:Qte},$te={kernelName:Yq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;JV(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,(0,Ze.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=[],d=ite({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=H$(d.shape,i,s,!1),p=Z$(f.length,i.length,!1),h=Y$(d.shape,i,s,!1),v=F5({inputs:{x:d},backend:n,attrs:{shape:f}}),m=H5({inputs:{x:v},backend:n,attrs:{perm:p}}),y=F5({inputs:{x:m},backend:n,attrs:{shape:h}});return l.push(d),l.push(v),l.push(m),l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}};var ene={kernelName:Jq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.indices,a=t.values,i=t.denseShape,o=t.defaultValue;if(1!==i.shape.length)throw new Error("Dense shape must be a vector, saw:\n         ".concat(i.shape));if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         ".concat(r.shape));if(1!==a.shape.length)throw new Error("Values must be a vector, saw:\n         ".concat(a.shape));if(0!==o.shape.length)throw new Error("Default value must be a scalar, saw:\n        ".concat(o.shape));var s=n.readSync(r.dataId),u=n.readSync(a.dataId),c=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],d=C6(s,r.shape,r.dtype,u,a.dtype,c,l),f=(0,W.Z)(d,5),p=f[0],h=f[1],v=f[2],m=f[3],y=f[4];return[n.makeTensorInfo(h,r.dtype,p),n.makeTensorInfo([h[0]],a.dtype,v),n.makeTensorInfo([m.length],"bool",new Uint8Array(m.map((function(e){return Number(e)})))),n.makeTensorInfo([y.length],r.dtype,new Int32Array(y))]}};var tne={kernelName:$q,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.inputIndices,a=t.inputShape,i=t.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=Array.from(n.readSync(a.dataId)),s=n.readSync(r.dataId),u=Array.from(n.readSync(i.dataId)),c=N6(s,r.shape,r.dtype,o,u),l=(0,W.Z)(c,3),d=l[0],f=l[1],p=l[2];return[n.makeTensorInfo(f,r.dtype,d),n.makeTensorInfo([p.length],i.dtype,new Int32Array(p))]}};var nne={kernelName:eK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n              ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n              ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=A6(o,r.shape,r.dtype,s,u,!0),l=(0,W.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var rne={kernelName:tK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.data,a=t.indices,i=t.segmentIds;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==a.shape.length)throw new Error("Indices should be a vector but received shape\n             ".concat(a.shape));if(1!==i.shape.length)throw new Error("Segment ids should be a vector but received shape\n             ".concat(i.shape));var o=n.readSync(r.dataId),s=n.readSync(a.dataId),u=n.readSync(i.dataId),c=A6(o,r.shape,r.dtype,s,u),l=(0,W.Z)(c,2),d=l[0],f=l[1];return n.makeTensorInfo(f,r.dtype,d)}};var ane={kernelName:nK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=aZ(0,a,s),c=u.sliceRank,l=u.numUpdates,d=u.strides,f=u.outputSize,p=new Fte(l,c,a.shape.length,i.shape.length,d,[f,1],!1),h=n.runWebGLProgram(p,[i,a,o],i.dtype),v=F5({inputs:{x:h},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(h),v}};var ine={kernelName:Xq,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=cW(r.axis,a.shape)[0],s=o0(a,i,o),u=a.shape.length,c=new Array(u).fill(0),l=a.shape.slice();return s.map((function(e){var t=(0,Ze.Z)(l);t[o]=e;var r=z9({inputs:{x:a},backend:n,attrs:{begin:c,size:t}});return c[o]+=e,r}))}},one="return sqrt(x);",sne=I5({opSnippet:one,packedOpSnippet:one,cpuKernelImpl:O6}),une={kernelName:Hq,backendName:"webgl",kernelFunc:sne},cne={kernelName:aK,backendName:"webgl",kernelFunc:I5({opSnippet:"return x * x;"})},lne="return (a - b) * (a - b);",dne=C5({opSnippet:lne,packedOpSnippet:lne}),fne={kernelName:rK,backendName:"webgl",kernelFunc:dne};var pne={kernelName:xK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=X6+"\n    return x > 0.0 ? 1.0 : float(".concat(n.alpha,");\n  "),o=new Y6(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},hne=N((function e(t,n,r){I(this,e),this.variableNames=["x"],this.outputShape=r;var a=r.length,i=L3(r.length),o=L3(r.length),s="";if(1===a)s="coords * strides + begin";else{var u=0;s=r.map((function(e,t){return u++,1===r.length?"coords * strides[".concat(t,"] + begin[").concat(t,"]"):"coords[".concat(u-1,"] * strides[").concat(t,"] + begin[").concat(t,"]")})).join(",")}this.userCode="\n      ".concat(i," begin = ").concat(i,"(").concat(t,");\n      ").concat(i," strides = ").concat(i,"(").concat(n,");\n\n      void main() {\n        ").concat(o," coords = getOutputCoords();\n        setOutput(getX(").concat(s,"));\n      }\n    ")}));var vne={kernelName:iK,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=lZ(i.shape,o,s,u,c,l,d,f,p),v=h.finalShapeSparse,m=h.finalShape,y=h.isIdentity,g=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,k=h.end,w=h.strides;if(y)t=F5({inputs:{x:i},backend:r,attrs:{shape:m}});else if(g||b){JV(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var _=oZ(x,k,w),T=z9({inputs:{x:i},backend:r,attrs:{begin:x,size:_}});t=F5({inputs:{x:T},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(T)}else{if(r.shouldExecuteOnCPU([i])){var S=r.readSync(i.dataId),E=MH(i.shape,i.dtype,S),I=P6(v,E,w,x);t=r.makeTensorInfo(m,i.dtype,I.values)}else{var C=new hne(x,w,v);t=r.runWebGLProgram(C,[i],i.dtype)}}var N=F5({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),N}};var mne={kernelName:oK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=r.separator,i=r.nGramWidths,o=r.leftPad,s=r.rightPad,u=r.padWidth,c=r.preserveShortSequences,l=t.data,d=t.dataSplits,f=n.readSync(l.dataId),p=n.readSync(d.dataId),h=R6(f,p,a,i,o,s,u,c),v=(0,W.Z)(h,2),m=v[0],y=v[1];return[n.makeTensorInfo([m.length],"string",m),n.makeTensorInfo(d.shape,"int32",y)]}};var yne={kernelName:sK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.skipEmpty,a=t.input,i=t.delimiter;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(1!==a.shape.length)throw new Error("Input must be a vector, got shape: ".concat(a.shape));if(0!==i.shape.length)throw new Error("Delimiter must be a scalar, got shape: ".concat(i.shape));var o=n.readSync(a.dataId),s=n.readSync(i.dataId)[0],u=D6(o,s,r),c=(0,W.Z)(u,3),l=c[0],d=c[1],f=c[2],p=d.length;return[n.makeTensorInfo([p,2],"int32",l),n.makeTensorInfo([p],"string",d),n.makeTensorInfo([2],"int32",new Int32Array(f))]}};var gne={kernelName:uK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.numBuckets,a=t.input;if("string"!==a.dtype)throw new Error("Input must be of datatype string");if(r<=0)throw new Error("Number of buckets must be at least 1");var i=n.readSync(a.dataId),o=M6(i,r);return n.makeTensorInfo(a.shape,"int32",o)}},bne=I5({opSnippet:"return tan(x);"}),xne={kernelName:lK,backendName:"webgl",kernelFunc:bne},kne=I5({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),wne={kernelName:dK,backendName:"webgl",kernelFunc:kne},_ne=N((function e(t,n){I(this,e),this.variableNames=["A"];for(var r=new Array(t.length),a=0;a<r.length;a++)r[a]=t[a]*n[a];this.outputShape=r,this.rank=r.length;var i=L3(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank ".concat(t," is not yet supported"));if(1===t)return"imod(resRC, ".concat(e[0],")");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod(".concat(n[a],", ").concat(e[a],")"));return r.join()}(t);this.userCode="\n      void main() {\n        ".concat(i," resRC = getOutputCoords();\n        setOutput(getA(").concat(o,"));\n      }\n    ")}));function Tne(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype||a.shape.length>5){var o=n.readSync(a.dataId),s="string"===a.dtype?o.map((function(e){return tG(e)})):o,u=MH(a.shape,a.dtype,s),c=F6(u,i);return n.makeTensorInfo(c.shape,c.dtype,c.values)}var l=new _ne(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var Sne={kernelName:fK,backendName:"webgl",kernelFunc:Tne},Ene=N((function e(t){I(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=t,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "})),Ine=N((function e(t){I(this,e),this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=t,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}));function Cne(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function Nne(e){for(var t=1;t<e;)t*=2;return t}var Ane={kernelName:pK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=RW().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),u=RW().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=a.shape,l=c[c.length-1];if(n.shouldExecuteOnCPU([a])||l<s||i>u){var d=n.readSync(a.dataId),f=B6(d,c,a.dtype,i,o),p=(0,W.Z)(f,2),h=p[0],v=p[1];return[n.makeTensorInfo(h.shape,h.dtype,h.values),n.makeTensorInfo(v.shape,v.dtype,v.values)]}if(0===i)return c[c.length-1]=0,[n.makeTensorInfo(c,a.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(1===l)return[a,b7({attrs:{shape:c,dtype:"int32",value:0},backend:n})];var m=n.texData.get(a.dataId),y=null!==m&&m.isPacked,g=y?n.unpackTensor(a):a,b=nW(c)/l,x=F5({inputs:{x:g},attrs:{shape:[b,l]},backend:n});y&&Cne(n,g);for(var k=Nne(i),w=Nne(l),_=null,T=function(){return null===_?[x,x]:[x,_]},S=function(e,t,r){var a=T(),i=new Ene(r),o=[[l],[null===_?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=_;_=n.runWebGLProgram(i,a,"int32",o),Cne(n,s)},E=1;E<k;E*=2)for(var I=2*E,C=E;C>=1;C/=2)S(I,C,[b,w]);for(var N=w;N>k;N/=2){var A=T(),O=new Ine([b,N/2]),P=[[l],[null===_?1:0],[k]],R=_;_=n.runWebGLProgram(O,A,"int32",P),Cne(n,R);for(var D=k/2,M=2*D,L=D;L>=1;L/=2)S(M,L,_.shape)}var F=_;_=z9({inputs:{x:_},backend:n,attrs:{begin:0,size:[b,i]}}),Cne(n,F);var B=F7({inputs:{x:x,indices:_},backend:n,attrs:{axis:1,batchDims:1}});Cne(n,x);var j=c.slice(0,-1);j.push(i),F=_,_=F5({inputs:{x:_},attrs:{shape:j},backend:n}),Cne(n,F);var U=B;return B=F5({inputs:{x:B},attrs:{shape:j},backend:n}),Cne(n,U),[B,_]}},One=N((function e(t,n,r,a,i,o){I(this,e),this.variableNames=["Image","Transforms"],this.outputShape=o;var s,u="nearest"===r?1:2;switch(a){case"constant":default:s=1;break;case"reflect":s=2;break;case"wrap":s=3;break;case"nearest":s=4}this.userCode="\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(".concat(s," == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (").concat(s," == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ").concat(t," && 0 <= coordX && coordX < ").concat(n,") {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(").concat(i,");\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(").concat(i,");\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(").concat(n,"));\n                float mapY = mapCoord(inY, float(").concat(t,"));\n\n                if (").concat(u," == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        ")}));var Pne={kernelName:hK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.transforms,o=r.interpolation,s=r.fillMode,u=r.fillValue,c=r.outputShape,l=(0,W.Z)(a.shape,4),d=l[0],f=l[1],p=l[2],h=l[3],v=null!=c?c:[f,p],m=(0,W.Z)(v,2),y=m[0],g=m[1],b=new One(f,p,o,s,u,[d,y,g,h]);return n.runWebGLProgram(b,[a,i],"float32")}};var Rne={kernelName:mK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;c3(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=U6(o,a,i.shape,i.dtype),u=s.outputValues,c=s.outputShape,l=s.indices;return[r.makeTensorInfo(c,i.dtype,u),r.makeTensorInfo([l.length],"int32",l)]}};var Dne={kernelName:yK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],c=new Array(s-1),l=0,d=0;d<s;d++)d!==i&&(c[l++]=o.shape[d]);var f=[],p=new Array(s).fill(0),h=o.shape.slice();h[i]=1;for(var v=new Array(u),m=0;m<v.length;m++){p[i]=m;var y=z9({inputs:{x:o},backend:n,attrs:{begin:p,size:h}}),g=F5({inputs:{x:y},backend:n,attrs:{shape:c}});v[m]=g,f.push(y)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}},Mne=N((function e(t,n){I(this,e),this.variableNames=["x","segmentIds"];var r=t.windowSize,a=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/r);this.outputShape=[a,s];var u=4*Math.floor(r/4),c=r%4,l="\n        sumValue += dot(values, segFilter);\n    ",d="";i%r>0&&(d="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return initializationValue;\n        }\n      "));var f="";i%r>0&&(f="\n        if (inIdx < 0 || inIdx >= ".concat(i,") {\n          return -1.0;\n        }\n      ")),this.userCode="\n      const float initializationValue = ".concat("0.0",";\n\n      float getValue(int batch, int inIdx) {\n        ").concat(d,"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ").concat(f,"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ").concat(o,")) * float(").concat(r,"));\n        int currentSeg = int(mod(float(outIdx), float(").concat(o,")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ").concat(u,"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ").concat(l,"\n        }\n\n        int inIdx = inOffset + ").concat(u,";\n        if (").concat(1===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ").concat(l,"\n        } else if (").concat(2===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ").concat(l,"\n        } else if (").concat(3===c,") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ").concat(l,"\n        }\n        setOutput(").concat("sumValue",");\n      }\n    ")}));for(var Lne={kernelName:gK,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],c=0,l=vX([c],s),d=a;null!=l&&(d=H5({inputs:{x:a},backend:n,attrs:{perm:l}}),u.push(d),c=yX(1,s)[0]);var f=function(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}(d.shape,c,o),p=nW([d.shape[c]]),h=F5({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}});u.push(h);var v=function e(t,r,a,i,o){var s=t.shape[0],c=t.shape[1],l=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=bW(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=bW(e,n+1);return n}(c,o),d=new Mne({windowSize:l,inSize:c,batchSize:s,numSegments:o},r),f=n.compileAndRun(d,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var p=lte({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),h=Tne({inputs:{x:p},backend:n,attrs:{reps:[c/l]}});return u.push(p),u.push(h),e(f,r,h,i,o)}(h,"unsortedSegmentSum",i,_G(a.dtype),o),m=F5({inputs:{x:v},backend:n,attrs:{shape:f}}),y=m;if(null!=l){u.push(m);var g=mX(l);y=H5({inputs:{x:y},backend:n,attrs:{perm:g}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),y}},Fne=0,Bne=[X5,J5,e9,n9,i9,u9,c9,l9,m9,y9,b9,k9,_9,S9,I9,A9,O9,D9,M9,L9,j9,K9,G9,H9,J9,t8,a8,x5,s8,v8,k8,E8,I8,C8,N8,A8,P8,D8,L8,U8,V8,z8,G8,Y8,X8,J8,e7,t7,r7,a7,o7,s7,c7,d7,h7,y7,k7,_7,E7,C7,O7,P7,R7,M7,B7,U7,W7,g5,z7,f8,K7,H7,Y7,_5,Q7,$7,eee,nee,aee,oee,uee,lee,pee,vee,yee,bee,xee,kee,Tee,See,Eee,Iee,Cee,Aee,Ree,Dee,zee,L5,qee,Gee,Zee,Xee,Y9,Jee,tte,nte,ote,ute,E5,cte,dte,Q9,Fee,pte,vte,yte,B5,xte,wte,Ste,Ite,Ate,Pte,Dte,Lte,Bte,Ute,Wte,qte,Gte,Zte,Xte,q9,Wee,Jte,$te,ene,tne,nne,rne,ane,ine,une,cne,fne,pne,vne,mne,yne,gne,Uee,G5,xne,wne,Sne,Ane,Pne,Z5,Rne,Dne,Lne,ete];Fne<Bne.length;Fne++){PK(Bne[Fne])}var jne,Une,Vne,Wne=n(3863),zne=n(6711),qne=n(9049),Kne=n.n(qne);!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(jne||(jne={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(Une||(Une={}));var Gne={kernelName:_K,backendName:"wasm",setupFunc:function(e){Vne=e.wasm.cwrap(_K,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var u=r.transposeA,c=r.transposeB,l=r.activation,d=r.leakyreluAlpha,f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,h=0;if(null!=o){var v=n.dataIdMap.get(o.dataId);if(1!==v.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(v.shape.length,"."));h=v.id}var m=null==s?0:n.dataIdMap.get(s.dataId).id,y=Une[l];if(null==y)throw new Error("".concat(l," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var g=u?a.shape[2]:a.shape[1],b=c?i.shape[1]:i.shape[2],x=JH(a.shape.slice(0,-2),i.shape.slice(0,-2)),k=n.makeOutput([].concat((0,Ze.Z)(x),[g,b]),a.dtype),w=n.dataIdMap.get(k.dataId).id,_=new Uint8Array(new Int32Array(a.shape).buffer),T=new Uint8Array(new Int32Array(i.shape).buffer);return Vne(f,_,a.shape.length,p,T,i.shape.length,u,c,y,h,m,d||0,w),k}};function Hne(e,t){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var r=e.backend,a=e.inputs.x,i=r.dataIdMap.get(a.dataId).id,o=r.makeOutput(a.shape,t||a.dtype),s=r.dataIdMap.get(o.dataId).id;return 0===nW(o.shape)||n(i,jne[a.dtype],s),o}}}var Zne=Hne(BW);function Yne(e,t,n){var r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,a=e.inputs,i=a.a,o=a.b,s=t.dataIdMap.get(i.dataId).id,u=t.dataIdMap.get(o.dataId).id,c=null!=n?n:i.dtype,l=JH(i.shape,o.shape),d=t.makeOutput(l,c);if(0===nW(l))return d;var f=new Uint8Array(new Int32Array(i.shape).buffer),p=new Uint8Array(new Int32Array(o.shape).buffer),h=t.dataIdMap.get(d.dataId).id;return r(s,f,i.shape.length,u,p,o.shape.length,jne[i.dtype],h),d}}}var Xne,Qne=Yne(VW);var Jne={kernelName:WW,backendName:"wasm",setupFunc:function(e){Xne=e.wasm.cwrap(WW,null,["array","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===nW(r.shape))return r;var a=t.map((function(e){return n.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(a).buffer),o=n.dataIdMap.get(r.dataId).id;return Xne(i,a.length,jne[r.dtype],o),r}};function $ne(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype),a=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(a),r}var ere,tre={kernelName:Wz,backendName:"wasm",kernelFunc:$ne};function nre(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=function(e,t){for(var n=[],r=[],a=0;a<e.length;++a)1!==e[a]&&n.push(e[a]),1!==e[t[a]]&&r.push(t[a]);for(var i=0;i<r.length;++i){for(var o=-1,s=0;s<r.length;++s)r[s]>=i&&(-1===o||r[o]>r[s])&&(o=s);r[o]=i}return[n,r]}(t.x.shape,r.perm),i=(0,W.Z)(a,2),o=i[0],s=i[1],u=!0,c=0;c<s.length;c++)s[c]!==c&&(u=!1);var l=function(e,t){for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),d={dataId:t.x.dataId,shape:o,dtype:t.x.dtype};if(u){var f=$ne({inputs:t,backend:n});return f.shape=l,f}var p=n.makeOutput(l,d.dtype),h=n.dataIdMap.get(d.dataId).id,v=n.dataIdMap.get(p.dataId).id,m=new Uint8Array(new Int32Array(s).buffer),y=new Uint8Array(new Int32Array(d.shape).buffer);return ere(h,y,d.shape.length,jne[d.dtype],v,m,s.length),p}var rre,are={kernelName:vK,backendName:"wasm",kernelFunc:nre,setupFunc:function(e){ere=e.wasm.cwrap(vK,null,["number","array","number","number","number","array","number"])}};function ire(e,t,n){var r=e.shape,a=e.shape.length,i=cW(t,r),o=i,s=vX(o,a),u=null,c=!1;if(null!=s){for(var l=new Array(a),d=0;d<l.length;d++)l[d]=r[s[d]];o=yX(o.length,a),u=nre({inputs:{x:e},attrs:{perm:s},backend:n});var f=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(u.dataId).id!==f&&(c=!0)}return{transposed:u,originalAxes:i,axes:o,inputWasTransposed:c}}var ore,sre={kernelName:zW,backendName:"wasm",setupFunc:function(e){rre=e.wasm.cwrap(zW,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=ire(o,a,t),l=c.transposed,d=c.axes,f=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=t.dataIdMap.get(l.dataId).id),hX("all",d,u.shape.length);var h=fX(u.shape,d),v=(0,W.Z)(h,2),m=v[0],y=nW(v[1]),g=t.makeOutput(m,o.dtype);if(0!==nW(u.shape)){var b=t.dataIdMap.get(g.dataId).id;rre(s,y,b)}if(p&&t.disposeData(l.dataId),i){var x=pX(g.shape,f);g.shape=x}return g}};var ure,cre={kernelName:qW,backendName:"wasm",setupFunc:function(e){ore=e.wasm.cwrap(qW,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=ire(o,a,t),l=c.transposed,d=c.axes,f=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=t.dataIdMap.get(l.dataId).id),hX("any",d,u.shape.length);var h=fX(u.shape,d),v=(0,W.Z)(h,2),m=v[0],y=nW(v[1]),g=t.makeOutput(m,o.dtype);if(0!==nW(u.shape)){var b=t.dataIdMap.get(g.dataId).id;ore(s,y,b)}if(p&&t.disposeData(l.dataId),i){var x=pX(g.shape,f);g.shape=x}return g}};var lre,dre={kernelName:KW,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.axis,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=i,s=a,u=ire(a,r,t),c=u.transposed,l=u.axes,d=u.inputWasTransposed;if(d){var f=t.dataIdMap.get(c.dataId).id;f!==i&&(s=c,o=f)}var p=s.shape.slice(0,-1),h=t.makeOutput(p,"int32"),v=t.dataIdMap.get(h.dataId).id,m=nW(h.shape),y=s.shape[l[0]];return ure(o,jne[s.dtype],m,y,v),d&&t.disposeData(c.dataId),h},setupFunc:function(e){ure=e.wasm.cwrap(KW,null,["number","number","number","number","number"])}};var fre={kernelName:JW,backendName:"wasm",setupFunc:function(e){lre=e.wasm.cwrap(JW,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id,o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=EZ(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,v=l.padInfo.bottom,m=l.padInfo.left,y=l.strideHeight,g=l.strideWidth,b=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(l.dilationHeight,", ").concat(l.dilationWidth,"]."));var x=r.makeOutput(l.outShape,"float32"),k=r.dataIdMap.get(x.dataId).id;return lre(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,v,m,y,g,b,k),x}};function pre(e){var t=e.inputs,n=e.attrs,r=t.x,a=n.shape,i=nW(r.shape),o=uW(a,i);return JV(i===nW(o),(function(){return"new shape: ".concat(o,", old shape: ").concat(r.shape,". New shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:o,dtype:r.dtype}}var hre,vre={kernelName:Oq,backendName:"wasm",kernelFunc:pre};var mre={kernelName:ez,backendName:"wasm",setupFunc:function(e){hre=e.wasm.cwrap(ez,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;if("float32"!==a.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var u=a.shape.length,c=i.shape.length,l=o?a.shape[u-2]:a.shape[u-1],d=s?i.shape[c-1]:i.shape[c-2],f=o?a.shape[u-1]:a.shape[u-2],p=s?i.shape[c-2]:i.shape[c-1],h=a.shape.slice(0,-2),v=i.shape.slice(0,-2),m=nW(h),y=nW(v),g=JH(a.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,p]);JV(l===d,(function(){return"Error in matMul: inner shapes (".concat(l,") and (")+"".concat(d,") of Tensors with shapes ").concat(a.shape," and ")+"".concat(i.shape," and transposeA=").concat(o)+" and transposeB=".concat(s," must match.")}));var b=s?[y,p,d]:[y,d,p],x=pre({inputs:{x:a},backend:n,attrs:{shape:o?[m,l,f]:[m,f,l]}}),k=pre({inputs:{x:i},backend:n,attrs:{shape:b}}),w=n.dataIdMap.get(x.dataId).id,_=n.dataIdMap.get(k.dataId).id,T=o?x.shape[2]:x.shape[1],S=s?k.shape[1]:k.shape[2],E=Math.max(m,y),I=n.makeOutput([E,T,S],x.dtype),C=n.dataIdMap.get(I.dataId).id,N=new Uint8Array(new Int32Array(x.shape).buffer),A=new Uint8Array(new Int32Array(k.shape).buffer);return hre(w,N,x.shape.length,_,A,k.shape.length,o,s,C),n.disposeData(x.dataId),n.disposeData(k.dataId),I.shape=g,I}};function yre(e){var t=e.inputs.x,n=e.attrs,r=n.begin,a=n.size,i=e.backend,o=cZ(t,r,a),s=(0,W.Z)(o,2),u=s[0],c=s[1],l=sZ(t.shape,u,c),d=i.readSync(t.dataId),f=i.makeOutput(c,t.dtype),p=xW(t.shape),h=i.dataIdMap.get(f.dataId);if(l){var v=uZ(u,p);if("string"===t.dtype)h.stringBytes=d.slice(v,v+nW(c));else i.typedArrayFromHeap(f).set(d.subarray(v,v+nW(c)));return f}if("string"===t.dtype){var m=K4(d,u,c,t.shape,t.dtype);return h.stringBytes=m,f}var y=i.typedArrayFromHeap(f),g=t.shape.length;if(2===g)!function(e,t,n,r,a){for(var i=0,o=r[0],s=r[1],u=o+a[0],c=o;c<u;c++){var l=c*t+s;n.set(e.subarray(l,l+a[1]),i),i+=a[1]}}(d,p[0],y,u,c);else if(3===g)!function(e,t,n,r,a,i){for(var o=0,s=a[0],u=a[1],c=a[2],l=s+i[0],d=u+i[1],f=s;f<l;f++)for(var p=u;p<d;p++){var h=f*t+p*n+c;r.set(e.subarray(h,h+i[2]),o),o+=i[2]}}(d,p[0],p[1],y,u,c);else if(4===g)!function(e,t,n,r,a,i,o){for(var s=0,u=i[0],c=i[1],l=i[2],d=u+o[0],f=c+o[1],p=l+o[2],h=i[3],v=u;v<d;v++)for(var m=c;m<f;m++)for(var y=l;y<p;y++){var g=v*t+m*n+y*r+h;a.set(e.subarray(g,g+o[3]),s),s+=o[3]}}(d,p[0],p[1],p[2],y,u,c);else{var b=K4(d,u,c,t.shape,t.dtype);y.set(b)}return f}var gre={kernelName:Vq,backendName:"wasm",kernelFunc:yre};var bre={kernelName:tz,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops,s=i.reduce((function(e,t){return e*t})),u=H$(a.shape,i,s),c=Z$(u.length,i.length),l=Y$(a.shape,i,s),d=X$(o,i.length),f=Q$(l,o,i.length),p=pre({inputs:{x:a},backend:n,attrs:{shape:u}}),h=nre({inputs:{x:p},backend:n,attrs:{perm:c}}),v=yre({inputs:{x:pre({inputs:{x:h},backend:n,attrs:{shape:l}})},backend:n,attrs:{begin:d,size:f}});return n.disposeData(p.dataId),n.disposeData(h.dataId),n.disposeData(p.dataId),v}};function xre(e){var t=e.inputs.x,n=e.attrs.dtype,r=e.backend,a=r.makeOutput(t.shape,n),i=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(a).set(i),a}var kre,wre={kernelName:az,backendName:"wasm",kernelFunc:xre},_re=Hne(iz);var Tre={kernelName:oz,backendName:"wasm",setupFunc:function(e){kre=e.wasm.cwrap(oz,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.clipValueMin,o=r.clipValueMax,s=n.dataIdMap.get(a.dataId).id,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(u.dataId).id;return kre(s,i,o,c),u}};function Sre(e){var t=e.inputs,n=e.backend,r=cW(e.attrs.axis,t[0].shape)[0],a=q$(t.map((function(e){return e.shape})),r),i=t.filter((function(e){return nW(e.shape)>0}));if(1===i.length)return $ne({inputs:{x:i[0]},backend:n});var o=n.makeOutput(a,t[0].dtype);if(0===nW(a))return o;var s=i.map((function(e){return e.shape}));if(z$(s,r),"string"===i[0].dtype){var u=i.map((function(e){var t=nW(e.shape.slice(r));return pre({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),c=u.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}}));a=q$(u.map((function(e){return e.shape})),1);var l=1===u[0].shape[0],d=_4(c,a,t[0].dtype,l),f=q$(i.map((function(e){return e.shape})),r);return o.shape=f,n.dataIdMap.get(o.dataId).stringBytes=g0(d),u.forEach((function(e){return n.disposeData(e.dataId)})),o}for(var p=nW(i[0].shape.slice(0,r)),h=0,v=i.map((function(e){var t=nW(e.shape.slice(r));return h+=t,t})),m=i.map((function(e){return n.typedArrayFromHeap(e)})),y=n.typedArrayFromHeap(o),g=0;g<p;g++)for(var b=g*h,x=0;x<m.length;x++){var k=v[x],w=g*k,_=m[x].subarray(w,w+k);y.set(_,b),b+=k}return o}var Ere,Ire={kernelName:cz,backendName:"wasm",kernelFunc:Sre};var Cre,Nre={kernelName:lz,backendName:"wasm",setupFunc:function(e){Ere=e.wasm.cwrap(lz,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=jZ(n.dataFormat),p=CZ(a.shape,i.shape,u,c,l,d,!1,f),h=p.filterHeight,v=p.filterWidth,m=p.padInfo.top,y=p.padInfo.right,g=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,_=p.strideWidth,T=p.inChannels,S=p.outChannels,E="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(p.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return Ere(o,a.shape[0],a.shape[1],a.shape[2],s,h,v,m,y,g,b,E,x,k,w,_,T,S,C),I}};var Are,Ore,Pre={kernelName:fz,backendName:"wasm",setupFunc:function(e){Cre=e.wasm.cwrap(fz,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.dy,i=n.filter,o=r.strides,s=r.pad,u=r.dataFormat,c=r.dimRoundingMode,l=r.inputShape,d=jZ(u),f=CZ(l,i.shape,o,1,s,c,!1,d),p=f.batchSize,h=f.filterHeight,v=f.filterWidth,m=f.inChannels,y=f.inHeight,g=f.inWidth,b=f.outChannels,x=f.outHeight,k=f.outWidth,w=f.strideHeight,_=f.strideWidth,T=h-1-f.padInfo.top,S=v-1-f.padInfo.left,E="channelsLast"===f.dataFormat,I=xW(f.inShape),C=xW(a.shape),N=xW(i.shape),A=(0,W.Z)(N,3),O=A[0],P=A[1],R=A[2],D=I[0],M=E?I[1]:I[2],L=E?I[2]:1,F=E?1:I[1],B=C[0],j=E?C[1]:C[2],U=E?C[2]:1,V=E?1:C[1],z=t.makeOutput(f.inShape,"float32"),q=t.dataIdMap.get(z.dataId).id,K=t.dataIdMap.get(a.dataId).id,G=t.dataIdMap.get(i.dataId).id;return Cre(K,G,p,h,v,y,g,m,x,k,b,w,_,T,S,O,P,R,D,M,L,F,B,j,U,V,q),z}},Rre=Hne(vz),Dre=Hne(mz);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Are||(Are={}));var Mre,Lre={kernelName:gz,backendName:"wasm",setupFunc:function(e){Ore=e.wasm.cwrap(gz,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=a.method,o=a.extrapolationValue,s=a.cropSize,u=r.image,c=r.boxes,l=r.boxInd,d=c.shape[0],f=(0,W.Z)(s,2),p=f[0],h=f[1],v=[d,p,h,u.shape[3]],m=n.dataIdMap.get(u.dataId);"float32"!==u.dtype&&(t=xre({backend:n,inputs:{x:u},attrs:{dtype:"float32"}}),m=n.dataIdMap.get(t.dataId));var y=m.id,g=n.dataIdMap.get(c.dataId).id,b=n.dataIdMap.get(l.dataId).id,x=n.makeOutput(v,"float32"),k=n.dataIdMap.get(x.dataId).id,w=new Uint8Array(new Int32Array(u.shape).buffer);return Ore(y,g,b,d,w,p,h,Are[i],o,k),null!=t&&n.disposeData(t.dataId),x}};var Fre,Bre={kernelName:yz,backendName:"wasm",setupFunc:function(e){Mre=e.wasm.cwrap(yz,null,["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length;JV("float32"===a.dtype||"int32"===a.dtype,(function(){return"cumsum does not support ".concat(a.dtype," tensors in the WASM backend")}));var c=vX([i],u),l=a;null!==c&&(l=nre({inputs:{x:a},attrs:{perm:c},backend:n}));var d=yX(1,u)[0];hX("cumsum",[d],u);var f=n.makeOutput(l.shape,l.dtype),p=l.shape[d],h=n.dataIdMap.get(l.dataId).id,v=n.dataIdMap.get(f.dataId).id;Mre(h,o?1:0,s?1:0,p,v,jne[a.dtype]);var m=f;return null!==c&&(m=nre({inputs:{x:f},attrs:{perm:mX(c)},backend:n}),n.disposeData(l.dataId),n.disposeData(f.dataId)),m}};var jre,Ure={kernelName:xz,backendName:"wasm",setupFunc:function(e){Fre=e.wasm.cwrap(xz,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=r.blockSize,o=r.dataFormat,s=a.shape[0],u=("NHWC"===o?a.shape[1]:a.shape[2])*i,c=("NHWC"===o?a.shape[2]:a.shape[3])*i,l=("NHWC"===o?a.shape[3]:a.shape[1])/(i*i),d="NHWC"===o?[s,u,c,l]:[s,l,u,c],f=t.makeOutput(d,"float32"),p=t.dataIdMap.get(a.dataId).id,h=new Uint8Array(new Int32Array(xW(a.shape)).buffer),v=new Uint8Array(new Int32Array(d).buffer),m=new Uint8Array(new Int32Array(xW(d)).buffer),y=t.dataIdMap.get(f.dataId).id;return Fre(p,i,"NHWC"===o?1:0,h,a.shape.length-1,v,m,d.length,y),f}};var Vre={kernelName:kz,backendName:"wasm",setupFunc:function(e){jre=e.wasm.cwrap(kz,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=r.dataIdMap.get(a.dataId).id,s=r.dataIdMap.get(i.dataId).id,u=n.strides,c=n.dilations,l=n.pad,d=n.dimRoundingMode,f=null==c?[1,1]:c,p=CZ(a.shape,i.shape,u,f,l,d,!0),h=p.filterHeight,v=p.filterWidth,m=p.padInfo.top,y=p.padInfo.right,g=p.padInfo.bottom,b=p.padInfo.left,x=p.dilationHeight,k=p.dilationWidth,w=p.strideHeight,_=p.strideWidth,T=p.inChannels,S=p.outChannels,E="SAME"===p.padInfo.type?1:0;if("channelsLast"!==p.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(p.dataFormat,"'. Please use 'channelsLast'."));var I=r.makeOutput(p.outShape,"float32"),C=r.dataIdMap.get(I.dataId).id;return jre(o,a.shape[0],a.shape[1],a.shape[2],s,h,v,m,y,g,b,E,x,k,w,_,T,S,C),I}},Wre=Hne(Cz),zre=Yne(Nz,0,"bool"),qre=Hne(Az,"float32");function Kre(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.input,i=n.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(JV(-(o+1)<=i,(function(){return"Axis must be in the interval [".concat(-(o+1),", ").concat(o,"]")})),u=o+i+1),s.splice(u,0,1),pre({inputs:{x:a},backend:r,attrs:{shape:s}})}var Gre={kernelName:Oz,backendName:"wasm",kernelFunc:Kre};function Hre(e){var t=e.attrs,n=t.shape,r=t.value,a=t.dtype,i=e.backend,o=i.makeOutput(n,a);return i.typedArrayFromHeap(o).fill(r),o}var Zre,Yre={kernelName:Rz,backendName:"wasm",kernelFunc:Hre};var Xre,Qre={kernelName:Dz,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n.makeOutput(r.shape,r.dtype),i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=(0,W.Z)(r.shape,4),u=s[0],c=s[1],l=s[2],d=s[3];return Zre(i,u,c,l,d,o),a},setupFunc:function(e){Zre=e.wasm.cwrap(Dz,null,["number","number","number","number","number","number"])}},Jre=Hne(Mz),$re=Yne(Lz);var eae,tae={kernelName:Fz,backendName:"wasm",setupFunc:function(e){Xre=e.wasm.cwrap(Fz,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.varianceEpsilon,a=n.x,i=n.mean,o=n.variance,s=n.offset,u=n.scale,c=t.dataIdMap.get(a.dataId).id,l=t.dataIdMap.get(i.dataId).id,d=t.dataIdMap.get(o.dataId).id,f=null!=s?t.dataIdMap.get(s.dataId).id:0,p=null!=u?t.dataIdMap.get(u.dataId).id:0,h=t.makeOutput(a.shape,a.dtype);if(0===nW(a.shape))return h;var v=t.dataIdMap.get(h.dataId).id;return Xre(c,l,d,f,p,r,v),h}};var nae,rae={kernelName:TK,backendName:"wasm",setupFunc:function(e){eae=e.wasm.cwrap(TK,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,v=CZ(a.shape,i.shape,u,l,c,f),m=Une[p];if(null==m)throw new Error("".concat(p," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var y=r.dataIdMap.get(a.dataId).id,g=r.dataIdMap.get(i.dataId).id,b=v.outChannels,x=0;if(null!=o){var k=r.dataIdMap.get(o.dataId);if(1!==k.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedConv2D bias shape (".concat(k.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=k.id}var w=v.filterHeight,_=v.filterWidth,T=v.padInfo.top,S=v.padInfo.right,E=v.padInfo.bottom,I=v.padInfo.left,C=v.dilationHeight,N=v.dilationWidth,A=v.strideHeight,O=v.strideWidth,P=v.inChannels,R="SAME"===v.padInfo.type?1:0,D=v.batchSize,M=v.inHeight,L=v.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var F=r.makeOutput(v.outShape,"float32"),B=r.dataIdMap.get(F.dataId).id,j=null==s?0:r.dataIdMap.get(s.dataId).id;return eae(y,D,M,L,g,w,_,x,T,S,E,I,R,C,N,A,O,P,b,m,j,h||0,B),F}};var aae,iae={kernelName:SK,backendName:"wasm",setupFunc:function(e){nae=e.wasm.cwrap(SK,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=n.strides,c=n.pad,l=n.dilations,d=n.dataFormat,f=n.dimRoundingMode,p=n.activation,h=n.leakyreluAlpha,v=CZ(a.shape,i.shape,u,l,c,f,!0),m=Une[p];if(null==m)throw new Error("".concat(p," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");var y=r.dataIdMap.get(a.dataId).id,g=r.dataIdMap.get(i.dataId).id,b=v.outChannels,x=0;if(null!=o){var k=r.dataIdMap.get(o.dataId);if(1!==k.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(k.shape.length,"."));if(k.shape[0]!==b)throw new Error("FusedDepthwiseConv2D bias shape (".concat(k.shape,") does not ")+"match the number of output channels (".concat(b,")"));x=k.id}var w=v.filterHeight,_=v.filterWidth,T=v.padInfo.top,S=v.padInfo.right,E=v.padInfo.bottom,I=v.padInfo.left,C=v.dilationHeight,N=v.dilationWidth,A=v.strideHeight,O=v.strideWidth,P=v.inChannels,R="SAME"===v.padInfo.type?1:0,D=v.batchSize,M=v.inHeight,L=v.inWidth;if("NHWC"!==d)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(d,"'. Please use 'NHWC'."));var F=r.makeOutput(v.outShape,"float32"),B=r.dataIdMap.get(F.dataId).id,j=null==s?0:r.dataIdMap.get(s.dataId).id;return nae(y,D,M,L,g,w,_,x,T,S,E,I,R,C,N,A,O,P,b,m,j,h||0,B),F}};var oae,sae={kernelName:jz,backendName:"wasm",setupFunc:function(e){aae=e.wasm.cwrap(jz,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.params,a=n.indices,i=nZ(r,a),o=(0,W.Z)(i,4),s=o[0],u=o[1],c=o[2],l=o[3],d=t.makeOutput(s,r.dtype);if(0===u)return d;var f=a.shape,p=f[f.length-1],h=t.dataIdMap.get(r.dataId).id,v=t.dataIdMap.get(a.dataId).id,m=new Uint8Array(new Int32Array(l).buffer),y=t.dataIdMap.get(d.dataId).id;return aae(h,jne[r.dtype],v,u,p,c,m,y),d}};var uae,cae={kernelName:Bz,backendName:"wasm",setupFunc:function(e){oae=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){for(var t=e.backend,n=e.inputs,r=e.attrs,a=n.x,i=n.indices,o=r.axis,s=r.batchDims,u=cW(o,a.shape)[0],c=t.readSync(i.dataId),l=a.shape[u],d=function(e){var t=c[e];JV(t<=l-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(l-1,"]")}))},f=0;f<c.length;++f)d(f);var p=m0(a,i,u,s),h=pre({inputs:{x:a},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),v=nW(i.shape),m=pre({inputs:{x:i},attrs:{shape:[p.batchSize,v/p.batchSize]},backend:t}),y=[p.batchSize,p.outerSize,v/p.batchSize,p.sliceSize],g=t.makeOutput(y,a.dtype);if(0===nW(a.shape))return g;var b=h.shape.length-1,x=t.dataIdMap.get(h.dataId).id,k=t.dataIdMap.get(m.dataId).id,w=t.dataIdMap.get(g.dataId).id,_=new Uint8Array(new Int32Array(xW(h.shape)).buffer),T=new Uint8Array(new Int32Array(xW(y)).buffer);return oae(x,jne[a.dtype],_,b,k,p.batchSize,T,w),t.disposeData(h.dataId),t.disposeData(m.dataId),g.shape=p.outputShape,g}},lae=Yne(Uz,0,"bool"),dae=Yne(Vz,0,"bool");var fae,pae={kernelName:Zz,backendName:"wasm",setupFunc:function(e){uae=e.wasm.cwrap(Zz,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.inputs.x,n=e.attrs.alpha,r=e.backend,a=r.dataIdMap.get(t.dataId).id,i=r.makeOutput(t.shape,"float32");if(0!==nW(t.shape)){var o=r.dataIdMap.get(i.dataId).id;uae(a,jne[t.dtype],n,o)}return i}},hae=Yne(Yz,0,"bool"),vae=Yne(Xz,0,"bool"),mae=Hne(Jz),yae=Yne(eq,0,"bool");var gae,bae={kernelName:aq,backendName:"wasm",setupFunc:function(e){fae=e.wasm.cwrap(aq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.reductionIndices,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=o,c=ire(o,a,t),l=c.transposed,d=c.axes,f=c.originalAxes,p=c.inputWasTransposed;p&&(u=l,s=t.dataIdMap.get(l.dataId).id),hX("max",d,u.shape.length);var h=fX(u.shape,d),v=(0,W.Z)(h,2),m=v[0],y=nW(v[1]),g=t.makeOutput(m,o.dtype);if(0!==nW(u.shape)){var b=t.dataIdMap.get(g.dataId).id;fae(s,jne[o.dtype],y,b)}if(p&&t.disposeData(l.dataId),i){var x=pX(g.shape,f);g.shape=x}return g}},xae=Yne(iq);var kae,wae={kernelName:oq,backendName:"wasm",setupFunc:function(e){gae=e.wasm.cwrap(oq,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=r.dataIdMap.get(a.dataId).id;JV("float32"===a.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(a.dtype,".")}));var o=n.filterSize,s=n.strides,u=n.pad,c=n.dimRoundingMode,l=EZ(a.shape,o,s,1,u,c),d=l.filterHeight,f=l.filterWidth,p=l.padInfo.top,h=l.padInfo.right,v=l.padInfo.bottom,m=l.padInfo.left,y=l.dilationHeight,g=l.dilationWidth,b=l.strideHeight,x=l.strideWidth,k=l.inChannels,w=l.outChannels;if("channelsLast"!==l.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(l.dataFormat,"'. Please use 'channelsLast'."));var _=r.makeOutput(l.outShape,"float32"),T=r.dataIdMap.get(_.dataId).id;return gae(i,a.shape[0],a.shape[1],a.shape[2],d,f,p,h,v,m,y,g,b,x,k,w,T),_}};var _ae,Tae={kernelName:cq,backendName:"wasm",setupFunc:function(e){kae=e.wasm.cwrap(cq,null,["number, number, number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=ire(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,v=f;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m,v=yX(v.length,c.shape.length))}hX("mean",v,c.shape.length);var y=fX(c.shape,v),g=(0,W.Z)(y,2),b=g[0],x=nW(g[1]),k=c;"float32"!==c.dtype&&(k=xre({backend:t,inputs:{x:c},attrs:{dtype:"float32"}}),u=t.dataIdMap.get(k.dataId).id);var w=t.makeOutput(b,"float32");if(0!==nW(c.shape)){var _=t.dataIdMap.get(w.dataId).id;kae(u,x,_)}if(h&&t.disposeData(d.dataId),i){var T=pX(w.shape,p);w.shape=T}return"float32"!==c.dtype&&t.disposeData(k.dataId),w}};var Sae,Eae,Iae={kernelName:lq,backendName:"wasm",setupFunc:function(e){_ae=e.wasm.cwrap(lq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=ire(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed;if(h){var v=t.dataIdMap.get(d.dataId).id;v!==s&&(c=d,u=v)}hX("min",f,c.shape.length);var m=fX(c.shape,f),y=(0,W.Z)(m,2),g=y[0],b=nW(y[1]),x=t.makeOutput(g,c.dtype);if(0!==nW(c.shape)){var k=t.dataIdMap.get(x.dataId).id;_ae(u,jne[o.dtype],b,k)}if(h&&t.disposeData(d.dataId),i){var w=pX(x.shape,p);x.shape=w}return x}},Cae=Yne(dq);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(Sae||(Sae={}));var Nae,Aae={kernelName:fq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.mode,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]})),s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return Eae(s,l,t.shape.length,jne[t.dtype],p,h,Sae[i],c),u},setupFunc:function(e){Eae=e.wasm.cwrap(fq,null,["number","array","number","number","array","array","number","number"])}},Oae=Yne(hq),Pae=Hne(vq);function Rae(e,t){var n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],a=n[1],i=n[2],o=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:a,pSelectedScores:i,pValidOutputs:o}}var Dae,Mae={kernelName:yq,backendName:"wasm",setupFunc:function(e){Nae=e.wasm.cwrap(yq,"number",["number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=n.boxes,u=n.scores,c=t.dataIdMap.get(s.dataId).id,l=t.dataIdMap.get(u.dataId).id,d=Rae(t,Nae(c,l,i,a,o)),f=d.pSelectedIndices,p=d.selectedSize,h=d.pSelectedScores,v=d.pValidOutputs;return t.wasm._free(h),t.wasm._free(v),t.makeOutput([p],"int32",f)}};var Lae,Fae={kernelName:gq,backendName:"wasm",setupFunc:function(e){Dae=e.wasm.cwrap(gq,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.padToMaxOutputSize,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=Rae(t,Dae(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,v=f.pSelectedScores,m=f.pValidOutputs;return t.wasm._free(v),[t.makeOutput([h],"int32",p),t.makeOutput([],"int32",m)]}};var Bae,jae={kernelName:bq,backendName:"wasm",setupFunc:function(e){Lae=e.wasm.cwrap(bq,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.iouThreshold,i=r.maxOutputSize,o=r.scoreThreshold,s=r.softNmsSigma,u=n.boxes,c=n.scores,l=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(c.dataId).id,f=Rae(t,Lae(l,d,i,a,o,s)),p=f.pSelectedIndices,h=f.selectedSize,v=f.pSelectedScores,m=f.pValidOutputs;return t.wasm._free(m),[t.makeOutput([h],"int32",p),t.makeOutput([h],"float32",v)]}},Uae=Yne(mq,0,"bool");var Vae={kernelName:kq,backendName:"wasm",setupFunc:function(e){Bae=e.wasm.cwrap(kq,null,["number","number","number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=n.makeOutput([].concat((0,Ze.Z)(a.shape),[i]),"int32"),c=n.dataIdMap.get(u.dataId).id,l=n.dataIdMap.get(a.dataId).id;return Bae(l,i,o,s,c),u}};var Wae={kernelName:xq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var zae,qae={kernelName:wq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return Kre({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){$V(a,e.shape,"All tensors passed to stack must have matching shapes"),JV(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=t.map((function(e){var t=Kre({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),u=Sre({inputs:s,backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeData(e.dataId)})),u}};var Kae,Gae={kernelName:_q,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=e.attrs,a=r.paddings,i=r.constantValue,o=a.map((function(e,n){return e[0]+t.shape[n]+e[1]}));if(0===nW(t.shape))return Hre({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});var s=n.dataIdMap.get(t.dataId).id,u=n.makeOutput(o,t.dtype),c=n.dataIdMap.get(u.dataId).id,l=new Uint8Array(new Int32Array(t.shape).buffer),d=a.map((function(e){return e[0]})),f=a.map((function(e){return e[1]})),p=new Uint8Array(new Int32Array(d).buffer),h=new Uint8Array(new Int32Array(f).buffer);return zae(s,l,t.shape.length,jne[t.dtype],p,h,i,c),u},setupFunc:function(e){zae=e.wasm.cwrap(_q,null,["number","array","number","number","array","array","number","number"])}},Hae=Yne(Tq);var Zae,Yae={kernelName:Sq,backendName:"wasm",setupFunc:function(e){Kae=e.wasm.cwrap(Sq,null,["number","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=n.dataIdMap.get(r.dataId).id,o=n.dataIdMap.get(a.dataId).id,s=i,u=r,c=u;"float32"!==u.dtype&&(c=xre({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(c.dataId).id);var l=n.makeOutput(r.shape,"float32"),d=n.dataIdMap.get(l.dataId).id;return Kae(s,o,d),"float32"!==u.dtype&&n.disposeData(c.dataId),l}};var Xae,Qae={kernelName:Eq,backendName:"wasm",setupFunc:function(e){Zae=e.wasm.cwrap(Eq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=ire(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,v=f;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m,v=yX(v.length,c.shape.length))}hX("prod",v,c.shape.length);var y=fX(c.shape,v),g=(0,W.Z)(y,2),b=g[0],x=nW(g[1]),k=t.makeOutput(b,c.dtype);if(0!==nW(c.shape)){var w=t.dataIdMap.get(k.dataId).id;Zae(u,x,jne[k.dtype],w)}if(h&&t.disposeData(d.dataId),i){var _=pX(k.shape,p);k.shape=_}return k}},Jae={kernelName:Iq,backendName:"wasm",kernelFunc:function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=V4(r,a,i,o),u=t.makeOutput([s.length],o);return t.typedArrayFromHeap(u).set(s),u}},$ae=Yne(Ez),eie=Hne(Aq),tie=Hne(Dq);var nie,rie={kernelName:Rq,backendName:"wasm",setupFunc:function(e){Xae=e.wasm.cwrap(Rq,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.images,o=a.alignCorners,s=a.halfPixelCenters,u=a.size,c=(0,W.Z)(u,2),l=c[0],d=c[1],f=(0,W.Z)(i.shape,4),p=f[0],h=f[1],v=f[2],m=f[3],y=[p,l,d,m],g=n.dataIdMap.get(i.dataId);"float32"!==g.dtype&&(t=xre({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));var b=g.id,x=n.makeOutput(y,"float32");if(0===nW(i.shape))return x;var k=n.dataIdMap.get(x.dataId).id;return Xae(b,p,h,v,m,l,d,o?1:0,s?1:0,k),null!=t&&n.disposeData(t.dataId),x}};var aie,iie={kernelName:Mq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=cW(r.dims,a.shape);if(0===a.shape.length)return $ne({inputs:{x:a},backend:n});var o=n.makeOutput(a.shape,a.dtype),s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(o.dataId).id,c=new Uint8Array(new Int32Array(i).buffer),l=new Uint8Array(new Int32Array(a.shape).buffer);nie(s,c,i.length,l,a.shape.length,u);var d=pre({inputs:{x:o},attrs:{shape:a.shape},backend:n});return n.disposeData(o.dataId),d},setupFunc:function(e){nie=e.wasm.cwrap(Mq,null,["number","array","number","array","number","number"])}};var oie,sie={kernelName:wK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=r.radians,o=r.fillValue,s=r.center,u=n.makeOutput(a.shape,a.dtype),c=n.dataIdMap.get(a.dataId).id,l=n.dataIdMap.get(u.dataId).id,d=(0,W.Z)(a.shape,4),f=d[0],p=d[1],h=d[2],v=d[3],m=G$(s,p,h),y=(0,W.Z)(m,2),g=y[0],b=y[1],x="number"===typeof o?[o,o,o,0===o?0:255]:[].concat((0,Ze.Z)(o),[255]),k=new Uint8Array(new Int32Array(x).buffer);return aie(c,f,p,h,v,i,g,b,k,x.length,l),u},setupFunc:function(e){aie=e.wasm.cwrap(wK,null,["number","number","number","number","number","number","number","number","array","number","number"])}},uie=Hne(Lq),cie=Hne(Fq);var lie,die={kernelName:Bq,backendName:"wasm",setupFunc:function(e){oie=e.wasm.cwrap(Bq,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=n.indices,i=n.updates,o=r.shape,s=t.makeOutput(o,i.dtype);if(0===nW(o))return s;var u=aZ(0,a,o),c=u.sliceRank,l=u.numUpdates,d=u.sliceSize,f=u.strides,p=u.outputSize,h=t.dataIdMap.get(a.dataId).id,v=t.dataIdMap.get(i.dataId).id,m=new Uint8Array(new Int32Array(f).buffer),y=t.dataIdMap.get(s.dataId).id;return oie(h,v,jne[i.dtype],c,l,d,m,p,y),s}};var fie,pie={kernelName:jq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(a.dataId).id,u=n.dataIdMap.get(i.dataId).id,c=n.makeOutput(a.shape,a.dtype),l=n.dataIdMap.get(c.dataId).id,d=r.shape.length,f=a.shape.length,p=0===d||d>1||1===f?1:nW(a.shape.slice(1));return lie(o,s,u,p,l),c},setupFunc:function(e){lie=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}};var hie,vie={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){fie=e.wasm.cwrap(Kq,null,["number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.x,r=t.dataIdMap.get(n.dataId).id,a=t.makeOutput(n.shape,n.dtype),i=t.dataIdMap.get(a.dataId).id;return 0===nW(a.shape)||fie(r,i),a}},mie=Hne(Wq);var yie={kernelName:Qq,backendName:"wasm",setupFunc:function(e){hie=e.wasm.cwrap(Qq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs.logits,r=e.attrs.dim,a=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id,s=n.shape[r],u=nW(n.shape)/s;return 0===nW(i.shape)||hie(a,o,s,u),i}};var gie,bie={kernelName:Yq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings,s=nW(i),u=[[0,0]];u.push.apply(u,(0,Ze.Z)(o));for(var c=1+i.length;c<a.shape.length;++c)u.push([0,0]);var l=Gae.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),d=H$(l.shape,i,s,!1),f=Z$(d.length,i.length,!1),p=Y$(l.shape,i,s,!1),h=pre({inputs:{x:l},backend:n,attrs:{shape:d}}),v=nre({inputs:{x:h},backend:n,attrs:{perm:f}}),m=pre({inputs:{x:v},backend:n,attrs:{shape:p}});return n.disposeData(l.dataId),n.disposeData(h.dataId),n.disposeData(v.dataId),m}};var xie,kie={kernelName:Jq,backendName:"wasm",setupFunc:function(e){gie=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=r.indices,i=r.values,o=r.denseShape,s=r.defaultValue,u=a.shape[0],c=a.shape[1],l=n.readSync(o.dataId)[0],d=[u+l,c],f=n.dataIdMap.get(a.dataId).id,p=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(s.dataId).id,v=n.makeOutput(d,a.dtype),m=n.dataIdMap.get(v.dataId).id,y=n.makeOutput(d.slice(0,1),i.dtype),g=n.dataIdMap.get(y.dataId).id,b=n.makeOutput([l],"bool"),x=n.dataIdMap.get(b.dataId).id,k=n.makeOutput([u],a.dtype),w=n.dataIdMap.get(k.dataId).id,_=n.makeOutput([4],"int32"),T=n.dataIdMap.get(_.dataId).id,S=gie(f,p,jne[i.dtype],u,l,c,h,m,g,x,w,T),E=n.readSync(_.dataId);switch(E[0]){case 1:t=s0(E[1]);break;case 2:t=u0(E[1],E[2]);break;case 3:t=c0(E[1],E[2],E[3]);break;default:t=""}if(n.disposeData(_.dataId),t)throw n.disposeData(v.dataId),n.disposeData(y.dataId),n.disposeData(b.dataId),n.disposeData(k.dataId),new Error(t);var I=v,C=y;return S!==d[0]&&(I=yre({inputs:{x:v},attrs:{begin:0,size:[S,c]},backend:n}),C=yre({inputs:{x:y},attrs:{begin:0,size:S},backend:n}),n.disposeData(v.dataId),n.disposeData(y.dataId)),[I,C,b,k]}};var wie,_ie={kernelName:$q,backendName:"wasm",setupFunc:function(e){xie=e.wasm.cwrap($q,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=n.inputIndices,a=n.inputShape,i=n.newShape;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(r.shape));if(1!==a.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(a.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var o=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(i.dataId).id,c=r.shape[0],l=nW(i.shape),d=t.makeOutput([c,l],r.dtype),f=t.dataIdMap.get(d.dataId).id,p=t.makeOutput([l],i.dtype),h=t.dataIdMap.get(p.dataId).id,v=t.makeOutput([3],"int32"),m=t.dataIdMap.get(v.dataId).id;xie(o,s,u,c,f,h,m);var y,g=t.readSync(v.dataId);switch(g[0]){case 0:y=l0(g[1],g[2]);break;case 1:y=d0(g[1],g[2]);break;case 2:y="reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero";break;case 3:y=f0(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;case 4:y=p0(Array.from(t.readSync(a.dataId)),Array.from(t.readSync(p.dataId)));break;default:y=""}if(t.disposeData(v.dataId),y)throw t.disposeData(d.dataId),t.disposeData(p.dataId),new Error(y);return[d,p]}};function Tie(e){wie=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function Sie(e,t){var n=e.backend,r=e.inputs,a=r.data,i=r.indices,o=r.segmentIds,s=i.shape[0],u=n.readSync(o.dataId,s-1,s)[0],c=s>0?u+1:0;if(c<0)throw new Error("segment ids must be >= 0");var l=a.shape.slice();l[0]=c;var d=n.dataIdMap.get(a.dataId).id,f=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,h=n.makeOutput(l,a.dtype),v=n.dataIdMap.get(h.dataId).id,m=n.makeOutput([4],"int32"),y=n.dataIdMap.get(m.dataId).id;wie(d,jne[a.dtype],a.shape[0],f,p,v,y,t,0);var g,b=n.readSync(m.dataId);switch(b[0]){case 0:g="segment ids must be >= 0";break;case 1:g="segment ids are not increasing";break;case 2:g=h0(b[1],b[2]);break;case 3:g=v0(b[1],b[2],b[3]);break;default:g=""}if(n.disposeData(m.dataId),g)throw n.disposeData(h.dataId),new Error(g);return h}var Eie={kernelName:eK,backendName:"wasm",setupFunc:Tie,kernelFunc:function(e){return Sie(e,!0)}};var Iie={kernelName:tK,backendName:"wasm",setupFunc:Tie,kernelFunc:function(e){return Sie(e,!1)}};var Cie,Nie={kernelName:Xq,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.numOrSizeSplits,o=cW(n.axis,a.shape)[0],s=o0(a,i,o),u=new Array(a.shape.length).fill(0),c=a.shape.slice();return s.map((function(e){var t=(0,Ze.Z)(c);t[o]=e;var n=yre({inputs:{x:a},attrs:{begin:u,size:t},backend:r});return u[o]+=e,n}))}},Aie=Hne(Hq),Oie=Hne(aK),Pie=Yne(rK);var Rie,Die={kernelName:xK,backendName:"wasm",setupFunc:function(e){Cie=e.wasm.cwrap(xK,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs.alpha,a=n.x,i=t.dataIdMap.get(a.dataId).id,o=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(o.dataId).id;return Cie(i,r,jne[a.dtype],s),o}};var Mie,Lie={kernelName:iK,backendName:"wasm",setupFunc:function(e){Rie=e.wasm.cwrap(iK,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.x,o=a.begin,s=a.end,u=a.strides,c=a.beginMask,l=a.endMask,d=a.ellipsisMask,f=a.newAxisMask,p=a.shrinkAxisMask,h=lZ(i.shape,o,s,u,c,l,d,f,p),v=h.finalShapeSparse,m=h.finalShape,y=h.isIdentity,g=h.sliceDim0,b=h.isSimpleSlice,x=h.begin,k=h.end,w=h.strides;if(y)t=pre({inputs:{x:i},backend:n,attrs:{shape:m}});else if(g||b){JV(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var _=oZ(x,k,w),T=yre({inputs:{x:i},backend:n,attrs:{begin:x,size:_}});t=pre({inputs:{x:T},backend:n,attrs:{shape:m}}),n.disposeData(T.dataId)}else{var S=n.makeOutput(v,"float32"),E=n.dataIdMap.get(i.dataId).id,I=new Uint8Array(new Int32Array(xW(i.shape)).buffer),C=new Uint8Array(new Int32Array(x).buffer),N=new Uint8Array(new Int32Array(k).buffer),A=new Uint8Array(new Int32Array(w).buffer),O=new Uint8Array(new Int32Array(v).buffer),P=new Uint8Array(new Int32Array(xW(v)).buffer),R=n.dataIdMap.get(S.dataId).id;Rie(E,I,i.shape.length,C,N,A,O,P,v.length,R),t=pre({inputs:{x:S},backend:n,attrs:{shape:m}}),n.disposeData(S.dataId)}return t}},Fie=Yne(cK);var Bie,jie={kernelName:Zq,backendName:"wasm",setupFunc:function(e){Mie=e.wasm.cwrap(Zq,null,["number","number","number","number"])},kernelFunc:function(e){var t=e.backend,n=e.inputs,r=e.attrs,a=r.axis,i=r.keepDims,o=n.x,s=t.dataIdMap.get(o.dataId).id,u=s,c=o,l=ire(o,a,t),d=l.transposed,f=l.axes,p=l.originalAxes,h=l.inputWasTransposed,v=f;if(h){var m=t.dataIdMap.get(d.dataId).id;m!==s&&(c=d,u=m,v=yX(v.length,c.shape.length))}hX("sum",v,c.shape.length);var y=fX(c.shape,v),g=(0,W.Z)(y,2),b=g[0],x=nW(g[1]),k=t.makeOutput(b,c.dtype);if(0!==nW(c.shape)){var w=t.dataIdMap.get(k.dataId).id;Mie(u,x,jne[k.dtype],w)}if(h&&t.disposeData(d.dataId),i){var _=pX(k.shape,p);k.shape=_}return k}},Uie=Hne(lK),Vie=Hne(dK);var Wie,zie={kernelName:fK,backendName:"wasm",setupFunc:function(e){Bie=e.wasm.cwrap(fK,null,["number","array","number","array","number","number"])},kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=n.dataIdMap.get(a.dataId).id,o=r.reps,s=new Array(a.shape.length),u=0;u<s.length;u++)s[u]=a.shape[u]*o[u];var c=new Uint8Array(new Int32Array(a.shape).buffer),l=new Uint8Array(new Int32Array(s).buffer),d=n.makeOutput(s,a.dtype),f=n.dataIdMap.get(d.dataId).id;return Bie(i,c,a.shape.length,l,s.length,jne[d.dtype],f),d}};var qie,Kie={kernelName:pK,backendName:"wasm",setupFunc:function(e){Wie=e.wasm.cwrap(pK,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.dataIdMap.get(a.dataId).id,u=new Uint8Array(new Int32Array(a.shape).buffer),c=a.shape.slice();c[c.length-1]=i;var l=n.makeOutput(c,a.dtype),d=n.dataIdMap.get(l.dataId).id,f=n.makeOutput(c,"int32"),p=n.dataIdMap.get(f.dataId).id;return Wie(s,u,a.shape.length,jne[a.dtype],i,o,d,p),[l,f]}};var Gie={kernelName:hK,backendName:"wasm",setupFunc:function(e){qie=e.wasm.cwrap(hK,null,["number","number","bool","number","number","number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){var t,n=e.backend,r=e.inputs,a=e.attrs,i=r.image,o=r.transforms,s=a.interpolation,u=a.fillMode,c=a.fillValue,l=a.outputShape,d=(0,W.Z)(i.shape,4),f=d[0],p=d[1],h=d[2],v=d[3],m=null!=l?l:[p,h],y=(0,W.Z)(m,2),g=y[0],b=y[1],x=[f,g,b,v],k=new Uint8Array(new Int32Array(xW(i.shape)).buffer),w=n.makeOutput(x,i.dtype),_=n.dataIdMap.get(w.dataId).id,T=n.dataIdMap.get(i.dataId).id,S=n.dataIdMap.get(o.dataId).id,E="nearest"===s?1:2;switch(u){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return qie(T,S,o.shape[0]>1,f,g,b,v,h,p,k,i.shape.length-1,E,t,c,_),w}};var Hie={kernelName:yK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape[i],s=a.shape.length,u=new Array(s-1),c=0,l=0;l<s;l++)l!==i&&(u[c++]=a.shape[l]);var d=new Array(o),f=new Array(s).fill(0),p=a.shape.slice();p[i]=1;for(var h=0;h<d.length;h++)f[i]=h,d[h]=yre({inputs:{x:a},attrs:{begin:f,size:p},backend:n});return d.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:u}}))}};for(var Zie={kernelName:bK,backendName:"wasm",kernelFunc:function(e){var t=e.inputs.x,n=e.backend,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}},Yie=0,Xie=[Gne,Zne,Qne,Jne,sre,cre,dre,fre,mre,bre,wre,_re,Tre,Ire,Nre,Pre,Rre,Dre,Lre,Bre,Ure,Vre,Wre,zre,qre,Gre,Yre,Qre,Jre,$re,tae,rae,iae,sae,cae,lae,dae,tre,pae,hae,vae,mae,yae,bae,xae,wae,Tae,Iae,Cae,Aae,Oae,Pae,Mae,Fae,jae,Uae,Vae,Wae,qae,Gae,Hae,Yae,Qae,Jae,$ae,eie,tie,vre,rie,iie,sie,uie,cie,die,pie,vie,mie,gre,yie,bie,kie,_ie,Eie,Iie,Nie,Aie,Oie,Pie,Die,Lie,Fie,jie,Uie,Vie,zie,Kie,Gie,are,Hie,Zie];Yie<Xie.length;Yie++){PK(Xie[Yie])}var Qie=RW();Qie.registerFlag("WASM_HAS_SIMD_SUPPORT",j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11])));case 1:case"end":return e.stop()}}),e)})))),Qie.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Qie.get("IS_NODE")){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),e.abrupt("return",WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])));case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))));var Jie=n(8834),$ie=n.n(Jie),eoe=n(9926),toe=n.n(eoe),noe=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this)).wasm=e,r.dataIdNextNumber=1,r.wasm.tfjs.initWithThreadsCount(poe),r.wasm.tfjs.getThreadsCount(),r.dataIdMap=new GV(A(r),c$()),r}return N(n,[{key:"write",value:function(e,t,n){var r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}},{key:"numDataIds",value:function(){return this.dataIdMap.numDataIds()}},{key:"time",value:function(){var e=j(G().mark((function e(t){var n,r;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=$K(),t(),r=$K()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"move",value:function(e,t,n,r,a){var i=this.dataIdNextNumber++;if("string"!==r){var o=nW(n),s=o*vW(r),u=this.wasm._malloc(s);this.dataIdMap.set(e,{id:i,memoryOffset:u,shape:n,dtype:r,refCount:a}),this.wasm.tfjs.registerTensor(i,o,u),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),u)}else{var c=t;this.dataIdMap.set(e,{id:i,stringBytes:c,shape:n,dtype:r,memoryOffset:null,refCount:a})}}},{key:"read",value:function(){var e=j(G().mark((function e(t){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readSync",value:function(e,t,n){var r=this.dataIdMap.get(e),a=r.memoryOffset,i=r.dtype,o=r.shape,s=r.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==n||n>=s.length)?s.slice(t,n):s;t=t||0,n=n||nW(o);var u=vW(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}(this.wasm.HEAPU8.slice(a+t*u,a+n*u).buffer,i)}},{key:"disposeData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.dataIdMap.has(e)){var n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}},{key:"refCount",value:function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}},{key:"incRef",value:function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++}},{key:"floatPrecision",value:function(){return 32}},{key:"getMemoryOffset",value:function(e){return this.dataIdMap.get(e).memoryOffset}},{key:"dispose",value:function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}},{key:"memory",value:function(){return{unreliable:!1}}},{key:"makeOutput",value:function(e,t,n){var r;if(null==n)r=this.write(null,e,t);else{var a=this.dataIdNextNumber++;r={id:a},this.dataIdMap.set(r,{id:a,memoryOffset:n,shape:e,dtype:t,refCount:1});var i=nW(e);this.wasm.tfjs.registerTensor(a,i,n)}return{dataId:r,shape:e,dtype:t}}},{key:"typedArrayFromHeap",value:function(e){var t=e.shape,n=e.dtype,r=e.dataId,a=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(r).memoryOffset,o=nW(t);switch(n){case"float32":return new Float32Array(a,i,o);case"int32":return new Int32Array(a,i,o);case"bool":return new Uint8Array(a,i,o);default:throw new Error("Unknown dtype ".concat(n))}}}]),n}(HV);function roe(e){return function(t,n){return function(e,t){return RW().platform.fetch(e,t)}(e,{credentials:"same-origin"}).then((function(r){r.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),r.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){n(e.instance,e.module)}))}))})),{}}}function aoe(e,t,n){if(null!=uoe)return uoe;var r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=loe&&null!=loe[r]?loe[r]:n+r}function ioe(){return ooe.apply(this,arguments)}function ooe(){return(ooe=j(G().mark((function e(){var t,n,r,a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([RW().getAsync("WASM_HAS_SIMD_SUPPORT"),RW().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);case 2:return t=e.sent,n=(0,W.Z)(t,2),r=n[0],a=n[1],e.abrupt("return",new Promise((function(e,t){var n={locateFile:function(e,t){if(e.endsWith(".worker.js")){var n=new Blob(['"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process==="object"&&typeof process.versions==="object"&&typeof process.versions.node==="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",function(data){onmessage({data:data})});var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8"))},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=((info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports});self.onmessage=(e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob==="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module).then(function(instance){Module=instance})}else if(e.data.cmd==="run"){Module["__performance_now_clock_drift"]=performance.now()-e.data.time;Module["__emscripten_thread_init"](e.data.threadInfoStruct,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInit();try{var result=Module["invokeEntryPoint"](e.data.start_routine,e.data.arg);if(Module["keepRuntimeAlive"]()){Module["PThread"].setExitStatus(result)}else{Module["__emscripten_thread_exit"](result)}}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processThreadQueue"){if(Module["_pthread_self"]()){Module["_emscripten_current_thread_process_queued_calls"]()}}else if(e.data.cmd==="processProxyingQueue"){if(Module["_pthread_self"]()){Module["_emscripten_proxy_execute_queue"](e.data.queue)}}else{err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){err("worker.js onmessage() captured an uncaught exception: "+ex);if(ex&&ex.stack)err(ex.stack);if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}});'],{type:"application/javascript"});return URL.createObjectURL(n)}return e.endsWith(".wasm")?aoe(r,a,null!=coe?coe:t):t+e}};foe&&(n.instantiateWasm=roe(aoe(r,a,null!=coe?coe:"")));var i,o=!1;n.onAbort=function(){if(!o&&!doe){doe=!0;t({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"})}},a&&r&&null==uoe?(n.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+$ie().toString()],{type:"text/javascript"}),i=$ie()(n)):i=toe()(n),i.then((function(t){o=!0,doe=!1;t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})}))})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var soe=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],uoe=null,coe=null,loe={},doe=!1,foe=!1;var poe=-1;h$("wasm",j(G().mark((function e(){var t,n;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ioe();case 2:return t=e.sent,n=t.wasm,e.abrupt("return",new noe(n));case 5:case"end":return e.stop()}}),e)}))),2);var hoe=[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255];function voe(e){var t=e.height,n=e.width,r=e.flipCamCounter,a=(e.incFlipCam,(0,_.useState)(!1)),i=(0,W.Z)(a,2),o=i[0],s=i[1];!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(doe)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"===typeof e)coe=e;else{loe=e;var n=soe.filter((function(e){return null==loe[e]}));if(n.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(n.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}foe=t}("https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-backend-wasm@".concat("3.14.0","/dist/"));var u,c,l,d,f,p,h=468,v="#32EEDB",m="#FF2C35";function y(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function g(e,t,n){var r=new Path2D;r.moveTo(t[0][0],t[0][1]);for(var a=1;a<t.length;a++){var i=t[a];r.lineTo(i[0],i[1])}n&&r.closePath(),e.stroke(r)}var b=new(Kne()),x="webgl",k=!0;function w(){return T.apply(this,arguments)}function T(){return(T=j(G().mark((function e(){var a;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f=document.getElementById("main-camera"),e.next=3,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:r%2===0?"user":"environment",aspectRatio:{exact:ej.tq?o?t/n:n/t:9.5/16},width:{ideal:1920},height:{ideal:1920}}});case 3:return a=e.sent,f.srcObject=a,e.abrupt("return",new Promise((function(e){f.onloadedmetadata=function(){e(f)}})));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return E.apply(this,arguments)}function E(){return E=j(G().mark((function e(){var t;return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.begin(),e.next=3,u.estimateFaces({input:f,flipHorizontal:!(r%2===0&&ej.tq||!ej.tq)});case 3:t=e.sent,c.clearRect(0,0,p.width,p.height),c.drawImage(f,0,0,l*(r%2===0&&ej.tq||!ej.tq?1:-1),d,0,0,p.width,p.height),t.length>0&&t.forEach((function(e){var t=e.scaledMesh;if(k){c.strokeStyle=v,c.lineWidth=.5;for(var n=0;n<hoe.length/3;n++){var r=[hoe[3*n],hoe[3*n+1],hoe[3*n+2]].map((function(e){return t[e]}));g(c,r,!0)}}else{c.fillStyle=v;for(var a=0;a<h;a++){var i=t[a][0],o=t[a][1];c.beginPath(),c.arc(i,o,1,0,2*Math.PI),c.fill()}}if(t.length>h){c.strokeStyle=m,c.lineWidth=1;var s=t[468],u=y(t[472],t[470]),l=y(t[471],t[469]);if(c.beginPath(),c.ellipse(s[0],s[1],l/2,u/2,0,0,2*Math.PI),c.stroke(),t.length>473){var d=t[473],f=y(t[475],t[477]),p=y(t[476],t[474]);c.beginPath(),c.ellipse(d[0],d[1],p/2,f/2,0,0,2*Math.PI),c.stroke()}}})),b.end(),document.getElementById("endFace")?requestAnimationFrame(S):c.clearRect(0,0,p.width,p.height);case 9:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function I(){return C.apply(this,arguments)}function C(){return(C=j(G().mark((function e(){return G().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p$(x);case 2:return b.showPanel(0),e.next=5,w();case 5:return f.play(),l=f.videoWidth,d=f.videoHeight,f.width=l,f.height=d,(p=document.getElementById("main-canvas")).width=l,p.height=d,(c=p.getContext("2d")).translate(p.width,0),c.scale(-1,1),c.fillStyle=v,c.strokeStyle=v,c.lineWidth=.5,console.log("called camera"),e.next=22,E2();case 22:u=e.sent,console.log("model loaded"),S();case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,_.useEffect)((function(){ej.tq&&t>n?s(!0):s(!1)}),[t,n]),(0,_.useEffect)((function(){ej.tq&&(f&&f.pause(),I())}),[o,r]),I(),(0,sj.jsx)(sj.Fragment,{})}function moe(e){var t=e.loggedIn,n=e.index,r=e.height,a=e.width,i=e.flipCamCounter,o=e.disableNavFootSlide,s=e.userDoc,u=e.setUserDoc,c=e.changeToIndex,l=e.toggleSnapShot,d=e.incFlipCam,f=(0,_.useState)("camera"),p=(0,W.Z)(f,2),h=p[0],v=p[1],m=(0,_.useState)(!1),y=(0,W.Z)(m,2),g=y[0],b=y[1],x=(0,_.useState)(16/9.5),k=(0,W.Z)(x,2),w=k[0],T=k[1],S=(0,_.useState)(!1),E=(0,W.Z)(S,2),I=E[0],C=E[1],N=(0,_.useState)(!1),A=(0,W.Z)(N,2),O=(A[0],A[1]),P=(0,_.useState)(null),R=(0,W.Z)(P,2),D=R[0],M=R[1],L=(0,_.useState)(null),F=(0,W.Z)(L,2),B=F[0],j=F[1],U=(0,_.useState)(null),V=(0,W.Z)(U,2),z=V[0],q=V[1],K=function(e,t,n){void 0===t&&(t=300),void 0===n&&(n={});var r=(0,_.useRef)(null),a=(0,_.useCallback)((function(a){r.current?(clearTimeout(r.current),r.current=null,e&&e(a)):r.current=setTimeout((function(){n.onSingleTap&&n.onSingleTap(a),r.current=null}),t)}),[e,t,n.onSingleTap]);return e?{onClick:a}:{}}((function(){d()}));function G(){B.startsWith("blob:")&&URL.revokeObjectURL(B),j(null),v("camera");var e=document.getElementById("main-canvas"),t=document.getElementById("main-camera");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").clearRect(0,0,e.width,e.height),o(!1)}function H(e){C(e)}function Z(){var e=document.getElementById("main-canvas"),t=document.getElementById("main-camera");e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").clearRect(0,0,e.width,e.height),T(ej.tq?g?r/a:a/r:9.5/16),O(!1),console.log("starting cam"),document.querySelector(".cameraOverlay").classList.remove("fadeIn"),document.querySelector(".cameraOverlay").classList.add("loading");var n={audio:!1,video:{facingMode:i%2===0?"user":"environment",aspectRatio:{exact:ej.tq?g?r/a:a/r:9.5/16},width:{ideal:1920},height:{ideal:1920}}};navigator.mediaDevices.getUserMedia(n).then((function(e){M(e),document.querySelector("#main-camera").srcObject=e}))}function Y(){null!==D&&(D.getTracks().forEach((function(e){e.stop()})),document.querySelector("#main-camera").srcObject=null)}return(0,_.useEffect)((function(){var e=document.querySelector("video"),t=document.getElementById("main-canvas");q(t.getContext("2d")),e.onloadeddata=function(){console.log("Video loaded"),O(!0),document.querySelector(".cameraOverlay").classList.remove("loading"),document.querySelector(".cameraOverlay").classList.add("fadeIn")}}),[]),(0,_.useEffect)((function(){ej.tq&&r>a?b(!0):b(!1)}),[r,a]),(0,_.useEffect)((function(){ej.tq&&(console.log("portrait changed",g),Z())}),[g,i]),(0,_.useEffect)((function(){1===n&&"camera"===h?(Y(),Z()):(H(!1),Y())}),[i,n,h]),(0,sj.jsxs)("div",{className:"main2",id:"main",style:{width:a,height:r},children:[(0,sj.jsx)("video",{autoPlay:!0,playsInline:!0,id:"main-camera",style:{transform:i%2===0&&ej.tq||!ej.tq?"scaleX(-1)":"scaleX(1)",width:"100%",height:"100%",position:"absolute",display:"flex"}}),(0,sj.jsx)("canvas",{id:"main-canvas",style:{width:ej.tq||a/r<w?"100%":"auto",height:ej.tq||a/r>w?"100%":"auto",position:"absolute"}}),"captured"===h&&(0,sj.jsx)(KV,{height:r,width:a,img:B,close:G,changedToSend:function(){v("send")},save:function(){G()},backToCapture:function(){v("captured")},userDoc:s,setUserDoc:u,sent:function(){t&&B.startsWith("blob:")&&URL.revokeObjectURL(B),j(null),v("camera"),o(!1),c(0)},toggleSnapShot:l,ctx:z}),"camera"===h&&I&&(0,sj.jsx)(voe,{height:r,width:a,flipCamCounter:i,incFlipCam:d}),"camera"===h&&(0,sj.jsxs)("div",Rj(Rj({className:"cameraOverlay",style:{position:"absolute",height:"100%",width:"100%"}},K),{},{children:[(0,sj.jsxs)("div",{className:"cameraFooter",children:[(0,sj.jsx)("button",{style:{visibility:"hidden"},children:"asdf"}),(0,sj.jsx)("button",{className:"capture-button",type:"button",onClick:"camera"===h?function(){var e=document.getElementById("main-canvas"),t=document.getElementById("main-camera");e.getContext("2d").getImageData(0,0,e.width,e.height).data.some((function(e){return 0!==e}))||(e.width=t.videoWidth,e.height=t.videoHeight,ej.tq&&i%2===0||!ej.tq?(z.scale(-1,1),z.drawImage(t,-1*e.width,0)):z.drawImage(t,0,0)),e.toBlob((function(e){var t=URL.createObjectURL(e);j(t)})),v("captured"),o(!0)}:G}),"camera"===h&&(0,sj.jsx)("button",{type:"button",id:I?"endFace":"showFace",onClick:I?function(){return H(!1)}:function(){return H(!0)},children:I?(0,sj.jsx)(zne.Z,{}):(0,sj.jsx)(Wne.Z,{})})]}),(0,sj.jsx)(Cj,{type:"relative"})]}))]})}for(var yoe=n(4855),goe=n(53),boe=(new Date).toLocaleString(),xoe={id:"Guest@Guest.com",created:"N/A",name:"Guest",email:"Guest@Guest.com",username:"Guest123",profile_pic_url:Oj,streak_emoji:"\ud83d\udd25",phoneNumber:null,sent:0,received:0,added_me:{},pending:{},friends:{"Guest@Guest.com":{created:boe,profile_pic_url:Oj,name:"Guest",status:"new-friend",streak:0,sent:0,received:0,last_time_stamp:null,snaps:{}}}},koe={"Rick@Guest.com":{id:"Rick@Guest.com",created:"N/A",profile_pic_url:yoe,name:"Rick",status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:{}},"Morty@Guest.com":{id:"Morty@Guest.com",created:"N/A",profile_pic_url:goe,name:"Morty",status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:{}}},woe={"Guest@Guest.com":{id:"Guest@Guest.com",created:"N/A",profile_pic_url:Oj,name:"Guest",status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:{}},"Rick@Guest.com":{id:"Rick@Guest.com",created:"N/A",profile_pic_url:yoe,name:"Rick",status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:{}},"Morty@Guest.com":{id:"Morty@Guest.com",created:"N/A",profile_pic_url:goe,name:"Morty",status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:{}}},_oe=(n(6106),[]),Toe=0;Toe<30;Toe+=1)_oe.push((0,sj.jsx)("div",{children:"item n\xb0".concat(Toe+1)},Toe));var Soe,Eoe,Ioe=(0,$B.yP)(JB.ZP),Coe=function(e){P(n,e);var t=F(n);function n(e){var r;return I(this,n),(r=t.call(this,e)).GoogleSignIn=function(){YB.signInWithPopup(QB)},r.GoogleSignOut=function(){nn.auth().signOut(),console.log("sign out")},r.state={height:window.innerHeight,width:window.innerWidth,index:1,flipCamCounter:0,loggedIn:!1,userDoc:xoe,disable_swiping:!1,showFooter:!0,showNavbar:!0,updateCounter:0,peopleList:{friends:xoe.friends,strangers:koe,everyone:woe}},r.changeToIndex=r.changeToIndex.bind(A(r)),r.updateDimensions=r.updateDimensions.bind(A(r)),r.incFlipCam=r.incFlipCam.bind(A(r)),r.disable_swiping=r.disable_swiping.bind(A(r)),r.toggleNavbar=r.toggleNavbar.bind(A(r)),r.toggleFooter=r.toggleFooter.bind(A(r)),r.disableNavFootSlide=r.disableNavFootSlide.bind(A(r)),r.checkCurrentUser=r.checkCurrentUser.bind(A(r)),r.GoogleSignIn=r.GoogleSignIn.bind(A(r)),r.GoogleSignOut=r.GoogleSignOut.bind(A(r)),r.startSnapShot=r.startSnapShot.bind(A(r)),r.endSnapShot=r.endSnapShot.bind(A(r)),r.getUserOnFirebase=r.getUserOnFirebase.bind(A(r)),r.createUserOnFirebase=r.createUserOnFirebase.bind(A(r)),r.edit_friends=r.edit_friends.bind(A(r)),r.updatePeopleList=r.updatePeopleList.bind(A(r)),r.setUserDoc=r.setUserDoc.bind(A(r)),r.startEveryoneSS=r.startEveryoneSS.bind(A(r)),r.endEveryoneSS=r.endEveryoneSS.bind(A(r)),r.updateRelatedSnaps=r.updateRelatedSnaps.bind(A(r)),r.incUpdateCount=r.incUpdateCount.bind(A(r)),r.toggleSnapShot=r.toggleSnapShot.bind(A(r)),r}return N(n,[{key:"componentDidMount",value:function(){this.checkCurrentUser(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){this.endSnapShot(),this.endEveryoneSS()}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidUpdate",value:function(e,t){t.userDoc!==this.state.userDoc&&t.userDoc&&Object.keys(t.userDoc.added_me).length!==Object.keys(this.state.userDoc.added_me).length&&this.updatePeopleList()}},{key:"changeToIndex",value:function(e){this.setState({index:e})}},{key:"incFlipCam",value:function(){this.setState({flipCamCounter:this.state.flipCamCounter+1})}},{key:"disable_swiping",value:function(e){this.setState({disable_swiping:e})}},{key:"toggleNavbar",value:function(e){!0===e||!1===e?this.setState({showNavbar:!e}):this.setState({showNavbar:!this.state.showNavbar})}},{key:"toggleFooter",value:function(e){!0===e||!1===e?this.setState({showFooter:!e}):this.setState({showFooter:!this.state.showFooter})}},{key:"disableNavFootSlide",value:function(e){this.disable_swiping(e),this.toggleFooter(e),this.toggleNavbar(e)}},{key:"setUserDoc",value:function(e){this.setState({userDoc:e})}},{key:"incUpdateCount",value:function(){var e=this.state.updateCounter;this.setState({updateCounter:e+1})}},{key:"checkCurrentUser",value:function(){var e=this;nn.auth().onAuthStateChanged((function(t){t?(e.setState({loggedIn:!0}),e.getUserOnFirebase(t)):(e.endSnapShot(),e.endEveryoneSS(),e.setState({loggedIn:!1,userDoc:xoe,peopleList:{friends:xoe.friends,strangers:koe,everyone:woe}}),console.log("user signed out"))}))}},{key:"getUserOnFirebase",value:function(e){var t=this;ZB.collection("Users").doc(e.uid).get().then((function(n){n.exists?(t.startSnapShot(e),t.startEveryoneSS()):t.createUserOnFirebase(e)}))}},{key:"createUserOnFirebase",value:function(e){var t=this;console.log("new user incoming");var n=(new Date).toLocaleString();ZB.collection("Users").doc(e.uid).set({created:n,name:e.displayName,email:e.email,friendship:n,id:e.uid,username:e.email,profile_pic_url:e.photoURL,phoneNumber:e.phoneNumber,received:0,sent:0,streak_emoji:"\ud83d\udd25",brokeup:{},added_me:{},pending:{},deleteSnaps:[],friends:(0,E.Z)({},e.uid,{id:e.uid,created:n,email:e.email,name:e.displayName,phoneNumber:e.phoneNumber,profile_pic_url:e.photoURL,username:e.email,nickname:null,status:"new-friend",streak:0,streakRef:[],sent:0,received:0,last_time_stamp:null,snaps:{}})}).then((function(){ZB.collection("Users").doc("Everyone").update((0,E.Z)({},"all_users.".concat(e.uid),{created:n,name:e.displayName,email:e.email,username:e.email,profile_pic_url:e.photoURL,phoneNumber:e.phoneNumber})).then((function(){console.log("Everyone Doc Updated"),t.startSnapShot(e),t.startEveryoneSS()})).catch((function(){ZB.collection("Users").doc("Everyone").set({all_users:(0,E.Z)({},"".concat(e.uid),{created:n,name:e.displayName,email:e.email,username:e.email,profile_pic_url:e.photoURL,phoneNumber:e.phoneNumber})}).then((function(){console.log("Everyone Doc Created"),t.startSnapShot(e),t.startEveryoneSS()})).catch((function(e){return console.log("Error: ",e)}))}))}))}},{key:"toggleSnapShot",value:function(e){var t={uid:this.state.userDoc.id};!0===e?this.startSnapShot(t):!1===e&&this.endSnapShot()}},{key:"startSnapShot",value:function(e){var t=this;console.log("Starting snapshot"),Soe=ZB.collection("Users").doc(e.uid).onSnapshot({includeMetadataChanges:!1},(function(e){t.incUpdateCount(),console.log("user snapshot updated. Update Count: ",t.state.updateCounter),t.setState({userDoc:e.data()}),Object.keys(t.state.peopleList.friends).sort()!==Object.keys(e.data().friends).sort()&&t.updatePeopleList(),1===t.state.updateCounter&&t.state.userDoc.deleteSnaps.length>0&&(t.state.userDoc.deleteSnaps.forEach((function(e){ZB.collection("Photos").doc(e).delete(),XB.ref("posts/".concat(e)).delete()})),ZB.collection("Users").doc(t.state.userDoc.id).update({deleteSnaps:[]}),console.log("Deleted trashed snaps"))}),(function(e){return console.log("error: ",e)}))}},{key:"endSnapShot",value:function(){void 0!==Soe&&(console.log("Ending userSnapshot"),Soe())}},{key:"startEveryoneSS",value:function(){var e=this;console.log("Starting Everyone SS"),Eoe=ZB.collection("Users").doc("Everyone").onSnapshot({includeMetadataChanges:!1},(function(t){console.log("everyone snapshot changed");var n=e.state.peopleList;n.everyone=t.data().all_users,e.setState({peopleList:n}),e.updatePeopleList()}),(function(e){return console.log("error: ",e)}))}},{key:"endEveryoneSS",value:function(){void 0!==Eoe&&(console.log("Ending Everyone SS"),Eoe(),this.updatePeopleList())}},{key:"updatePeopleList",value:function(){var e=this.state.userDoc.friends,t={},n=this.state.peopleList.everyone;Object.keys(n).filter((function(t){return-1==Object.keys(e).indexOf(t)})).forEach((function(e){t[e]=n[e]})),this.setState({peopleList:{friends:e,strangers:t,everyone:n}})}},{key:"updateRelatedSnaps",value:function(e,t){var n=ZB.collection("Photos"),r=[],a=[],i=[];n.where("sender","==",e).where("sent","array-contains",t).get().then((function(e){e.docs.forEach((function(e){1==e.data().sent.length?r.push(e.id):a.push(e.id)}))})).then((function(){n.where("sender","==",t).where("sent","array-contains",e).get().then((function(e){e.docs.forEach((function(e){1==e.data().sent.length?r.push(e.id):i.push(e.id)}))})).then((function(){r.forEach((function(e){n.doc(e).delete().catch((function(){})),XB.ref("posts/".concat(e)).delete().catch((function(){}))})),a.forEach((function(e){n.doc(e).update({sent:nn.firestore.FieldValue.arrayRemove(t)})})),i.forEach((function(t){n.doc(t).update({sent:nn.firestore.FieldValue.arrayRemove(e)})}))}))}))}},{key:"edit_friends",value:function(e,t){var n,r=this,a=this.state.peopleList,i=this.state.userDoc,o={},s={},u={},c=ZB.collection("Users").doc(t),l=ZB.collection("Users").doc(i.id);ZB.collection("Photos");if(this.state.loggedIn)if(s={id:i.id,created:i.created,friendship:null,profile_pic_url:i.profile_pic_url,name:i.name,username:i.username,phoneNumber:i.phoneNumber,status:"pending",streak:0,sent:0,received:0,last_time_stamp:null,snaps:[]},"add"===e)if(Object.keys(i.brokeup).includes(t)){delete a.strangers[t],n=i.brokeup[t],delete i.brokeup[t],i.friends[t]=n;var d="new-friend";"sent"===i.friends[t].status?d="new":"opened"===i.friends[t].status?d="received":"received"===i.friends[t].status?d="opened":"new"===i.friends[t].status&&(d="sent"),c.update((0,E.Z)({},"friends.".concat(i.id,".status"),d)).catch((function(e){return console.log("err: ",e)})),l.update({brokeup:i.brokeup,friends:i.friends}).catch((function(e){return console.log("err: ",e)}))}else t!==i.id?c.get().then((function(e){e.exists&&(u={id:e.data().id,created:e.data().created,friendship:null,profile_pic_url:e.data().profile_pic_url,name:e.data().name,username:e.data().username,phoneNumber:e.data().phoneNumber,status:"pending",streak:0,sent:0,received:0,last_time_stamp:null,snaps:[]},l.set({friends:(0,E.Z)({},"".concat(t),u)},{merge:!0}).then((function(){delete a.strangers[t],c.set({added_me:(0,E.Z)({},"".concat(i.id),s)},{merge:!0}).catch((function(e){return console.log("err: ",e)}))})).catch((function(e){return console.log("err: ",e)})))})).catch((function(e){return console.log("err: ",e)})):console.log("Cannot add yourself");else if("remove"===e)c.get().then((function(e){o=e.data()})).then((function(){Object.keys(o.brokeup).includes(i.id)?(a.strangers[t]=i.friends[t],c.update((0,E.Z)({},"brokeup.".concat(i.id),nn.firestore.FieldValue.delete())).catch((function(e){return console.log("err: ",e)})),l.update((0,E.Z)({},"friends.".concat(t),nn.firestore.FieldValue.delete())).catch((function(e){return console.log("err: ",e)})),r.updateRelatedSnaps(t,i.id)):t!==i.id?(c.update((0,E.Z)({},"friends.".concat(i.id,".status"),"not-friends")).catch((function(e){return console.log("err: ",e)})),a.strangers[t]=i.friends[t],n=i.friends[t],delete i.friends[t],i.brokeup[t]=n,l.update({brokeup:i.brokeup,friends:i.friends}).catch((function(e){return console.log("err: ",e)}))):console.log("Cannot remove yourself")})).catch((function(e){return console.log("err: ",e)}));else if("accept request"===e){var f,p=(new Date).toLocaleString();c.update((f={},(0,E.Z)(f,"friends.".concat(i.id,".status"),"new-friend"),(0,E.Z)(f,"friends.".concat(i.id,".friendship"),p),f)).catch((function(e){return console.log("err: ",e)})),n=i.added_me[t],delete i.added_me[t],i.friends[t]=n,i.friends[t].status="new-friend",l.update((0,E.Z)({added_me:i.added_me,friends:i.friends},"friends.".concat(t,".friendship"),p)).catch((function(e){return console.log("err: ",e)}))}else"remove request"===e?(c.update((0,E.Z)({},"added_me.".concat(i.id),nn.firestore.FieldValue.delete())).catch((function(e){return console.log("err: ",e)})),a.strangers[t]=i.friends[t],delete i.friends[t],l.update({friends:i.friends}).catch((function(e){return console.log("err: ",e)}))):console.log("action unknown: ",e);else"add"===e?(n=a.strangers[t],delete a.strangers[t],i.friends[t]=n):"remove"===e&&(n=i.friends[t],delete i.friends[t],a.strangers[t]=n),this.setState({userDoc:i,peopleList:a})}},{key:"render",value:function(){var e=this.state,t=e.index,n=e.height,r=e.width,a=e.flipCamCounter,i=e.loggedIn,o=e.userDoc,s=e.disable_swiping,u=e.showNavbar,c=e.showFooter,l=e.peopleList;return(0,sj.jsxs)(sj.Fragment,{children:[(0,sj.jsx)(tj.ZP,{children:(0,sj.jsx)("title",{children:"Yellow Ghost"})}),u&&(0,sj.jsx)(Tj,{index:t,incFlipCam:this.incFlipCam,hidden:!1,GsignIn:this.GoogleSignIn,GsignOut:this.GoogleSignOut,userDoc:o,peopleList:l,edit_friends:this.edit_friends}),(0,sj.jsxs)(Ioe,{className:"slide_container",index:t,onChangeIndex:this.changeToIndex,disabled:s,containerStyle:{height:this.state.height,WebkitOverflowScrolling:"touch"},enableMouseEvents:!0,children:[(0,sj.jsxs)("div",{className:"slide slide1",children:[(0,sj.jsx)(Tj,{}),(0,sj.jsx)(Zj,{userDoc:o,disableNavFootSlide:this.disableNavFootSlide,height:n,width:r,loggedIn:i,toggleSnapShot:this.toggleSnapShot})]}),(0,sj.jsx)("div",{className:"slide slide2",children:(0,sj.jsx)(moe,{loggedIn:i,index:t,height:n,width:r,flipCamCounter:a,userDoc:o,disableNavFootSlide:this.disableNavFootSlide,setUserDoc:this.setUserDoc,changeToIndex:this.changeToIndex,toggleSnapShot:this.toggleSnapShot,incFlipCam:this.incFlipCam})}),(0,sj.jsxs)("div",{className:"slide slide3",children:[(0,sj.jsx)(Tj,{}),(0,sj.jsx)("h1",{children:"Discover"})]})]}),c?(0,sj.jsx)(Cj,{index:t,changeToIndex:this.changeToIndex}):null]})}}]),n}(_.Component);S.render((0,sj.jsx)(Coe,{}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.c6e2511e.js.map