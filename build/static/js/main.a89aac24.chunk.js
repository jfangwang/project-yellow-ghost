(this["webpackJsonpproject-yellow-ghost"]=this["webpackJsonpproject-yellow-ghost"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},103:function(e,t,n){"use strict";n.r(t);var s=n(4),i=n.n(s),c=n(39),a=n.n(c),r=n(11),d=n(40),l=n(41),o=n(16),j=n(49),h=n(48),b=n(32),u=n(44),m=n.n(u),O=n(45),f=n(12),p=(n(93),n(107),n(95),n(106),n(104),n(105),f.a.initializeApp({apiKey:"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE",authDomain:"ghost-f8b34.firebaseapp.com",projectId:"ghost-f8b34",storageBucket:"ghost-f8b34.appspot.com",messagingSenderId:"838623299070",appId:"1:838623299070:web:b73429fee525b7c01cacaf",measurementId:"G-85ZG5FVKQ4"}).firestore()),g=f.a.auth(),x=(f.a.storage(),new f.a.auth.GoogleAuthProvider),v=(n(98),n(38),n(47)),_=n(2);function w(e){var t,n="message-"+e.friend.status,s=(t={},Object(r.a)(t,"new-friend","New Friend!"),Object(r.a)(t,"received","Received"),Object(r.a)(t,"sent","Sent"),Object(r.a)(t,"opened","Opened"),Object(r.a)(t,"pending","Pending"),Object(r.a)(t,"not-friends","Unfriended You"),Object(r.a)(t,"blocked","Blocked"),t)[e.friend.status];return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("li",{className:"list-container",children:[Object(_.jsx)("div",{className:"pic-container",children:Object(_.jsx)("img",{className:"friend-profile-pic",src:e.friend.profile_pic_url})}),Object(_.jsxs)("div",{className:"friend-info",children:[Object(_.jsx)("h3",{children:e.friend.name}),Object(_.jsxs)("div",{className:"message-info",children:[Object(_.jsxs)("div",{className:"message-info",children:[Object(_.jsx)("div",{className:n}),Object(_.jsx)("h5",{children:s})]}),Object(_.jsx)("h5",{children:e.friend.last_time_stamp?Object(_.jsxs)(_.Fragment,{children:[" - ",Object(_.jsx)(v.a,{date:e.friend.last_time_stamp})," - "]}):null}),Object(_.jsx)("div",{children:Object(_.jsxs)("h5",{children:[e.friend.streak,e.streak_emoji]})})]})]}),Object(_.jsx)("div",{className:"friend-info"})]})})}var k=function(e){return Object(_.jsxs)("div",{className:"messages-screen",children:[Object(_.jsx)("div",{className:"navbar"}),Object(_.jsxs)("ul",{className:"messages-list",children:[e.loggedIn?null:Object(_.jsx)("li",{className:"welcome-statement",children:"Welcome to Project Yellow Ghost, a web app version of SnapChat. This was a project developed by Jonathan Wang and this was his final project for school. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if you want to start using this product. Happy Snapping!"}),Object.keys(e.friends).sort().map((function(t){return Object(_.jsx)(w,{friend:e.friends[t],streak_emoji:e.streak_emoji,k:t})}))]}),Object(_.jsx)("div",{className:"footer app-foot"})]})},N=n(46),y=n.n(N);n(100);function S(e){var t=i.a.useRef(null);return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"webcam-screen",children:[Object(_.jsx)("div",{className:"navbar"}),Object(_.jsx)(y.a,{id:"imageElement",className:"image-desktop",ref:t,audio:!1,mirrored:!0,forceScreenshotSourceSize:!1,screenshotFormat:"image/png",screenshotQuality:1,videoConstraints:{facingMode:e.faceMode}}),Object(_.jsx)("div",{className:"footer"})]})})}var C=n(10);n(101);function I(e){var t=Object(s.useState)(!1),n=Object(C.a)(t,2),i=n[0],c=n[1],a=Object(s.useState)(!1),r=Object(C.a)(a,2),d=r[0],l=r[1],o=Object(s.useState)(!0),j=Object(C.a)(o,2),h=j[0],b=j[1],u=Object(s.useState)(!0),m=Object(C.a)(u,2),O=m[0],f=m[1],p=Object(s.useState)(!0),g=Object(C.a)(p,2),x=g[0],v=g[1],w=Object(s.useState)(!0),k=Object(C.a)(w,2),N=k[0],y=k[1],S=Object(s.useState)(!0),I=Object(C.a)(S,2),E=I[0],L=I[1],A=Object(s.useState)(!1),T=Object(C.a)(A,2),D=T[0],M=T[1],U=Object(s.useState)(!1),P=Object(C.a)(U,2),R=P[0],W=P[1],z=Object(s.useState)(null),B=Object(C.a)(z,2),J=B[0],H=B[1],K=Object(s.useState)("Chat"),Y=Object(C.a)(K,2),Q=Y[0],V=Y[1],q=function(){c(!1),l(!1),b(!0),f(!0),v(!0),y(!0),L(!0),M(!1),W(!1),V("Chat"),e.disable_swiping(!1)};return Object(s.useEffect)((function(){0==e.index?(L(!0),H(!1)):1==e.index&&(L(!1),H(!0))}),[e.index]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"navbar app-nav",children:[Object(_.jsx)("div",{className:"nav-box-1",children:Object(_.jsxs)("ul",{children:[h?e.loggedIn?Object(_.jsx)("li",{children:Object(_.jsx)("img",{className:"nav-profile-pic",onClick:function(){c(!0),b(!1),f(!1),y(!1),L(!1),M(!0),W(!0),V("Profile"),e.disable_swiping(!0)},src:e.pic})}):Object(_.jsx)("li",{children:Object(_.jsx)("a",{onClick:e.login,children:"Sign In"})}):null,R?Object(_.jsx)("li",{children:Object(_.jsx)("a",{onClick:q,children:"Close"})}):null,O?Object(_.jsx)("li",{children:Object(_.jsx)("a",{children:"Search"})}):null]})}),Object(_.jsxs)("div",{className:"nav-box-2",children:[0==e.index&&x?Object(_.jsx)("h1",{children:Q}):null,1==e.index&&x?Object(_.jsx)("h1",{children:"Camera"}):null]}),Object(_.jsx)("div",{className:"nav-box-3",children:Object(_.jsxs)("ul",{children:[N?Object(_.jsx)("li",{onClick:function(){l(!0),b(!1),f(!1),y(!1),L(!1),M(!0),W(!0),V("Add Friends"),e.disable_swiping(!0)},children:Object(_.jsx)("a",{children:"Add Friend"})}):null,E?Object(_.jsx)("li",{children:Object(_.jsx)("a",{children:"New Chat"})}):null,D?Object(_.jsx)("li",{children:Object(_.jsx)("a",{children:Object(_.jsx)("b",{children:". . ."})})}):null,J?Object(_.jsx)("li",{children:Object(_.jsx)("a",{children:"Flip Cam"})}):null]})})]}),i?Object(_.jsx)(F,{pic:e.pic,name:e.name,email:e.email,received:e.received,sent:e.sent,created:e.created,resetNav:q,logout:e.logout}):null,d?Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(G,{friends:e.friends,strangers:e.strangers,everyone:e.everyone,edit_friends:e.edit_friends})}):null]})}function F(e){return Object(_.jsxs)("div",{className:"screen",children:[Object(_.jsx)("div",{className:"navbar"}),Object(_.jsx)("img",{src:e.pic,className:"profile-pic"}),Object(_.jsx)("h1",{children:e.name}),Object(_.jsx)("h3",{children:e.email}),Object(_.jsxs)("h3",{children:["Received - ",e.received," | ",e.sent," - Sent"]}),Object(_.jsxs)("h3",{children:["Joined Project Yellow Ghost on ",e.created]}),Object(_.jsx)("h3",{children:"Created by Jonathan Wang"}),Object(_.jsx)("button",{onClick:function(){e.resetNav(),e.logout()},style:{backgroundColor:"red"},children:Object(_.jsx)("h1",{children:"Logout"})})]})}function G(e){return Object(_.jsxs)("div",{className:"screen",children:[Object(_.jsx)("div",{className:"navbar"}),Object(_.jsxs)("h1",{children:["Friends (",Object.keys(e.friends).length,")"]}),Object(_.jsx)("ul",{className:"list-container",children:Object.keys(e.friends).sort().map((function(t){return Object(_.jsx)(E,{friends:e.friends,k:t,edit_friends:e.edit_friends})}))}),Object(_.jsxs)("h1",{children:["Strangers (",Object.keys(e.strangers).length,")"]}),Object(_.jsx)("ul",{className:"list-container",children:Object.keys(e.strangers).sort().map((function(t){return Object(_.jsx)(L,{strangers:e.strangers,k:t,edit_friends:e.edit_friends})}))}),Object(_.jsxs)("h1",{children:["Everyone (",Object.keys(e.everyone).length,")"]}),Object(_.jsx)("ul",{className:"list-container",children:Object.keys(e.everyone).sort().map((function(t){return Object(_.jsx)(A,{everyone:e.everyone,k:t,edit_friends:e.edit_friends})}))}),Object(_.jsx)("div",{className:"footer"})]})}function E(e){var t=e.friends,n=e.k;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("li",{className:"item-container",children:[Object(_.jsx)("div",{className:"pic-container",children:Object(_.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url})}),Object(_.jsxs)("div",{className:"friend-info",children:[Object(_.jsx)("h2",{children:t[n].name}),Object(_.jsx)("p",{children:n})]}),Object(_.jsx)("div",{className:"friend-button",children:Object(_.jsx)("button",{onClick:function(){return e.edit_friends("remove",n,t[n])},children:"Remove"})})]})})}function L(e){var t=e.strangers,n=e.k;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("li",{className:"item-container",children:[Object(_.jsx)("div",{className:"pic-container",children:Object(_.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url})}),Object(_.jsxs)("div",{className:"friend-info",children:[Object(_.jsx)("h2",{children:t[n].name}),Object(_.jsx)("p",{children:n})]}),Object(_.jsx)("div",{className:"friend-button",children:Object(_.jsx)("button",{onClick:function(){return e.edit_friends("add",n,t[n])},children:"Add"})})]})})}function A(e){var t=e.everyone,n=e.k;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("li",{className:"item-container",children:[Object(_.jsx)("div",{className:"pic-container",children:Object(_.jsx)("img",{className:"friend-profile-pic",src:t[n].profile_pic_url})}),Object(_.jsxs)("div",{className:"friend-info",children:[Object(_.jsx)("h2",{children:t[n].name}),Object(_.jsx)("p",{children:n})]}),Object(_.jsx)("div",{className:"friend-button"})]})})}n(102);function T(e){return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("div",{className:"footer app-foot",children:[Object(_.jsx)("button",{onClick:function(){return e.changeToIndex(0)},children:0===e.index?Object(_.jsx)("h1",{style:{color:"DodgerBlue"},children:"Messages"}):Object(_.jsx)("h1",{children:"Messages"})}),Object(_.jsx)("button",{onClick:function(){return e.changeToIndex(1)},children:1===e.index?Object(_.jsx)("h1",{style:{color:"Gold"},children:"Camera"}):Object(_.jsx)("h1",{children:"Camera"})})]})})}var D=Object(O.bindKeyboard)(m.a),M="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png",U=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).set_device=function(){s.state.width>s.state.height?s.setState({orientation:"Landscape"}):s.setState({orientation:"Mobile"})},s.update=function(){s.setState({width:window.innerWidth,height:window.innerHeight},s.set_device)},s.handleChangeIndex=function(e){s.setState({index:e})},s.check_user=function(){f.a.auth().onAuthStateChanged(function(e){e?this.setState({loggedIn:!0,name:e.displayName,pic:e.photoURL,email:e.email},this.check_user_on_firebase):this.setState({loggedIn:!1,name:"Guest",email:"Guest@Guest.com",pic:M,sent:0,received:0,streak_emoji:"\ud83d\udd25",created:(new Date).toLocaleString()})}.bind(Object(o.a)(s)))},s.check_user_on_firebase=function(){var e=p.collection("Users").doc(s.state.email);e.get().then((function(t){if(t.exists)s.setState({name:t.data().name,pic:t.data().profile_pic_url,received:t.data().total_received,sent:t.data().total_sent,streak_emoji:t.data().streak_emoji,created:t.data().created,friends:t.data().friends,pending:t.data().pending},s.start_snapshot);else{var n=(new Date).toLocaleString();e.set({created:n,name:s.state.name,profile_pic_url:s.state.pic,streak_emoji:"\ud83d\udd25",total_sent:0,total_received:0,pending:{},friends:Object(r.a)({},s.state.email,{created:n,profile_pic_url:s.state.pic,name:s.state.name,status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:[]})}),s.setState({received:0,sent:0,streak_emoji:"\ud83d\udd25"},s.start_snapshot)}}))},s.start_snapshot=function(){s.update_people_list()},s.end_snapshot=function(){s.start_snapshot(),console.log("ended snapshot")},s.update_people_list=function(){var e={},t={},n={};p.collection("Users").get().then((function(i){i.docs.forEach((function(i){Object.keys(s.state.friends).includes(i.id)?e[i.id]=i.data():t[i.id]=i.data(),n[i.id]=i.data()})),s.setState({strangers:t,everyone:n})}))},s.edit_friends=function(e,t,n){var i=p.collection("Users").doc(s.state.email),c=s.state.friends;if("add"===e){var a={created:n.created,profile_pic_url:n.profile_pic_url,name:n.name,status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:[]};c[t]=a,i.update({friends:c}),s.setState({friends:c},s.update_people_list)}else"remove"===e&&(delete c[t],i.update({friends:c}),s.setState({friends:c},s.update_people_list))},s.login=function(){g.signInWithPopup(x).then((function(e){s.setState({loggedIn:!0,name:e.user.displayName,email:e.user.email,pic:e.user.photoURL})}))},s.logout=function(){f.a.auth().signOut(),s.setState({loggedIn:!1,name:"Guest",email:"Guest@Guest.com",pic:M,sent:0,received:0,pending:{},friends:[],strangers:[],everyone:[]})},s.state={index:0,height:window.innerHeight,width:window.innerWidth,orientation:"Landscape",disable_swiping:!1,loggedIn:null,name:null,email:null,pic:null,received:null,sent:null,streak_emoji:null,created:null,pending:{},friends:[],strangers:[],everyone:[]},s.check_user=s.check_user.bind(Object(o.a)(s)),window.addEventListener("resize",s.update),window.addEventListener("beforeunload",s.end_snapshot),window.addEventListener("onbeforeunload",s.end_snapshot),s}return Object(l.a)(n,[{key:"changeToIndex",value:function(e){this.setState({index:e})}},{key:"setDisabledSwiping",value:function(e){this.setState({disable_swiping:e})}},{key:"componentDidMount",value:function(){console.log("Mounted"),this.check_user()}},{key:"render",value:function(){var e=this.state.index;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(I,{index:e,login:this.login.bind(this),logout:this.logout.bind(this),disable_swiping:this.setDisabledSwiping.bind(this),edit_friends:this.edit_friends.bind(this),loggedIn:this.state.loggedIn,name:this.state.name,email:this.state.email,pic:this.state.pic,received:this.state.received,sent:this.state.sent,created:this.state.created,pending:this.state.pending,friends:this.state.friends,strangers:this.state.strangers,everyone:this.state.everyone}),Object(_.jsxs)(D,{disabled:this.state.disable_swiping,enableMouseEvents:!0,index:e,onChangeIndex:this.handleChangeIndex,style:Object.assign({width:this.state.width,height:this.state.height,position:"absolute",top:"0%",left:"0%"}),children:[Object(_.jsxs)("div",{style:Object.assign({backgroundColor:"white",minHeight:"100vh",width:"100%"}),children:[Object(_.jsx)(b.a,{children:Object(_.jsx)("meta",{name:"viewport",content:"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),Object(_.jsx)(k,{loggedIn:this.state.loggedIn,friends:this.state.friends,streak_emoji:this.state.streak_emoji})]}),Object(_.jsxs)("div",{style:Object.assign({backgroundColor:"Plum"}),children:[Object(_.jsx)(b.a,{children:Object(_.jsx)("meta",{name:"viewport",content:"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"})}),Object(_.jsx)(S,{index:e,changeToIndex:this.changeToIndex.bind(this),disable_swiping:this.setDisabledSwiping.bind(this)})]})]}),Object(_.jsx)(T,{index:e,changeToIndex:this.changeToIndex.bind(this)})]})}}]),n}(i.a.Component);a.a.render(Object(_.jsx)(U,{}),document.getElementById("root"))},38:function(e,t,n){},98:function(e,t,n){}},[[103,1,2]]]);
//# sourceMappingURL=main.a89aac24.chunk.js.map