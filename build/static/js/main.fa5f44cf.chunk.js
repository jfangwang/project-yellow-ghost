(this["webpackJsonpproject-yellow-ghost"]=this["webpackJsonpproject-yellow-ghost"]||[]).push([[0],{100:function(e,t,s){},120:function(e,t,s){},121:function(e,t,s){},122:function(e,t,s){"use strict";s.r(t);var n=s(4),i=s.n(n),a=s(39),c=s.n(a),r=s(11),l=s(40),d=s(41),o=s(16),j=s(49),h=s(48),b=s(32),u=s(44),m=s.n(u),g=s(45),f=s(12),p=(s(93),s(126),s(95),s(125),s(123),s(124),f.a.initializeApp({apiKey:"AIzaSyAzNigqy7stltnVUU8cAollxCxvW0CNBTE",authDomain:"ghost-f8b34.firebaseapp.com",projectId:"ghost-f8b34",storageBucket:"ghost-f8b34.appspot.com",messagingSenderId:"838623299070",appId:"1:838623299070:web:b73429fee525b7c01cacaf",measurementId:"G-85ZG5FVKQ4"}).firestore()),O=f.a.auth(),x=f.a.storage(),A=new f.a.auth.GoogleAuthProvider,v=(s(98),s(38),s(6)),k=s(47),w=s(2);function N(e){var t,s=Object(n.useState)(null),i=Object(v.a)(s,2),a=i[0],c=i[1],l=Object(n.useState)([]),d=Object(v.a)(l,2),o=d[0],j=d[1],h=Object(n.useState)([]),b=Object(v.a)(h,2),u=b[0],m=b[1],g=Object(n.useState)([]),f=Object(v.a)(g,2),O=f[0],A=f[1],N="message-"+e.friend.status,S=(t={},Object(r.a)(t,"new-friend","New Friend!"),Object(r.a)(t,"new","New Snap"),Object(r.a)(t,"received","Received"),Object(r.a)(t,"sent","Sent"),Object(r.a)(t,"opened","Opened"),Object(r.a)(t,"pending","Pending"),Object(r.a)(t,"not-friends","Unfriended You"),Object(r.a)(t,"blocked","Blocked"),t)[e.friend.status];return Object(w.jsx)(w.Fragment,{children:a?Object(w.jsx)("div",{className:"background-opened-image",onClick:function(){e.showNavbar(!0),e.showFooter(!0),c(null),function(){if(o.length<=1)x.ref("posts/".concat(O)).delete().catch((function(e){})),p.collection("Photos").doc(O).delete().catch((function(e){})),console.log("deleted");else{var t=o,s=u;p.collection("Photos").doc(O).update({sent:t.splice(t.indexOf(e.email),1),opened:s.push(e.email)}),console.log("updated")}}()},children:Object(w.jsx)("img",{className:"opened-image",src:a})}):Object(w.jsxs)("li",{className:"list-container",onClick:"new"===e.friend.status?function(){var t=e.friend.snaps[e.friend.snaps.length-1];e.showNavbar(!1),e.showFooter(!1),A(t),p.collection("Photos").doc(t).get().then((function(e){c(e.data().image_url),j(e.data().sent),m(e.data().opened)}));var s=(new Date).toLocaleString(),n=p.collection("Users").doc(e.k);n.get().then((function(t){var i=t.data();i.friends[e.email].last_time_stamp=s,i.friends[e.email].profile_pic_url=e.pic,i.friends[e.email].status="opened",n.update({friends:i.friends})}));var i=p.collection("Users").doc(e.email);i.get().then((function(t){var n=t.data();n.friends[e.k].last_time_stamp=s,n.friends[e.k].snaps.length<=1?n.friends[e.k].status="received":n.friends[e.k].status="new",n.friends[e.k].snaps.splice(n.friends[e.k].snaps.length-1,1),i.update({friends:n.friends})}))}:null,children:[Object(w.jsx)("div",{className:"pic-container",children:Object(w.jsx)("img",{className:"friend-profile-pic",src:e.friend.profile_pic_url})}),Object(w.jsxs)("div",{className:"friend-info",children:[Object(w.jsx)("h3",{children:e.friend.name}),Object(w.jsxs)("div",{className:"message-info",children:[Object(w.jsxs)("div",{className:"message-info",children:[Object(w.jsx)("div",{className:N}),Object(w.jsx)("h5",{children:S})]}),Object(w.jsx)("h5",{children:e.friend.last_time_stamp?Object(w.jsxs)(w.Fragment,{children:[" - ",Object(w.jsx)(k.a,{date:e.friend.last_time_stamp})," - "]}):null}),Object(w.jsx)("div",{children:Object(w.jsxs)("h5",{children:[e.friend.streak,e.streak_emoji]})})]})]}),Object(w.jsx)("div",{className:"friend-info"})]})})}function S(e){return Object(w.jsxs)("div",{className:"messages-screen",children:[Object(w.jsx)("div",{className:"navbar"}),Object(w.jsxs)("ul",{className:"messages-list",children:[e.loggedIn?null:Object(w.jsx)("li",{className:"welcome-statement",children:"Welcome to Project Yellow Ghost, a web app version of SnapChat. This was a project developed by Jonathan Wang and this was his final project for school. Right now, you are on a local guest account for you to try out. Feel free to sign in at the top if you want to start using this product. Happy Snapping!"}),Object.keys(e.friends).sort().map((function(t){return Object(w.jsx)(N,{friend:e.friends[t],streak_emoji:e.streak_emoji,k:t,pic:e.pic,email:e.email,showNavbar:e.showNavbar,showFooter:e.showFooter})}))]}),Object(w.jsx)("div",{className:"footer app-foot"})]})}var C=s(46),I=s.n(C),E=(s(100),s.p+"static/media/sent-vid-icon.ec0981e8.png"),_=s.p+"static/media/black-checkmark.d8439ac6.png",B=s(129);s(101);function y(e){var t=Object(n.useState)(null),s=Object(v.a)(t,2),a=s[0],c=s[1],r=Object(n.useState)("camera"),l=Object(v.a)(r,2),d=l[0],o=l[1],j=Object(n.useState)(16/9),h=Object(v.a)(j,2),b=(h[0],h[1],Object(n.useState)([])),u=Object(v.a)(b,2),m=u[0],g=u[1],f=function(){c(null),o("camera"),g([]),e.disable_swiping(!1),e.showNavbar(!0),e.showFooter(!0)},O=function(e){var t=[];e.forEach((function(e){t.push(e)})),g(t)},A=function(){if("Guest@Guest.com"!=e.email){var t=(new Date).toLocaleString(),s=e.friends,n=0,i=Object(B.a)();m.forEach((function(e){n+=1,s[e].status="sent",s[e].last_time_stamp=t,s[e].sent=s[e].sent+1})),p.collection("Users").doc(e.email).update({total_sent:e.sent+n,friends:s}),x.ref("posts/".concat(i)).putString(a,"data_url").on("state_changed",(function(e){}),(function(e){console.log(e)}),(function(){x.ref("posts/".concat(i)).getDownloadURL().then((function(s){p.collection("Photos").doc(i).set({sender:e.email,sent:m,opened:[],time_stamp:t,image_url:s})}))})),m.forEach((function(s){var n=p.collection("Users").doc(s);n.get().then((function(a){var c=a.data();if(Object.keys(c.friends).includes(e.email)){var r=c.friends;r[e.email].status="new",r[e.email].last_time_stamp=t,r[e.email].received=r[e.email].received+1,r[e.email].snaps.push(i),c.friends=r,n.set({created:c.created,friends:c.friends,name:c.name,pending:c.pending,profile_pic_url:c.profile_pic_url,streak_emoji:c.streak_emoji,total_received:c.total_received+1,total_sent:c.total_sent})}else if(Object.keys(c.pending).includes(e.email)){var l=c.pending;l[e.email].status="new",l[e.email].last_time_stamp=t,l[e.email].received=r[e.email].received+1,l[e.email].snaps.push(i),c.pending=l,n.set({created:c.created,friends:c.friends,name:c.name,pending:c.pending,profile_pic_url:c.profile_pic_url,streak_emoji:c.streak_emoji,total_received:c.total_received+1,total_sent:c.total_sent})}else console.log("Not a friend, skipping "+s+".")}))})),g([])}else console.log("Guest is logged in")},k=i.a.useRef(null),N=i.a.useCallback((function(){c(k.current.getScreenshot()),o("captured"),e.showNavbar(!1),e.showFooter(!1),e.disable_swiping(!0)}),[k]);return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"webcam-screen",children:[Object(w.jsx)("div",{className:"navbar"}),Object(w.jsx)(I.a,{id:"webcam",className:"image-desktop",ref:k,audio:!1,mirrored:!0,forceScreenshotSourceSize:!1,screenshotFormat:"image/png",screenshotQuality:1,videoConstraints:{facingMode:e.faceMode}}),"camera"===d?Object(w.jsxs)("div",{className:"webcam-overlay",children:[Object(w.jsx)("div",{className:"camera-nav",children:Object(w.jsx)("div",{className:"navbar"})}),Object(w.jsxs)("div",{className:"camera-footer",children:[Object(w.jsx)("button",{className:"capture-button",onClick:N}),Object(w.jsx)("div",{className:"footer"}),Object(w.jsx)("div",{className:"footer"})]})]}):null,"captured"===d?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"captured-overlay",children:[Object(w.jsx)("div",{className:"camera-nav",children:Object(w.jsx)("div",{className:"navbar",children:Object(w.jsx)("button",{className:"close",onClick:f,children:"Close"})})}),Object(w.jsx)("img",{className:"image-desktop",src:a}),Object(w.jsxs)("div",{className:"captured-footer",children:[Object(w.jsx)("button",{className:"save",children:"Save"}),Object(w.jsxs)("button",{className:"send-to",onClick:function(){o("send"),null===a&&f()},children:[Object(w.jsx)("b",{children:"Send To"}),Object(w.jsx)("img",{className:"send-to-icon",src:E})]})]})]})}):null,"send"===d?Object(w.jsxs)("div",{className:"send-overlay",children:[Object(w.jsxs)("div",{className:"navbar",children:[Object(w.jsx)("button",{className:"back",onClick:function(){o("captured"),e.showNavbar(!1)},children:"Back"}),Object(w.jsx)("input",{className:"send-search",type:"search"}),Object(w.jsx)("button",{children:"..."})]}),Object(w.jsxs)("h1",{children:["Recents (",Object.keys(e.friends).length,")"]}),Object(w.jsx)("ul",{className:"list-container send-list",children:Object.keys(e.friends).sort().map((function(t){return Object(w.jsx)(J,{friends:e.friends,k:t,sendList:m,handle_send_list:O,selected:!!m.includes(t)})}))}),m.length>0?Object(w.jsxs)("div",{className:"send-footer",children:[Object(w.jsx)("h3",{className:"send-label",children:"Send to..."}),Object(w.jsx)("button",{className:"send-to ",onClick:function(){c(null),o("camera"),A(),e.changeToIndex(0),e.disable_swiping(!1),e.showNavbar(!0),e.showFooter(!0)},children:"Send"})]}):null]}):null,Object(w.jsx)("div",{className:"footer"})]})})}function J(e){var t=Object(n.useState)(e.selected),s=Object(v.a)(t,2),i=s[0],a=s[1],c=e.friends,r=e.k,l=e.sendList;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("button",{onClick:function(){i?(l.splice(l.indexOf(r),1),e.handle_send_list(l)):(l.push(r),e.handle_send_list(l)),a(!i)},className:"item-container",children:[Object(w.jsx)("div",{className:"pic-container",children:Object(w.jsx)("img",{className:"friend-profile-pic",src:c[r].profile_pic_url})}),Object(w.jsxs)("div",{className:"friend-info",children:[Object(w.jsx)("h2",{children:c[r].name}),Object(w.jsx)("p",{children:r})]}),Object(w.jsx)("div",{className:"friend-button",children:i?Object(w.jsx)("div",{className:"selected-circle",children:Object(w.jsx)("img",{className:"checkmark",src:_,alt:"U+2713"})}):Object(w.jsx)("div",{className:"unselected-circle",children:Object(w.jsx)("img",{className:"checkmark",src:_,alt:"U+2713"})})})]})})}s(120);var U=s.p+"static/media/search-icon.57f01e89.png",R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAAj0lEQVRIie2UQQ7CMAwEB8rjCB/qkT6tFz5CHtIeUCRATfFathASK+US2zuWVgn8JegCVGAxngoUBaCYt3NXAG0otP+obODRTwDM4XszMIcfFfLLfXoGp84GVlUF5nlk5x2fbuFqHfiw6Gbh3TwUMKkDQf2uT1ACFB6BpgEUjdmAZwgAQwLgBhyAOcH7C1oBYN104vhSCtcAAAAASUVORK5CYII=";function D(e){var t=Object(n.useState)(!1),s=Object(v.a)(t,2),i=s[0],a=s[1],c=Object(n.useState)(!1),r=Object(v.a)(c,2),l=r[0],d=r[1],o=Object(n.useState)(!0),j=Object(v.a)(o,2),h=j[0],b=j[1],u=Object(n.useState)(!0),m=Object(v.a)(u,2),g=m[0],f=m[1],p=Object(n.useState)(!0),O=Object(v.a)(p,2),x=O[0],A=O[1],k=Object(n.useState)(!0),N=Object(v.a)(k,2),S=N[0],C=N[1],I=Object(n.useState)(!0),E=Object(v.a)(I,2),_=E[0],B=E[1],y=Object(n.useState)(!1),J=Object(v.a)(y,2),D=J[0],G=J[1],L=Object(n.useState)(!1),Y=Object(v.a)(L,2),M=Y[0],F=Y[1],Z=Object(n.useState)(null),Q=Object(v.a)(Z,2),P=Q[0],z=Q[1],q=Object(n.useState)("Chat"),W=Object(v.a)(q,2),K=W[0],X=W[1],V=function(){a(!1),d(!1),b(!0),f(!0),A(!0),C(!0),0==e.index&&B(!0),G(!1),F(!1),X("Chat"),e.disable_swiping(!1)};return Object(n.useEffect)((function(){0==e.index?(B(!0),z(!1),A(!0)):1==e.index&&(B(!1),z(!0),A(!1))}),[e.index]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("div",{className:"navbar app-nav",children:[Object(w.jsx)("div",{className:"nav-box-1",children:Object(w.jsxs)("ul",{children:[h?e.loggedIn?Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("img",{className:"nav-item",onClick:function(){a(!0),b(!1),f(!1),C(!1),B(!1),G(!0),F(!0),X("Profile"),e.disable_swiping(!0)},src:e.pic})}):Object(w.jsx)("li",{children:Object(w.jsx)("a",{onClick:e.login,children:"Sign In"})}):null,M?Object(w.jsx)("li",{children:Object(w.jsx)("a",{onClick:V,children:"Close"})}):null,g?Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("img",{className:"search-icon",src:U})}):null]})}),Object(w.jsxs)("div",{className:"nav-box-2",children:[0==e.index&&x?Object(w.jsx)("h1",{children:K}):null,(e.index,null)]}),Object(w.jsx)("div",{className:"nav-box-3",children:Object(w.jsxs)("ul",{children:[S?Object(w.jsx)("li",{className:"nav-item",onClick:function(){d(!0),b(!1),f(!1),C(!1),B(!1),G(!0),F(!0),X("Add Friends"),e.disable_swiping(!0)},children:Object(w.jsx)("img",{className:"add-friend-icon",src:"data:image/png;base64,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"})}):null,_?Object(w.jsx)("li",{className:"nav-item",children:Object(w.jsx)("img",{src:R,className:"chat-icon"})}):null,D?Object(w.jsx)("li",{children:Object(w.jsx)("a",{children:Object(w.jsx)("b",{children:". . ."})})}):null,P?Object(w.jsx)("li",{className:"nav-item",onClick:e.flipCamera,children:Object(w.jsx)("img",{className:"flip-icon",src:"data:image/png;base64,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"})}):null]})})]}),i?Object(w.jsx)(H,{pic:e.pic,name:e.name,email:e.email,received:e.received,sent:e.sent,created:e.created,resetNav:V,logout:e.logout}):null,l?Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(T,{friends:e.friends,strangers:e.strangers,everyone:e.everyone,edit_friends:e.edit_friends})}):null]})}function H(e){return Object(w.jsxs)("div",{className:"screen",children:[Object(w.jsx)("div",{className:"navbar"}),Object(w.jsx)("img",{src:e.pic,className:"profile-pic"}),Object(w.jsx)("h1",{children:e.name}),Object(w.jsx)("h3",{children:e.email}),Object(w.jsxs)("h3",{children:["Received - ",e.received," | ",e.sent," - Sent"]}),Object(w.jsxs)("h3",{children:["Joined Project Yellow Ghost on ",e.created]}),Object(w.jsx)("h3",{children:"Created by Jonathan Wang"}),Object(w.jsx)("button",{onClick:function(){e.resetNav(),e.logout()},style:{backgroundColor:"red"},children:Object(w.jsx)("h1",{children:"Logout"})})]})}function T(e){return Object(w.jsxs)("div",{className:"screen",children:[Object(w.jsx)("div",{className:"navbar"}),Object(w.jsxs)("h1",{children:["Friends (",Object.keys(e.friends).length,")"]}),Object(w.jsx)("ul",{className:"list-container",children:Object.keys(e.friends).sort().map((function(t){return Object(w.jsx)(G,{friends:e.friends,k:t,edit_friends:e.edit_friends})}))}),Object(w.jsxs)("h1",{children:["Strangers (",Object.keys(e.strangers).length,")"]}),Object(w.jsx)("ul",{className:"list-container",children:Object.keys(e.strangers).sort().map((function(t){return Object(w.jsx)(L,{strangers:e.strangers,k:t,edit_friends:e.edit_friends})}))}),Object(w.jsxs)("h1",{children:["Everyone (",Object.keys(e.everyone).length,")"]}),Object(w.jsx)("ul",{className:"list-container",children:Object.keys(e.everyone).sort().map((function(t){return Object(w.jsx)(Y,{everyone:e.everyone,k:t,edit_friends:e.edit_friends})}))}),Object(w.jsx)("div",{className:"footer"})]})}function G(e){var t=e.friends,s=e.k;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("li",{className:"item-container",children:[Object(w.jsx)("div",{className:"pic-container",children:Object(w.jsx)("img",{className:"friend-profile-pic",src:t[s].profile_pic_url})}),Object(w.jsxs)("div",{className:"friend-info",children:[Object(w.jsx)("h2",{children:t[s].name}),Object(w.jsx)("p",{children:s})]}),Object(w.jsx)("div",{className:"friend-button",children:Object(w.jsx)("button",{onClick:function(){return e.edit_friends("remove",s,t[s])},children:"Remove"})})]})})}function L(e){var t=e.strangers,s=e.k;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("li",{className:"item-container",children:[Object(w.jsx)("div",{className:"pic-container",children:Object(w.jsx)("img",{className:"friend-profile-pic",src:t[s].profile_pic_url})}),Object(w.jsxs)("div",{className:"friend-info",children:[Object(w.jsx)("h2",{children:t[s].name}),Object(w.jsx)("p",{children:s})]}),Object(w.jsx)("div",{className:"friend-button",children:Object(w.jsx)("button",{onClick:function(){return e.edit_friends("add",s,t[s])},children:"Add"})})]})})}function Y(e){var t=e.everyone,s=e.k;return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("li",{className:"item-container",children:[Object(w.jsx)("div",{className:"pic-container",children:Object(w.jsx)("img",{className:"friend-profile-pic",src:t[s].profile_pic_url})}),Object(w.jsxs)("div",{className:"friend-info",children:[Object(w.jsx)("h2",{children:t[s].name}),Object(w.jsx)("p",{children:s})]}),Object(w.jsx)("div",{className:"friend-button"})]})})}s(121);var M=s.p+"static/media/camera-icon.710fefb4.png";function F(e){return Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)("div",{className:"footer app-foot",children:[Object(w.jsx)("li",{className:"footer-item",onClick:function(){return e.changeToIndex(0)},children:0===e.index?Object(w.jsx)("img",{className:"footer-chat-icon",style:{backgroundColor:"lightblue"},src:R}):Object(w.jsx)("img",{className:"footer-chat-icon",src:R})}),Object(w.jsx)("li",{className:"footer-item",onClick:function(){return e.changeToIndex(1)},children:1===e.index?Object(w.jsx)("img",{className:"footer-camera-icon",style:{backgroundColor:"yellow"},src:M}):Object(w.jsx)("img",{className:"footer-camera-icon",src:M})})]})})}var Z=Object(g.bindKeyboard)(m.a),Q="https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Circle-icons-profile.svg/2048px-Circle-icons-profile.svg.png",P=function(e){Object(j.a)(s,e);var t=Object(h.a)(s);function s(e){var n;return Object(l.a)(this,s),(n=t.call(this,e)).set_device=function(){n.state.width>n.state.height?n.setState({orientation:"Landscape"}):n.setState({orientation:"Mobile"})},n.update=function(){n.setState({width:window.innerWidth,height:window.innerHeight},n.set_device)},n.handleChangeIndex=function(e){n.setState({index:e})},n.check_user=function(){f.a.auth().onAuthStateChanged(function(e){e?this.setState({loggedIn:!0,name:e.displayName,pic:e.photoURL,email:e.email},this.check_user_on_firebase):this.setState({loggedIn:!1,name:"Guest",email:"Guest@Guest.com",pic:Q,sent:0,received:0,streak_emoji:"\ud83d\udd25",created:(new Date).toLocaleString()})}.bind(Object(o.a)(n)))},n.check_user_on_firebase=function(){var e=p.collection("Users").doc(n.state.email);e.get().then((function(t){if(t.exists)n.setState({name:t.data().name,pic:t.data().profile_pic_url,received:t.data().total_received,sent:t.data().total_sent,streak_emoji:t.data().streak_emoji,created:t.data().created,friends:t.data().friends,pending:t.data().pending},n.start_snapshot);else{var s=(new Date).toLocaleString();e.set({created:s,name:n.state.name,profile_pic_url:n.state.pic,streak_emoji:"\ud83d\udd25",total_sent:0,total_received:0,pending:{},friends:Object(r.a)({},n.state.email,{created:s,profile_pic_url:n.state.pic,name:n.state.name,status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:[]})}),n.setState({received:0,sent:0,streak_emoji:"\ud83d\udd25",pending:{},friends:Object(r.a)({},n.state.email,{created:s,profile_pic_url:n.state.pic,name:n.state.name,status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:[]})},n.start_snapshot)}}))},n.start_snapshot=function(){p.collection("Users").doc(n.state.email).onSnapshot((function(e){n.setState({name:e.data().name,pic:e.data().profile_pic_url,received:e.data().total_received,sent:e.data().total_sent,streak_emoji:e.data().streak_emoji,created:e.data().created,friends:e.data().friends,pending:e.data().pending}),console.log("snapshot created"),n.update_people_list()}),(function(e){alert("Problem with real time firebase, cannot get live updates."),console.log(e)}))},n.end_snapshot=function(){n.start_snapshot(),console.log("ended snapshot")},n.update_people_list=function(){var e={},t={},s={};p.collection("Users").get().then((function(i){i.docs.forEach((function(i){Object.keys(n.state.friends).includes(i.id)?e[i.id]=i.data():t[i.id]=i.data(),s[i.id]=i.data()})),n.setState({strangers:t,everyone:s})}))},n.edit_friends=function(e,t,s){var i=p.collection("Users").doc(n.state.email),a=n.state.friends;if("add"===e){var c={created:s.created,profile_pic_url:s.profile_pic_url,name:s.name,status:"new-friend",streak:0,streak_ref:null,sent:0,received:0,last_time_stamp:null,snaps:[]};a[t]=c,i.update({friends:a}),n.setState({friends:a},n.update_people_list)}else"remove"===e&&(delete a[t],i.update({friends:a}),n.setState({friends:a},n.update_people_list))},n.flipCamera=function(){"user"==n.state.faceMode?(n.setState({faceMode:"environment"}),console.log("environemnt")):(n.setState({faceMode:"user"}),console.log("user"))},n.showNavbar=function(e){n.setState({showNavbar:e})},n.showFooter=function(e){n.setState({showFooter:e})},n.login=function(){O.signInWithPopup(A).then((function(e){n.setState({loggedIn:!0,name:e.user.displayName,email:e.user.email,pic:e.user.photoURL})}))},n.logout=function(){f.a.auth().signOut(),n.setState({loggedIn:!1,name:"Guest",email:"Guest@Guest.com",pic:Q,sent:0,received:0,pending:{},friends:[],strangers:[],everyone:[]})},n.state={index:0,height:window.innerHeight,width:window.innerWidth,orientation:"Landscape",disable_swiping:!1,faceMode:"user",showNavbar:!0,showFooter:!0,loggedIn:null,name:null,email:null,pic:null,received:null,sent:null,streak_emoji:null,created:null,pending:{},friends:[],strangers:[],everyone:[]},n.check_user=n.check_user.bind(Object(o.a)(n)),window.addEventListener("resize",n.update),window.addEventListener("beforeunload",n.end_snapshot),window.addEventListener("onbeforeunload",n.end_snapshot),n}return Object(d.a)(s,[{key:"changeToIndex",value:function(e){this.setState({index:e})}},{key:"setDisabledSwiping",value:function(e){this.setState({disable_swiping:e})}},{key:"componentDidMount",value:function(){console.log("Mounted"),this.check_user()}},{key:"render",value:function(){var e=this.state.index;return Object(w.jsxs)(w.Fragment,{children:[this.state.showNavbar?Object(w.jsx)(D,{index:e,login:this.login.bind(this),logout:this.logout.bind(this),disable_swiping:this.setDisabledSwiping.bind(this),edit_friends:this.edit_friends.bind(this),flipCamera:this.flipCamera.bind(this),loggedIn:this.state.loggedIn,name:this.state.name,email:this.state.email,pic:this.state.pic,received:this.state.received,sent:this.state.sent,created:this.state.created,pending:this.state.pending,friends:this.state.friends,strangers:this.state.strangers,everyone:this.state.everyone}):null,Object(w.jsxs)(Z,{disabled:this.state.disable_swiping,enableMouseEvents:!0,index:e,onChangeIndex:this.handleChangeIndex,style:Object.assign({width:this.state.width,height:this.state.height,position:"absolute",top:"0%",left:"0%"}),children:[Object(w.jsxs)("div",{style:Object.assign({backgroundColor:"white",minHeight:"100vh",width:"100%"}),children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("meta",{name:"viewport",content:"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"})}),Object(w.jsx)(S,{loggedIn:this.state.loggedIn,friends:this.state.friends,streak_emoji:this.state.streak_emoji,pic:this.state.pic,email:this.state.email,showNavbar:this.showNavbar.bind(this),showFooter:this.showFooter.bind(this)})]}),Object(w.jsxs)("div",{style:Object.assign({backgroundColor:"Plum"}),children:[Object(w.jsx)(b.a,{children:Object(w.jsx)("meta",{name:"viewport",content:"height=device-height, width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes"})}),Object(w.jsx)(y,{index:e,changeToIndex:this.changeToIndex.bind(this),disable_swiping:this.setDisabledSwiping.bind(this),showNavbar:this.showNavbar.bind(this),showFooter:this.showFooter.bind(this),faceMode:this.state.faceMode,friends:this.state.friends,email:this.state.email,sent:this.state.sent})]})]}),this.state.showFooter?Object(w.jsx)(F,{index:e,changeToIndex:this.changeToIndex.bind(this)}):null]})}}]),s}(i.a.Component);c.a.render(Object(w.jsx)(P,{}),document.getElementById("root"))},38:function(e,t,s){},98:function(e,t,s){}},[[122,1,2]]]);
//# sourceMappingURL=main.fa5f44cf.chunk.js.map